<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width,minimum-scale=1,maximum-scale=1,initial-scale=1,user-scalable=0" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="SKYPE_TOOLBAR" content="SKYPE_TOOLBAR_PARSER_COMPATIBLE" />
    <meta name="msapplication-TileColor" content="#cc6633" />

    <meta charset="utf-8" />

    <meta name="google-site-verification" content="Jnt34x_c-b7O4rgxluRMsvvc52OWWOhpxMxTJOhqaek" />
    
    <meta property="twitter:account_id" content="50393960" />
    
    <meta name='author' content='Bill Gates'/>
<meta name='keywords' content='I Contain Multitudes, Ed Yong, book review, microbes, germs, bacteria,'/>
<meta name='description' content='Bill Gates reviews the book “I Contain Multitudes” by author Ed Yong.'/>
<meta name='pageName' content='I-Contain-Multitudes'/>
<meta name='channel' content='I-Contain-Multitudes'/>
<meta name='subTopic' content='I-Contain-Multitudes'/>
<meta name='contentType' content='Book'/>
<meta name='pageID' content='b08e5e0d-3677-48ac-9448-92b0aa5d0040'/>
<meta name='pageTID' content='c8314621-f803-470e-afea-6da3a1b6bea2'/>
<meta name='pageCP' content='/Books/I-Contain-Multitudes'/>
<meta name='twitter:card' content='summary_large_image'/>
<meta name='twitter:site' content='@BillGates'/>
<meta name='twitter:title' content='You should appreciate germs'/>
<meta name='twitter:description' content='Ed Yong’s book &lt;i&gt;I Contain Multitudes&lt;/i&gt; helped me see microorganisms in a whole new light.'/>
<meta name='twitter:image' content='https://media.gatesnotes.com/-/media/Images/Books/Health/I-Contain-Multitudes/i-contain-multitudes_2017_800px.ashx'/>
<meta property='og:description' content='Ed Yong’s book &lt;i&gt;I Contain Multitudes&lt;/i&gt; helped me see microorganisms in a whole new light.'/>
<meta property='og:image' content='https://media.gatesnotes.com/-/media/Images/Books/Health/I-Contain-Multitudes/i-contain-multitudes_2017_800px.ashx'/>
<meta property='og:title' content='You should appreciate germs'/>
<meta property='og:type' content='article'/>
<meta property='og:url' content='https://www.gatesnotes.com/Books/I-Contain-Multitudes'/>
<meta property='og:locale' content='en_US'/>
<meta property='og:site_name' content='gatesnotes.com'/>
<meta property='og:EmailSubject' content='You should appreciate germs'/>
<meta property='og:EmailBody' content='You should appreciate germs'/>


    
    <title>You should appreciate germs | Bill Gates</title>
    
    <link href="https://fonts.googleapis.com/css?family=Asap+Condensed:400,500,600,700" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Source+Serif+Pro:400,600,700&display=swap&subset=latin-ext" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Roboto+Condensed:400,700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://use.typekit.net/cya0eea.css">
    <link type="text/css" rel="stylesheet" href="https://fast.fonts.net/cssapi/70f13e4f-a7d3-4a3c-ad72-0de102650ef0.css" />

    <link rel="icon" type="image/ico" href="/img/gatesnotes_badge.ico" />
    <link rel="apple-touch-icon" href="/img/icons/touch-icon-iphone-v2.png">
    <link rel="apple-touch-icon-precomposed" href="/img/icons/touch-icon-iphone-v2.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="/img/icons/touch-icon-ipad-v2.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="/img/icons/touch-icon-iphone-retina-v2.png">
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/img/icons/touch-icon-ipad-retina-v2.png">
    <link href="/Content/css?v=cVZKxmBdQBEoqm2QXeehF2e3V1opbrXzNUmYUu4JQs41" rel="stylesheet"/>

    
    <script src="/bundles/jquery?v=azKMaE2j_w9weoOvwcfA-yNReYT2fx0VbjPFACz2y1k1"></script>

    
    <script src="/bundles/handlebars?v=d8WvKT2oBYChBdrSnEoe_GXbfMdRYKdABBuupxtPcs01"></script>

    
    


<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-NV84C88');</script>
<!-- End Google Tag Manager -->


<!-- Adobe Omniture Tag Manager -->
<script src="//assets.adobedtm.com/ee4236cad46a/b8c41a6a9f83/launch-dc5a57d9efa1.min.js" async></script>
<!-- Adobe Omniture Tag Manager -->

    <!-- Adobe Omniture Tag Manager - adding via HTML block in sitecore into gtmhead section -->
    
    
    <!-- Adobe Omniture Tag Manager -->
    
    <script src="/bundles/iframetracker?v=-E4xOaJyLz5k0poDb8sPJv4hQ4i7g24kSktLp5eH6Eo1"></script>

    
    
    <style>
    * {
        -webkit-overflow-scrolling: touch;
    }

    #LI_Mob_All_Error {
        display: none;
    }

    #mainContent {
        display: none !important;
    }

    .TGN_site_Headermobile a {
        text-decoration: none;
    }

    .iconBlock {
        height: 40px;
        line-height: 40px;
        display: inline-block;
        padding: 0;
        margin: 0;
        vertical-align: top;
        cursor: pointer;
    }

        .iconBlock:hover {
            opacity: .6;
        }

    #txtFullName {
        display: none;
    }

    #txtFirstName {
        width: 108px;
    }

    #txtLastName {
        width: 108px;
        margin-right: 0px;
    }

    /*GOOGLE MAPS API*/
    #txtAddress {
        /*width: 230px;*/
    }

    .Auth_50_label {
        text-align: right;
        font-weight: bold;
        width: 100px;
        color: #303030;
    }

    #Auth_50_address {
        border: 1px solid #000090;
        background-color: #f0f0ff;
        width: 620px;
        padding-right: 2px;
        display: none;
        padding: 10px;
    }

        #Auth_50_address td {
            font-size: 10pt;
        }

    .Auth_50_field {
        width: 99%;
    }

    .Auth_50_slimField {
        width: 80px;
    }

    .Auth_50_wideField {
        width: 200px;
    }

    #Auth_50_DataPrint {
        max-width: 600px;
        word-wrap: break-word;
    }

    .pac-logo::after {
        display: none !important;
    }

    .pac-add-on {
        display: block;
        line-height: 13px;
        border: 0px solid #a4a4a4;
        width: 318px;
        font-size: 12px;
        margin-top: 4px;
        color: black;
        margin-left: 1px;
    }

    .pac-add-on-link {
        cursor: pointer;
        color: #0049fb;
    }

    .pac-container {
        background-color: #fff;
        position: relative !important;
        top: 0px !important;
        left: 0px !important;
        z-index: 301;
        border-radius: 0px;
        border: 1px solid #d9d9d9;
        font-family: Arial,sans-serif;
        box-shadow: 0 0px 0px rgba(0,0,0,0.3);
        -moz-box-sizing: border-box;
        -webkit-box-sizing: border-box;
        box-sizing: border-box;
        overflow: visible !important;
    }

    .pac-icon-marker {
        display: none;
    }

    .pac-item {
        line-height: 24px;
        height: 24px;
    }

    .Auth_50_ManualAddressArea {
        display: none;
    }

    .Auth_50_GAPI_AddressArea {
        display: block;
    }
    /*END GOOGLE MAPS API*/

    .noselect {
        -webkit-touch-callout: none; /* iOS Safari */
        -webkit-user-select: none; /* Safari */
        -khtml-user-select: none; /* Konqueror HTML */
        -moz-user-select: none; /* Firefox */
        -ms-user-select: none; /* Internet Explorer/Edge */
        user-select: none; /* Non-prefixed version, currently
                                  supported by Chrome and Opera */
    }

    #AH_Holder {
        background: rgba(255,255,255,.85);
        padding-left: 0px;
        padding-right: 0px;
        padding-top: 0px;
        display: none;
    }

    .AH_Inner_Holder {
        background: white;
        width: 826px;
        margin-left: auto;
        margin-right: auto;
        padding-top: 0px;
        margin-bottom: 0px;
        max-width: 1200px;
        margin-top: 60px;
        border: 1px solid #c2c2c2;
        background: #f2f2f2;
    }

    .Footer_Holder {
        background: black;
        padding-bottom: 200px;
    }

    .myProfile_Holder {
        display: none;
        margin-top: 0;
        vertical-align: top;
        text-align: left;
        margin-left: auto;
        margin-right: auto;
        position: relative;
        top: auto;
        left: auto;
        max-width: 1220px;
        width: auto;
    }

    .Login_Holder {
        padding: 0px;
        display: none;
        margin-top: 0;
        text-align: left;
        width: 826px;
        background: #f2f2f2;
    }

    #Auth_50_Form_ResetPassword {
        text-align: center;
    }

    #RPtxtPassword {
        margin-top: 10px;
    }

    #RPtxtPasswordConfirm {
        margin-top: 10px;
    }

    #RPAuth_Paragraph {
        display: none;
    }

    #SetNewPasswordOKButton {
        display: none;
    }

    #RPpass1ValidationBoxB {
        margin-bottom: 0px;
    }

    .Register_Holder {
        margin-top: 0;
        padding: 0px;
        vertical-align: top;
        text-align: left;
        margin-left: auto;
        margin-right: auto;
        width: 826px;
        display: none;
        background: #f2f2f2;
    }

    .Welcome_Holder {
        padding: 0px;
        padding-top: 0px;
        display: none;
        margin-top: 0;
        vertical-align: top;
        text-align: left;
        margin-left: auto;
        margin-right: auto;
        width: 826px;
        padding-bottom: 0px;
        background: #f2f2f2;
    }

    .Auth_50_FullnameBlock {
        display: flex;
        justify-content: space-between;
        width: 318px;
        margin-top: 8px;
    }

    .Auth_50_FirstLastnameBlock {
        display: flex;
        justify-content: space-between;
        width: 250px;
    }

    .TGN_site_TitleDrop {
        display: inline-block;
        background: white;
        width: 52px;
        height: 36px;
        margin: 0px;
        padding: 0px;
        line-height: 36px;
        padding-left: 10px;
        border: none;
        color: black;
        cursor: pointer;
        font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
        font-weight: 300;
        font-size: 14px;
    }

    #Auth_50_Form_AS_F1 .TGN_site_TitleDrop {
        border: 1px solid #f2f2f2;
    }

    .TGN_site_TitleDropMenu {
        display: none;
        background-color: white;
        position: absolute;
        border: 1px solid #f2f2f2;
        line-height: 25px;
        width: 62px;
        margin-left: -11px;
        z-index: 1;
    }

    .TGN_site_TitleDropMenuItem {
        border-bottom: 1px solid #f2f2f2;
        padding-left: 10px;
    }

    .TGN_site_TitleDropDefaultCopy {
        color: #949494;
        display: inline-block;
    }

    .TGN_site_TitleDropDefaultCopyOFF {
        display: none;
    }

    .TGN_site_TitleDropSelectedCopy {
        display: none;
    }

    .TGN_site_TitleDropSelectedCopyON {
        display: inline-block;
    }

    #txtUserTitle {
        width: 63px;
        height: 36px;
        padding-left: 9px;
        display: none !important;
    }

    .Auth_50_CTA_Left_Top {
        display: block;
        width: 460px;
        height: 671px;
        background: white;
        padding: 0px;
    }

    .Auth_50_CTA_MiddleSpacer {
        display: block;
        width: 0px;
    }

    .Auth_50_Content_Right_Bottom {
        display: block;
        width: 366px;
        height: 671px;
        background: #f2f2f2;
    }

    .Auth_50_Content_Right_BottomInner {
        padding-left: 0px;
        margin-bottom: 0px;
        min-height: 160px;
        width: 366px;
        background: #f2f2f2;
        padding-bottom: 0px;
    }

    .Auth_50_LogInSignUpFormSpacer {
        display: block;
        height: 14px;
    }

    .Auth_50_LogInSignUpForm {
        margin-left: 24px;
        margin-right: 0px;
        overflow-y: auto;
        overflow-x: hidden;
        max-height: 604px;
    }

    .Register_Holder .Auth_50_LogInSignUpForm {
        height: 604px;
    }

    .Auth_50_LISU_ToggleButton_Left_On {
        display: inline-block;
        width: 57px;
        height: 30px;
        color: black;
        border-bottom: 4px solid black;
        text-align: center;
        line-height: 28px;
        margin-left: 24px;
        margin-right: 24px;
        font-family: 'Roboto Condensed', 'Asap Condensed', 'neue-haas-unica', sans-serif;
        font-weight: 600;
        font-size: 20px;
        cursor: pointer;
        letter-spacing: .04px;
    }

    .Auth_50_LISU_ToggleButton_Left_Off {
        display: inline-block;
        width: 57px;
        height: 30px;
        color: rgba(101,101,101,0.5);
        border-bottom: 4px solid #cccccc;
        text-align: center;
        line-height: 28px;
        margin-left: 24px;
        margin-right: 24px;
        font-family: 'Roboto Condensed', 'Asap Condensed', 'neue-haas-unica', sans-serif;
        font-weight: 600;
        font-size: 20px;
        cursor: pointer;
        letter-spacing: .04px;
    }

        .Auth_50_LISU_ToggleButton_Left_Off:hover {
            color: black;
        }

    .Auth_50_LISU_ToggleButton_Right_On {
        display: inline-block;
        width: 68px;
        height: 30px;
        color: black;
        border-bottom: 4px solid black;
        text-align: center;
        line-height: 28px;
        margin-left: 0px;
        margin-right: 24px;
        font-family: 'Roboto Condensed', 'Asap Condensed', 'neue-haas-unica', sans-serif;
        font-weight: 600;
        font-size: 20px;
        cursor: pointer;
        letter-spacing: .04px;
    }

    .Auth_50_LISU_ToggleButton_Right_Off {
        display: inline-block;
        width: 68px;
        height: 30px;
        color: rgba(101,101,101,0.5);
        border-bottom: 4px solid #cccccc;
        text-align: center;
        line-height: 28px;
        margin-left: 0px;
        margin-right: 24px;
        font-family: 'Roboto Condensed', 'Asap Condensed', 'neue-haas-unica', sans-serif;
        font-weight: 600;
        font-size: 20px;
        cursor: pointer;
        letter-spacing: .04px;
    }

        .Auth_50_LISU_ToggleButton_Right_Off:hover {
            color: black;
        }

    .AH_Holder {
        position: absolute;
        top: 0px;
        left: 0;
        height: 100%;
        width: 100%;
        line-height: 19px;
        display: none;
        font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
        font-weight: 300;
        font-style: normal;
        color: #949494;
        overflow-y: auto;
        overflow-x: hidden;
        z-index: 300;
    }

    .AH_Holder_Roadblock {
        background: rgba(255,255,255,1) !important;
    }

    .Auth_50_Label01 {
        margin-top: 10px;
        margin-bottom: 0px;
        display: block;
        font-size: 12px;
        font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
        font-weight: 400;
        letter-spacing: .4px;
    }

    .Auth_50_Label02 {
        font-style: normal;
        margin-top: 18px;
        margin-bottom: 0px;
        display: block;
        font-size: 14px;
        font-family: 'HelveticaNeueW01-55Roma','neue-haas-unica', sans-serif;
        font-weight: 300;
        color: #000;
        letter-spacing: .1px;
    }

    .Auth_50_WelcomeTitle {
        font-weight: normal;
        font-style: normal;
        margin-top: 24px;
        margin-bottom: 0px;
        display: block;
        font-size: 14px;
        font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
        font-weight: 500;
        color: #000;
        letter-spacing: .1px;
        margin-bottom: 16px;
    }

    .txtEntryBox {
        padding: 0px;
        padding-left: 12px;
        border: 1px solid #f2f2f2;
        border-bottom: 1px solid #f2f2f2;
        color: #424242;
        font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
        font-size: 14px;
        letter-spacing: 0px;
        line-height: 34px;
        font-weight: 300;
        height: 34px;
        width: 305px;
    }

    #txtAddressAN {
        width: 66px;
        display: none;
        margin-left: 0px;
        margin-top: 8px;
    }

    input[type=text], textarea {
        -webkit-transition: all 0.30s ease-in-out;
        -moz-transition: all 0.30s ease-in-out;
        -ms-transition: all 0.30s ease-in-out;
        -o-transition: all 0.30s ease-in-out;
        outline: none;
        margin: 0px;
        -webkit-appearance: none;
        -webkit-border-radius: 0;
        border-radius: 0;
    }

        input[type=text]:focus, textarea:focus {
            background-color: white !important;
            margin: 0px;
        }

    input[type=email], textarea {
        -webkit-transition: all 0.30s ease-in-out;
        -moz-transition: all 0.30s ease-in-out;
        -ms-transition: all 0.30s ease-in-out;
        -o-transition: all 0.30s ease-in-out;
        outline: none;
        margin: 0px;
        -webkit-appearance: none;
        -webkit-border-radius: 0;
        border-radius: 0;
    }

        input[type=email]:focus, textarea:focus {
            background-color: white !important;
            margin: 0px;
        }

    input[type=password], textarea {
        -webkit-transition: all 0.30s ease-in-out;
        -moz-transition: all 0.30s ease-in-out;
        -ms-transition: all 0.30s ease-in-out;
        -o-transition: all 0.30s ease-in-out;
        outline: none;
        margin: 0px;
        -webkit-appearance: none;
        -webkit-border-radius: 0;
        border-radius: 0;
    }

        input[type=password]:focus, textarea:focus {
            background-color: white !important;
            margin: 0px;
        }

    input[type=search], textarea {
        -webkit-transition: all 0.30s ease-in-out;
        -moz-transition: all 0.30s ease-in-out;
        -ms-transition: all 0.30s ease-in-out;
        -o-transition: all 0.30s ease-in-out;
        outline: none;
        margin: 0px;
        -webkit-appearance: none;
        -webkit-border-radius: 0;
        border-radius: 0;
        border: 1px solid #f2f2f2;
    }

        input[type=search]:focus, textarea:focus {
            background-color: white !important;
            margin: 0px;
        }


        input:-webkit-autofill, textarea:-webkit-autofill, select:-webkit-autofill {
            background-color: white !important;
            background-image: none;
            color: rgb(0, 0, 0);
        }

    input:-webkit-autofill {
        -webkit-box-shadow: 0 0 0px 1000px #fff inset !important;
        background-color: white !important;
        background-image: none !important;
        color: #000 !important;
        outline: none !important;
    }

    input:textarea:-webkit-autofill {
        background-color: white !important;
        background-image: none;
        color: rgb(0, 0, 0);
    }

    input:select:-webkit-autofill {
        background-color: white !important;
        background-image: none;
        color: rgb(0, 0, 0);
    }

    input:-webkit-text-fill-color {
        black !important;
    }

    input {
        /*transform: translateZ(0);*/
    }

        input:focus {
            border-bottom: 1px solid #0049fb;
            background-color: white !important;
            background-image: none;
            color: #000000;
            /*transform: translateZ(0);*/
        }

    .txtEntryBox:-webkit-autofill {
        -webkit-box-shadow: 0 0 0 100px white inset;
        color: #000;
    }

        .txtEntryBox:-webkit-autofill:hover,
        .txtEntryBox:-webkit-autofill:focus {
            -webkit-box-shadow: 0 0 0 100px white inset;
            -webkit-text-fill-color: #000;
            color: #000;
        }

    ::placeholder { /* Chrome, Firefox, Opera, Safari 10.1+ */
        color: #949494;
        opacity: 1; /* Firefox */
        font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
        font-weight: 300;
    }

    :-ms-input-placeholder { /* Internet Explorer 10-11 */
        color: #949494;
    }

    ::-ms-input-placeholder { /* Microsoft Edge */
        color: #949494;
    }

    .Auth_50_LogInSignUpToggle {
        margin-bottom: 0px;
        background: #f2f2f2;
        height: 55px;
        display: flex;
        align-items: flex-end;
    }

    .ForgotPW {
        display: block;
        position: absolute;
        top: 7px;
        right: 26px;
        font-size: 14px;
        width: 60px;
        cursor: pointer;
        font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
        font-weight: 300;
        font-style: italic;
        color: black;
        letter-spacing: .5px;
    }

    .LoginPasswordGroup {
        display: block;
        position: relative;
    }

    .RegButton {
        display: inline-block;
        padding-left: 20px;
        padding-right: 20px;
        background-color: white;
        color: black;
        height: 40px;
        line-height: 40px;
        cursor: pointer;
        text-align: center;
        font-family: 'Roboto Condensed', 'Asap Condensed', 'neue-haas-unica', sans-serif;
        text-transform: uppercase;
        font-weight: 400;
        font-size: 18px;
        margin-bottom: 0px;
        letter-spacing: .3px;
        border: 1px solid black;
        margin-top: 18px;
        margin-bottom: 0px;
        letter-spacing: .3px;
        width: 275px;
        background-color: #0049fb;
        border: 1px solid #0049fb;
        color: white;
    }

        .RegButton:hover {
            background-color: black;
        }

    .TGN_PassiveButton {
        height: 40px;
        border: 1px solid #000000;
        color: black;
        border-radius: 0px;
        background-color: #FFFFFF;
        font-size: 17px;
        line-height: 38px;
        text-align: center;
        display: inline-block;
        cursor: pointer;
        padding-left: 24px;
        padding-right: 24px;
        margin-top: 16px;
        margin-bottom: 24px;
        font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
        font-weight: 300;
        font-style: normal;
    }

    .TGN_SmallPassiveButton {
        height: 27px;
        border: 1px solid #000000;
        color: black;
        border-radius: 0px;
        background-color: #FFFFFF;
        font-size: 14px;
        line-height: 25px;
        text-align: center;
        display: inline-block;
        cursor: pointer;
        padding-left: 12px;
        padding-right: 12px;
        font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
        font-weight: 300;
        font-style: normal;
    }

    .SignInUpSocial {
        display: flex;
        margin-top: 8px;
    }

    .SignInUpTW {
        background-image: none;
        background-size: contain;
        display: inline-flex;
        margin-top: 0px;
        color: white;
        height: 28px;
        width: 87px;
        line-height: 28px;
        margin-left: 0px;
        margin-bottom: 0px;
        cursor: pointer;
        border: 1px solid #00acee;
        border-radius: 0px;
        text-align: center;
        font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
        font-weight: 300;
        font-size: 14px;
        letter-spacing: .3px;
        background: #00acee;
        align-items: center;
        justify-content: center;
    }

        .SignInUpTW:hover {
            border: 1px solid white;
        }

        .SignInUpTW i {
            margin-right: 0px;
            margin-left: 0px;
        }

    .SignInUpFB {
        background-image: none;
        background-size: contain;
        display: inline-flex;
        margin-top: 0px;
        color: white;
        height: 28px;
        width: 87px;
        line-height: 28px;
        margin-left: 10px;
        margin-bottom: 0px;
        cursor: pointer;
        border: 1px solid #3b5998;
        border-radius: 0px;
        text-align: center;
        font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
        font-weight: 300;
        font-size: 14px;
        letter-spacing: .3px;
        background: #3b5998;
        align-items: center;
        justify-content: center;
    }

        .SignInUpFB:hover {
            border: 1px solid white;
        }

        .SignInUpFB i {
            margin-right: 0px;
            margin-left: 0px;
        }

    .AH_Close {
        display: block;
        position: relative;
        top: 10px;
        right: 30px;
        margin-left: auto;
        width: 0px;
        height: 0px;
        cursor: pointer;
        z-index: 20;
        text-shadow: none;
        color: #000;
    }

    .AH_Close_Roadblock {
        display: none !important;
    }

    .AH_Close i {
        padding-top: 0px;
        padding-bottom: 0px;
        padding-left: 0px;
        padding-right: 0px;
        border-radius: 0px;
        background-color: transparent;
        box-shadow: none;
    }

    .validationBox {
        position: initial;
        top: 0px;
        left: 0px;
        font-size: 12px;
        line-height: 14px;
        margin-top: 10px;
        margin-bottom: 0px;
        display: none;
        text-align: left;
        height: 30px;
    }

    .Auth_50_Hidden {
        display: none !important;
    }

    #LItxtEmail {
        margin-bottom: 8px;
    }

    .Auth_50_InputBlock01 {
        display: inline-block;
        margin-bottom: 0px;
        margin-right: 0px;
    }

    .Auth_50_InputBlock02 {
        margin-top: 12px;
        margin-bottom: 0px;
        display: block;
    }

    #LoginButton {
        margin-top: 12px;
    }

    #RegButton {
    }

    .RegButtonDisabled {
        opacity: .5;
        pointer-events: none;
    }

    #WelcomeContinueButton {
    }

    .Auth_Paragraph {
        margin-top: 6px;
        margin-bottom: 20px;
        color: #000000;
        font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
        font-weight: 300;
        font-size: 14px;
        letter-spacing: 0.07px;
        line-height: 19px;
        display: block;
    }

    .Auth_Paragraph_Small {
        font-size: 10px;
        line-height: 13px;
        display: block;
        max-width: 310px;
        margin-top: 8px;
        margin-left: 0px;
        margin-right: auto;
        text-align: left;
        font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
        font-weight: 300;
        font-style: normal;
    }

    .Auth_Paragraph_link {
        color: #0049fb;
        cursor: pointer;
    }

    .Auth_ProfileImage {
        width: 80px;
        height: 80px;
        margin-left: 0px;
        margin-right: auto;
        color: #ccc;
        font-size: 94px;
        padding: 0;
        text-align: center;
        line-height: 96px;
        margin-bottom: 20px;
        margin-top: 10px;
        border-radius: 100%;
        border: 1px solid #ccc;
        background-image: none;
        background-size: cover;
        position: relative;
        z-index: 3;
        opacity: 1;
        letter-spacing: 0;
        color: #3379be;
        background-color: white;
        font-size: 69px;
        line-height: 140px;
        padding-left: 4px;
        font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
        font-weight: 300;
        font-style: normal;
        display: none;
    }

    .Auth_WelcomeProfileImage_Edit {
        position: relative;
        color: #ccc;
        font-size: 17px;
        line-height: 17px;
        left: 47px;
        top: -22px;
        display: inline-block;
    }

    .myProfileBase_Holder {
        margin-top: 24px;
    }

        .myProfileBase_Holder .TGN_site_Titledsectionstopright {
            display: none;
        }

    .TGN_site_Lightbox {
        display: none;
        width: 100%;
        height: 2000px;
        background: black;
        flex-direction: column;
        align-items: center;
        justify-content: flex-start;
    }

    .TGN_site_Lightbox_Top {
        display: block;
        text-align: right;
        margin-top: 30px;
        margin-bottom: 30px;
        color: white;
        font-size: 20px;
        width: 96%;
        max-width: 1060px;
    }

    .TGN_site_Lightbox_Bottom {
        color: white;
        font-size: 20px;
        margin-top: 10px;
        width: 96%;
        max-width: 1060px;
    }

    .TGN_site_Lightbox_VR_Addon {
        color: #FFFFFF;
        font-weight: 300;
        letter-spacing: -0.03px;
        font-family: 'HelveticaNeueW01-55Roma','neue-haas-unica', sans-serif;
        font-size: 16px;
        line-height: 20px;
        margin-top: 8px;
        margin-bottom: 0px;
    }

    .TGN_site_Lightbox_VR_SpanT1 {
        font-family: 'HelveticaNeueW01-75Bold','HelveticaNeue Bold','Helvetica LT Std Bold',Helvetica, source-serif-pro, 'Source Serif Pro', 'LyonDisplay-Medium', serif;
    }

    .TGN_site_Lightbox_VR_Addon a {
        color: white;
        text-decoration: none;
        font-family: 'HelveticaNeueW01-75Bold','HelveticaNeue Bold','Helvetica LT Std Bold',Helvetica, source-serif-pro, 'Source Serif Pro', 'LyonDisplay-Medium', serif;
    }

    .TGN_site_Lightbox_VR_Span {
        margin-top: 8px;
    }

    .TGN_site_Lightbox_VR_SpanT3:hover {
        text-decoration: underline;
    }

    .TGN_site_Lightbox_Close {
        cursor: pointer;
    }

    .TGN_site_Lightbox_Middle {
        width: 96%;
        max-width: 1060px;
    }

    .Auth_SR_Holder {
        border-top: 0px solid #ccc;
        padding-top: 26px;
        height: auto;
        overflow: hidden;
        text-align: left;
        padding-left: 0px;
        max-height: 370px;
        max-width: 810px;
        overflow-x: hidden;
        overflow-y: hidden;
    }

    .Auth_SR_Item {
        display: none;
        margin: 10px;
        vertical-align: top;
        text-align: left;
        width: 184px;
        cursor: pointer;
        min-height: 30px;
        min-width: 170px;
    }

    .Auth_SR_ItemBook {
        display: none;
        margin: 10px;
        vertical-align: top;
        text-align: left;
        width: 184px;
        cursor: pointer;
        min-height: 30px;
        min-width: 170px;
    }

    .Auth_SR_Thumb {
        background-image: none;
        background-size: cover;
        background-repeat: no-repeat;
        background-position: center;
        width: 157px;
        height: 157px;
        background-color: #eee;
        border: 0px solid #eaeaea;
    }

    .Auth_SR_Title {
        padding-top: 10px;
        font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
        font-weight: 300;
        font-style: normal;
        color: black;
        font-size: 14px;
        line-height: 17px;
        background-color: white;
        text-align: left;
        padding-right: 20px;
    }

    .Auth_SR_Teaser {
        padding-top: 10px;
        color: black;
        background-color: white;
        font-family: Lusitana,serif;
        font-style: normal;
        font-weight: normal;
        font-size: 12px;
        line-height: 16px;
        text-align: left;
        height: auto;
        overflow: hidden;
        padding-right: 20px;
        margin-bottom: 40px;
    }

    .Auth_A_Item {
        display: none;
        text-align: left;
        cursor: pointer;
        justify-content: space-between;
        align-items: center;
    }

    .Auth_A_Thumb {
        background-image: none;
        background-size: cover;
        background-repeat: no-repeat;
        width: 170px;
        height: 170px;
        background-color: #aaa;
        border: 0px solid #eaeaea;
    }

    .Auth_A_AwardRight {
        font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
        font-weight: 600;
        margin-left: 10px;
        margin-right: 10px;
    }

    .Auth_A_Holder a {
        text-decoration: none;
        color: black;
        max-width: 600px;
    }

    .Auth_A_Year {
        font-size: 18px;
        letter-spacing: 0.47px;
    }

    .Auth_A_Title {
        font-size: 25px;
        line-height: 30px;
        letter-spacing: -0.05px;
        font-weight: 700;
    }

    .Auth_A_Teaser {
        font-size: 16px;
        letter-spacing: -0.03px;
        line-height: 23px;
    }

        .Auth_A_Teaser a {
            color: #0049fb !important;
        }

    .Auth_A_URL {
        display: none;
    }

    .Auth_A_Tags {
        display: none;
    }

    .Auth_A_Holder {
        text-align: left;
        display: flex;
        align-items: flex-start;
        margin-top: 4px;
        padding-top: 24px;
        margin-bottom: 24px;
        justify-content: space-between;
    }

    .Auth_checkbox {
        display: none;
    }

    .Authcheckbox {
        display: block;
        margin-top: 0px;
        margin-bottom: 24px;
        margin-left: 0px;
        margin-right: auto;
        text-align: left;
    }

    .AuthcheckboxTxt {
        display: inline;
        color: #000;
    }

    .Auth_Subs_Holder {
        display: flex;
        align-items: center;
        flex-flow: row-reverse;
        justify-content: flex-end;
    }

    .Welcome_Holder .Auth_Subs_Holder {
    }

    .Welcome_Holder .Auth_Subs_Text {
        width: 220px;
        flex-flow: column;
        font-size: 14px;
    }

    .Auth_Subs_Text {
        display: block;
        align-items: baseline;
        font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
        font-weight: 300;
        font-size: 16px;
        letter-spacing: 0.03px;
        line-height: 22px;
    }

    #AuthEmailSubText_AS {
        margin-left: 8px;
    }

    .AuthEmailSubText {
        display: none;
    }

    .Auth_Subs_OnOff {
        width: 86px;
        height: 27px;
        display: flex;
        font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
        font-weight: 300;
        cursor: pointer;
        margin-right: 16px;
        font-size: 14px;
        min-width: 80px;
    }

    .Auth_Subs_On {
        width: 50%;
        background-color: #0049fb;
        display: inline-block;
        line-height: 25px;
        border-radius: 0px;
        border: 1px solid #0049fb;
        text-align: center;
        color: white;
    }

        .Auth_Subs_On.Auth_Subs_InActive {
            color: black;
            background: white;
            border-top: 1px solid black;
            border-left: 1px solid black;
            border-bottom: 1px solid black;
        }

    .Auth_Subs_Off {
        width: 43px;
        background-color: white;
        display: inline-block;
        line-height: 25px;
        border-radius: 0px;
        border-top: 1px solid black;
        border-right: 1px solid black;
        border-bottom: 1px solid black;
        text-align: center;
        color: black;
        padding: 0px;
        margin: 0px;
    }

        .Auth_Subs_Off.Auth_Subs_Active {
            color: white;
            background: #0049fb;
            border-top: 1px solid #0049fb;
            border-right: 1px solid #0049fb;
            border-bottom: 1px solid #0049fb;
        }

    .Auth_Int_Holder {
        margin-bottom: 0px;
        color: black;
        margin-top: 0px;
    }

        .Auth_Int_Holder .li {
            margin-top: 16px;
            display: flex;
            align-items: center;
        }

    .Welcome_Holder .Auth_Int_Holder .li {
        margin-bottom: 16px;
        margin-top: 0px;
    }

    .ProSetTopics {
        margin-left: 15px;
        display: inline-block;
        margin-top: 0px;
        max-width: 210px;
        font-size: 16px;
        line-height: 22px;
        font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
        font-weight: 300;
    }

    .Welcome_Holder .ProSetTopics {
        margin-left: 10px;
        max-width: 200px;
        font-size: 14px;
        line-height: 20px;
    }

    .ProSetOn {
        display: none;
        height: 20px;
        width: 20px;
        color: white;
        border: 1px solid #0049fb !important;
        border-radius: 0px;
        text-align: center;
        line-height: 22px;
        font-size: 14px;
        padding: 0px;
        margin: 0px;
        background-color: #0049fb;
        user-select: none;
        -moz-user-select: none;
        -khtml-user-select: none;
        -webkit-user-select: none;
        -o-user-select: none;
        cursor: pointer;
    }

    .Welcome_Holder .ProSetOn {
        height: 20px;
        width: 20px;
        line-height: 20px;
        font-size: 13px;
    }

    .ProSetOff {
        display: none;
        height: 20px;
        width: 20px;
        background: white;
        color: #0049fb;
        border: 1px solid #0049fb;
        border-radius: 0px;
        text-align: center;
        line-height: 22px;
        font-size: 14px;
        padding: 0px;
        margin: 0px;
        user-select: none;
        -moz-user-select: none;
        -khtml-user-select: none;
        -webkit-user-select: none;
        -o-user-select: none;
        cursor: pointer;
    }

    .Welcome_Holder .ProSetOff {
        height: 20px;
        width: 20px;
        line-height: 20px;
        font-size: 13px;
    }

    #addressValidationBoxB {
        /*margin-bottom: 5px;*/
        margin-left: 1px;
    }

    .validationBoxB {
        font-size: 12px;
        line-height: 13px;
        margin-top: 4px;
        margin-bottom: 4px;
        display: none;
        text-align: left;
    }

    .validNoTxt {
        color: #CE3542;
        display: none;
        max-width: 300px;
        line-height: 14px;
        opacity: 1;
        padding-left: 0px;
    }

    .validNoDuplicateTxt {
        color: #CE3542;
        display: none;
        max-width: 300px;
        line-height: 14px;
        vertical-align: middle;
        opacity: 1;
        padding-left: 0px;
    }

    #LI_Mob_All_Error {
        margin-bottom: 0px;
        padding-left: 0px;
        color: #CE3542;
        font-size: 12px;
        line-height: 16px;
        margin-top: 4px;
    }

    .Auth_SectionHeader50 {
        margin-bottom: 24px;
        width: max-content;
        display: block;
        text-align: left;
        color: #000000;
        border-bottom: 1px solid black;
        font-family: 'Roboto Condensed', 'Asap Condensed', 'neue-haas-unica', sans-serif;
        font-weight: 600;
        font-size: 16px;
        letter-spacing: 0px;
        line-height: 23px;
        text-transform: uppercase;
        border-bottom: 3px solid black;
    }

    .Auth_SectionHeader50Snug {
        margin-bottom: 4px;
    }

    .accountSettings_Holder {
        margin-bottom: 50px;
        vertical-align: top;
        text-align: left;
        margin-left: auto;
        margin-right: auto;
        position: unset;
        top: auto;
        left: auto;
        width: auto;
        padding-top: 24px;
        display: none;
    }

    .Auth_FieldHolder {
        display: block;
        width: 100%;
        text-align: left;
        padding-left: 0px;
    }

    .Auth_SectionDivider {
        width: 100%;
        display: block;
        clear: both;
        height: 30px;
        margin-top: 0px;
    }

    .Auth_SectionHolder {
        display: inline-block;
        text-align: left;
    }

    .Auth_FieldTitle50 {
        font-size: 12px;
        letter-spacing: 0.04px;
        position: relative;
        left: 0px;
        top: 0px;
        text-align: left;
        font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
        font-weight: 400;
        font-style: normal;
        color: rgba(8,8,8,0.5);
    }

    .AuthCancelButtonS {
        display: inline-block;
        margin-top: 0px;
        background-color: white;
        color: #c00;
        line-height: 14px;
        border-radius: 0px;
        margin-left: 10px;
        margin-right: 12px;
        cursor: pointer;
        font-size: 14px;
        text-align: left;
        font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
        font-weight: 300;
        margin-bottom: 8px;
    }

    .AuthSaveButtonS {
        display: inline-block;
        margin-top: 0px;
        background-color: white;
        color: #0049fb;
        line-height: 14px;
        border-radius: 0px;
        margin-left: 0px;
        margin-right: 12px;
        cursor: pointer;
        font-size: 14px;
        text-align: left;
        font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
        font-weight: 300;
        margin-bottom: 8px;
    }

    .Auth_FieldEditControls {
        display: none;
        text-align: left;
        max-width: 334px;
        margin-top: 3px;
    }

    .Auth_FirstName_Block {
        display: inline-block;
        margin-right: 4px;
    }

    #AS_txtFirstName {
        width: 114px;
    }

    .Auth_LastName_Block {
        display: inline-block;
        margin-right: 4px;
    }

    #AS_txtLastName {
        margin-right: 0;
        width: 114px;
    }

    #AS_txtUserTitle {
        width: 70px;
        height: 36px;
        display: none !important;
    }

    #WE_txtUserTitle {
        width: 48px;
        height: 40px;
        outline: none;
        padding: 3px 0px 3px 3px;
        margin: 0px;
        border: 0px;
        border-bottom: 1px solid #6f6f6f;
        font-size: 14px;
        font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
        font-weight: 300;
        font-style: normal;
        color: #000000;
        -webkit-appearance: none;
        -webkit-box-flex: 1;
        -webkit-font-smoothing: antialiased;
        -webkit-border-image: none;
        -webkit-rtl-ordering: logical;
        overflow: auto;
        outline: none;
        -webkit-box-shadow: none;
        -moz-box-shadow: none;
        box-shadow: none;
        border-radius: 0px;
        -moz-appearance: none;
        -webkit-appearance: none;
        appearance: none;
        background: url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMS4xLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iTGF5ZXJfMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiDQoJIHZpZXdCb3g9IjAgMCA0LjkgMTAiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDQuOSAxMDsiIHhtbDpzcGFjZT0icHJlc2VydmUiPg0KPHN0eWxlIHR5cGU9InRleHQvY3NzIj4NCgkuc3Qwe2ZpbGw6I0ZGRkZGRjt9DQoJLnN0MXtmaWxsOiM0NDQ0NDQ7fQ0KPC9zdHlsZT4NCjx0aXRsZT5hcnJvd3M8L3RpdGxlPg0KPHJlY3QgY2xhc3M9InN0MCIgd2lkdGg9IjQuOSIgaGVpZ2h0PSIxMCIvPg0KPHBvbHlnb24gY2xhc3M9InN0MSIgcG9pbnRzPSIzLjUsNS4zIDIuNSw2LjggMS40LDUuMyAiLz4NCjwvc3ZnPg0K') no-repeat 105% 50%;
        padding-left: 2px;
        background-position-y: -3px;
        background-position-x: 33px;
        display: none !important;
    }

    .Auth_Title_Block {
        display: inline-block;
        margin-right: 4px;
    }

    .txtNewPassEntryBox {
        width: 300px;
    }

    .Auth_Paragraph_Profile {
        display: block;
        margin-top: 0px;
        margin-left: auto;
        margin-right: auto;
        text-align: left;
        font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
        font-weight: 300;
        font-style: normal;
        font-size: 16px;
        letter-spacing: 0.04px;
        line-height: 20px;
    }

    .RequestDeleteTA {
        width: 350px;
        height: 40px;
        margin-top: 14px;
        margin-bottom: 0;
        padding-left: 20px;
        font-size: 14px;
        font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
        font-weight: 300;
        font-style: normal;
        max-width: 436px;
        resize: none;
        margin-left: auto;
        margin-right: auto;
        border: 0px;
        margin-bottom: 6px !important;
    }

    #Auth_FieldHolderRD {
        text-align: center;
        margin-top: 10px;
    }

    .resendVerify {
        cursor: pointer;
        text-decoration: underline;
    }

    #validNoVerifyAS {
        font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
        font-weight: 300;
        color: #CE3542;
        text-align: left;
        position: unset;
        display: none;
        font-size: 14px;
        letter-spacing: 0.03px;
        line-height: 20px;
        max-width: 310px;
        margin-top: 6px;
        padding-left: 10px;
    }

    .Auth_50_AS_InputLine {
        margin-bottom: 8px;
    }

    .validYes {
        color: #0049fb;
        font-size: 16px;
        height: 30px;
        line-height: 16px;
        display: none;
        vertical-align: top;
    }

    .validNoTxt {
        color: #CE3542;
        display: none;
        max-width: 300px;
        line-height: 16px;
        opacity: 1;
        padding-left: 0px;
    }

    #AS_txtFullName {
        display: none;
    }

    #AS_txtNewPassword {
        display: none;
    }

    .Auth_ProfileSettings_NavigationInner {
        background: #f3f3f3;
        color: black;
        padding-top: 32px;
        padding-left: 64px;
        padding-bottom: 14px;
    }

    .Auth_ProfileImageEditLockup {
        height: 19px;
        width: 19px;
        position: relative;
        margin-right: 0px;
        margin-left: auto;
        top: -20px;
    }

    .Auth_ProfileSettings_Nav_UserRight {
        display: block;
        margin-left: 24px;
        position: relative;
        top: -10px;
    }

    .Auth_Profile_ProgressPreview {
        background-image: none;
        background-size: cover;
        background-repeat: no-repeat;
        display: flex;
        margin-top: 10px;
        width: 120px;
        height: auto;
        overflow: hidden;
        font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
        font-weight: 300;
        font-size: 16px;
        line-height: 19px;
    }

    .Auth_ProfileImageEditText {
        font-size: 18px;
        cursor: pointer;
        color: black;
        position: relative;
    }

    .Auth_ProfileSettings_Nav_UserUpload {
        display: none;
    }

    .Auth_ProfileImage_Progress {
        max-width: 430px;
        display: block;
        margin-bottom: 10px;
    }

    #WEAuth_ProfileImage_Progress {
        background-color: white;
        width: 100%;
        height: auto;
        display: none;
        margin-left: 0px;
        margin-right: auto;
        margin-top: 0px;
        margin-bottom: 0px;
    }

    .Auth_IUP_Error {
        max-width: 430px;
        font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
        font-weight: 300;
        font-size: 16px;
        line-height: 19px;
        display: none;
    }

    #ASUploadErrorOkButton {
        width: 60px;
    }

    .Auth_ProfileSettings_Nav_User {
        text-align: left;
        display: flex;
        align-items: center;
        justify-content: flex-start;
    }

    .Auth_ProfileSettings_Nav_UserMetrics {
        font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
        font-weight: 300;
        font-size: 18px;
        line-height: 20px;
    }

    .Auth_ProfileSettings_Nav_UserImage {
        width: 120px;
        height: 120px;
        margin-left: auto;
        margin-right: auto;
        background: white;
        border-radius: 1000px;
        background-size: cover;
    }

    .Auth_ProfileSettings_Nav_UserName {
        margin-bottom: 10px;
        display: block;
        text-align: left;
        font-size: 36px;
        line-height: 36px;
        font-family: source-serif-pro, 'Source Serif Pro', 'LyonDisplay-Medium', serif;
        font-weight: 600;
        font-style: normal;
    }

    .Auth_ProfileSettings_Nav_BarItem {
        display: inline-block;
        margin-right: 24px;
        opacity: 1;
        cursor: pointer;
    }

    .Auth_ProfileSettings_Nav_BarItemTop {
        padding-left: 10px;
        padding-right: 10px;
        height: 30px;
    }

    .Auth_ProfileSettings_Nav_BarItemBottom {
        background: #f3f3f3;
        height: 3px;
    }

    .Auth_ProfileSettings_Nav_Bar {
        display: block;
        width: 100%;
        text-align: left;
        font-size: 18px;
        text-transform: uppercase;
        font-family: 'Roboto Condensed', 'Asap Condensed', 'neue-haas-unica', sans-serif;
        font-weight: 600;
        background: #f3f3f3;
    }

    .ForgotPassword_Holder {
        padding: 0px;
        display: none;
        margin-top: 0;
        vertical-align: top;
        text-align: left;
        margin-left: 0px;
        margin-right: auto;
        max-width: 366px;
        min-height: 446px;
        background: #f2f2f2;
    }

    #ResetPasswordButton {
    }

    #SetNewPasswordButton {
    }

    .Auth_SGE_checkboxes {
        max-width: 380px;
        margin-left: auto;
        margin-right: auto;
        margin-top: 16px;
    }

    .ResetPassword_Holder {
        padding: 0px;
        display: none;
        margin-top: 0;
        text-align: left;
        margin-left: auto;
        margin-right: auto;
        padding-top: 60px;
        padding-bottom: 70px;
        max-width: 320px;
        background: #f2f2f2;
    }

    .SocialGetEmails_Holder {
        padding: 0px;
        display: none;
        margin-top: 0;
        vertical-align: top;
        text-align: center;
        margin-left: auto;
        margin-right: auto;
        padding-top: 50px;
        padding-bottom: 200px;
        max-width: 410px;
        background: #f2f2f2;
    }

    .Deregister_Holder {
        padding: 0px;
        display: none;
        margin-top: 0;
        vertical-align: top;
        text-align: center;
        margin-left: auto;
        margin-right: auto;
        padding-top: 50px;
        padding-bottom: 200px;
        max-width: 500px;
        background: #f2f2f2;
    }

    .Auth_Deactivate_Subhead {
        display: block;
        font-size: 18px;
        margin-top: -10px;
        margin-bottom: 5px;
        font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
        font-weight: 300;
        font-style: normal;
        max-width: 430px;
        margin-left: 0px;
        margin-right: auto;
        line-height: 24px;
    }

    .Auth_Header {
        font-size: 29px;
        margin-bottom: 19px;
        font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
        font-weight: 300;
        font-style: normal;
        line-height: 28px;
        color: #333;
    }

    .UnsubscribeSignIn_Holder {
        padding: 0px;
        display: none;
        margin-top: 0;
        vertical-align: top;
        text-align: left;
        margin-left: 24px;
        margin-right: 24px;
        padding-top: 50px;
        padding-bottom: 300px;
        background: #f2f2f2;
    }

    .RequestDelete_Holder {
        padding: 0px;
        display: none;
        margin-top: 0;
        vertical-align: top;
        text-align: center;
        margin-left: auto;
        margin-right: auto;
        padding-top: 50px;
        padding-bottom: 200px;
        max-width: 480px;
        background: #f2f2f2;
    }

    .RequestDeletePartA .Auth_Paragraph {
        text-align: left;
    }

    .RequestDeletePartA {
        padding: 0px;
    }

    .liSignUpT1 {
        display: block;
        font-size: 26px;
        margin-bottom: 36px;
        font-family: source-serif-pro, "Lyon Display";
        font-weight: 900;
        font-style: normal;
    }

    .FAQ_Holder {
        padding: 80px;
        display: none;
        margin-top: 0;
        vertical-align: top;
        text-align: left;
        color: black;
        margin-left: auto;
        margin-right: auto;
        max-width: 660px;
        background: #f2f2f2;
        font-family: 'HelveticaNeueW01-55Roma','neue-haas-unica', sans-serif;
        font-weight: 300;
    }

    .FAQ_Questions {
        max-width: 480px;
        margin-left: 0px;
        margin-right: auto;
        padding: 0px;
        text-align: left;
        margin-top: -20px;
        font-family: 'HelveticaNeueW01-55Roma','neue-haas-unica', sans-serif;
        font-weight: 300;
    }

        .FAQ_Questions ul {
            list-style-type: circle;
            margin-top: 10px;
            font-size: 15px !important;
            line-height: 19px !important;
            color: black;
        }

        .FAQ_Questions li {
            margin-top: 10px;
            margin-left: 30px;
            font-size: 15px !important;
            line-height: 19px !important;
            color: black;
        }

        .FAQ_Questions h1 {
            font-size: 15px !important;
            line-height: 19px !important;
            margin-top: 16px;
        }

        .FAQ_Questions h2 {
            font-size: 15px !important;
            line-height: 19px !important;
            margin-bottom: 16px;
        }

    #Auth_Deactivate_DynamicCopy {
        text-align: left;
        display: block;
    }

    .Auth_4_0_ForgotPasswordBack {
        color: #aaa;
        font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
        font-weight: 300;
        font-style: normal;
        margin-bottom: 30px;
        cursor: pointer;
        display: none;
    }

    .Auth_TopSpacer {
        width: 100%;
        height: 34px;
    }

    .Auth_Bold_01 {
        display: block;
        color: #000000;
        font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
        font-size: 27px;
        font-weight: 600;
        letter-spacing: 0.03px;
        line-height: 33px;
        margin-bottom: 12px;
    }

    .Auth_Bold_02 {
        display: block;
        color: #000000;
        font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
        font-size: 18px;
        font-weight: 600;
        letter-spacing: 0.03px;
        line-height: 27px;
    }

    .Auth_Para_01 {
    }

    #Auth_50_GAPI_QuestionMark {
        display: inline-block;
        color: #ccc;
        font-size: 18px;
        cursor: pointer;
    }

    #Auth_50_ManualAA_QuestionMark {
        display: inline-block;
        color: #ccc;
        font-size: 18px;
    }

    .Auth_50_GAPI_AddressAreaExtra {
        font-style: italic;
        display: none;
        color: #666;
        font-size: 13px;
        max-width: 390px;
        line-height: 15px;
    }

    .Auth_Int_Right {
        text-align: left;
        display: inline-block;
        vertical-align: top;
        height: 100%;
    }

    .Auth_Int_Left {
        display: inline-block;
        margin-right: 24px;
    }

    .Auth_50_GAPI_QuestionMarkRO_Box {
        background: #f2f1f3;
        min-height: 40px;
        position: relative;
        left: 0px;
        z-index: 9;
        padding: 12px;
        border-radius: 0px;
        max-width: 520px;
        margin-top: 10px;
        display: none;
        margin-top: 10px;
        margin-bottom: 6px;
        max-width: 390px;
    }

    .Auth_50_GAPI_QuestionMarkRO_BoxClose {
        position: absolute;
        right: 6px;
        top: 6px;
        cursor: pointer;
        display: none;
    }

    .Auth_50_GAPI_QuestionMarkRO_BoxT1 {
        font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
        font-weight: 300;
        font-size: 13px;
        line-height: 15px;
        font-style: normal;
        color: #000000 !important;
    }

    .Auth_50_GAPI_QuestionMarkRO_BoxT2 {
        font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
        font-weight: 300;
        font-size: 13px;
        line-height: 15px;
        font-style: normal;
        color: #4472C4 !important;
    }

    .Auth_50_GAPI_QuestionMarkRO_Arrow {
        background: #f2f1f3;
        height: 16px;
        width: 16px;
        position: absolute;
        margin-left: 53px;
        margin-top: -18px;
        -webkit-transform: rotate(45deg);
        -moz-transform: rotate(45deg);
        -o-transform: rotate(45deg);
        filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=5);
    }

    .ProSetEntryField {
        float: left;
        -webkit-border-radius: 0px;
        -moz-border-radius: 0px;
        -o-border-radius: 0px;
        -ms-border-radius: 0px;
        -khtml-border-radius: 0px;
        border-radius: 0px;
        margin-bottom: 10px !important;
        height: 30px;
        width: 100%;
        font-size: 12px;
    }

    .ProSetCommentsField {
        float: left;
        -webkit-border-radius: 0px;
        -moz-border-radius: 0px;
        -o-border-radius: 0px;
        -ms-border-radius: 0px;
        -khtml-border-radius: 0px;
        border-radius: 0px;
        border: 1px #ddd solid;
        margin-bottom: 10px;
        height: 120px;
        width: 100%;
        padding-left: 5px;
        font-size: 12px;
    }

    .SIpop {
        display: none;
    }

    .UserInfo {
        display: none;
    }

    .GNCommTopNotify {
        display: none;
    }

    .Logout_Holder {
        display: none;
    }

    .bookmarks_LeftTop a {
        color: black;
        text-decoration: none;
    }

    .bookmarks_RightBottom a {
        color: black;
        text-decoration: none;
    }

    .bookmarks_Item {
        margin-bottom: 24px;
        display: flex;
        justify-content: space-between;
        font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
        font-weight: 300;
        font-size: 18px;
        line-height: 20px;
    }

    .bookmarks_RightBottom {
        width: 78%;
    }

    .bookmarks_LeftTop {
        width: 20%;
    }

    .bookmarks_LeftTopImg img {
        width: 100%;
    }

    .bookmarks_RightBottomTitle {
        color: #000000;
        font-family: source-serif-pro, 'Source Serif Pro', 'LyonDisplay-Medium', serif;
        font-weight: 700;
        font-size: 32px;
        line-height: 36px;
        margin-top: 0px;
        margin-bottom: 4px;
    }

    .bookmarks_RightBottomDesc {
        color: #000000;
        font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
        font-weight: 300;
        font-size: 18px;
        line-height: 21px;
        overflow-wrap: break-word;
    }

    .bookmarks_RightBottomLastLine {
        color: #757575;
        font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
        font-weight: 300;
        font-size: 18px;
        line-height: 20px;
        margin-top: 7px;
        display: flex;
        justify-content: flex-start;
        align-items: center;
    }

    .bookmarks_RightBottomSave {
        display: flex;
        align-items: center;
        margin-left: 10px;
        cursor: pointer;
    }

    .bookmarks_RightBottomMark {
        position: relative;
    }

        .bookmarks_RightBottomMark i {
            position: absolute;
            top: -10px;
        }

    .bookmarks_RightBottomMarkCopy {
        margin-left: 24px;
    }


    .TGN_site_DropMenuButtons {
        width: 64%;
        display: flex;
        margin-left: 18px;
        justify-content: flex-start;
        flex-wrap: wrap;
    }

    .TGN_site_DropMenuButton {
        background: white;
        padding: 8px;
        padding-left: 12px;
        padding-right: 12px;
        border: 1px solid #eeeeee;
        border-radius: 0px;
        margin-right: 16px;
        color: #949494;
        font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
        font-weight: 300;
        font-size: 14px;
        letter-spacing: 0.53px;
        line-height: 22px;
        text-align: center;
        cursor: pointer;
        display: inline-block;
        text-transform: none;
    }

        .TGN_site_DropMenuButton:hover {
            /*border: 1px solid rgba(117,117,117,0.5);
            background-color: #F3F3F3;*/
            color: #000000;
        }

    .TGN_site_DropMenuButtonON {
        /*background: #0049fb;
        border: 0px solid #0049fb;*/
        /*color: #0049fb;*/
        color: #000000;
    }

        .TGN_site_DropMenuButtonON:hover {
            /*border: 1px solid #0d1b3c;
            background-color: #0d1b3c;*/
            /*color: #0049fb;*/
            color: #000000;
        }

    .TGN_site_DropMenuButton .icon-left-point-arrow {
        font-size: 12px;
        margin-left: 2px;
    }

    .TGN_site_DropMenu {
        position: fixed;
        color: black;
        margin-top: 26px;
        margin-left: -5px;
        border-radius: 0px;
        text-align: left;
        padding: 10px;
        padding-left: 10px;
        cursor: pointer;
        display: none;
        border: 1px solid rgba(117,117,117,0.5);
        background-color: white;
        z-index: 1;
        text-transform: none;
        min-width: 70px;
    }

        .TGN_site_DropMenu:before {
            content: "";
            position: absolute;
            top: 0px;
            left: 4px;
            height: 14px;
            width: 14px;
            background: white;
            box-sizing: border-box;
            transform: rotate(-45deg) translate(70%);
            border-top: inherit;
            border-right: inherit;
            box-shadow: inherit;
        }

    .TGN_site_DropMenuItem {
        color: #000000;
        font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
        font-weight: 300;
        font-size: 14px;
        letter-spacing: 0.53px;
        line-height: 26px;
    }

    .TGN_site_DropMenuItemON {
    }

    .TGN_site_DropMenuItem:hover {
    }

    .TGN_site_DropMenu.showmenu {
        display: block;
    }

    .TGN_site_DropMenuClear {
        font-size: 14px;
        margin-top: 16px;
        color: #0049fb;
        display: none;
    }



    .TGN_DisplayM {
        display: none;
    }

    .TGN_DisplayMT {
        display: none;
    }

    .TGN_DisplayTD {
        display: block;
    }

    .TGN_DisplayD {
        display: block;
    }

    .rotateIcon {
        display: inline-block;
        -webkit-transform: rotate(90deg);
        -moz-transform: rotate(90deg);
        -o-transform: rotate(90deg);
        -ms-transform: rotate(90deg);
        transform: rotate(90deg);
        margin-left: 4px;
    }

    .TGN_InlineTitle {
        font-family: source-serif-pro, 'Source Serif Pro', 'LyonDisplay-Medium', serif;
        font-weight: 900;
        font-size: 32px;
        line-height: 38px;
        letter-spacing: 0px;
        margin-top: 4px;
        margin-bottom: 6px;
    }

    .tgn_NowPlaying_Module_title {
        color: #FFFFFF;
        font-family: 'HelveticaNeueW01-75Bold','HelveticaNeue Bold','Helvetica LT Std Bold',Helvetica, source-serif-pro, 'Source Serif Pro', 'LyonDisplay-Medium', serif;
        font-size: 26px;
        line-height: 29px;
        letter-spacing: -0.06px;
        margin-top: 14px;
    }

    .tgn_NowPlaying_Module_description {
        color: #FFFFFF;
        font-weight: 300;
        letter-spacing: -0.03px;
        font-family: 'HelveticaNeueW01-55Roma','neue-haas-unica', sans-serif;
        font-size: 16px;
        line-height: 20px;
        margin-top: 8px;
        margin-bottom: 0px;
    }

    .article_top_LS_DesktopOnly {
        display: flex !important;
    }

    .article_top_LS_MobileOnly {
        display: none !important;
    }

    @media all and (max-width: 1020px) {
        .tgn_NowPlaying_Module_title {
            font-size: 18px;
            line-height: 21px;
            margin-top: 8px;
        }

        .tgn_NowPlaying_Module_description {
            font-size: 14px;
            line-height: 17px;
            margin-top: 6px;
            margin-bottom: 0px;
            max-width: 590px;
        }

        .TGN_site_Lightbox_Top {
            width: 90% !important;
            max-width: 90% !important;
        }

        .TGN_site_Lightbox_Middle {
            width: 90% !important;
            max-width: 90% !important;
        }

        .TGN_site_Lightbox_Bottom {
            width: 90% !important;
            max-width: 90% !important;
        }

        .Auth_ProfileSettings_NavigationInner {
            padding-top: 24px;
            padding-left: 0px;
        }

        .Auth_ProfileSettings_Nav_UserName {
            font-size: 24px;
            line-height: 30px;
        }

        .Auth_ProfileSettings_Nav_UserMetrics {
            font-size: 16px;
            line-height: 19px;
            max-width: 200px;
        }

        .TGN_site_DropMenuButtons {
            width: 100%;
            margin-left: 0px;
            margin-bottom: 0px;
        }

        .TGN_site_DropMenuButton {
            margin-bottom: 16px;
        }
    }

    @media all and (max-width: 980px) {
        .bookmarks_RightBottom {
            width: 68%;
        }

        .tgn_NowPlaying_Module_description {
            max-width: 420px;
        }

        .bookmarks_LeftTop {
            width: 30%;
        }

        #AH_Holder {
            padding-left: 0px;
            padding-right: 0px;
            padding-top: 0px;
        }

        .AH_Close {
            top: 12px;
            right: 31px;
        }

        .Auth_50_CTA_Left_Top {
            display: block;
            width: 100%;
            height: unset;
            padding-left: 0%;
            padding-right: 0%;
        }

        .Auth_50_CTA_MiddleSpacer {
            display: block;
            width: 100%;
        }

        .Auth_50_Content_Right_Bottom {
            display: block;
            width: 100%;
            height: auto;
            margin-bottom: 24px;
        }

        .Auth_50_Content_Right_BottomInner {
            padding-left: 0px;
            min-height: 0px;
            width: 100%;
        }

        .Register_Holder {
            width: 100%;
        }

        #RegButton {
            margin-bottom: 0px;
            margin-left: 0px;
            margin-right: auto;
            float: none;
            margin-top: 20px;
        }

        #WelcomeContinueButton {
            margin-left: 0px;
            margin-right: auto;
            float: none;
            margin-top: 20px;
        }

        .Register_Holder .Auth_50_LogInSignUpForm {
            height: auto;
            max-height: unset;
            overflow-y: hidden;
            margin-top: -10px;
        }

        .TGN_DisplayMT {
            display: block;
        }

        .TGN_DisplayD {
            display: none;
        }

        .Auth_SR_Thumb {
            width: 100%;
            height: 157px;
        }

        .Auth_SR_Item {
            width: 254px;
        }

        .Auth_SR_ItemBook {
            width: 254px;
        }

        .Auth_SR_Holder {
            max-height: 300px;
            width: 4000px;
            position: relative;
            top: -91px;
            left: 240px;
        }

        .AH_Inner_Holder {
            width: 633px;
            margin-top: 24px;
        }

        .Login_Holder {
            flex-flow: column;
            width: 100%;
        }

        .Register_Holder {
            flex-flow: column;
            width: 100%;
        }

        .Welcome_Holder {
            flex-flow: column;
            width: 100%;
        }

        .FAQ_Holder {
            padding: 45px;
        }

        .article_top_LS_DesktopOnly {
            display: none !important;
        }

        .article_top_LS_MobileOnly {
            display: block !important;
        }
    }

    @media all and (max-width: 680px) {
        .FAQ_Holder {
            padding: 25px;
            padding-top: 35px;
        }

        .liSignUpT1 {
            font-size: 24px;
            line-height: 26px;
        }

        .RegButton {
            width: 248px;
        }

        .TGN_PassiveButton {
            padding-left: 14px;
            padding-right: 14px;
            font-size: 14px;
            line-height: 30px;
            margin-top: 16px;
            margin-bottom: 14px;
            height: 33px;
        }

        .pac-container {
            margin-top: -165px;
            margin-bottom: 48px;
        }

        .TGN_site_TitleDrop {
            margin-bottom: 12px;
            font-size: 16px;
        }

        .TGN_InlineTitle {
            font-size: 28px;
            line-height: 32px;
        }

        .tgn_NowPlaying_Module_title {
            font-size: 16px;
            line-height: 19px;
            letter-spacing: -0.06px;
            margin-top: 8px;
        }

        .tgn_NowPlaying_Module_description {
            font-size: 12px;
            line-height: 15px;
            margin-top: 6px;
            margin-bottom: 0px;
        }

        .TGN_site_Lightbox_Top {
            margin-top: 16px;
            margin-bottom: 16px;
            font-size: 16px;
        }

        .TGN_site_DropMenuButtonON:hover {
            /*background: #0049fb;
            border: 1px solid #0049fb;
            color: white;*/
        }

        .SignInUpTW:hover {
            border: 1px solid #a4a4a4;
        }

        .SignInUpFB:hover {
            border: 1px solid #a4a4a4;
        }

        .bookmarks_Item {
            flex-flow: column;
        }

        .bookmarks_RightBottom {
            width: 100%;
        }

        .bookmarks_LeftTop {
            width: 100%;
        }

        #LI_Mob_All_Error {
            margin-top: 0px;
        }

        #txtAddressAN {
            margin-left: 0px;
            margin-top: 10px;
        }

        .Auth_50_FullnameBlock {
            flex-flow: column;
        }

        .Auth_50_FirstLastnameBlock {
            display: flex;
            justify-content: space-between;
            width: 288px;
        }

        #Auth_50_FirstnameBlock {
            width: 126px;
        }

        #Auth_50_LastnameBlock {
            width: 138px;
        }

        #RegButton {
            width: 268px;
            padding-left: 10px;
            padding-right: 10px;
        }

        .Auth_50_LogInSignUpToggle {
            height: 38px;
        }

        .Auth_50_LogInSignUpForm {
            margin-left: 16px;
            margin-right: 16px;
        }

        .txtEntryBox {
            font-size: 16px;
            letter-spacing: 0.1px;
        }

        #AS_txtUserTitle {
            height: 27px;
        }

        .Auth_50_LISU_ToggleButton_Left_On {
            height: 27px;
            margin-left: 16px;
            margin-right: 16px;
            font-size: 16px;
        }

        .Auth_50_LISU_ToggleButton_Left_Off {
            height: 27px;
            margin-left: 16px;
            margin-right: 16px;
            font-size: 16px;
        }

        .Auth_50_LISU_ToggleButton_Right_On {
            height: 27px;
            font-size: 16px;
        }

        .Auth_50_LISU_ToggleButton_Right_Off {
            height: 27px;
            font-size: 16px;
        }

        .AH_Inner_Holder {
            width: 320px;
            margin-top: 16px;
        }

        .Auth_Int_Holder .li {
            margin-top: 14px;
        }

        .Auth_Paragraph_Profile {
            font-size: 12px;
            line-height: 15px;
        }

        #txtAddress {
            width: 100%;
        }

        #txtFirstName {
            width: 100%;
        }

        #txtLastName {
            width: 100%;
        }

        .ForgotPW {
            position: relative;
            top: 0px;
            right: -3px;
            margin-bottom: 0px;
        }

        .LoginPasswordGroup {
            margin-bottom: 0px;
        }

        .Auth_ProfileSettings_Nav_Bar {
            font-size: 16px;
        }

        .Auth_ProfileSettings_Nav_BarItem {
            margin-right: 0px;
        }

        .TGN_site_ProfileSlideNavHolder {
            height: 34px;
        }

        .Auth_ProfileSettings_Nav_BarItemTop {
            padding-left: 3px;
            padding-right: 3px;
            height: 26px;
        }

        .Auth_50_InputBlock01 {
            display: block;
            margin-right: 0px;
        }

        .Auth_SR_Holder {
            padding-top: 6px;
            padding-left: 17px;
            top: 0px;
            left: -1px;
            width: 100%;
        }

        .Auth_A_Thumb {
            width: 130px;
            height: 130px;
            display: inline-block;
            float: left;
            margin-right: 10px;
        }

        .Auth_A_Item {
            display: none;
            margin: 10px;
            vertical-align: top;
            text-align: left;
            width: auto;
            cursor: pointer;
            min-height: 160px;
            padding-right: 10px;
        }

        .Auth_A_Title {
            margin-top: 0px;
        }

        .Auth_A_AwardRight {
            display: inline-block;
            width: 160px;
        }

        .Auth_SectionHeader50 {
            font-size: 12px;
            line-height: 15px;
        }

        .Auth_SectionHolder {
        }

        .accountSettings_Holder {
        }

        .Auth_SectionDivider {
        }

        .Auth_50_AS_InputLine {
        }

        .txtEntryBox {
        }

        .ProSetTopics {
            font-size: 12px;
            line-height: 16px;
        }

        .Auth_Subs_Text {
            /*width: 100%;*/
            font-size: 12px;
            line-height: 16px;
        }

        .Auth_FieldHolder {
            margin-left: 0px !important;
        }

        .Auth_Subs_Holder {
            /*margin-left: 0px !important;
    display: block;*/
        }

        .Authcheckbox {
            /*padding-left: 0px !important;*/
        }

        .Auth_Subs_OnOff {
            /*margin-top: 16px;
    margin-bottom: 24px;*/
        }

        .TGN_DisplayM {
            display: block;
        }

        .TGN_DisplayTD {
            display: none;
        }

        .Deregister_Holder {
            padding: 5px;
            display: none;
            margin-top: 0;
            max-width: 540px;
            padding: 15px;
            vertical-align: top;
            text-align: left;
            margin-left: auto;
            margin-right: auto;
            padding-top: 60px;
            padding-bottom: 200px;
        }

        .RequestDelete_Holder {
            padding: 5px;
            display: none;
            margin-top: 0;
            max-width: 496px;
            padding: 15px;
            vertical-align: top;
            text-align: left;
            margin-left: auto;
            margin-right: auto;
            padding-top: 60px;
            padding-bottom: 200px;
        }

        .UnsubscribeSignIn_Holder {
            padding: 5px;
            display: none;
            margin-top: 0;
            max-width: 496px;
            padding: 30px;
            vertical-align: top;
            text-align: left;
            margin-left: auto;
            margin-right: auto;
            padding-top: 60px;
            padding-bottom: 200px;
        }

        .Auth_Paragraph {
            font-size: 12px;
            display: block;
            max-width: 390px;
            margin-top: 20px;
            margin-left: auto;
            margin-right: auto;
            text-align: left;
            font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
            font-weight: 300;
            font-style: normal;
        }

        .Auth_Int_Right {
            display: block;
        }

        .TGN_site_DropMenuButtons {
            margin-bottom: 8px;
        }

        .TGN_site_DropMenuButton {
            padding: 8px;
            padding-left: 8px;
            padding-right: 8px;
            font-size: 14px;
            margin-bottom: 8px;
            margin-right: 8px;
        }

        .TGN_site_DropMenuItem {
            font-size: 14px;
        }
    }

    @media all and (max-width: 540px) {
        .TGN_site_DropMenuButton {
            font-size: 12px;
            padding: 6px;
            padding-left: 10px;
            padding-right: 10px;
        }

        .TGN_site_DropMenuItem {
            font-size: 12px;
        }

        .RequestDeleteTA {
            width: 90%;
        }
    }


    @media all and (max-width: 500px) {
        .Auth_Paragraph {
            padding-left: 0px;
        }

        .accountSettings_Holder {
        }

        .LoginPasswordGroup {
            margin-bottom: 0px;
        }

        .Auth_Paragraph_Profile {
        }

        .Auth_ProfileSettings_Nav_BarItemTop {
            height: 20px;
        }

        .Auth_ProfileSettings_Nav_Bar {
            font-size: 14px;
        }

        .SocialGetEmails_Holder {
            padding: 20px;
            display: none;
            margin-top: 0;
            width: 100%;
            vertical-align: top;
            text-align: left;
            margin-left: auto;
            margin-right: auto;
            padding-top: 30px;
            padding-bottom: 60px;
            max-width: 440px;
        }

        .Auth_Subs_Holder {
            max-width: 100%;
        }

        .AuthcheckboxTxt {
        }

        .ResetPassword_Holder {
            padding: 5px;
            padding-top: 30px;
            padding-bottom: 60px;
            max-width: 282px;
        }

        .RequestDelete_Holder {
            padding-top: 30px;
            padding-bottom: 60px;
        }

        .UnsubscribeSignIn_Holder {
            padding-top: 30px;
            padding-bottom: 60px;
        }

        .Deregister_Holder {
            padding-top: 30px;
            padding-bottom: 60px;
        }
    }

    @media all and (max-width: 480px) {
    }


    @media all and (max-width: 370px) {

        .txtEntryBox {
            width: 288px;
            font-size: 16px;
            letter-spacing: 0.1px;
            /*line-height: 24px;
            height: 26px;*/
        }

        .Auth_ProfileSettings_Nav_BarItemBottom {
        }

        .Auth_ProfileSettings_Nav_BarItemTop {
            padding-left: 2px;
            padding-right: 2px;
        }

        .Auth_ProfileSettings_Nav_Bar {
            font-size: 12px;
        }

        .Auth_LastName_Block {
        }

        #AS_txtLastName {
            width: 102px;
        }

        #AS_txtFirstName {
            width: 102px;
        }

        .Auth_ProfileSettings_Nav_UserName {
            font-size: 20px;
            line-height: 24px;
        }
    }
</style>



<style>


    /*// Section for Legacy inline Items*/

    div.suspended {
        color: #666666;
        font: bold 24px/27px arial;
        padding: 0 27px 0 0;
        width: 300px;
        float: left;
        margin-right: 20px;
        margin-bottom: 20px;
        margin-left: 0px;
        margin-top: 20px;
    }

    div.suspendedCTA {
        color: #666666;
        font: bold 24px/27px arial;
        padding: 0 27px 0 0;
        width: 300px;
        float: left;
        margin-right: 20px;
        margin-bottom: 20px;
        margin-left: 0px;
        margin-top: 20px;
        z-index: 3;
        position: relative;
    }

    div.suspendedR {
        color: #5481a1;
        font-family: Lusitana,serif;
        font-style: italic;
        font-weight: 900;
        font-size: 26px;
        padding: 0 0 0 40px;
        width: 444px;
        float: right;
        margin-right: -110px !Important;
        margin-top: 20px;
    }

    div.suspended blockquote {
        margin: 0;
        padding: 0;
        padding-bottom: 25px;
        padding-right: 10px;
        text-align: left;
        line-height: 1.1em;
    }

    div.suspendedR blockquote {
        margin: 0;
        padding: 0;
        padding-bottom: 5px;
        padding-right: 10px;
        text-align: left;
        line-height: 37px;
        z-index: 1;
        position: relative;
    }

    .bgcta {
        display: none;
    }

    .pqqq {
        display: none;
    }

    .pqlq {
        width: 84px;
        height: 98px;
        position: absolute;
        margin-top: -39px;
        margin-left: -45px;
        background-image: url("/img/pq_l_o2.png");
        background-size: 84px 98px;
        background-repeat: no-repeat;
        z-index: 0;
    }

    .pqrq {
        width: 84px;
        height: 98px;
        position: absolute;
        margin-top: 0px;
        margin-left: 0px;
        background-image: url("/img/pq_r_o2.png");
        background-size: 84px 98px;
        background-repeat: no-repeat;
        z-index: 0;
    }

    .bgbqa {
        display: block;
        color: #666;
        font-size: 13pt;
        margin-top: 10px;
        font-weight: 100;
        font-style: normal;
    }

    .bgbq {
        display: none;
    }

    .bgli {
        display: none;
    }

    .bglic {
        display: block;
        font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
        font-weight: 300;
        color: #666;
        font-size: 14px;
        margin-top: 10px;
        line-height: 16px;
        text-align: left;
        padding-left: 5px;
        padding-right: 5px;
    }

    .bglicMobile {
        display: none;
        font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
        font-weight: 300;
        color: #666;
        font-size: 14px;
        margin-top: 10px;
        line-height: 16px;
        text-align: left;
        padding-left: 5px;
        padding-right: 5px;
    }

    .suspendedB {
    }

    .suspendedBCTA {
        background-color: #dddddd;
        padding: 2px 2px 2px 2px;
    }

    .bgiig {
        display: none;
    }

    .InlineImageGalleryPre {
        height: 30px;
        width: 148px;
        background-color: #000;
        position: relative;
        top: 0px;
        left: 30px;
        font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
        font-weight: 300;
        color: #fff;
        font-size: 11px;
        letter-spacing: .4pt;
        display: block;
    }

    .InlineImageGalleryPreText {
        position: relative;
        top: -27px;
        left: 44px;
    }

    .InlineImageGalleryPreThumb {
        height: 30px;
    }

        .InlineImageGalleryPreThumb .icon-gallery_2 {
            font-size: 16px;
            position: relative;
            top: 4px;
            left: 9px;
        }

    .InlineImageGalleryBase {
        display: block;
        width: 100%;
        background-color: #fff;
        height: 240px;
        margin-bottom: 0px;
        margin-top: 0px;
    }

    .InlineImageGalleryMain {
        display: block;
        width: 100px;
        height: 100px;
        background-color: #000000;
        position: relative;
        text-align: center;
    }

    .InlineImageGalleryNext {
        display: block;
        width: 50%;
        height: 70px;
        ;
        position: relative;
        top: -235px;
        left: 5px;
        padding: 5px;
        background-image: url("/img/white_arrow_right_hover.png");
        background-size: 40px 40px;
        background-repeat: no-repeat;
        opacity: .8;
    }

        .InlineImageGalleryNext:hover {
            opacity: 1;
        }

    .InlineImageGalleryNextImage {
        display: none;
        width: 142px;
        height: 80px;
        background-color: #bbbbbb;
        position: relative;
        text-align: center;
        cursor: pointer;
    }

    .InlineImageGalleryPrev {
        display: block;
        width: 50%;
        height: 70px;
        position: relative;
        top: -165px;
        left: 2px;
        padding: 5px;
        background-image: url("/img/white_arrow_left_hover.png");
        background-size: 40px 40px;
        background-repeat: no-repeat;
        background-position-x: 5px;
        opacity: .8;
    }

        .InlineImageGalleryPrev:hover {
            opacity: 1;
        }

    .InlineImageGalleryPrevImage {
        display: none;
        width: 142px;
        height: 80px;
        background-color: #bbbbbb;
        position: relative;
        left: 100px;
        text-align: center;
        cursor: pointer;
    }

    .InlineImageGalleryText {
        display: block;
        position: relative;
        top: -162px;
        text-align: right;
        color: #fff;
        font-weight: 400;
        font-size: 12px;
        line-height: 15px !important;
        height: 50px;
        border: #000 2px solid;
        background-color: #000;
        font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
        font-weight: 300;
    }

    .IIGheadline {
        position: absolute;
        top: 17px;
        left: 44px;
        color: #fff;
        font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
        font-weight: 500;
        text-align: left;
        width: 500px;
    }

    .IIGheadline2 {
        font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
        font-weight: 300;
    }

    .IIGcountIcon {
        position: absolute;
        top: 2px;
        right: 80px;
        border-left: 2px solid #000;
        height: 46px;
        width: 43px;
        background-position-x: 5px;
        background-position-y: 10px;
    }

        .IIGcountIcon .icon-gallery_2 {
            font-size: 16px;
            position: relative;
            top: 13px;
            left: -7px;
        }

    .IIGcount {
        color: #fff;
        font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
        font-weight: 300;
        font-weight: normal;
        font-style: normal;
        position: relative;
        top: 17px;
        left: -40px;
        display: block;
    }

    .iigNextArrow {
        cursor: pointer;
    }

    .iigPrevArrow {
        cursor: pointer;
    }

    .bgfatli {
        padding-top: 20px;
        display: block;
        position: relative;
        left: -20px;
        line-height: 16px !important;
    }

        .bgfatli img {
            padding-bottom: 10px;
        }

    .bgfatlicB {
        font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
        font-weight: 500;
        font-size: 16px;
    }

    .bgfatlic {
        font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
        font-weight: 300;
        font-size: 16px;
    }

    .bgsbnotel {
        display: none;
    }

    .suspendedNOTER {
        width: 280px;
        height: 280px;
        padding: 0 0 0 0px;
        float: right;
        margin-right: -260px !important;
        margin-top: -20px;
    }

    .suspendedNOTEL {
        width: 280px;
        height: 280px;
        padding: 0;
        float: left;
        margin-left: -280px !important;
        margin-top: -20px;
    }

    .suspendedNOTERB {
        z-index: 5;
    }

    .suspendedNOTELB {
        z-index: 5;
    }

    @media all and (max-width: 1350px) {
        .suspendedNOTER {
            display: none;
        }

        .suspendedNOTEL {
            display: none;
        }

        .bglicMobile {
            display: block;
        }
    }

    @media all and (max-width: 980px) {
        div.suspendedR {
            color: #5481a1;
            font-family: Lusitana,serif;
            font-style: italic;
            font-weight: 900;
            font-size: 26px;
            padding: 0 0 0 0px;
            width: 60%;
            float: none;
            margin-top: 20px;
            margin-bottom: 20px;
            margin-left: auto;
            margin-right: auto !Important;
            border-top: #dddddd solid 2px;
            border-bottom: #dddddd solid 2px;
        }

            div.suspendedR blockquote {
                margin: 0;
                padding: 0;
                padding-top: 15px;
                padding-bottom: 15px;
                padding-right: 20px;
                padding-left: 20px;
                text-align: center;
                line-height: 37px;
            }

        .InlineImageGalleryBase {
            width: 90%;
            margin-left: auto !Important;
            margin-right: auto !Important;
        }

        .InlineImageGalleryPrevImage {
            display: none;
        }

        .InlineImageGalleryNextImage {
            display: none;
        }
    }

    @media all and (max-width: 800px) {

        .pqqq {
            display: initial;
        }

        .pqlq {
            display: none;
        }

        .pqrq {
            display: none;
        }

        div.suspendedR {
            color: #5481a1;
            font-family: Lusitana,serif;
            font-style: italic;
            font-weight: 900;
            font-size: 20px;
            padding: 0 0 0 0px;
            width: 80%;
            float: none;
            margin-top: 20px;
            margin-bottom: 20px;
            margin-left: auto;
            margin-right: auto !Important;
            border-top: #dddddd solid 2px;
            border-bottom: #dddddd solid 2px;
        }

            div.suspendedR blockquote {
                line-height: 30px;
            }

        .bgbqa {
            font-size: 12pt;
        }

        .InlineImageGalleryText {
            height: 30px;
        }

        .InlineImageGalleryPre {
        }

        .IIGcountIcon {
            border: none;
            right: initial;
            top: 0px;
            height: 26px;
            background-position-y: 0px;
        }

            .IIGcountIcon .icon-gallery_2 {
                font-size: 12px;
                position: relative;
                top: 4px;
                left: 5px;
                display: none;
            }

        .IIGcount {
            display: none;
        }

        .IIGheadline {
            left: 10px;
            top: 5px;
        }
    }

    @media all and (max-width: 600px) {
        .InlineImageGalleryBase {
            width: 100%;
            margin-left: auto !Important;
            margin-right: auto !Important;
        }

        div.suspendedR {
            font-size: 18px;
        }

            div.suspendedR blockquote {
                line-height: 25px;
            }

        .bgbqa {
            font-size: 11pt;
        }

        .suspendedB {
        }

        div.suspended {
            margin-bottom: 40px !Important;
            padding: 0 !Important;
            width: 90%;
            float: none;
            text-align: center;
            margin-left: auto !Important;
            margin-right: auto !Important;
        }

        div.suspendedCTA {
            margin-bottom: 40px !Important;
            padding: 0 !Important;
            width: 50%;
            float: none;
            text-align: center;
            margin-left: auto !Important;
            margin-right: auto !Important;
        }
    }

    @media all and (max-width: 400px) {
        div.suspendedR {
            font-size: 16px;
        }

        div.suspendedCTA {
            margin-bottom: 40px !Important;
            padding: 0 !Important;
            width: 80%;
            float: none;
            text-align: center;
            margin-left: auto !Important;
            margin-right: auto !Important;
        }

        .bgbqa {
            font-size: 10pt;
        }
    }
    /*// end Section for inline Quotes and Images

    // MVC inline photo Gallery*/
    .IPGholder {
        margin-top: 20px;
        background-color: black;
        width: 100%;
        height: 439px;
        margin-bottom: 40px;
        overflow: hidden;
    }

    .IPGSlide {
        display: none;
    }

    div#IPGHero {
        display: block;
        position: absolute;
        z-index: 6;
    }

    .IPGIntroArea {
        display: block;
        background-color: black;
        position: absolute;
        z-index: 7;
        width: 50%;
        height: 439px;
    }

    div#IPGIntroTitle {
        z-index: 7;
        display: block;
        color: white;
        font-size: 30px;
        line-height: 40px;
        text-transform: uppercase;
        font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
        font-weight: normal;
        font-style: normal;
        text-align: center;
        margin-top: 20px;
    }

    div#IPGIntroText {
        z-index: 7;
        color: white;
        font-size: 15px;
        line-height: 19px;
        text-align: center;
        margin-left: 20px;
        margin-right: 20px;
        margin-bottom: 10px;
    }

    div#IPGIntroByLine {
        z-index: 7;
        display: block;
        color: white;
        padding-top: 10px;
        padding-bottom: 0px;
        font-size: 12px;
        line-height: 16px;
        font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
        font-weight: normal;
        font-style: normal;
        margin-left: auto;
        margin-right: auto;
        text-align: center;
    }

    .IPGIntroArrow {
        margin-left: auto;
        margin-right: auto;
    }

    .IPGSlideImageCaption {
        position: absolute;
        z-index: 7;
        background-color: rgba(0,0,0,0.8);
        color: white;
        width: 360px;
        font-size: 14px;
        line-height: 18px;
        padding: 10px;
        padding-left: 20px;
        margin-left: 12px;
        margin-right: auto;
        display: block;
    }

    .IPGLeftArrow {
        float: left;
        margin-bottom: -45px;
        z-index: 7;
        position: relative;
        top: 190px;
        left: 10px;
    }

    .IPGRightArrow {
        float: right;
        margin-bottom: -45px;
        position: relative;
        top: 190px;
        right: 10px;
    }

    #IPGEndText {
        color: white;
        font-size: 14px;
        line-height: 18px;
    }

    #IPGSlideEnd {
        width: 440px;
        text-align: center;
        margin-left: auto;
        margin-right: auto;
        margin-top: 80px;
    }
</style>

<style>
    .article_top_line {
        box-sizing: border-box;
        height: 1px;
        width: 100%;
        background: black;
        margin-left: auto !important;
        margin-right: auto !important;
        display:none;
    }

    .article_top_subhead {
        margin-top: 24px;
        text-decoration: none;
        padding-bottom: 1px;
        color: #000000;
        font-family: 'Roboto Condensed', 'Asap Condensed', 'neue-haas-unica', sans-serif;
        font-weight: 600;
        font-size: 16px;
        letter-spacing: 0px;
        line-height: 23px;
        text-transform: uppercase;
        margin-bottom: 0px;
        border-bottom: 3px solid black;
        display: inline-block;
    }

    .article_top_head {
        font-family: source-serif-pro, 'Source Serif Pro', 'Lyon Display Web','LyonDisplay-Medium', serif;
        font-weight: 900;
        font-size: 56px;
        line-height: 64px;
        letter-spacing: 0px;
        margin-top: 10px;
        margin-bottom: 10px;
    }

    .article_top_description {
        color: #000000;
        font-family: 'HelveticaNeueW01-55Roma','neue-haas-unica', sans-serif;
        font-size: 16px;
        line-height: 20px;
        margin-bottom: 10px;
    }

    .article_top_byline {
        color: black;
        display: inline-block;
        font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
        font-size: 12px;
        line-height: 16px;
    }

        .article_top_byline i {
            margin-left: -3px;
            margin-right: -3px;
        }

    .article_top_bylinebold {
        font-family: 'HelveticaNeueW01-75Bold','HelveticaNeue Bold','Helvetica LT Std Bold',Helvetica,'neue-haas-unica', sans-serif;
    }

    .article_top_dateline {
        color: #757575;
        margin-top: 4px;
        display: inline-block;
        font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
        font-size: 12px;
        line-height: 16px;
        margin-left: 0px;
    }

    .article_top_chim {
        font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
        font-size: 16px;
        line-height: 16px;
        display: inline-block;
        margin-left: 7px;
        margin-right: 3px;
    }

    .article_top_articlehero {
        width: 100%;
        margin-top: 18px;
        margin-bottom: 0px;
        display: flex;
        flex-flow: column;
    }

        .article_top_articlehero img {
            width: 100%;
        }

    .article_top_metrics {
        font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
        font-weight: 300;
        font-size: 16px;
        line-height: 16px;
        margin-top: 30px;
        margin-bottom: 30px;
        margin-left: auto !important;
        margin-right: auto !important;
    }

    .article_top_metricsItem {
        display: inline-block;
        margin-right: 4px;
    }

        .article_top_metricsItem i {
            font-size: 14px;
            margin-right: 3px;
        }

    .article_top_metricsItemCircle {
        border: 0px solid black;
        border-radius: 3000px;
        width: 26px;
        height: 26px;
        text-align: center;
        line-height: 26px;
        display: inline-flex !important;
        align-items: center;
        justify-content: center;
        background: black;
        color: white;
        cursor: pointer;
    }

        .article_top_metricsItemCircle:hover {
            opacity: .6;
        }

        .article_top_metricsItemCircle i {
            font-size: 12px !important;
            margin-right: 0px !important;
            color: white;
        }

        .article_top_metricsItemCircle a {
            line-height: 0px;
        }

    .article_top_metricsItemComment {
        border-width: 1px;
        border-style: solid;
        border-color: rgb(102, 102, 102);
        border-image: initial;
        border-radius: 4px;
        padding: 4px;
        position: relative;
        top: 0px;
        min-width: 20px;
        text-align: center;
        cursor: pointer;
        font-size: 12px;
    }

        .article_top_metricsItemComment::before {
            bottom: -7px;
            content: "";
            display: block;
            left: 9px;
            position: absolute;
            width: 0px;
            border-color: rgb(102, 102, 102) transparent;
            border-style: solid;
            border-width: 6px 0px 0px 8px;
        }

        .article_top_metricsItemComment::after {
            bottom: -6px;
            content: "";
            display: block;
            left: 10px;
            position: absolute;
            width: 0px;
            border-color: rgb(255, 255, 255) transparent;
            border-style: solid;
            border-width: 6px 0px 0px 6px;
        }

    #article_top_metricsItem_bookmark {
        cursor: pointer;
        position: relative;
        top: 0px;
    }

    .article_top_metricsItemCSVG {
        position: relative;
        top: 9px;
        height: 26px;
    }

    .article_top_DMT_Canvas {
        background-image: url(https://www.gatesnotes.com/media/GNIN/gray_4x6.png);
        background-position: 50% 50%;
        background-repeat: no-repeat;
        overflow-x: hidden;
        background-size: cover;
        width: 100%;
        height: 560px;
    }

    @media all and (min-width: 1021px) {
        /*Desktop only*/
    }

    @media all and (min-width: 681px) {
        /*Desktop and Tablet*/
    }

    @media all and (min-width: 681px) and (max-width: 1020px) {
        /*Tablet only*/
    }

    @media all and (max-width: 1110px) {
    }

    @media all and (max-width: 1020px) {
        /*Mobile and Tablet*/
        .article_top_line {
        }

        .article_top_subhead {
            margin-top: 16px;
            font-size: 16px;
            line-height: 20px;
        }

        .article_top_head {
            font-size: 34px;
            line-height: 39px;
            margin-top: 12px;
            margin-bottom: 10px;
        }

        .article_top_description {
            font-size: 18px;
            line-height: 24px;
            margin-bottom: 12px;
        }

        .article_top_byline {
        }

        .article_top_dateline {
            margin-top: 6px;
        }

        .article_top_articlehero {
            margin-top: 18px;
            margin-bottom: 0px;
        }
    }

    @media all and (max-width: 980px) {
        .article_top_DMT_Canvas {
            height: 500px;
        }
    }

    @media all and (max-width: 680px) {
        /*Mobile only*/
        .article_top_DMT_Canvas {
            height: 380px;
        }

        .article_top_subhead {
            font-size: 14px;
            line-height: 19px;
        }

        .article_top_bylinebold {
            font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
        }

        .article_top_head {
            font-size: 32px;
            line-height: 37px;
            margin-top: 12px;
            margin-bottom: 12px;
        }

        .article_top_description {
            font-size: 16px;
            line-height: 19px;
            margin-bottom: 12px;
            display: none;
        }

        .article_top_byline {
            font-size: 14px;
            line-height: 16px;
        }

        .article_top_dateline {
            font-size: 14px;
            line-height: 16px;
            margin-top: 4px;
        }

        .article_top_metrics {
        }
    }
</style>
    <script type="text/javascript">
    var myContactID = "";
    var email = "email address";
    var password = "password";
    var address = "";
    var RegPSWelement = null;
    var RegEmailelement = null;
    var RegPSWConfirmelement = null;
    var RegFullNameelement = null;
    var RegTitleelement = null;
    var RegFirstNameelement = null;
    var RegLastNameelement = null;
    var RegAddresselement = null;
    var RegAddressANelement = null;
    var RegAddressL1element = null;
    var RegAddressL2element = null;
    var RegAddressCityelement = null;
    var RegAddressStateelement = null;
    var RegAddressZipelement = null;
    var RegAddressCountryelement = null;
    var RegHolderelement = null;
    var RegCheckBoxValue = "true";
    var RegButtonClicked = "false";
    var ASPASSButtonClicked = "false";
    var RegValidationSum = "";
    var ASValidationSum = "";
    var LoginPSWelement = null;
    var LoginEmailelement = null;
    var AAS_Name = null;
    var AAS_Title = null;
    var AAS_FirstName = null;
    var AAS_LastName = null;
    var AAS_Email = null;
    var AAS_AddressL1element = null;
    var AAS_AddressL2element = null;
    var AAS_AddressCityelement = null;
    var AAS_AddressStateelement = null;
    var AAS_AddressZipelement = null;
    var AAS_AddressCountryelement = null;
    var WE_Name = null;
    var WE_Title = null;
    var WE_FirstName = null;
    var WE_LastName = null;
    var WE_Email = null;
    var SE_Email = null;
    var tokenKey = 'accessToken';
    // AuthConfigVars
    var Auth4Config_EnableUserAuth = parseInt("1");
    var Auth4Config_AuthServiceURL = "https://insiders.gatesnotes.com/api/Account/";
    var Auth4Config_PasswordMin = parseInt("7");
    var Auth4Config_TimerIntervalValue = parseInt("20");
    var Auth4Config_EmailInvalid = "Not a valid email address";
    var Auth4Config_EmailDuplicate = "This email is already registered";
    var Auth4Config_EmailMissing = "We don't have that email registered";
    var Auth4Config_PasswordNotMatching = "Password does not match";
    var Auth4Config_PasswordUnableToChange = "Unable to change password, check to make sure old password is correct and try again";
    var Auth4Config_PasswordTooShort = "Password must contain at least 7 characters";
    var Auth4Config_NameIncomplete = "Enter a title, first and last name. For example, &quot;Mr. Richard Feynman&quot;";

    var Auth4Config_AddressVisible = parseInt("1");
    var Auth4Config_AddressManualOnly = parseInt("");
    var Auth4Config_AddressManditory = parseInt("1");
    var Auth4Config_AddressFieldRequired = "This field is required";
    var Auth4Config_AddressAddressNotSelected = "Please select an address or click the link above to manually enter your address.";

    var Auth4Config_NewsletterToggleActive = "1";
    var Auth4Config_NewsletterToggleCopy = "Send me updates from Bill Gates";
    var Auth4Config_SurveyToggleActive = "";
    var Auth4Config_SurveyToggleCopy = "Send me Gates Notes survey emails";
    var Auth4Config_TopofMindToggleActive = "";
    var Auth4Config_TopofMindToggleCopy = "Send me weekly Top of Mind newsletters";

    var NameErrTxt = Auth4Config_NameIncomplete;
    //
    var initialTxtPassword = 'password';
    var initialASPassword = 'current password';
    var initialASNPassword = 'new password';
    var initialASNCPassword = 'confirm password';
    var initialTxtEmail = 'email address';
    var initialTxtName = 'full name (first last)';
    var initialTxtFirstName = 'first name';
    var initialTxtLastName = 'last name';
    var initialTxtPassConfirm = 'retype password';
    var fullnameValid = false;
    var addressValid = false;
    var ASaddressValid = false;
    if (Auth4Config_AddressManditory != 1) {
        addressValid = true;
        ASaddressValid = true;
    }
    var ASfullnameValid = false;
    var WEfullnameValid = false;
    var emailValid = false;
    var ASemailValid = false;
    var WEemailValid = false;
    var SEemailValid = false;
    var password1Valid = false;
    var password2Valid = false;
    var password = "";
    var passwordconfirm = "";
    var fullname = "";
    var titledname = "";
    var email = "";
    var currentUserActive = "false";
    localStorage.setItem('currentUserActive', currentUserActive);
    var currentUserStatusChecked = "false";
    var currentUserUserName = "";
    var currentUserEmail = "";
    var currentUserPassword = "";
    var currentUserInterest_Topic_List_CSVPrev = "";
    var currentUserInterest_Topic_List_CSVFirstTime = true;
    var currentUserImageCoverH = "";
    var currentUserImageCoverW = "";
    var currentUserImageProfileBlobData = "";
    var currentUserImageCoverBlobData = "";
    var currentUserImageProfileBlobCycle = 0;
    var currentUserImageCoverBlobCycle = 0;
    var currentUserImageProfileBlobDataStatus = "";
    var currentUserImageCoverBlobDataStatus = "";
    var currentUserAuthTester = false;
    var currentUserNewsletterOptions = {
        "subscriptions": {
            "newsletter":"true",
            "survey":"true",
            "topofmind":"true"
        }
    };
    //console.log(JSON.stringify(currentUserNewsletterOptions));
    //console.log(getNewsletterOption("newsletter"));

    var originalUserData = new Object();
    var currentUserData = new Object();
    var firstrunJS = "true";
    var IsMobileAuth = false;
    var latestCheckedEmail = "";
    var latestcheckedValidity = false;
    var BPF_Prev = 100;

    var TGNCom_GetNotificationsData = "";
    var TGNCom_GetNotificationsPollingCount = 0;

    var Auth50_encodedAddressStore = "";
    var Auth50_decodedAddressStore = "";
    var Auth50_JSONAddressStore = {};
    var address_components = [];
    Auth50_JSONAddressStore['address_components'] = address_components;
    var Auth50_stringifiedAddressStore = "";

    var Auth50_selectedForSurvey = false;

    var TGNCommentNotif_ViewedMenu = false;

    var forceFromServer = false;

    var CampaignEnabled = false;

    var Auth50_UserNotification = {
        statusInternal: 10,
        statusListener: function(val) {},
        set status(val) {
            this.statusInternal = val;
            this.statusListener(val);
        },
        get status() {
            return this.statusInternal;
        },
        registerListener: function(listener) {
            this.statusListener = listener;
        }
    }
    //Auth50_UserNotification.registerListener(function(val) {
    //    console.log("The value of Auth50_UserNotification.status changed to: " + val);
    //});
    Auth50_UserNotification.status = "none";

    var Auth50_GNI_UserStatus = {
        aInternal: 10,
        aListener: function(val) {},
        set a(val) {
            this.aInternal = val;
            this.aListener(val);
        },
        get a() {
            return this.aInternal;
        },
        registerListener: function(listener) {
            this.aListener = listener;
        }
    }
    Auth50_GNI_UserStatus.registerListener(function(val) {
        //console.log("The value of Auth50_GNI_UserStatus.a changed to: " + val);
    });
    Auth50_GNI_UserStatus.a = "none";



    var TGNnow = Date.now || function () {
        return new Date().getTime();
    };
    var TGN_throttle = function (func, wait, options) {
        var timeout, context, args, result;
        var previous = 0;
        if (!options) options = {};

        var later = function () {
            previous = options.leading === false ? 0 : TGNnow();
            timeout = null;
            result = func.apply(context, args);
            if (!timeout) context = args = null;
        };

        var throttled = function () {
            var now = TGNnow();
            if (!previous && options.leading === false) previous = now;
            var remaining = wait - (now - previous);
            context = this;
            args = arguments;
            if (remaining <= 0 || remaining > wait) {
                if (timeout) {
                    clearTimeout(timeout);
                    timeout = null;
                }
                previous = now;
                result = func.apply(context, args);
                if (!timeout) context = args = null;
            } else if (!timeout && options.trailing !== false) {
                timeout = setTimeout(later, remaining);
            }
            return result;
        };

        throttled.cancel = function () {
            clearTimeout(timeout);
            previous = 0;
            timeout = context = args = null;
        };

        return throttled;
    };

    $(window).resize(function () {
        setCIW();
    });
    function TGN_CheckJSONForCTAIDMatch(JSON_name, lookfor) {
        if (localStorage.getItem(JSON_name) === null) {
            return false;
        } else {
            JSONobj = JSON.parse(localStorage.getItem(JSON_name));
            //console.log(JSON + JSON.viewedItems.length + lookfor);
            for (var index = 0; index < JSONobj.viewedCTAItems.length; ++index) {
                var item = JSONobj.viewedCTAItems[index];
                //console.log(item.viewedItem + lookfor);
                if (item.viewedCTAItem == lookfor) {
                    return true;
                }
            }
        }
        return false;
    }
    function TGN_Add_CTA_ToLocalStorage(CTA_Event, CTA_ID) {
        // Handle Page View Local Storage
        var storedCTANames = JSON.parse(localStorage.getItem(CTA_Event));
        if (localStorage.getItem(CTA_Event) === null) {
            var storedCTANames = {};
            var viewedCTAItems = [];
            storedCTANames.viewedCTAItems = viewedCTAItems;
            var viewedCTAItem = {
                "viewedCTAItem": CTA_ID
            }
            storedCTANames.viewedCTAItems.push(viewedCTAItem);
            localStorage.setItem(CTA_Event, JSON.stringify(storedCTANames));
        } else {
            var CTAitemalreadyviewed = TGN_CheckJSONForCTAIDMatch(CTA_Event, CTA_ID);
            if (!CTAitemalreadyviewed) {
                var viewedCTAItem = {
                    "viewedCTAItem": CTA_ID
                }
                storedCTANames.viewedCTAItems.push(viewedCTAItem);
                localStorage.setItem(CTA_Event, JSON.stringify(storedCTANames));
            }
        }
    }
    function MenuS45_OpenSignIn() {
        if ($(".Login_Holder").is(':visible')) {
            hideAuthHolders();
        } else {
            hideAuthHolders();
            showAuthHolder();
            $(".Login_Holder").css("display", "flex");
            $(".SIpop").css("display", "none");
            $("#LItxtEmail").val('');
            $("#LItxtPassword").val('');
            $("#LI_Mob_All_Error").css("display", "none");
        }
    }
    function MenuS45_OpenSignUp() {
        hideAuthHolders();
        showAuthHolder();
        $(".Register_Holder").css("display", "flex");
        $(".SIpop").css("display", "none");
        $("#txtFirstName").val('');
        $("#txtLastName").val('');
        $("#txtEmail").val('');
        $("#txtPassword").val('');
        $("#txtPasswordConfirm").val('');
        $("#nameValidationBoxB").css("display", "none");
        $("#emailValidationBoxB").css("display", "none");
        $("#pass1ValidationBoxB").css("display", "none");
        $("#pass2ValidationBoxB").css("display", "none");
        $("#SU_Mob_All_Error").css("display", "none");
    }

    function isGNILoggedIn() {
        if (currentUserActive == "true") {
            if (currentUserData.IsApproved != "false" && currentUserData.IsApproved != undefined && currentUserData.IsApproved != "") {
                return true;
            } else {
                return false;
            }
        } else {
            return false;
        }
    }
    function setBooksMobileNav(BPF_Set) {
        console.log("setBooksMobileNav: " + BPF_Set);
        BPF_Current = BPF_Set;
        if (BPF_Current != BPF_Prev) {
            $(".TGNBooksPageMobileTabletFC").each(function (i, obj) {
                if (i == BPF_Current) {
                    $(this).css("background-color", "#000000");
                    $(this).css("color", "#f3f3f3");
                    $(this).css("cursor", "auto");
                    $(this).css("pointer-events", "none");
                } else {
                    $(this).css("background-color", "white");
                    $(this).css("color", "#000000");
                    $(this).css("cursor", "pointer");
                    $(this).css("pointer-events", "all");
                }
                BPF_Prev = BPF_Current;
            });
        }
    }

    var GetRolloverDate = function (datestring) {
        var d = $.datepicker.parseDate("MM dd, yy", datestring);
        var Today = new Date();
        var dayCount = Calculatedays(d, Today);
        var myRollOverDate = CalculateRollOverDate(dayCount);
        return myRollOverDate;
    }
    var Calculatedays = function (date1, date2) {

        //Get 1 day in milliseconds
        var one_day = 1000 * 60 * 60 * 24;

        // Convert both dates to milliseconds
        var date1_ms = date1.getTime();
        var date2_ms = date2.getTime();

        // Calculate the difference in milliseconds
        var difference_ms = date2_ms - date1_ms;

        // Convert back to days and return
        var days = Math.floor(difference_ms / one_day);
        return days;
    };
    var CalculateRollOverDate = function (days) {

        var months = Math.floor(days / 30);
        var years = Math.floor(days / 365);
        if (days <= 0) {
            return "Posted today";
        }
        else if (days == 1) {
            return "Posted yesterday";
        }
        else if (days <= 30) {
            return "Posted " + days + " days ago";
        }
        else if (months < 2) {
            return "Posted " + months + " month ago";
        }
        else if (months < 13) {
            return "Posted " + months + " months ago";
        }
        else if (years < 2) {
            return "Posted " + years + " year ago";
        }
        else {
            return "Posted " + years + " years ago";
        }
    };

    function CTATestUserStatusLegacy() {
        if (currentUserActive == "false" && (localStorage.getItem(tokenKey) == "" || localStorage.getItem(tokenKey) == "null" || localStorage.getItem(tokenKey) == null)) {
            return true;
        } else {
            return false;
        }
    }
    function CTATestUserStatusRegistered() {
        if (currentUserActive == "false") {//localStorage.getItem('currentUserUserName') === null
            return false;
        } else {
            return true;
        }
    }
    function CTATestUserStatusGNI3() {
        if (localStorage.getItem('currentUserAddress') == null || localStorage.getItem('currentUserAddress') == '') {
            return false;
        } else {
            return true;
        }
    }
    function Auth50_SetAddressSourceLocalStore() {
        var address_source_found = false;
        for (var i = 0; i < Auth50_JSONAddressStore.address_components.length; i++) {
            var addressType = Auth50_JSONAddressStore.address_components[i].types[0];
            if (addressType == "address_source") {
                localStorage.setItem('currentUserAddressSrc',Auth50_JSONAddressStore.address_components[i].long_name);
                address_source_found = true;
            }
        }
        if (address_source_found == false) {
            localStorage.setItem('currentUserAddressSrc','');
        }
    }
    function SetAuth50_UserNotification(val) {
        //console.log("The value of Auth50_UserNotification changed to: " + val);
        Auth50_UserNotification.status = val;
    }

    function readAUTH40TesterCookie(name) {
        var nameEQ = escape(name) + "=";
        var ca = document.cookie.split(';');
        for (var i = 0; i < ca.length; i++) {
            var c = ca[i];
            while (c.charAt(0) === ' ') c = c.substring(1, c.length);
            if (c.indexOf(nameEQ) === 0) return unescape(c.substring(nameEQ.length, c.length));
        }
        return null;
    }
    function isLocalStorageSupported() {
        var testKey = 'test', storage = window.localStorage;
        try {
            storage.setItem(testKey, '1');
            storage.removeItem(testKey);
            return true;
        } catch (error) {
            return false;
        }
    }
    function getAuthConfigVars() {
        //console.log("AUTH_4JS_GACV:");
        // check beta tester
        if (localStorage.getItem('IAmAnAUTH40Tester') == "Yes") {
            console.log("IAmAnAUTH40Tester:" + localStorage.getItem('IAmAnAUTH40Tester'));
            Auth4Config_EnableUserAuth = 1;//tester cookie override
            //AuthjsonData.Auth4Config_EnableUserAuth = 1;
            currentUserAuthTester = true;
        }
        // if Auth is enabled OR we have a betatester
        if (Auth4Config_EnableUserAuth == 1) {
            checkActiveUser();
            localStorage.setItem('Auth4Config_EnableUserAuth', 1);
        } else {
            localStorage.setItem('Auth4Config_EnableUserAuth', 0);
            processQueryStrings();
        }
        // setup address fields per config settings
        if (Auth4Config_AddressManualOnly == 1) {
            $(".Auth_50_GAPI_AddressArea").css("display", "none");
            $(".Auth_50_ManualAddressArea").css("display", "block");
            $(".pac-add-on").css("display","none");
        }
        if (Auth4Config_AddressVisible != 1) {
            $(".Auth_50_GAPI_AddressArea").css("display", "none");
            $(".Auth_50_ManualAddressArea").css("display", "none");
            $("#Auth_50_ManualAddressAreaAS_Holder").css("display", "none");
        }
        if (Auth4Config_NewsletterToggleActive != 1) {
            $("#AuthcheckboxAS").css("display", "none");
            $("#AuthcheckboxAS").find('.AuthcheckboxTxt').html(Auth4Config_NewsletterToggleCopy);
        }
        if (Auth4Config_SurveyToggleActive != 1) {
            $("#AuthcheckboxAS1b").css("display", "none");
            $("#AuthcheckboxAS1b").find('.AuthcheckboxTxt').html(Auth4Config_SurveyToggleCopy);
        }
        if (Auth4Config_TopofMindToggleActive != 1) {
            $("#AuthcheckboxAS1c").css("display", "none");
            $("#AuthcheckboxAS1c").find('.AuthcheckboxTxt').html(Auth4Config_TopofMindToggleCopy);
        }
    }
    function setUserActive(data) {
        createAuthCookie("ALSU", "ALS_signedup", 20 * 365);
        currentUserUserName = data.UserName;
        if (currentUserUserName == null || currentUserUserName == "null") {
            currentUserUserName = "";
        }
        currentUserEmail = data.Email;
        if (currentUserEmail == null || currentUserEmail == "null") {
            currentUserEmail = "";
        }
        if (currentUserEmail.indexOf("facebook_") >= 0 && currentUserEmail.indexOf("gatesnotes") >= 0) {
            currentUserEmail = "";
        }
        if (currentUserEmail.indexOf("twitter_") >= 0 && currentUserEmail.indexOf("gatesnotes") >= 0) {
            currentUserEmail = "";
        }
        currentUserEmailConfirmed = data.EmailConfirmed;
        if (currentUserEmailConfirmed == null || currentUserEmailConfirmed == "null") {
            currentUserEmailConfirmed = "";
        }
        var a = location.pathname;
        a = a.toLowerCase();
        if (a == "/signin" || a == "/signup" || a == "/signupfaq" || a == "/sign-in" || a == "/sign-up" || a == "/sign-up-faq") {
            window.location.href = '/';
        }
        if (a == "/profilesettings" || a == "/profile-settings") {
            //$(".myProfile_Holder").css("display", "block");
            $(".Auth_ProfileSettings_NavigationHolder").css("display", "block");
            $(".AH_Close").css("display", "none");
        }
        setAuthHeaderUser();
        currentUserActive = "true";
        if (isLocalStorageSupported) {
            localStorage.setItem('currentUserUserName', currentUserUserName);
            localStorage.setItem('currentUserEmail', currentUserEmail);
            localStorage.setItem('currentUserEmailConfirmed', currentUserEmailConfirmed);
            localStorage.setItem('currentUserActive', currentUserActive);
        }
        processQueryStrings();
        currentUserStatusChecked = "true:user";
        Auth50_GNI_UserStatus.a = "true:user:checkActiveUser";
        hideAuthHolders();
    }
    function checkActiveUser() {
        if (localStorage.getItem(tokenKey) == "" || localStorage.getItem(tokenKey) == "null" || localStorage.getItem(tokenKey) == null) {
            // no prev login
            noActiveUser();
        } else {
            //LOWER_GNI_LOAD: rework this to assume we can pickup the session
            if (localStorage.getItem('currentUserData') != null) {
                local_currentUserData = JSON.parse(localStorage.getItem('currentUserData'));
            }
            if (local_currentUserData != null) {
                // get info locally
                localdata = [];
                localdata.UserName = localStorage.getItem('UserName');
                localdata.Email = localStorage.getItem('currentUserEmail');
                localdata.EmailConfirmed = localStorage.getItem('currentUserEmailConfirmed');
                setUserActive(localdata);
            } else {
                // get info from server
                // try to pickup session
                $.ajax({
                    url: Auth4Config_AuthServiceURL + "checkActiveUser",
                    dataType: "json",
                    headers: { 'authorization': 'Bearer ' + localStorage.getItem(tokenKey) },
                    type: "GET",
                    success: function (data) {
                        setUserActive(data);
                    },
                    error: function (request, status, error) {
                        console.log("ERROR:" + request.responseText + " e:" + error);
                        noActiveUser();
                    }
                });
            }
        }
    }
    function noActiveUser() {
        if (isLocalStorageSupported) {
            localStorage.setItem(tokenKey, "");
            localStorage.setItem('currentUserData', null);
        }
        var a = location.pathname;
        a = a.toLowerCase();
        if (a == "/signin" || a == "/signup" || a == "/signupfaq" || a == "/sign-in" || a == "/sign-up" || a == "/sign-up-faq") {
            if (a == "/signin" || a == "/sign-in") {
                $("#AH_Holder").css("background", "rgba(255,255,255,1)");
                $(".TGN_site_Article_top").css("display","none");
                $(".TGN_site_Article_comments").css("display","none");
                //$(".TGN_site_ContentArea").css("height","2000px");
                showAuthLogin();
            }
            if (a == "/signup" || a == "/sign-up") {
                //$(".TGN_site_ContentArea").css("height","2000px");
                $(".TGN_site_Article_top").css("display","none");
                $(".TGN_site_Article_comments").css("display","none");
                $("#AH_Holder").css("background", "rgba(255,255,255,1)");
                showAuthRegister();
            //omnihelpers.signupPath("URL");
            }
            if (a == "/signupfaq" || a == "/sign-up-faq") {
                $(".TGN_site_Articlecollumn").append($(".FAQ_Holder").html());
            }
        } else {
            $(".AH_Holder").css("display", "none");
            hideGNCommTopUserMenuPop();
        }
        if (a == "/profilesettings" || a == "/profile-settings") {
            window.location.href = '/';
        }
        currentUserActive = "false";

        if (isLocalStorageSupported) {
            localStorage.setItem('currentUserActive', currentUserActive);
        }
        clearAllForms();
        setAuthHeaderSignIn();
        processQueryStrings();
        currentUserStatusChecked = "true:nouser";
        Auth50_GNI_UserStatus.a = "true:nouser";
    }
    function createAuthCookie(name, value, days) {
        var expires;

        if (days) {
            var date = new Date();
            date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
            expires = "; expires=" + date.toGMTString();
        } else {
            expires = "";
        }
        document.cookie = escape(name) + "=" + escape(value) + expires + "; path=/";

    }
function getParameterByName(name, url) {
    if (!url) url = window.location.href;
    name = name.replace(/[\[\]]/g, '\\$&');
    var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),
        results = regex.exec(url);
    if (!results) return null;
    if (!results[2]) return '';
    return decodeURIComponent(results[2].replace(/\+/g, ' '));
}
    function getQueryVariable(variable)
{
       var query = window.location.search.substring(1);
       var vars = query.split("&");
       for (var i=0;i<vars.length;i++) {
               var pair = vars[i].split("=");
               if(pair[0] == variable){return pair[1];}
       }
       return(false);
}
    function processQueryStrings() {
        // check all QS Auth parameters
        var queryResponding = false;

        // Clean Up all Query Strings after reading them
        curURL = window.location.href;
        var a = location.pathname;
        //console.log("NOW:" + curURL + ":" + a);

        //campaign code to localstorage
        var campaignParam = getParameterByName('WT.mc_id');
        if (campaignParam != null && campaignParam != "") {
            if (campaignParam != localStorage.getItem('currentUserCampaignQS')) {
                //set new campaigns locally
                localStorage.setItem('currentUserCampaignQSstatus', "newCampaign");
                localStorage.setItem('currentUserCampaignQS', campaignParam);
            }
            if (localStorage.getItem('currentUserCampaignQSstatus') != "SentToCRM" && currentUserActive == "true") {
                // cookie value not already sent
                localStorage.setItem('currentUserCampaignQS', campaignParam);
                console.log("crm cookie SET: " + campaignParam);
                setCRMField("new_signupcampaign", campaignParam, "string");//WT.mc_id//localStorage.setItem('currentUserCampaignQS', campaignParam);
                console.log("crm new_signupcampaign SENT: " + campaignParam);
                localStorage.setItem('currentUserCampaignQSstatus', "SentToCRM");
            } else {
                // no campaign code or already sent to CRM
                console.log("crm cookie blank or already sent or no user logged in: " + localStorage.getItem('currentUserCampaignQS'));
            }
        }

        //reset
        var resetParam = getParameterByName('reset');
        if (resetParam != "" && resetParam != null) {
            //logmeout();
            $(".ResetPassword_Holder").css("display", "block");
            $(".Register_Holder").css("display", "none");
            showAuthHolder();
            //window.history.replaceState("", "", a);
            // need to add user lookup by token and test
            queryResponding = true;
        }

        //validate
        var validateParam = getParameterByName('validate');
        var hashParam = getParameterByName('hash');
        if (validateParam != "" && validateParam != null) {
            window.history.replaceState("", "", a);
            ConfirmEmail(validateParam, hashParam);
            queryResponding = true;
        }
        //GatesNotes.Library.Util.UserProfile.validateLink(cleanPathS);
        ////get user and set IsApproved = "true";

        //authResult
        var authResultParam = getParameterByName('authResult');
        if (authResultParam != "" && authResultParam != null) {
            window.history.replaceState("", "", a);
            window.location.href = a;
            queryResponding = true;
        }

        //unsubscribe
        var unsubscribeParam = getParameterByName('unsubscribe');
        if (unsubscribeParam != "" && unsubscribeParam != null) {
            window.history.replaceState("", "", a);
            queryResponding = true;
            if (currentUserActive == "false") {
                if (hashParam == "") {
                    // Track 2 - link with email only
                    unsubscribeParam = unsubscribeParam.replace("user", "");
                    // check to see if email is GNI member CheckEmailAgainstServer
                    $.ajax({
                        url: Auth4Config_AuthServiceURL + "CheckEmailAgainstServer",
                        dataType: "json",
                        data: {
                            email: unsubscribeParam
                        },
                        type: "POST",
                        success: function (data) {
                            // Not a GNI Member need to check if a legacy CRM user
                            unsubscribeEmail(unsubscribeParam);
                        },
                        error: function (request, status, error) {
                            console.log("ERROR:" + request.responseText);
                            // unlogged in user, need to show Auth_4_0_UnsubscribeSignIn Overlay
                            // show overlay
                            hideAuthHolders();
                            showAuthHolder();
                            $(".UnsubscribeSignIn_Holder").css("display", "block");
                            // show close X
                        }
                    });
                } else {
                    // Track 1 - link with token and hash
                    ConfirmUnsubscribe(unsubscribeParam, hashParam);
                }
            } else {
                // either Track 1 or 2 if user is already logged in
                setNewsletterOptions("newsletter","false");
                setNewsletterOptions("survey","false");
                setNewsletterOptions("topofmind","false");
                currentUserData.returnToOverlay = "AccountSettings";
                compareUserInfo("GUI");
            }
        }

        //subscription_edit
        var subscription_editParam = getParameterByName('subscription_edit');
        if (subscription_editParam != "" && subscription_editParam != null) {
            window.history.replaceState("", "", a);
            queryResponding = true;
            if (currentUserActive == "false") {
                // check to see if email is GNI member CheckEmailAgainstServer
                $.ajax({
                    url: Auth4Config_AuthServiceURL + "CheckEmailAgainstServer",
                    dataType: "json",
                    data: {
                        email: subscription_editParam
                    },
                    type: "POST",
                    success: function (data) {
                        // Not a GNI Member
                        // show overlay
                        hideAuthHolders();
                        showAuthHolder();
                        $(".UnsubscribeSignIn_Holder").css("display", "block");
                        // edit text on this screen
                        $('.UnsubscribeSignIn_center').find('.Auth_Header').html('Sorry');
                        $('.Auth_Deactivate_Subhead').html("We don't have your email on record");
                        $('#Auth_Deactivate_DynamicCopy').html('If you have a Gates Notes Insiders account please sign in and go to your Profile & Settings - Account Settings page and set your subscription options as desired.');
                    },
                    error: function (request, status, error) {
                        console.log("ERROR:" + request.responseText);
                        // unlogged in user, need to show Auth_4_0_UnsubscribeSignIn Overlay
                        // show overlay
                        hideAuthHolders();
                        showAuthHolder();
                        $(".UnsubscribeSignIn_Holder").css("display", "block");
                        // edit text on this screen
                        $('.Auth_Deactivate_Subhead').html('In order to edit your subscribion settings you will need to sign-in to your Gates Notes Insider account');
                        $('#Auth_Deactivate_DynamicCopy').html('Once signed in just go to your Profile & Settings - Account Settings page and set your subscription options as desired.');
                    }
                });
            } else {
                //user is already logged in take them to settings page
                window.location.href = '/Profile-Settings?profilepage=settings';
            }
        }

        //removesubscriber
        var removesubscriberParam = getParameterByName('removesubscriber');
        if (removesubscriberParam != "" && removesubscriberParam != null) {
            window.history.replaceState("", "", a);
            queryResponding = true;
        }

        //subscriber
        var subscriberEmail = getParameterByName('subscriber');
        if (subscriberEmail != "" && subscriberEmail != null) {
            hideAuthHolders();
            $("#txtEmail").val('' + subscriberEmail);
            $(".Register_Holder").css("display", "flex");
            //omnihelpers.signupPath("URL");
            showAuthHolder();
            window.history.replaceState("", "", a);
            queryResponding = true;
        }

        //TGN_Sign_me_up
        var TGN_Sign_me_upParam = getParameterByName('TGN_Sign_me_up');
        if (TGN_Sign_me_upParam != "" && TGN_Sign_me_upParam != null && currentUserStatusChecked != "true:user") {
            AH_CloseOff = true;
            //localStorage.setItem('IAmAnAUTH40Tester', "Yes");
            //window.history.replaceState("", "", a);
            queryResponding = true;
            $(".accountSettings_Holder").css("display", "none");
            $(".Login_Holder").css("display", "none");
            $(".FAQ_Holder").css("display", "none");
            $(".ForgotPassword_Holder").css("display", "none");
            $(".myProfile_Holder").css("display", "none");
            $(".Auth_ProfileSettings_NavigationHolder").css("display", "none");
            $(".ResetPassword_Holder").css("display", "none");
            $(".SocialGetEmails_Holder").css("display", "none");
            $(".Welcome_Holder").css("display", "none");
            $(".Deregister_Holder").css("display", "none");
            $(".RequestDelete_Holder").css("display", "none");
            showAuthHolder();
            $(".Register_Holder").css("display", "flex");
            //omnihelpers.signupPath("URL");
            if (TGN_Sign_me_upParam == "2") {
                $(".AH_Close").css("display", "none");
                $("#AH_Holder").css("background", "rgba(255,255,255,1)");
            }
        } else {
            if (Auth4Config_EnableUserAuth != 1) {
                var a = location.pathname;
                a = a.toLowerCase();
                if (a == "/signin" || a == "/signup" || a == "/signupfaq" || a == "/sign-in" || a == "/sign-up" || a == "/sign-up-faq") {
                    window.location.href = '/';
                }
                if (a == "/profilesettings" || a == "/profile-settings") {
                    window.location.href = '/';
                }
            }
        }

        // FB User
        if (window.location.hash) {
            var page_url = window.location + "";       // Get window location and convert to string by adding ""
            var hash_value = page_url.match("#(.*)");  // Regular expression to match anything in the URL that follows #
            //console.log(hash_value);
            var amps;                                  // Create variable amps to hold ampersand array

            if (hash_value)                             // Check whether the search succeeded in finding something after the #
            {
                amps = (hash_value[1]).split("&");     // Split string into array using "&" as delimiter
                Social_tokenParam = amps[0].split("=");
            }
            //var Social_tokenParam = window.location.hash.substring(1); //Puts hash in variable, and removes the # character
            if (currentUserActive != "true" && Social_tokenParam[0] == "access_token") {
                localStorage.setItem(tokenKey, Social_tokenParam[1]);
                window.history.replaceState("", "", a);
                queryResponding = true;
                if (localStorage.getItem("SocialReturnToURL") != "afterRedirect") {
                    var srturl = localStorage.getItem("SocialReturnToURL");
                    localStorage.setItem("SocialReturnToURL", "afterRedirect");
                    if (srturl == "/") {
                        window.history.replaceState("", "", a + "#" + hash_value[1]);
                        window.location.reload();
                    } else {
                        location.href = srturl + "#" + hash_value[1];
                    }
                } else {
                    checkActiveUser();
                }
            }
            // hash found
        } else {
            // No hash found
        }


        //oauth_token
        var oauth_tokenParam = getParameterByName('oauth_token');
        if (oauth_tokenParam != "" && oauth_tokenParam != null) {
            window.history.replaceState("", "", a);
            queryResponding = true;
        }
        //TW
        //A: Get Tokens from returned url string
        //B: Use those tokens to get basic user data (name,id,email)
        //C: create a unique TGN username
        //D: create or login user based on if this basic data matches an existing user
        //NEWSERVICECALL

        //SignIn
        var SignInParam = getParameterByName('SignIn');
        if (SignInParam != "" && SignInParam != null) {
            //window.history.replaceState("", "", a);
            queryResponding = true;
        }

        //SignUp
        var SignUpParam = getParameterByName('SignUp');
        if (SignUpParam != "" && SignUpParam != null) {
            //window.history.replaceState("", "", a);
            queryResponding = true;
        }

        //code
        var codeParam = getParameterByName('code');
        if (codeParam != "" && codeParam != null) {
            //window.history.replaceState("", "", a);
            queryResponding = true;
        }
        //FB
        //A: Get Tokens from returned url string
        //B: Use those tokens to get basic user data (name,id,email)
        //C: create a unique TGN username
        //D: create or login user based on if this basic data matches an existing user
        //NEWSERVICECALL

        //ASPXAUTH
        var ASPXAUTHParam = getParameterByName('ASPXAUTH');
        if (ASPXAUTHParam != "" && ASPXAUTHParam != null) {
            //window.history.replaceState("", "", a);
            queryResponding = true;
        }

        //if "user" remove
        if (qs["deactivated"] == "true") {
            hideAuthHolders();
            //$(".CTA_TDD_Holder").css("display", "block");
            //$("#CTA_TDD_DAA").css("display", "block");
            SetAuth50_UserNotification("CTA_TDD_DAA");
        } else {
            //console.log("NOQS");
            $(".CTA_TDD_Holder").css("display", "none");
        }

        // clean up FB hash
        if (window.location.hash == '#_=_') {
            window.location.hash = '';
            history.pushState('', document.title, window.location.pathname);
        }

        if (queryResponding != true && localStorage.getItem('currentUserActive') != "false") {
            getUserInfo();
        }
    }
    function logmeout() {
        hideAuthHolders();
        $.ajax({
            url: Auth4Config_AuthServiceURL + "LogoutFunction",
            headers: { 'authorization': 'Bearer ' + localStorage.getItem(tokenKey) },
            dataType: "json",
            type: "GET",
            success: function (data) {
                //crm add 5192016
                currentUserActive = "false";
                localStorage.setItem('currentUserActive', currentUserActive);
                //LOWER_GNI_LOAD: remove local data on logout
                localStorage.setItem('currentUserData', null);
                //
                //console.log("data" + data);
                localStorage.setItem(tokenKey, "");
                localStorage.setItem('UserCommentToken', "");
                setAuthHeaderSignIn();
                clearAllForms();
                setCIW();
                $(".AH_Holder").css("display", "none");
                hideGNCommTopUserMenuPop();
                var a = location.pathname;
                a = a.toLowerCase();
                //console.log("url: " + a);
                if (a == "/profilesettings" || a == "/profile-settings") {
                    window.location.href = '/';
                } else {
                    //location.reload();
                    window.location.href = "" + window.location.href;
                }
            },
            error: function (request, status, error) {
                console.log("ERROR:" + request.responseText + " e:" + error);
                if (error == "Unauthorized") {
                    noActiveUser();
                }
            }
        });
        return false;
    }
    function setCIW() {
        //console.log("setCIW");
        var wh = $(window).height();
        var CIw = $(window).width();
        var UIw = $("#banner_ProfileHeader_HolderMob").width();
        if (CIw < 981) {
            if ($('#banner_ProfileHeader_HolderMob').is(':visible')) {
                $(".mobmagright").css("right", UIw + 20 + "px");
            } else {
                $(".mobmagright").css("right", 20 + "px");
            }
            IsMobileAuth = true;
        } else {
            $(".mobmagright").css("right", "0px");
            IsMobileAuth = false;
        }
        //$(".Deregister_Holder").css("padding-top", (wh / 2.5) - 150);
        //$(".UnsubscribeSignIn_Holder").css("padding-top", (wh / 2.5) - 150);
    }

    function CreateNewAddressJSONObj(l1,l2,ci,st,zi,co) {
        var manualJSON_AddressObj = {};
        var address_components = [];
        if (l2 != "") {
            l2 = " "+l2;
        }
        var formatted_address = l1+l2+", "+ci+", "+st+" "+zi+", "+co;
        address_components.push({});
        address_components[0].long_name = l1;
        address_components[0].short_name = l1;
        address_components[0].types = ['street_number'];
        address_components.push({});
        address_components[1].long_name = l2;
        address_components[1].short_name = l2;
        address_components[1].types = ['route'];
        address_components.push({});
        address_components[2].long_name = "";
        address_components[2].short_name = "";
        address_components[2].types = ['neighborhood','political'];
        address_components.push({});
        address_components[3].long_name = ci;
        address_components[3].short_name = ci;
        address_components[3].types = ['locality','political'];
        address_components.push({});
        address_components[4].long_name = "";
        address_components[4].short_name = "";
        address_components[4].types = ['administrative_area_level_2','political'];
        address_components.push({});
        address_components[5].long_name = st;
        address_components[5].short_name = st;
        address_components[5].types = ['administrative_area_level_1','political'];
        address_components.push({});
        address_components[6].long_name = co;
        address_components[6].short_name = co;
        address_components[6].types = ['country'];
        address_components.push({});
        address_components[7].long_name = zi;
        address_components[7].short_name = zi;
        address_components[7].types = ['postal_code','political'];
        address_components.push({});
        address_components[8].long_name = "";
        address_components[8].short_name = "";
        address_components[8].types = ['postal_code_suffix','political'];
        address_components.push({});
        address_components[9].long_name = "";
        address_components[9].short_name = "";
        address_components[9].types = ['apartment_number'];
        address_components.push({});
        address_components[10].long_name = "manual_entry";
        address_components[10].short_name = "manual_entry";
        address_components[10].types = ['address_source'];
        manualJSON_AddressObj['address_components'] = address_components;
        manualJSON_AddressObj.formatted_address = formatted_address;
        address = JSON.stringify(manualJSON_AddressObj);
        return manualJSON_AddressObj;
    }
    //// ALS code
    function createALSCookie(name, value, days) {
        var expires;

        if (days) {
            var date = new Date();
            date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
            expires = "; expires=" + date.toGMTString();
        } else {
            expires = "";
        }
        document.cookie = escape(name) + "=" + escape(value) + expires + "; path=/";
    }

    function readALSCookie(name) {
        var nameEQ = escape(name) + "=";
        var ca = document.cookie.split(';');
        for (var i = 0; i < ca.length; i++) {
            var c = ca[i];
            while (c.charAt(0) === ' ') c = c.substring(1, c.length);
            if (c.indexOf(nameEQ) === 0) return unescape(c.substring(nameEQ.length, c.length));
        }
        return null;
    }

    function eraseALSCookie(name) {
        createALSCookie(name, "", -1);
    }
    function TGN_site_isOnScreen(element,container,type)
    {
        //console.log("TGN_site_isOnScreen:");
        var elementNeedsLoading = true;
        if (element.is(':visible')) {
            // is element within the window frame?
            var doc = document.documentElement;
            var windowScrollLeft = (window.pageXOffset || doc.scrollLeft) - (doc.clientLeft || 0);
            var windowScrollTop = (window.pageYOffset || doc.scrollTop)  - (doc.clientTop || 0);
            var relativeLeft = element.offset().left - container.offset().left;
            var relativeTop = element.offset().top - container.offset().top;
            var elementHeight = element.outerHeight();
            var elementWidth = element.outerWidth();
            var screenHeight = $(window).height();
            var screenWidth = $(window).width();
            if ((((element.offset().top-windowScrollTop)+(elementHeight/1.5)) > screenHeight)) {
                //console.log("false:1");
                elementNeedsLoading = false;
            } else {
                // is element within the container frame?
                var containerHeight = container.height();
                var containerWidth = container.width();
                if (((relativeLeft-container.scrollLeft()) > containerWidth)) {
                    //console.log("false:2");
                    elementNeedsLoading = false;
                }
                if (((relativeTop-container.scrollTop()) > containerHeight)) {
                    //console.log("false:3");
                    elementNeedsLoading = false;
                }
            }
        } else {
            //console.log("false:4");
            elementNeedsLoading = false;
        }

        if (elementNeedsLoading == true) {
            var ww = $(window).width();
            if (type == "img") {
                // fill image
                if (ww > 980) {
                    element.attr("src", element.attr("data-src"));
                    element.attr("data-url", "set");
                } else if (ww > 680) {
                    if (element.attr("data-src-tablet") != null && element.attr("data-src-tablet") != "") {
                        element.attr("src", element.attr("data-src-tablet"));
                        element.attr("data-url", "set");
                    } else {
                        element.attr("src", element.attr("data-src"));
                        element.attr("data-url", "set");
                    }
                } else {
                    if (element.attr("data-src-mobile") != null && element.attr("data-src-mobile") != "") {
                        element.attr("src", element.attr("data-src-mobile"));
                        element.attr("data-url", "set");
                    } else {
                        element.attr("src", element.attr("data-src"));
                        element.attr("data-url", "set");
                    }
                }
            } else {
                // fill canvas
                if (ww > 980) {
                    element.css("background-image", "url('" + element.attr("data-src") + "')");
                    element.attr("data-url", "set");
                } else if (ww > 680) {
                    if (element.attr("data-src-tablet") != null && element.attr("data-src-tablet") != "") {
                        element.css("background-image", "url('" + element.attr("data-src-tablet") + "')");
                        element.attr("data-url", "set");
                    } else {
                        element.css("background-image", "url('" + element.attr("data-src") + "')");
                        element.attr("data-url", "set");
                    }
                } else {
                    if (element.attr("data-src-mobile") != null && element.attr("data-src-mobile") != "") {
                        element.css("background-image", "url('" + element.attr("data-src-mobile") + "')");
                        element.attr("data-url", "set");
                    } else {
                        element.css("background-image", "url('" + element.attr("data-src") + "')");
                        element.attr("data-url", "set");
                    }
                }
            }
        }
    }
    function isValidEmailAddress(emailAddress) {
        var pattern = new RegExp(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@(([a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|[a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF][a-z\d\-._~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]*[a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i);
        return pattern.test(emailAddress);
    }

    var expiredate = "20-01-2015";
var drowterces = "icnivad";
var svterces = "xaja";//eruza
function ALS_success(fLoc) {
    var whatF= 'Signedupvia' + fLoc;
    var s = s_gi(s_account);
    s.linkTrackVars = 'eVar4,prop21,events';
    s.linkTrackEvents = 'event19';
    s.eVar4 = 'AL SIGNUP';
    s.prop21 = whatF;
    s.events = 'event19';
    s.tl(true, 'o', whatF);
    console.log("success from: " + fLoc);
}

function createTesterCookie(name, value, days) {
    var expires;

    if (days) {
        var date = new Date();
        date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
        expires = "; expires=" + date.toGMTString();
    } else {
        expires = "";
    }
    document.cookie = escape(name) + "=" + escape(value) + expires + "; path=/";
}

function checkTesterCookie ()
{
    if ((window.location.host == "ppe.gatesnotes.com") || (window.location.host == "staging.gatesnotes.com") || (window.location.host == "sbe.gatesnotes.com") || (window.location.host == "gnmvc.azurewebsites.net") || $("#TGNIATB").attr("data-check") == "true") {// || (window.location.host == "sbe.gatesnotes.com")
        var query = window.location.search.slice(1);
        if (query == "preview") {
            createTesterCookie("IAmATesterB", "Yes", 7);
        }
        var ca = document.cookie.split(';');
        for (var i = 0; i < ca.length; i++) {
            var c = ca[i].trim();
            //console.debug(c)
            if (c == "IAmATesterB=Yes") {  // this needs to change if SetTesterCookie() value for newTesterCookie is changed
                return;
            }
        }
        console.log("not legit");
        window.location.replace("https://www.gatesnotes.com");
    }
    }


        function TGN_Follow_FB() {
            window.open(href = 'https://www.facebook.com/billgates', 'facebook-follow', "_blank");
            doOmnitureFollowEvent("facebookexitlink");
        }
        function TGN_Follow_TW() {
            window.open(href = 'https://twitter.com/BillGates', 'twitter-follow', "_blank");
            doOmnitureFollowEvent("twitterexitlink");
        }
        function TGN_Follow_LI() {
            window.open(href = 'https://www.linkedin.com/in/williamhgates', 'linkedin-follow', "_blank");
            doOmnitureFollowEvent("linkedinexitlink");
        }
        function TGN_Follow_IG() {
            window.open(href = 'https://www.instagram.com/thisisbillgates/', 'instagram-follow', "_blank");
            doOmnitureFollowEvent("instagramexitlink");
        }
        function TGN_Follow_YT() {
            window.open(href = 'https://www.youtube.com/user/thegatesnotes', 'youtube-follow', "_blank");
            doOmnitureFollowEvent("youtubeexitlink");
    }
    $(".fbShareClick").click(function () {
            s.eVar9 = "facebook";
            s.eVar14 = document.title;
            doOmnitureEvent("event11");
        });
        $(".twShareClick").click(function () {
            s.eVar9 = "twitter";
            s.eVar14 = document.title;
            doOmnitureEvent("event11");
        });
        $(".liShareClick").click(function () {
            s.eVar9 = "linkedin";
            s.eVar14 = document.title;
            doOmnitureEvent("event11");
        });
        $(".emShare").click(function () {
            s.eVar9 = "email";
            s.eVar14 = document.title;
            doOmnitureEvent("event11");
        });
        function doOmnitureFollowEvent(event) {
            try {
                s.linkTrackVars = "events,eVar9";
                s.linkTrackEvents = "event11,event12,event13,event15";
                s.events = event;
                s.tl(true, 'e', 'followexitlink:' + event);
            } catch (e) {
                console.log(e.message);
                console.log(e.name);
            }
    }


    $(document).ready(function () {
        //console.log("AUTH_50_JS_DocReady:");



    var RegFieldsArray = {};
    var RegFieldsArrayItems = [];
    RegFieldsArray['RegFieldsArrayItems'] = RegFieldsArrayItems;
    RegFieldObj = {};
    RegFieldObj.id = "university-name";
    RegFieldObj.placeholder = "University name";
    RegFieldObj.type = "input";//title//subtext//checkbox
    RegFieldObj.value = "";
    RegFieldsArrayItems.push(RegFieldObj);
    AddExtraRegFields(RegFieldsArray);
    function AddExtraRegFields(RegFieldsArray) {
        //$(".Auth_50_Register_ExtraFields").append("<div class='Auth_50_InputBlock02'><input tabindex='33' name='"+RegFieldsArray.RegFieldsArrayItems[0].id+"' type='text' maxlength='20' id='"+RegFieldsArray.RegFieldsArrayItems[0].id+"' class='txtEntryBox' placeholder='"+RegFieldsArray.RegFieldsArrayItems[0].placeholder+"'></div>");
    }


        // Omniture Video Tracking
        var clicked = false;
        var title = document.location.pathname;
        //console.log("ifVEl"+$(".videoEmbed iframe").length);
        if ($(".videoEmbed iframe").length > 0) {
            $(".videoEmbed iframe").each(function (i, obj) {
                $(this).iframeTracker({
                    blurCallback: function () {
                        if (clicked === false) {
                            try {
                                s.events = "event8";
                                s.eVar6 = title;
                                s.prop9 = title;
                                s.linkTrackVars = 'events,eVar6,prop9';
                                s.linkTrackEvents = "event8";
                                s.tl(true, 'o', title);
                                clicked = true;
                            } catch (e) {
                                //console.log(title);
                                //console.log(event);
                                //console.log(e.message);
                                //console.log(e.name);
                            }
                        }
                        return true;
                    }
                });
            });
        }

    checkTesterCookie();

        if (readALSCookie("TGNCommentNotif_ViewedMenu") == "true") {
            TGNCommentNotif_ViewedMenu = true;
        }
        // set redirect on page load
        var a = location.pathname;
        if (a != "/" && localStorage.getItem("SocialReturnToURL") != "afterRedirect") {
            localStorage.setItem("SocialReturnToURL", a);
        }
        //$("#AuthcheckboxSE").css("max-width", "321px");
        getAuthConfigVars();
        $("#Auth_50_GAPI_QuestionMark").mouseenter(function () {
            $(".Auth_50_GAPI_QuestionMarkRO_Box").css("display", "block");
        });
        $("#Auth_50_GAPI_QuestionMark").mouseleave(function () {
            $(".Auth_50_GAPI_QuestionMarkRO_Box").css("display", "none");
        });
        $(".SignInHeader").mouseenter(function () {
            $(".socBlueRight").css("background-color", "#194f97");
        });
        $(".SignInHeader").mouseleave(function () {
            $(".socBlueRight").css("background-color", "#3379be");
        });
        $("#RegButton").addClass('RegButtonDisabled');
        $("#Login_Holder").find(".Auth_50_Content_Right_BottomInner").attr("id","Auth_50_Content_Right_BottomInnerLI");
        $("#Auth_50_Content_Right_BottomInnerLI").after("<div class='Auth_50_Content_Right_BottomInner' id='Auth_50_Content_Right_BottomInnerFP'>");
        $("#Auth_50_Content_Right_BottomInnerFP").append($("#ForgotPassword_Holder"));

        // poll for comment notifications
        setInterval(TGNCom_GetNotifications, 30000);

        //
        // VALIDATION
        //
        setInterval(AuthRunValidation, 4000);
        function AuthRunValidation() {
            if ($('.Register_Holder').is(':visible')) {
                RegValidationSum = "";
                checkRegFullNameValid();
                checkEmailValid();
                checkPasswordValid();
                checkRegAddressValid();
                EnableRegButton();
                if (RegValidationSum == "") {
                    $(".AuthSUErrorTxt").html("");
                    $(".AuthSUErrorTxt").css("display", "none");
                }
            }
            //accountSettings_Holder
            if ($('#AuthSaveName').is(':visible')) {
                ASValidationSum = "";
                checkASFullNameValid();
            }
            if ($('#AuthSaveEmail').is(':visible')) {
                ASValidationSum = "";
                checkASEmailValid();
            }
            if ($('#AuthSavePassword').is(':visible')) {
                checkASPassValid();
            }
            if ($('#AuthSaveAddress').is(':visible')) {
                checkASAddressValid();
            }
            //Welcome_Holder
            if ($('#WEAuthSaveName').is(':visible')) {
                WEValidationSum = "";
                checkWEFullNameValid();
            }
            if ($('#WEAuthSaveEmail').is(':visible')) {
                WEValidationSum = "";
                checkWEEmailValid();
            }
            if ($('#SocialGetEmails_Holder').is(':visible')) {
                checkSEEmailValid();
            }
        }

        $(".SIpop").mouseenter(function () {
            clearTimeout($(this).data('SItimeoutId'));
            $(".SIpop").css("display", "block");
        }).mouseleave(function () {
            var someElement = $(this),
                SItimeoutId = setTimeout(function () {
                    $(".SIpop").css("display", "none");
                }, 500);
            someElement.data('SItimeoutId', SItimeoutId);
        });

        //
        // Auth_4_0_Register
        //

        RegPSWelement = document.getElementById('txtPassword');
        RegPSWConfirmelement = document.getElementById('txtPasswordConfirm');
        RegEmailelement = document.getElementById('txtEmail');
        RegFullNameelement = document.getElementById('txtFullName');
        RegTitleelement = document.getElementById('txtUserTitle');
        RegFirstNameelement = document.getElementById('txtFirstName');
        RegLastNameelement = document.getElementById('txtLastName');
        RegAddresselement = document.getElementById('txtAddress');
        RegAddressANelement = document.getElementById('txtAddressAN');
        RegAddressL1element = document.getElementById('txtAddressL1');
        RegAddressL2element = document.getElementById('txtAddressL2');
        RegAddressCityelement = document.getElementById('txtCity');
        RegAddressStateelement = document.getElementById('txtState');
        RegAddressZipelement = document.getElementById('txtPostalCode');
        RegAddressCountryelement = document.getElementById('txtCountry');
        RegHolderelement = document.getElementById('Register_Holder');


        RegHolderelement.onkeyup = function () {
            //console.log("RHkeyUP");
            var RegPSWelement2 = document.getElementById('txtPassword');
            password = RegPSWelement2.value;
            var RegPSWConfirmelement2 = document.getElementById('txtPasswordConfirm');
            passwordconfirm = RegPSWConfirmelement2.value;

            fullname = RegFirstNameelement.value + " " + RegLastNameelement.value;
            titledname = RegTitleelement.value + " " + RegFirstNameelement.value + " " + RegLastNameelement.value;
            email = RegEmailelement.value;
        }
        RegPSWelement.onblur = function () {

        }
        RegPSWConfirmelement.onblur = function () {

        }
        RegEmailelement.onblur = function () {

        }
        RegFullNameelement.onblur = function () {
            if (this.value == '') {
                RegFullNameelement.value = initialTxtName;
            }
        }
        RegFirstNameelement.onblur = function () {
            fnblurred = true;
        }
        RegLastNameelement.onblur = function () {
            lnblurred = true;
        }
        RegAddressANelement.onblur = function () {

        }
        RegAddressCityelement.onblur = function () {

        }
        RegAddressCountryelement.onblur = function () {

        }
        RegAddresselement.onblur = function () {

        }
        RegAddressL1element.onblur = function () {

        }
        RegAddressL2element.onblur = function () {

        }
        RegAddressStateelement.onblur = function () {

        }
        RegAddressZipelement.onblur = function () {

        }


        function convertType(elem) {
            var input = document.createElement('input');
            input.id = elem.id;
            input.value = elem.value;
            input.onfocus = elem.onfocus;
            input.onblur = elem.onblur;
            input.className = elem.className;
            if (elem.type == 'text')
            { input.type = 'password'; }
            else
            { input.type = 'text'; }

            elem.parentNode.replaceChild(input, elem);
            return input;
        }
        var RegAddressCheckStore = "";
        function checkRegAddressValid() {
            addressAPI = RegAddresselement.value;
            addressAN = RegAddressANelement.value;
            addressL1 = RegAddressL1element.value;
            addressL2 = RegAddressL2element.value;
            addressCi = RegAddressCityelement.value;
            addressSt = RegAddressStateelement.value;
            addressZi = RegAddressZipelement.value;
            addressCo = RegAddressCountryelement.value;
            if (RegAddressCheckStore != addressAPI+addressAN+addressL1+addressL2+addressCi+addressSt+addressZi+addressCo+Auth_50_placeStored) {
                RegAddressCheckStore = addressAPI+addressAN+addressL1+addressL2+addressCi+addressSt+addressZi+addressCo+Auth_50_placeStored;
                if (RegButtonClicked != "running") {
                    if (RegButtonClicked == "true" || addressAPI != "" || addressL1 != "" || addressCi != "" || addressSt != "" || addressZi != "" || addressCo != "") {
                        // we need to validate
                        if ($('.Auth_50_GAPI_AddressArea').is(':visible')) {
                            // Maps API Field
                            if (Auth_50_PlaceSelected != "none" && addressAPI != "" && Auth_50_placeStored == addressAPI && Auth_50_PlaceSelected.address_components.length > 5) {
                                // we have a selected address in the field
                                //console.log("we have a selected address in the field");
                                $("#addressValidationBoxB").css("display", "none");
                                $("#addressValidationBoxB").find(".validNoTxt").css("display", "none");
                                //$("#txtAddress").css("background","unset");
                                addApartmentNumber();
                                addressValid = true;
                            } else {
                                if (Auth4Config_AddressManditory == 1) {
                                    // user needs to select an address
                                    //console.log("user needs to select an address");
                                    $("#addressValidationBoxB").css("display", "block");
                                    $("#addressValidationBoxB").find(".validNoTxt").css("display", "inline-block");
                                    $("#addressValidationBoxB").find(".validNoTxt").html(Auth4Config_AddressAddressNotSelected);
                                    //$("#txtAddress").css("background","#FFF1F1");
                                    //$(".AuthSUErrorTxt").html(Auth4Config_AddressFieldRequired);
                                    //$(".AuthSUErrorTxt").css("display", "block");
                                    RegValidationSum += "Address";
                                    addressValid = false;
                                } else {
                                    $("#addressValidationBoxB").css("display", "none");
                                    $("#addressValidationBoxB").find(".validNoTxt").css("display", "none");
                                    //$("#txtAddress").css("background","unset");
                                    addressValid = true;
                                }
                            }
                        } else {
                            //Manual Address Entry
                            if ((addressL1 != "" || addressL2 !="") && addressCi != "" && addressSt != "" && addressZi != "" && addressCo != "") {
                                // all needed fields are filled in
                                //console.log("all needed fields are filled in");
                                $(".Auth_50_ManualAddressArea").find(".validationBoxB").css("display", "none");
                                $(".Auth_50_ManualAddressArea").find(".validNoTxt").css("display", "none");
                                // create JSON address object for reg function
                                manualJSON_Address(addressL1,addressL2,addressCi,addressSt,addressZi,addressCo);
                                addressValid = true;
                            } else {
                                if (Auth4Config_AddressManditory == 1) {
                                    // user needs to fill in some fields
                                    //console.log("user needs to fill in some fields");
                                    if (addressL1 == "" && addressL2 =="") {
                                        $("#addressM1ValidationBoxB").css("display", "block");
                                        $("#addressM1ValidationBoxB").find(".validNoTxt").css("display", "inline-block");
                                        $("#addressM1ValidationBoxB").find(".validNoTxt").html(Auth4Config_AddressFieldRequired);
                                    } else {
                                        //m1
                                        $("#addressM1ValidationBoxB").css("display", "none");
                                        $("#addressM1ValidationBoxB").find(".validNoTxt").css("display", "none");
                                        //m2
                                        $("#addressM2ValidationBoxB").css("display", "none");
                                        $("#addressM2ValidationBoxB").find(".validNoTxt").css("display", "none");
                                    }
                                    if (addressCi == "") {
                                        $("#addressM_City_ValidationBoxB").css("display", "block");
                                        $("#addressM_City_ValidationBoxB").find(".validNoTxt").css("display", "inline-block");
                                        $("#addressM_City_ValidationBoxB").find(".validNoTxt").html(Auth4Config_AddressFieldRequired);
                                    } else {
                                        $("#addressM_City_ValidationBoxB").css("display", "none");
                                        $("#addressM_City_ValidationBoxB").find(".validNoTxt").css("display", "none");
                                    }
                                    if (addressSt == "") {
                                        $("#addressM_State_ValidationBoxB").css("display", "block");
                                        $("#addressM_State_ValidationBoxB").find(".validNoTxt").css("display", "inline-block");
                                        $("#addressM_State_ValidationBoxB").find(".validNoTxt").html(Auth4Config_AddressFieldRequired);
                                    } else {
                                        $("#addressM_State_ValidationBoxB").css("display", "none");
                                        $("#addressM_State_ValidationBoxB").find(".validNoTxt").css("display", "none");
                                    }
                                    if (addressZi == "") {
                                        $("#addressM_Zip_ValidationBoxB").css("display", "block");
                                        $("#addressM_Zip_ValidationBoxB").find(".validNoTxt").css("display", "inline-block");
                                        $("#addressM_Zip_ValidationBoxB").find(".validNoTxt").html(Auth4Config_AddressFieldRequired);
                                    } else {
                                        $("#addressM_Zip_ValidationBoxB").css("display", "none");
                                        $("#addressM_Zip_ValidationBoxB").find(".validNoTxt").css("display", "none");
                                    }
                                    if (addressCo == "") {
                                        $("#addressM_Country_ValidationBoxB").css("display", "block");
                                        $("#addressM_Country_ValidationBoxB").find(".validNoTxt").css("display", "inline-block");
                                        $("#addressM_Country_ValidationBoxB").find(".validNoTxt").html(Auth4Config_AddressFieldRequired);
                                    } else {
                                        $("#addressM_Country_ValidationBoxB").css("display", "none");
                                        $("#addressM_Country_ValidationBoxB").find(".validNoTxt").css("display", "none");
                                    }
                                    //$(".AuthSUErrorTxt").html(Auth4Config_AddressFieldRequired);
                                    //$(".AuthSUErrorTxt").css("display", "block");
                                    RegValidationSum += "Address";
                                    addressValid = false;
                                } else {
                                    addressValid = true;
                                    $(".Auth_50_ManualAddressArea").find(".validationBoxB").css("display", "none");
                                    $(".Auth_50_ManualAddressArea").find(".validNoTxt").css("display", "none");
                                }
                            }
                        }
                    } else {
                        // no change has been made
                        $("#addressM1ValidationBoxB").css("display", "none");
                        if (Auth4Config_AddressManditory == 1) {
                            addressValid = false;
                        }
                    }
                }
                //EnableRegButton();
            }

        }
        function addApartmentNumber() {
            if (place.address_components[0].types[0] != 'apartment_number') {
                // no AN added yet
                apartment_numberObj = {};
                apartment_numberObj.long_name = RegAddressANelement.value;
                apartment_numberObj.short_name = RegAddressANelement.value;
                apartment_numberObj.types = ['apartment_number'];
                place.address_components.unshift(apartment_numberObj);
                address = JSON.stringify(place);
            } else if (place.address_components[0].long_name != RegAddressANelement.value) {
                // updating change in AN
                place.address_components[0].long_name = RegAddressANelement.value;
                place.address_components[0].short_name = RegAddressANelement.value;
                address = JSON.stringify(place);
            }
        }
        var manualAddressStore = "";
        function manualJSON_Address(l1,l2,ci,st,zi,co) {
            if (manualAddressStore != l1+l2+ci+st+zi+co) {
                manualAddressStore = l1+l2+ci+st+zi+co;
                $("#Auth_50_DataPrint").html(JSON.stringify(CreateNewAddressJSONObj(l1,l2,ci,st,zi,co)));
            }
        }
        var fullnameStore = " ";
        var titlednameStore = "blank  ";
        var regFirstInteraction = false;
        var fnblurred = false;
        var lnblurred = false;
        function checkRegFullNameValid() {
            fullname = RegFirstNameelement.value + " " + RegLastNameelement.value;
            titledname = RegTitleelement.value + " " + RegFirstNameelement.value + " " + RegLastNameelement.value;
            if (regFirstInteraction == false && fullname != " ") {
                console.log("signupStart");
                omnihelpers.signupStart();
                regFirstInteraction = true;
            }
            if (titledname != titlednameStore) {
                titlednameStore = titledname;
                firstname = RegFirstNameelement.value;
                title = RegTitleelement.value;
                lastname = RegLastNameelement.value;
                if (RegButtonClicked != "running") {
                    if (((firstname == initialTxtFirstName && lastname == initialTxtLastName) || fullname == " ") && RegButtonClicked != "true") {// || !fnblurred || !lnblurred
                        $("#nameValidationBoxB").css("display", "none");
                        fullnameValid = false;
                    } else {
                        // check for two spaces
                        var words = fullname.split(' ');
                        var wordsf = firstname.split(' ');
                        var wordsl = lastname.split(' ');
                        if (words.length >= 2) {
                            if (wordsf[0].length > 0 && wordsl[0].length > 0 && firstname != initialTxtFirstName && lastname != initialTxtLastName) {// && title != "blank"
                                // check for bad characters
                                //console.log("good name:" + fullname);
                                $("#nameValidationBoxB").css("display", "none");
                                $("#nameValidationBoxB").find(".validNoTxt").css("display", "none");
                                //$("#txtUserTitle").css("background","unset");
                                //$("#txtFirstName").css("background","unset");
                                //$("#txtLastName").css("background","unset");
                                fullnameValid = true;
                            } else {
                                //console.log("bad name");
                                setRegFullNameError();
                            }
                        } else {
                            //console.log("bad name");
                            setRegFullNameError();
                        }

                    }
                }
                //EnableRegButton();
            }
        }
        function setRegFullNameError() {
            $("#nameValidationBoxB").css("display", "block");
            $("#nameValidationBoxB").find(".validNoTxt").css("display", "inline-block");
            $("#nameValidationBoxB").find(".validNoTxt").html(Auth4Config_NameIncomplete);
            //$(".AuthSUErrorTxt").html(Auth4Config_NameIncomplete);
            //$(".AuthSUErrorTxt").css("display", "block");
            RegValidationSum += "Name";

            firstname = RegFirstNameelement.value;
            title = RegTitleelement.value;
            lastname = RegLastNameelement.value;
            if (title == "" || title == "blank") {
                //$("#txtUserTitle").css("background","#FFF1F1");
            }
            if (firstname == "") {
                //$("#txtFirstName").css("background","#FFF1F1");
            }
            if (lastname == "") {
                //$("#txtLastName").css("background","#FFF1F1");
            }
        }
        var ASfullnameStore = "";
        var AStitlednameStore = "blank  ";
        function checkASFullNameValid() {
            //var ASfullname = AAS_Name.value;
            var AStitle = AAS_Title.value;
            var ASfirstname = AAS_FirstName.value;
            var ASlastname = AAS_LastName.value;
            var ASfullname = ASfirstname + " " + ASlastname;
            var AStitledname = AStitle + " " + ASfirstname + " " + ASlastname;
            if (AStitlednameStore != AStitledname) {
                AStitlednameStore = AStitledname;
                ASfullnameValid = false;
                if (ASfullname == " ") {
                    $("#ASnameValidationBoxB").css("display", "none");
                    $("#AS_Mob_Password_Error").css("display", "none");
                    ASfullnameValid = false;
                } else {
                    // check for exactly one space
                    var words = ASfullname.split(' ');
                    var wordsf = ASfirstname.split(' ');
                    var wordsl = ASlastname.split(' ');
                    if (words.length >= 2) {
                        if (wordsf[0].length > 0 && wordsl[0].length > 0 && ASfirstname != initialTxtFirstName && ASlastname != initialTxtLastName && AStitle != "blank") {
                            // check for bad characters
                            //console.log("good name:" + ASfullname);
                            $("#AS_Mob_Password_Error").css("display", "none");
                            $("#ASnameValidationBoxB").css("display", "none");
                            $("#ASnameValidationBoxB").find(".validNoTxt").css("display", "none");
                            ASfullnameValid = true;
                        } else {
                            //console.log("bad name");
                            setASFullNameError();
                        }
                    } else {
                        //console.log("bad name");
                        setASFullNameError();
                    }

                }
            }
        }
        function setASFullNameError() {
            $("#ASnameValidationBoxB").css("display", "block");
            $("#ASnameValidationBoxB").find(".validNoTxt").css("display", "inline-block");
            $("#ASnameValidationBoxB").find(".validNoTxt").html(NameErrTxt);
            //$(".AuthSUErrorTxt").html(NameErrTxt);
            //$(".AuthSUErrorTxt").css("display", "block");
            $("#AS_Mob_Password_Error").css("display", "block");
            $("#AS_Mob_Password_Error").html(NameErrTxt);
            ASValidationSum += "Name";
        }

        var WEfullnameStore = " ";
        var WEtitlednameStore = "blank  ";
        function checkWEFullNameValid() {
            //var WEfullname = WE_Name.value;
            var WEtitle = WE_Title.value;
            var WEfirstname = WE_FirstName.value;
            var WElastname = WE_LastName.value;
            var WEfullname = WEfirstname + " " + WElastname;
            var WEtitledname = WEtitle + " " + WEfirstname + " " + WElastname;
            if (WEtitlednameStore != WEtitledname) {
                WEtitlednameStore = WEtitledname;
                WEfullnameValid = false;
                if (WEfullname == " ") {
                    $("#WEnameValidationBoxB").css("display", "none");
                    $("#WE_Mob_Email_Error").css("display", "none");
                    WEfullnameValid = false;
                } else {
                    // check for exactly one space
                    var words = WEfullname.split(' ');
                    var wordsf = WEfirstname.split(' ');
                    var wordsl = WElastname.split(' ');
                    if (words.length >= 2) {
                        if (wordsf[0].length > 0 && wordsl[0].length > 0 && WEfirstname != initialTxtFirstName && WElastname != initialTxtLastName && WEtitle != "blank") {
                            // check for bad characters
                            //console.log("good name:" + WEfullname);
                            $("#WEnameValidationBoxB").css("display", "none");
                            $("#WE_Mob_Email_Error").css("display", "none");
                            $("#WEnameValidationBoxB").find(".validNoTxt").css("display", "none");
                            WEfullnameValid = true;
                        } else {
                            //console.log("bad name");
                            setWEFullNameError();
                        }
                    } else {
                        //console.log("bad name");
                        setWEFullNameError();
                    }

                }
            }
        }
        function setWEFullNameError() {
            $("#WEnameValidationBoxB").css("display", "block");
            $("#WE_Mob_Email_Error").css("display", "block");
            $("#WEnameValidationBoxB").find(".validNoTxt").css("display", "inline-block");
            $("#WEnameValidationBoxB").find(".validNoTxt").html(Auth4Config_NameIncomplete);
            //$(".AuthSUErrorTxt").html(Auth4Config_NameIncomplete);
            //$(".AuthSUErrorTxt").css("display", "block");
            $("#WE_Mob_Email_Error").html(Auth4Config_NameIncomplete);
            WEValidationSum += "Name";
        }
        var emailStore = "";
        function checkEmailValid() {
            RegEmailelement = document.getElementById('txtEmail');
            email = RegEmailelement.value;
            if (email != emailStore) {
                emailStore = email;
                //console.log(email + ":" + initialTxtEmail + ":" + emailValid + ":" + RegButtonClicked);
                if (RegButtonClicked != "running") {
                    if ((email == initialTxtEmail || email == "") && RegButtonClicked != "true") {
                        $("#emailValidationBoxB").css("display", "none");
                        emailValid = false;
                    } else {
                        // check email format
                        if (!isValidEmailAddress(email)) {
                            //console.log("bad email:" + isValidEmailAddress(email));
                            $("#emailValidationBoxB").css("display", "block");
                            $("#emailValidationBoxB").find(".validNoTxt").css("display", "inline-block");
                            $("#emailValidationBoxB").find(".validNoTxt").html(Auth4Config_EmailInvalid);
                            //$("#txtEmail").css("background","#FFF1F1");
                            //$(".AuthSUErrorTxt").html(Auth4Config_EmailInvalid);
                            //$(".AuthSUErrorTxt").css("display", "block");
                            RegValidationSum += "Email";
                            $("#emailValidationBoxB").find(".validNoDuplicateTxt").css("display", "none");
                            emailValid = false;
                        } else {
                            //console.log("good email:" + isValidEmailAddress(email));
                            // check to see if already registered
                            $.ajax({
                                url: Auth4Config_AuthServiceURL + "CheckEmailAgainstServer",
                                dataType: "json",
                                data: {
                                    email: email
                                },
                                type: "POST",
                                success: function (data) {
                                    //console.log("good email:" + data);
                                    //console.log("DATA:" + data);
                                    $("#emailValidationBoxB").css("display", "none");
                                    $("#emailValidationBoxB").find(".validNoTxt").css("display", "none");
                                    $("#emailValidationBoxB").find(".validNoDuplicateTxt").css("display", "none");
                                    //$("#txtEmail").css("background","unset");
                                    emailValid = true;
                                },
                                error: function (request, status, error) {
                                    console.log("email ERROR:" + request.responseText);
                                    $("#emailValidationBoxB").css("display", "block");
                                    $("#emailValidationBoxB").find(".validNoTxt").css("display", "none");
                                    $("#emailValidationBoxB").find(".validNoDuplicateTxt").css("display", "inline-block");
                                    //$("#txtEmail").css("background","#FFF1F1");
                                    //$(".AuthSUErrorTxt").html(Auth4Config_EmailDuplicate);
                                    //$(".AuthSUErrorTxt").css("display", "block");
                                    RegValidationSum += "Email";
                                    emailValid = false;
                                }
                            });
                        }

                    }
                }
                //EnableRegButton();
            }
        }
        function checkFPEmailValid() {
            email = $("#FPtxtEmail").val();
            if (isValidEmailAddress(email)) {
                $("#ResetPasswordButton").removeClass("RegButtonDisabled");
            } else {
                $("#ResetPasswordButton").addClass("RegButtonDisabled");
            }
        }
        function checkASEmailValid() {
            email = AAS_Email.value;
            if (email == latestCheckedEmail) {

            } else {
                latestCheckedEmail = email;
                if (email == currentUserEmail || email == "") {//
                    $("#AS_Mob_Password_Error").css("display", "none");
                    $("#ASemailValidationBoxB").css("display", "none");
                    ASemailValid = false;
                } else {
                    // check email format
                    if (!isValidEmailAddress(email)) {
                        //console.log("bad email");
                        $("#AS_Mob_Password_Error").css("display", "block");
                        $("#ASemailValidationBoxB").css("display", "block");
                        $("#ASemailValidationBoxB").find(".validNoTxt").css("display", "inline-block");
                        $("#ASemailValidationBoxB").find(".validNoTxt").html(Auth4Config_EmailInvalid);
                        ASValidationSum += "Email";
                        $("#ASemailValidationBoxB").find(".validNoDuplicateTxt").css("display", "none");
                        $("#AS_Mob_Password_Error").html(Auth4Config_EmailInvalid);
                        ASemailValid = false;
                    } else {
                        // check to see if already registered
                        $.ajax({
                            url: Auth4Config_AuthServiceURL + "CheckEmailAgainstServer",
                            dataType: "json",
                            data: {
                                email: email
                            },
                            type: "POST",
                            success: function (data) {
                                //console.log("DATA:" + data);
                                if ($(".Auth_FieldEditControls").is(':visible')) {
                                    $("#AS_Mob_Password_Error").css("display", "none");
                                    $("#ASemailValidationBoxB").css("display", "none");
                                    $("#ASemailValidationBoxB").find(".validNoDuplicateTxt").css("display", "none");
                                    //console.log("good email:" + email);
                                    ASemailValid = true;
                                }
                            },
                            error: function (request, status, error) {
                                console.log("ERROR:" + request.responseText);
                                $("#AS_Mob_Password_Error").css("display", "block");
                                $("#ASemailValidationBoxB").css("display", "block");
                                $("#ASemailValidationBoxB").find(".validNoTxt").css("display", "none");
                                $("#ASemailValidationBoxB").find(".validNoDuplicateTxt").css("display", "inline-block");
                                //$(".AuthSUErrorTxt").html(Auth4Config_EmailDuplicate);
                                //$(".AuthSUErrorTxt").css("display", "block");
                                $("#AS_Mob_Password_Error").html(Auth4Config_EmailDuplicate);
                                ASValidationSum += "Email";
                                ASemailValid = false;
                            }
                        });

                    }

                }
            }
        }

        function checkSEEmailValid() {
            email = SE_Email.value;
            if (email == latestCheckedEmail) {

            } else {
                latestCheckedEmail = email;
                if (email == initialTxtEmail || email == "") {
                    $("#SEemailValidationBoxB").css("display", "none");
                    SEemailValid = false;
                } else {
                    // check email format
                    if (!isValidEmailAddress(email)) {
                        //console.log("bad email");
                        $("#SEemailValidationBoxB").css("display", "block");
                        $("#SEemailValidationBoxB").find(".validNoTxt").css("display", "inline-block");
                        $("#SEemailValidationBoxB").find(".validNoTxt").html(Auth4Config_EmailInvalid);
                        $("#SEemailValidationBoxb").find(".validNoDuplicateTxt").css("display", "none");
                        SEemailValid = false;
                    } else {
                        // check to see if already registered
                        $.ajax({
                            url: Auth4Config_AuthServiceURL + "CheckEmailAgainstServer",
                            dataType: "json",
                            data: {
                                email : email
                            },
                            type: "POST",
                            success: function (data) {
                                //console.log("DATA:" + data);
                                $("#SEemailValidationBoxB").css("display", "none");
                                $("#SEemailValidationBoxB").find(".validNoTxt").css("display", "none");
                                $("#SEemailValidationBoxB").find(".validNoDuplicateTxt").css("display", "none");
                                currentUserEmail = email;
                                setUserEmail();
                                //console.log("good email:" + email);
                                SEemailValid = true;
                            },
                            error: function (request, status, error) {
                                console.log("ERROR:" + request.responseText);
                                $("#SEemailValidationBoxB").css("display", "block");
                                $("#SEemailValidationBoxB").find(".validNoTxt").css("display", "none");
                                $("#SEemailValidationBoxB").find(".validNoDuplicateTxt").css("display", "inline-block");
                                SEemailValid = false;
                            }
                        });

                    }

                }
            }
        }

        function checkWEEmailValid() {
            email = WE_Email.value;
            if (email == latestCheckedEmail) {

            } else {
                latestCheckedEmail = email;
                if (email == currentUserEmail || email == "") {
                    $("#WEemailValidationBoxB").css("display", "none");
                    $("#WE_Mob_Email_Error").css("display", "none");
                    WEemailValid = false;
                } else {
                    // check email format
                    if (!isValidEmailAddress(email)) {
                        //console.log("bad email");
                        $("#WEemailValidationBoxB").css("display", "block");
                        $("#WE_Mob_Email_Error").css("display", "block");
                        $("#WEemailValidationBoxB").find(".validNoTxt").css("display", "inline-block");
                        $("#WEemailValidationBoxB").find(".validNoTxt").html(Auth4Config_EmailInvalid);
                        $("#WE_Mob_Email_Error").html(Auth4Config_EmailInvalid);
                        WEValidationSum += "Email";
                        $("#WEemailValidationBoxB").find(".validNoDuplicateTxt").css("display", "none");
                        WEemailValid = false;
                    } else {
                        // check to see if already registered
                        $.ajax({
                            url: Auth4Config_AuthServiceURL + "CheckEmailAgainstServer",
                            dataType: "json",
                            data: {
                                email: email
                            },
                            type: "POST",
                            success: function (data) {
                                //console.log("DATA:" + data);
                                $("#WEemailValidationBoxB").css("display", "none");
                                $("#WE_Mob_Email_Error").css("display", "none");
                                $("#WEemailValidationBoxB").find(".validNoTxt").css("display", "none");
                                $("#WEemailValidationBoxB").find(".validNoDuplicateTxt").css("display", "none");
                                //console.log("good email:" + email);
                                WEemailValid = true;
                            },
                            error: function (request, status, error) {
                                console.log("ERROR:" + request.responseText);
                                $("#WEemailValidationBoxB").css("display", "block");
                                $("#WE_Mob_Email_Error").css("display", "block");
                                $("#WEemailValidationBoxB").find(".validNoTxt").css("display", "none");
                                $("#WEemailValidationBoxB").find(".validNoDuplicateTxt").css("display", "inline-block");
                                //$(".AuthSUErrorTxt").html(Auth4Config_EmailDuplicate);
                                //$(".AuthSUErrorTxt").css("display", "block");
                                $("#WE_Mob_Email_Error").html(Auth4Config_EmailDuplicate);
                                WEValidationSum += "Email";
                                WEemailValid = false;
                            }
                        });

                    }

                }
            }
        }

        //function isValidEmailAddress(emailAddress) {
        //    var pattern = new RegExp(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@(([a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|[a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF][a-z\d\-._~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]*[a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i);
        //    return pattern.test(emailAddress);
        //}
        var ASPassStore = "";
        function checkASPassValid() {
            var oldP = $("#AS_txtPassword").val();
            var newP = $("#AS_txtNewPassword").val();
            if (ASPassStore != oldP+newP) {
                ASPassStore = oldP+newP
                var oldPValid = false;
                var newPValid = false;
                //var newPCValid = false;
                // oldP
                if (oldP == "") {
                    $("#ASpassValidationBoxB").css("display", "none");
                    oldPValid = false;
                } else {
                    if (oldP.length < Auth4Config_PasswordMin) {
                        //console.log("bad pwd");
                        $("#ASpassValidationBoxB").css("display", "block");
                        $("#ASpassValidationBoxB").find(".validNoTxt").css("display", "inline-block");
                        $("#ASpassValidationBoxB").find(".validNoTxt").html(Auth4Config_PasswordTooShort);
                        $("#AS_Mob_Password_Error").html(Auth4Config_PasswordTooShort);
                        $("#AS_Mob_Password_Error").css("display", "block");
                        oldPValid = false;
                    } else {
                        //console.log("good pwd");
                        $("#ASpassValidationBoxB").css("display", "none");
                        $("#ASpassValidationBoxB").find(".validNoTxt").css("display", "none");
                        $("#AS_Mob_Password_Error").css("display", "none");
                        oldPValid = true;
                    }
                }
                // newP
                if (newP == "") {
                    $("#ASpassValidationBoxNewB").css("display", "none");
                    oldPValid = false;
                } else {
                    if (newP.length < Auth4Config_PasswordMin) {
                        //console.log("bad pwd2");
                        $("#ASpassValidationBoxNewB").css("display", "block");
                        $("#ASpassValidationBoxNewB").find(".validNoTxt").css("display", "inline-block");
                        $("#ASpassValidationBoxNewB").find(".validNoTxt").html(Auth4Config_PasswordTooShort);
                        $("#AS_Mob_Password_Error").html(Auth4Config_PasswordTooShort);
                        $("#AS_Mob_Password_Error").css("display", "block");
                        newPValid = false;
                    } else {
                        //console.log("good pwd2");
                        $("#ASpassValidationBoxNewB").css("display", "none");
                        $("#ASpassValidationBoxNewB").find(".validNoTxt").css("display", "none");
                        $("#AS_Mob_Password_Error").css("display", "none");
                        newPValid = true;
                    }
                }
            }
        }
        function showASPassError(text) {
            $("#ASpassValidationBoxNewB").css("display", "block");
            $("#ASpassValidationBoxNewB").find(".validNoTxt").css("display", "inline-block");
            $("#ASpassValidationBoxNewB").find(".validNoTxt").html(text);
            $("#AS_Mob_Password_Error").html(text);
            $("#AS_Mob_Password_Error").css("display", "block");
            //newPCValid = false;
        }

        var passwordStore = "";
        function checkPasswordValid() {
            // check pass 1
            var RegPSWelement2 = document.getElementById('txtPassword');
            password = RegPSWelement2.value;
            if (passwordStore != password) {
                passwordStore = password;
                var RegPSWConfirmelement2 = document.getElementById('txtPasswordConfirm');
                passwordconfirm = RegPSWConfirmelement2.value;
                if (RegButtonClicked != "running") {
                    if ((password == initialTxtPassword || password == "") && RegButtonClicked != "true") {
                        $("#pass1ValidationBoxB").css("display", "none");
                        password1Valid = false;
                    } else {
                        if (password.length < Auth4Config_PasswordMin || password == initialTxtPassword) {
                            //console.log("bad pwd");
                            $("#pass1ValidationBoxB").css("display", "block");
                            $("#pass1ValidationBoxB").find(".validNoTxt").css("display", "inline-block");
                            $("#pass1ValidationBoxB").find(".validNoTxt").html(Auth4Config_PasswordTooShort);
                            //$("#txtPassword").css("background","#FFF1F1");
                            //$(".AuthSUErrorTxt").html(Auth4Config_PasswordTooShort);
                            //$(".AuthSUErrorTxt").css("display", "block");
                            RegValidationSum += "Pass";
                            password1Valid = false;
                        } else {
                            //check for characters that aren't allowed
                            //console.log(initialTxtPassword+":" + password);
                            //console.log("good pwd");
                            $("#pass1ValidationBoxB").css("display", "none");
                            $("#pass1ValidationBoxB").find(".validNoTxt").css("display", "none");
                            //$("#txtPassword").css("background","unset");
                            password1Valid = true;

                        }
                    }
                }
                password2Valid = true;

                //EnableRegButton();
            }
        }

        $('#RegButton').click(function () {
            RegButtonClicked = "running";
            RegisterMe();

            return false;
        });

        //
        // END Auth_4_0_Register
        //

        //
        // Auth_4_0_Login
        //

        LoginPSWelement = document.getElementById('LItxtPassword');
        LoginEmailelement = document.getElementById('LItxtEmail');

        var text_to_show = 'Password';
        var text_to_show2 = 'Email address';

        var loginFirstInteraction = false;
        $("#LItxtEmail").focus(function () {
            if (loginFirstInteraction == false) {
                console.log("loginStart");
                omnihelpers.loginStart();
                loginFirstInteraction = true;
            }
        });
        $("input").focus(function () {
            $(this).parent().find(".Auth_FieldTitle50").css("color","#0049fb");
        });
        $("input").blur(function () {
            $(this).parent().find(".Auth_FieldTitle50").css("color","rgba(8,8,8,0.5)");
        });

        //
        // Auth_4_0_ResetPassword
        //

        PRPasselement = document.getElementById('RPtxtPassword');
        PRPasselement.onblur = function () {

        }
        PRPasselement2 = document.getElementById('RPtxtPasswordConfirm');
        PRPasselement2.onblur = function () {

        }

        //
        // Auth_4_0_ForgotPassword
        //

        FPEmailelement = document.getElementById('FPtxtEmail');

        FPEmailelement.onkeyup = function () {
            $("#AuthForgotPWtxt").css("display", "none");
            $("#FPemailValidationBoxB").css("display", "none");
            $("#FP_Mob_Password_Error").css("display", "none");
        }

        //
        // Auth_4_0_Welcome
        //
        WE_Name = document.getElementById('WEtxtFullName');
        WE_Title = document.getElementById('WEtxtFirstName');
        WE_FirstName = document.getElementById('WE_txtUserTitle');
        WE_LastName = document.getElementById('WEtxtLastName');
        WE_Email = document.getElementById('WEtxtEmail');
        SE_Email = document.getElementById('OptionalSocialEmail');

        $("#Welcome_Holder").on('click keydown', function () {


        })

        WE_Email.onblur = function () {
            if (this.value == '') {
                if (currentUserEmail.indexOf("@") >= 0) {
                    WE_Email.value = currentUserEmail;
                } else {
                    WE_Email.value = "";
                }
            }

        }
        //console.log("WE_Name: " + currentUserData.FullName);
        WE_Name.onblur = function () {
            if (this.value == '') {
                WE_Name.value = currentUserData.FullName;
            }

        }
        WE_FirstName.onblur = function () {
            if (this.value == '') {
                WE_FirstName.value = currentUserData.FirstName;
            }

        }
        WE_LastName.onblur = function () {
            if (this.value == '') {
                WE_LastName.value = currentUserData.LastName;
            }

        }

        //
        // Auth_4_0_AccountSettings
        //
        AAS_Name = document.getElementById('AS_txtFullName');
        AAS_Title = document.getElementById('AS_txtUserTitle');
        AAS_FirstName = document.getElementById('AS_txtFirstName');
        AAS_LastName = document.getElementById('AS_txtLastName');
        AAS_Email = document.getElementById('AS_txtEmail');

        $("#accountSettings_Holder").on('click keydown', function () {


        })
        $("#SocialGetEmails_Holder").on('click keydown', function () {


        })
        AAS_Name.onblur = function () {
            if (this.value == '') {
                AAS_Name.value = currentUserData.FullName;
            }

        }
        AAS_FirstName.onblur = function () {
            if (this.value == '') {
                AAS_FirstName.value = currentUserData.FirstName;
            }

        }
        AAS_LastName.onblur = function () {
            if (this.value == '') {
                AAS_LastName.value = currentUserData.LastName;
            }

        }
        AAS_Email.onblur = function () {
            if (this.value == '') {
                if (currentUserEmail.indexOf("@") >= 0) {
                    AAS_Email.value = currentUserEmail;
                } else {
                    AAS_Email.value = "";
                }
            }

        }
        // pass
        var AAS_OldPass = document.getElementById('AS_txtPassword');
        var AAS_NewPass = document.getElementById('AS_txtNewPassword');
        AAS_OldPass.onblur = function () {

        }
        AAS_NewPass.onfocus = function () {
            //$("#AS_txtNewPassword").css("display", "inline-block");
        }
        AAS_NewPass.onblur = function () {

            //$("#AS_txtNewPassword").css("display", "inline-block");
        }

        //
        // Auth_4_0_ Button Clicks and Functions
        //
        var TitleMenuState = "off";
        $(".TGN_site_TitleDrop").click(function () {
            toggleTitleMenu();
        });
        function toggleTitleMenu() {
            TGN_hide_mainMenu();
            if (TitleMenuState == "on") {
                hideTitleMenu();
            } else {
                showTitleMenu();
            }
        }
        function hideTitleMenu() {
            $(".TGN_site_TitleDropMenu").css("display", "none");
            TitleMenuState = "off";
        }
        function showTitleMenu() {
            $(".TGN_site_TitleDropMenu").css("display", "block");
            TitleMenuState = "on";
            if ($('#AS_TGN_site_TitleDrop').is(':visible')) {
                openName_FieldEditButton();
            }
        }
        $(".TGN_site_TitleDropMenuItem").click(function (e) {
            //console.log($(this).attr("data-itemnum"));
            $("#Auth_50_Form_SignUp select").val($(this).text());
            $("#Auth_50_Form_AS_F1 select").val($(this).text());
            $(this).parent().parent().find(".TGN_site_TitleDropSelectedCopy").text($(this).text()).addClass("TGN_site_TitleDropSelectedCopyON");
            $(this).parent().parent().find(".TGN_site_TitleDropDefaultCopy").text($(this).text()).addClass("TGN_site_TitleDropDefaultCopyOFF");
            //e.stopPropagation();
        });

        $("#FPtxtEmail").focus(function () {
            checkFPEmailValid();
        });
        $("#FPtxtEmail").blur(function () {
            checkFPEmailValid();
        });
        $(".resendVerify").click(function () {
            // resend Verification Email //
            resendVerifyLink();
            $(".validNoVerify").css("opacity", "0");
            $(".validNoVerify").delay(1500).animate({ 'opacity': 1 }, 1000);
        });

        $(".TGN_site_Lightbox_Close").click(function () {
            $(".TGN_site_Lightbox").css("display", "none");
            $(".TGN_site_Lightbox_Video").html("");
        });

        $(".CTA_TDD_CloseX").click(function () {
            // set close cookie prop on Please Verify close
            if ($('#CTA_TDD_PV').is(':visible')) {
                // here we set the cookie so that the mini CTA goes away for a period of time
                closeminiCTA("pleaseverify");
            } else if ($('#CTA_TDD_TFV').is(':visible')) {
                // only shown once so nothing we need to do here Thanks For Verifying
            } else if ($('#CTA_TDD_DAA').is(':visible')) {
                window.location.hash = ''; // for older browsers, leaves a # behind
                history.pushState('', document.title, window.location.pathname); // nice and clean
            }
            $(".CTA_TDD_Holder").css("display", "none");
            $('#CTA_TDD_CTAPARENT').children('div').css("display", "none");
        });
        $("#ASUploadErrorOkButton").click(function () {
            $(".Auth_IUP_Error").css("display", "none");
            $(".Auth_ProfileSettings_Nav_UserUpload").css("display", "none");
        });
        $("#WEUploadErrorOkButton").click(function () {
            $(".Auth_IUP_Error").css("display", "none");
            $(".Auth_ProfileSettings_Nav_UserUpload").css("display", "none");
        });
        $("#AuthExtraTRYSIlink").click(function () {
            if ($(".Login_Holder").is(':visible')) {
                hideAuthHolders();
            } else {
                hideAuthHolders();
                showAuthLogin();
            }
            RegEmailelement = document.getElementById('txtEmail');
            LoginEmailelement.value = RegEmailelement.value;
        });
        // WELCOME NAME
        function openWEName_FieldEditButton() {
            WEAuthCancelEmail();


        }
        $("#WEAuthSaveName").click(function () {
            checkWEFullNameValid();
            // if valid format
            if (WEfullnameValid == true) {
                $("#WEAuthSaveName").parent().css("display", "none");
                $("#WEnameValidationBoxB").css("display", "none");
                $("#WE_Mob_Email_Error").css("display", "none");
                // send new value to DB
                var FirstNameelement = document.getElementById('WEtxtFirstName');
                var LastNameelement = document.getElementById('WEtxtLastName');
                currentUserData.FirstName = (FirstNameelement.value);
                currentUserData.LastName = (LastNameelement.value);
                currentUserData.FullName = (FirstNameelement.value + " " + LastNameelement.value);
                setUserFullName();
            }
        });
        $("#WEAuthCancelName").click(function () {
            WEAuthCancelName();
        });
        function WEAuthCancelName() {
            $("#WEAuthCancelName").parent().css("display", "none");
            $("#WEtxtFirstName").val(currentUserData.FirstName);
            $("#WEtxtLastName").val(currentUserData.LastName);
            $("#WEnameValidationBoxB").css("display", "none");
            $("#WE_Mob_Email_Error").css("display", "none");
        }
        // WELCOME EMAIL
        $("#WEAuthSaveEmail").click(function () {
            checkWEEmailValid();
            if (WEemailValid == true) {
                $("#WEAuthSaveEmail").parent().css("display", "none");
                $("#validNoVerifyWE").css("display", "block");
                var myFieldVal = $("#WEAuthSaveEmail").parent().parent().find('.txtEntryBox').val();
                $("#WEemailValidationBoxB").css("display", "none");
                $("#WE_Mob_Email_Error").css("display", "none");
                // send new value to DB
                currentUserEmail = myFieldVal;
                setUserEmail();
                forceFromServer = true;
                getUserInfo();
            } else {
                //console.log("SAVEasCANCEL" + currentUserEmail);
                if ($("#WEAuthSaveEmail").parent().parent().find('.txtEntryBox').val() == currentUserEmail) {
                    WEAuthCancelEmail();
                }
            }
            //
        });
        $("#WEAuthCancelEmail").click(function () {
            WEAuthCancelEmail();
        });
        function WEAuthCancelEmail() {
            $("#WEAuthCancelEmail").parent().css("display", "none");
            //$("#WEtxtEmail").css("border", "1px solid #ccc");
            if (currentUserData.IsApproved == "false" && currentUserData.IsApproved != "") {
                $(".validNoVerifyWE").css("display", "block");
            } else {
                $(".validNoVerifyWE").css("display", "none");
            }
            if (currentUserEmail.indexOf("@") >= 0) {
                $("#WEAuthCancelEmail").parent().parent().find('.txtEntryBox').val(currentUserEmail);
            } else {
                $("#WEAuthCancelEmail").parent().parent().find('.txtEntryBox').val("");
            }
            //$("#WEAuthCancelEmail").parent().parent().find('.txtEntryBox').prop('disabled', true);
            $("#WEemailValidationBoxB").css("display", "none");
            $("#WE_Mob_Email_Error").css("display", "none");
        }
        // NAME
        $(".txtEntryBox").blur(function () {
            AuthRunValidation();
            $(this).parent().find(".Auth_50_Label01").css("color","#a4a4a4");
        });
        $(".txtEntryBox").focus(function () {
            $(this).parent().find(".Auth_50_Label01").css("color","#0049fb");
        });
        $("#AS_txtUserTitle").focus(function () {
            openName_FieldEditButton();
        });
        $("#AS_txtFirstName").focus(function () {
            openName_FieldEditButton();
        });
        $("#AS_txtLastName").focus(function () {
            openName_FieldEditButton();
        });
        //$('#txtFirstName').focus(function() {
        //    $(this).attr('autocomplete', 'new-password');
        //});
        //$('#txtLastName').focus(function() {
        //    $(this).attr('autocomplete', 'new-password');
        //});
        //$('#txtEmail').focus(function() {
        //    $(this).attr('autocomplete', 'new-password');
        //});
        $('#txtAddress').focus(function() {
            $(this).attr('autocomplete', 'new-password');
            //$(this).css("width","318px");
        });
        $('#txtAddress').blur(function() {
            //$(this).css("width","318px");
        });
        function openName_FieldEditButton() {
            AuthCancelPassword();
            AuthCancelEmail();
            AuthCancelAddress();


            $('.Auth_FirstName_Block').parent().find('.Auth_FieldEditControls').css("display", "block");
        }
        $("#AuthSaveName").click(function () {
            checkASFullNameValid();
            // if valid format
            if (ASfullnameValid == true) {
                $("#AuthSaveName").parent().css("display", "none");
                var Titleelement = document.getElementById('AS_txtUserTitle');
                var FirstNameelement = document.getElementById('AS_txtFirstName');
                var LastNameelement = document.getElementById('AS_txtLastName');
                //$("#AuthSaveName").parent().parent().find('.txtEntryBox').prop('disabled', true);
                //$("#AS_txtFirstName").css("border", "1px solid #ccc");
                //$("#AS_txtLastName").css("border", "1px solid #ccc");
                $("#ASnameValidationBoxB").css("display", "none");
                $("#AS_Mob_Password_Error").css("display", "none");
                // send new value to DB
                currentUserData.title = (Titleelement.value);
                currentUserData.FirstName = (FirstNameelement.value);
                currentUserData.LastName = (LastNameelement.value);
                currentUserData.FullName = (FirstNameelement.value + " " + LastNameelement.value);
                setUserFullName();
            }
        });
        $("#AuthCancelName").click(function () {
            AuthCancelName();
        });
        function AuthCancelName() {
            $("#AuthCancelName").parent().css("display", "none");
            $("#AS_txtUserTitle").val(currentUserData.title);
            $("#AS_TGN_site_TitleDrop").find(".TGN_site_TitleDropSelectedCopy").text(currentUserData.title);
            $("#AS_txtFirstName").val(currentUserData.FirstName);
            $("#AS_txtLastName").val(currentUserData.LastName);
            //$("#AuthCancelName").parent().parent().find('.txtEntryBox').prop('disabled', true);
            //$("#AS_txtFirstName").css("border", "1px solid #ccc");
            //$("#AS_txtLastName").css("border", "1px solid #ccc");
            $("#AS_Mob_Password_Error").css("display", "none");
            $("#ASnameValidationBoxB").css("display", "none");
        }
        // EMAIL
        $("#AS_txtEmail").focus(function () {
            AuthCancelName();
            AuthCancelPassword();
            AuthCancelAddress();


            $("#validNoVerifyAS").css("display", "none");
            $('#AS_txtEmail').parent().find('.Auth_FieldEditControls').css("display", "block");
        });
        $("#AuthSaveEmail").click(function () {
            checkASEmailValid();
            if (ASemailValid == true) {
                $("#AuthSaveEmail").parent().css("display", "none");
                if (currentUserData.IsApproved == "false" && currentUserData.IsApproved != "") {
                    $(".validNoVerify").css("display", "block");
                } else {
                    $(".validNoVerify").css("display", "none");
                }
                var myFieldVal = $("#AuthSaveEmail").parent().parent().find('.txtEntryBox').val();
                //$("#AuthSaveEmail").parent().parent().find('.txtEntryBox').prop('disabled', true);
                $("#AS_Mob_Password_Error").css("display", "none");
                $("#ASemailValidationBoxB").css("display", "none");
                //$("#AS_txtEmail").css("border", "1px solid #ccc");
                // send new value to DB
                currentUserEmail = myFieldVal;
                setUserEmail();
            } else {
                //console.log("SAVEasCANCEL" + currentUserEmail);
                if ($("#AuthSaveEmail").parent().parent().find('.txtEntryBox').val() == currentUserEmail) {
                    AuthCancelEmail();
                }
            }
            //
        });
        $("#AuthCancelEmail").click(function () {
            AuthCancelEmail();
        });
        function AuthCancelEmail() {
            $("#AuthCancelEmail").parent().css("display", "none");
            if (currentUserData.IsApproved == "false" && currentUserEmail != "") {
                $(".validNoVerify").css("display", "block");
            } else {
                $(".validNoVerify").css("display", "none");
            }
            if (currentUserEmail.indexOf("@") >= 0) {
                $("#AuthCancelEmail").parent().parent().find('.txtEntryBox').val(currentUserEmail);
            } else {
                $("#AuthCancelEmail").parent().parent().find('.txtEntryBox').val("");
            }
            //$("#AuthCancelEmail").parent().parent().find('.txtEntryBox').prop('disabled', true);
            $("#AS_Mob_Password_Error").css("display", "none");
            $("#ASemailValidationBoxB").css("display", "none");
            //$("#AS_txtEmail").css("border", "1px solid #ccc");
        }
        // PASS
        $("#AS_txtPassword").focus(function () {
            AAS_OldPass.value = "";
            $("#AS_txtPassword").attr("placeholder","Current password");
            AuthCancelName();
            AuthCancelEmail();
            AuthCancelAddress();


            $("#AS_txtNewPassword").css("display", "inline-block");
            $('#Auth_FieldHolder_AS_PASS').parent().find('.Auth_FieldEditControls').css("display", "block");
        });
        $("#AuthSavePassword").click(function () {
            ASPASSButtonClicked = "true";
            var oldP = $("#AS_txtPassword").val();
            var newP = $("#AS_txtNewPassword").val();
            // if valid length
            if (newP.length >= Auth4Config_PasswordMin) {
                // send new value to DB
                setNewPassword(newP, oldP);
            } else {
                // else update validation text
                $("#AS_Mob_Password_Error").css("display", "block");
                $("#ASpassValidationBoxNewB").css("display", "block");
                $("#ASpassValidationBoxNewB").find(".validNoTxt").css("display", "inline-block");
                if (newP.length < Auth4Config_PasswordMin) {
                    $("#ASpassValidationBoxNewB").find(".validNoTxt").html(Auth4Config_PasswordTooShort);
                    $("#AS_Mob_Password_Error").html(Auth4Config_PasswordTooShort);
                } else {
                    $("#ASpassValidationBoxNewB").find(".validNoTxt").html(Auth4Config_PasswordNotMatching);
                    $("#AS_Mob_Password_Error").html(Auth4Config_PasswordNotMatching);
                }
            }
        });
        $("#AuthCancelPassword").click(function () {
            AuthCancelPassword();
        });
        function AuthCancelPassword() {
            ASPASSButtonClicked = "false";
            $("#AS_txtPassword").attr("placeholder","Reset your password");
            $("#AuthCancelPassword").parent().css("display", "none");
            $("#AS_txtPassword").css("display", "inline-block");
            $("#AS_txtNewPassword").css("display", "none");
            setAH_AS_txtPassword("");
            $("#AS_txtNewPassword").val('');
            $("#AS_Mob_Password_Error").css("display", "none");
            $("#ASpassValidationBoxB").css("display", "none");
            $("#ASpassValidationBoxNewB").css("display", "none");
            $("#ASpassValidationBoxB").find(".validNoTxt").css("display", "none");
            if (currentUserData.HasPassword == "truePD") {
                setAH_AS_txtPassword("Set a password");
            } else {
                setAH_AS_txtPassword("Reset your password");
            }
        }
        // Address
        $("#AS_txtAddressL1").focus(function () {
            open_AddressSaveCancel();
        });
        $("#AS_txtAddressL2").focus(function () {
            open_AddressSaveCancel();
        });
        $("#AS_txtCity").focus(function () {
            open_AddressSaveCancel();
        });
        $("#AS_txtState").focus(function () {
            open_AddressSaveCancel();
        });
        $("#AS_txtPostalCode").focus(function () {
            open_AddressSaveCancel();
        });
        $("#AS_txtCountry").focus(function () {
            open_AddressSaveCancel();
        });
        function open_AddressSaveCancel() {
            AuthCancelName();
            AuthCancelEmail();
            AuthCancelPassword();
            $(".Auth_50_ManualAddressAreaAS").find('.Auth_FieldEditControls').css("display", "block");
        }
        $("#AuthSaveAddress").click(function () {
            checkASAddressValid();
            // if valid format
            if (ASaddressValid == true) {
                $("#AuthSaveAddress").parent().css("display", "none");
                $(".Auth_50_ManualAddressAreaAS").find(".validationBoxB").css("display", "none");
                setUserAddress();
            }
        });
        function UpdateAddressJSONObj(addressL1,addressL2,addressCi,addressSt,addressZi,addressCo) {
            var address_source_found = false;
            for (var i = 0; i < Auth50_JSONAddressStore.address_components.length; i++) {
                var addressType = Auth50_JSONAddressStore.address_components[i].types[0];
                if (addressType == "street_number") {
                    Auth50_JSONAddressStore.address_components[i].long_name = addressL1;
                    Auth50_JSONAddressStore.address_components[i].short_name = addressL1;
                }
                if (addressType == "route") {
                    Auth50_JSONAddressStore.address_components[i].long_name = addressL2;
                    Auth50_JSONAddressStore.address_components[i].short_name = addressL2;
                }
                if (addressType == "locality") {
                    Auth50_JSONAddressStore.address_components[i].long_name = addressCi;
                    Auth50_JSONAddressStore.address_components[i].short_name = addressCi;
                }
                if (addressType == "administrative_area_level_1") {
                    Auth50_JSONAddressStore.address_components[i].long_name = addressSt;
                    Auth50_JSONAddressStore.address_components[i].short_name = addressSt;
                }
                if (addressType == "postal_code") {
                    Auth50_JSONAddressStore.address_components[i].long_name = addressZi;
                    Auth50_JSONAddressStore.address_components[i].short_name = addressZi;
                }
                if (addressType == "country") {
                    Auth50_JSONAddressStore.address_components[i].long_name = addressCo;
                    Auth50_JSONAddressStore.address_components[i].short_name = addressCo;
                }
                if (addressType == "address_source") {
                    Auth50_JSONAddressStore.address_components[i].long_name = "settings_edit";
                    Auth50_JSONAddressStore.address_components[i].short_name = "settings_edit";
                    address_source_found = true;
                }
            }
            if (address_source_found == false) {
                address_sourceObj = {};
                address_sourceObj.long_name = "settings_edit";
                address_sourceObj.short_name = "settings_edit";
                address_sourceObj.types = ['address_source'];
                Auth50_JSONAddressStore.address_components.push(address_sourceObj);
            }
        }
        var ASaddressStore = "";
        function checkASAddressValid() {
            AAS_AddressL1element = document.getElementById('AS_txtAddressL1');
            AAS_AddressL2element = document.getElementById('AS_txtAddressL2');
            AAS_AddressCityelement = document.getElementById('AS_txtCity');
            AAS_AddressStateelement = document.getElementById('AS_txtState');
            AAS_AddressZipelement = document.getElementById('AS_txtPostalCode');
            AAS_AddressCountyelement = document.getElementById('AS_txtCountry');
            addressL1 = AAS_AddressL1element.value;
            addressL2 = AAS_AddressL2element.value;
            addressCi = AAS_AddressCityelement.value;
            addressSt = AAS_AddressStateelement.value;
            addressZi = AAS_AddressZipelement.value;
            addressCo = AAS_AddressCountyelement.value;
            if (ASaddressStore != addressL1+addressL2+addressCi+addressSt+addressZi+addressCo) {
                ASaddressStore = addressL1+addressL2+addressCi+addressSt+addressZi+addressCo;
                if ((addressL1 != "" || addressL2 != "") && addressCi != "" && addressSt != "" && addressZi != "" && addressCo != "") {
                    ASaddressValid = true;
                    UpdateAddressJSONObj(addressL1,addressL2,addressCi,addressSt,addressZi,addressCo);
                    $(".Auth_50_ManualAddressAreaAS").find(".validationBoxB").css("display", "none");
                    //console.log("address complete");
                } else {
                    if (Auth4Config_AddressManditory == 1) {
                        ASaddressValid = false;
                        if (addressL1 == "" && addressL2 == "") {
                            $("#AS_addressL1_ValidationBoxB").css("display", "block");
                            $("#AS_addressL1_ValidationBoxB").find(".validNoTxt").css("display", "block");
                            $("#AS_addressL1_ValidationBoxB").find(".validNoTxt").html(Auth4Config_AddressFieldRequired);
                        } else {
                            //L1
                            $("#AS_addressL1_ValidationBoxB").css("display", "none");
                            $("#AS_addressL1_ValidationBoxB").find(".validNoTxt").css("display", "none");
                            //L2
                            $("#AS_addressL2_ValidationBoxB").css("display", "none");
                            $("#AS_addressL2_ValidationBoxB").find(".validNoTxt").css("display", "none");
                        }
                        if (addressCi == "") {
                            $("#AS_addressCI_ValidationBoxB").css("display", "block");
                            $("#AS_addressCI_ValidationBoxB").find(".validNoTxt").css("display", "block");
                            $("#AS_addressCI_ValidationBoxB").find(".validNoTxt").html(Auth4Config_AddressFieldRequired);
                        } else {
                            $("#AS_addressCI_ValidationBoxB").css("display", "none");
                            $("#AS_addressCI_ValidationBoxB").find(".validNoTxt").css("display", "none");
                        }
                        if (addressSt == "") {
                            $("#AS_addressST_ValidationBoxB").css("display", "block");
                            $("#AS_addressST_ValidationBoxB").find(".validNoTxt").css("display", "block");
                            $("#AS_addressST_ValidationBoxB").find(".validNoTxt").html(Auth4Config_AddressFieldRequired);
                        } else {
                            $("#AS_addressST_ValidationBoxB").css("display", "none");
                            $("#AS_addressST_ValidationBoxB").find(".validNoTxt").css("display", "none");
                        }
                        if (addressZi == "") {
                            $("#AS_addressZI_ValidationBoxB").css("display", "block");
                            $("#AS_addressZI_ValidationBoxB").find(".validNoTxt").css("display", "block");
                            $("#AS_addressZI_ValidationBoxB").find(".validNoTxt").html(Auth4Config_AddressFieldRequired);
                        } else {
                            $("#AS_addressZI_ValidationBoxB").css("display", "none");
                            $("#AS_addressZI_ValidationBoxB").find(".validNoTxt").css("display", "none");
                        }
                        if (addressCo == "") {
                            $("#AS_addressCO_ValidationBoxB").css("display", "block");
                            $("#AS_addressCO_ValidationBoxB").find(".validNoTxt").css("display", "block");
                            $("#AS_addressCO_ValidationBoxB").find(".validNoTxt").html(Auth4Config_AddressFieldRequired);
                        } else {
                            $("#AS_addressCO_ValidationBoxB").css("display", "none");
                            $("#AS_addressCO_ValidationBoxB").find(".validNoTxt").css("display", "none");
                        }
                        //console.log("need to complete address fields");
                    }
                }
            }
        }
        function setUserAddress() {
            Auth50_stringifiedAddressStore = JSON.stringify(Auth50_JSONAddressStore);
            Auth50_encodedAddressStore = Auth50_htmlEncode(Auth50_stringifiedAddressStore);
            currentUserData.address = Auth50_encodedAddressStore;
            compareUserInfo("");
            omnihelpers.editProfile("address");
            return false;
        }
        $("#AuthCancelAddress").click(function () {
            AuthCancelAddress();
        });
        function AuthCancelAddress() {
            $("#AuthCancelAddress").parent().css("display", "none");
            for (var i = 0; i < Auth50_JSONAddressStore.address_components.length; i++) {
                var addressType = Auth50_JSONAddressStore.address_components[i].types[0];
                if (addressType == "street_number") {
                    $("#AS_txtAddressL1").val(Auth50_JSONAddressStore.address_components[i].long_name);
                }
                if (addressType == "route") {
                    $("#AS_txtAddressL2").val(Auth50_JSONAddressStore.address_components[i].long_name);
                }
                if (addressType == "locality") {
                    $("#AS_txtCity").val(Auth50_JSONAddressStore.address_components[i].long_name);
                }
                if (addressType == "administrative_area_level_1") {
                    $("#AS_txtState").val(Auth50_JSONAddressStore.address_components[i].long_name);
                }
                if (addressType == "postal_code") {
                    $("#AS_txtPostalCode").val(Auth50_JSONAddressStore.address_components[i].long_name);
                }
                if (addressType == "country") {
                    $("#AS_txtCountry").val(Auth50_JSONAddressStore.address_components[i].long_name);
                }
            }
            $(".Auth_50_ManualAddressAreaAS").find(".validationBoxB").css("display", "none");
            $(".Auth_50_ManualAddressAreaAS").find(".validNoTxt").css("display", "none");
        }



        $(".SignInHeader").click(function () {
            if ($(".Register_Holder").is(':visible')) {
                hideAuthHolders();
            } else {
                hideAuthHolders();
                showAuthRegister();
            omnihelpers.signupPath("Signup");
            }
        });
        $("#TGN_site_Header_LI").click(function () {
            if ($(".Login_Holder").is(':visible')) {
                hideAuthHolders();
            } else {
                hideAuthHolders();
                showAuthLogin();
            }
        });
        $("#TGN_site_Slideheader_LI").click(function () {
            if ($(".Login_Holder").is(':visible')) {
                hideAuthHolders();
            } else {
                hideAuthHolders();
                showAuthLogin();
            }
        });
        $("#mobart_Art_SI_Holder").click(function () {
            if ($(".Register_Holder").is(':visible')) {
                hideAuthHolders();
            } else {
                hideAuthHolders();
                showAuthRegister();
            omnihelpers.signupPath("Signup");
            }
        });
        $(".Auth_50_LISU_ToggleButton_Left_Off").click(function () {
            if ($(".Login_Holder").is(':visible')) {
                hideAuthHolders();
            } else {
                hideAuthHolders();
                showAuthLogin();
            }
        });
        $(".Auth_50_LISU_ToggleButton_Right_Off").click(function () {
            if ($(".Register_Holder").is(':visible')) {
                hideAuthHolders();
            } else {
                hideAuthHolders();
                showAuthRegister();
            omnihelpers.signupPath("Login");
            }
        });


        $('.SignInHeader2').click(function (e) {
            //console.log(e);
            hideAuthHolders();
            showAuthLogin();
        });
        $(".SignUpHeader").click(function () {
            hideAuthHolders();
            showAuthRegister();
            omnihelpers.signupPath("Signup");
        });
        function toggleGNCommTopUserMenuPopState() {
            TGN_hide_mainMenu();
            if (GNCommTopUserMenuPopState == "on") {
                hideGNCommTopUserMenuPop();

            } else {
                showGNCommTopUserMenuPop();


            }
        }
        $(".UserInfo").click(function (e) {
            toggleGNCommTopUserMenuPopState();
            e.stopPropagation();
        });
        $(".ProfileIcon").click(function (e) {
            toggleGNCommTopUserMenuPopState();
            e.stopPropagation();
        });
        $("#mobart_Art_USER_block").click(function (e) {
            toggleGNCommTopUserMenuPopState();
            e.stopPropagation();
        });
        //
        $(".SettingsHeader").click(function () {
            hideAuthHolders();
            window.location.href = '/Profile-Settings';
        });
        $("#ContinueButton").click(function () {
            showAuthWelcome();
        });
        $("#WelcomeContinueButton").click(function () {
            omnihelpers.topicPrefs("" + currentUserData.Interest_Topic_List_CSV);
            hideAuthHolders();
            $(".AH_Holder").css("display", "none");
            var a = location.pathname;
            a = a.toLowerCase();
            //console.log("url: " + a);
            if (a == "/signin" || a == "/signup" || a == "/signupfaq" || a == "/sign-in" || a == "/sign-up" || a == "/sign-up-faq") {
                window.location.href = '/';
            } else {
            }
        });

        $("#AS_OKButton").click(function () {
            $(".AH_Holder").scrollTop(0);
            //if ($(".accountSettings_Holder").is(":visible")) {
            //    hide_accountSettings_Holder();
            //} else {
            //    hideAuthHolders();
            //    $(".AH_Holder").css("display", "none");
            //}
            hideAuthHolders();
            show_accountProfile_Holder();
            localStorage.setItem('UserInterest_Topic_List_CSV', currentUserData.Interest_Topic_List_CSV);
            TGNSR_LoadTheSRs();
        });
        $(".Auth_4_0_ForgotPasswordBack").click(function () {
            hideAuthHolders();
            showAuthHolder();
            $(".Login_Holder").css("display", "flex");
            //omnihelpers.loginStart();
        });
        $(".AH_Close").click(function () {
            $(".AH_Holder").scrollTop(0);
            if ($(".Deregister_Holder").is(":visible") || $(".RequestDelete_Holder").is(":visible")) {
                hideAuthHolders();
                show_accountSettings_Holder();
            } else if ($(".accountSettings_Holder").is(":visible")) {
                hide_accountSettings_Holder();
            } else if ($(".ForgotPassword_Holder").is(":visible")) {
                hideAuthHolders();
                showAuthHolder();
                $(".Login_Holder").css("display", "flex");
                //omnihelpers.loginStart();
            } else if ($(".FAQ_Holder").is(":visible")) {
                hideAuthHolders();
                showAuthHolder();
                $(".Register_Holder").css("display", "flex");
            omnihelpers.signupPath("closeFAQ");
                var a = location.pathname;
                a = a.toLowerCase();
                //console.log("url: " + a);
                if (a == "/signupfaq" || a == "/sign-up-faq") {
                    $(".AH_Close").css("display", "none");
                } else {
                }
            } else if ($(".UnsubscribeSignIn_Holder").is(":visible")) {
                hideAuthHolders();
            } else if ($(".commentHistory_Holder").is(":visible")) {
                hide_commentHistory_Holder();
            } else if ($(".Welcome_Holder").is(":visible")) {
                omnihelpers.topicPrefs("" + currentUserData.Interest_Topic_List_CSV);
                hideAuthHolders();
                $(".AH_Holder").css("display", "none");
            } else {
                hideAuthHolders();
                $(".AH_Holder").css("display", "none");
            }
        });
        //$("#EditProfileButton_v2").click(function () {
        //    // make page elements editable state
        //    var myGrad = "";
        //    $(".Auth_ProfileImage_Edit").css("background-color", "rgba(0,0,0,.4)");
        //    if (currentUserData.ProfileImage != "") {
        //        if (currentUserImageProfileBlobData == "none") {
        //            $(".Auth_ProfileSettings_Nav_UserImage").css("background-image", myGrad + ",url(\"" + currentUserData.ProfileImage + "\")");
        //        } else {
        //            $(".Auth_ProfileSettings_Nav_UserImage").css("background-image", "url('data:image/jpg;base64," + currentUserImageProfileBlobData + "')");
        //        }
        //        $(".Auth_ProfileImage").css("opacity", 1);
        //    } else {
        //        $(".Auth_ProfileImage").css("opacity", 1);
        //    }
        //    $(".Auth_ProfileImage_Edit").css("display", "block");
        //    $(".Auth_ProfileControls").css("display", "none");
        //    $(".Auth_ProfileControlsEdit").css("display", "block");
        //    $(".txtEntryBoxName").css("display", "block");
        //    $("#Auth_FieldHolder_MP_Name").css("display", "block");
        //    $("#myProfile_txtProfileFirstName").css("display", "inline-block");
        //    $("#myProfile_txtProfileLastName").css("display", "inline-block");
        //    $("#myProfile_txtProfileFirstName").val(currentUserData.FirstName);
        //    $("#myProfile_txtProfileLastName").val(currentUserData.LastName);
        //    $("#Auth_ProfileName").css("display", "none");

        //});
        //$("#EditProfileSaveButton").click(function () {
        //    // record editted data to profile if name is valid
        //    currentUserData.FirstName = ($("#myProfile_txtProfileFirstName").val());
        //    currentUserData.LastName = ($("#myProfile_txtProfileLastName").val());
        //    currentUserData.FullName = currentUserData.FirstName + " " + currentUserData.LastName;
        //    var saveValid = false;
        //    var words = currentUserData.FullName.split(' ');
        //    var wordsf = currentUserData.FirstName.split(' ');
        //    var wordsl = currentUserData.LastName.split(' ');
        //    if (words.length >= 2) {
        //        if (wordsf[0].length > 0 && wordsl[0].length > 0) {
        //            saveValid = true;
        //        }
        //    }
        //    if (saveValid == true) {
        //        // save edits
        //        $(".Auth_ProfileSettings_Nav_UserName").html(currentUserData.FullName);
        //        closeEditProfile();
        //        SaveMyProfileSettings();
        //    } else {
        //        // add notification text that name is invalid
        //        $(".myProfileError").css("display", "block");
        //    }
        //});
        //$("#EditProfileCancelButton").click(function () {
        //    // discard edits and return to page as was
        //    closeEditProfile();
        //});

        $("#UnsubscribeSignInButton").click(function () {
            // Go to sign in page
            hideAuthHolders();
            showAuthHolder();
            $(".Login_Holder").css("display", "flex");
            //omnihelpers.loginStart();
        });

        $("#DeactivateButton").click(function () {
            // Deactivate Account
            setDeactivated();
        });

        $("#DeactivateCancelButton").click(function () {
            //console.log("WTF");
            hideAuthHolders();
            show_accountSettings_Holder();
        });


        $("#AuthExtraDAlink").click(function () {
            //hideAuthHolders();
            showAuthHolder();
            $(".Deregister_Holder").css("display", "block");
        });

        $(".Auth_ProfileSettings_Nav_Profile").click(function () {
            TGN_site_scrollto(0);
            hideAuthHolders();
            show_accountProfile_Holder();
        });
        $(".Auth_ProfileSettings_Nav_Settings").click(function () {
            TGN_site_scrollto(0);
            hideAuthHolders();
            show_accountSettings_Holder();
        });
        $(".Auth_ProfileSettings_Nav_CommentHistory").click(function () {
            TGN_site_scrollto(0);
            hideAuthHolders();
            show_commentHistory_Holder();
        });
        $(".Auth_ProfileSettings_Nav_Bookmarks").click(function () {
            TGN_site_scrollto(0);
            hideAuthHolders();
            show_bookmarks_Holder();
        });
        $('.LogOutHeader').click(function () {
            logmeout();
        });
        $(".AUTH_CTA_Link").click(function () {
            hideAuthHolders();
            showAuthHolder();
            $(".myProfile_Holder").css("display", "block");
            $(".Auth_ProfileSettings_NavigationHolder").css("display", "block");
        });
        $(".ForgotPW").click(function () {
            currentUserEmail = $("#LItxtEmail").val();
            $("#FPtxtEmail").val(currentUserEmail);

            //hideAuthHolders();
            //populateAllAuthUserInfo(1);
            showAuthHolder();
            $("#Auth_50_Content_Right_BottomInnerLI").css("display", "none");
            $(".ForgotPassword_Holder").css("display", "block");
            // disable field and button
            $("#ResetPasswordButton").prop("disabled", false);
            $("#ResetPasswordButton").css("display", "block");
            $("#FPtxtEmail").prop("disabled", false);
            checkFPEmailValid();
        });

        $('#ResetPasswordButton').click(function () {
            checkForgotPassword();
            return false;
        });
        $('#RPAuth_Paragraph_link').click(function () {
            hideAuthHolders();
            showAuthHolder();
            $(".Login_Holder").css("display", "flex");
            //omnihelpers.loginStart();
            return false;
        });
        $('#AuthExtraRetPasslink').click(function () {
            hideAuthHolders();
            showAuthHolder();
            $(".Login_Holder").css("display", "flex");
            $("#Auth_50_Content_Right_BottomInnerLI").css("display", "none");
            $(".ForgotPassword_Holder").css("display", "block");
            $("#FPtxtEmail").val(RegEmailelement.value);
            return false;
        });


        $('#SetNewPasswordButton').click(function () {
            checkResetPassword();
            return false;
        });
        $('#SetNewPasswordOKButton').click(function () {
            //window.location.href = '/';
            var a = location.pathname;
            window.history.replaceState("", "", a);
            //window.history.pushState("", "", '/');
            hideAuthHolders();
            showAuthHolder();
            $(".Login_Holder").css("display", "flex");
            $(".ResetPassword_Holder").css("display", "none");
            $("#LI_Mob_All_Error").html("");
            //omnihelpers.loginStart();
            forceFromServer = true;
            //getUserInfo();
            return false;
        });

        $('#AuthExtraFAQlink').click(function () {
            hideAuthHolders();
            showAuthHolder();
        $(".AH_Close").css("display", "block");
            $(".FAQ_Holder").css("display", "block");
            return false;
        });

        $('#AuthExtraTERMSlink').click(function () {
            window.open('/Terms-of-Use','_blank');
            doOmnitureFollowEvent("Terms-of-Use");
            return false;
        });

        $('#AuthExtraPRIVACYlink').click(function () {
            window.open('/Privacy-Policy', '_blank');
            doOmnitureFollowEvent("Privacy-Policy");
            return false;
        });

        $('#LoginButton').click(function () {
            //logMeIn("signin");
            CheckUserName(LoginEmailelement.value, "signin");
            return false;
        });

        $(".Auth_ProfileImageEditLockup").click(function () {
            uploadProfileImage();
            return false;
        });
        $("#Auth_WelcomeProfileImage_Edit").click(function () {
            uploadProfileImage();
            $("#WEAuth_ProfileImage_Progress").css("display","block");
        $("#WEAuth_ProfileImage_Progress").find(".Auth_Profile_ProgressPreview").html("Uploading...");
            $(".Auth_IUP_Error").css("display", "none");
            return false;
        });

        //top
        $("#GNAuth_NB_CTA_TDD_PVLink").click(function () {
            // please verify
            resendVerifyLink();
            $("#GNAuth_NB_CTA_TDD_PVLink").html("");
            $("#GNAuth_NB_CTA_TDD_PV").find(".GNAuthNB_descA").html("Email sent");
            return false;
        });
        $("#GNAuth_NB_CTA_TDD_TFVLink").click(function () {
            // thanks for verifying
            window.location.href = '/Profile-Settings?profilepage=settings';
            return false;
        });
        $("#GNAuth_NB_CTA_TDD_DAALink").click(function () {
            // account deactivated
            window.location.hash = ''; // for older browsers, leaves a # behind
            history.pushState('', document.title, window.location.pathname); // nice and clean
            $("#GNAuth_NB_CTA_TDD_DAA").css("display", "none");
            return false;
        });
        $("#GNAuth_NB_CTA_TDD_TGNNLLink").click(function () {
            // newsletter
            TGNNL_archiveClick();
            return false;
        });


        $(".CTA_TDD_Link").click(function () {
            if ($('#CTA_TDD_PV').is(':visible')) {
                // please verify
                resendVerifyLink();
                $("#CTA_TDD_PV").find(".CTA_TDD_Link").html("");
                $("#CTA_TDD_PV").find(".CTA_TDD_Response").html("Email sent");
            } else if ($('#CTA_TDD_VF').is(':visible')) {
                // verify failed
            } else if ($('#CTA_TDD_TFV').is(':visible')) {
                // thanks for verifying
                window.location.href = '/Profile-Settings?profilepage=settings';
            } else if ($('#CTA_TDD_DAA').is(':visible')) {
                // account deactivated
                window.location.hash = ''; // for older browsers, leaves a # behind
                history.pushState('', document.title, window.location.pathname); // nice and clean
                $(".CTA_TDD_Holder").css("display", "none");
                $("#CTA_TDD_DAA").css("display", "none");
                hideAuthHolders();
                showAuthHolder();
                $(".Login_Holder").css("display", "flex");
                //omnihelpers.loginStart();
            } else if ($('#CTA_TDD_TGNNL').is(':visible')) {
                // newsletter
                TGNNL_archiveClick();
            }
            return false;
        });
        $('#ASunlinkTW').click(function () {
            unlinkTW("true", "AccountSettings");
            return false;
        });
        $('#ASunlinkFB').click(function () {
            unlinkFB("true", "AccountSettings");
            return false;
        });
        $('#WEunlinkTW').click(function () {
            unlinkTW("true", "Welcome");
            return false;
        });
        $('#WEunlinkFB').click(function () {
            unlinkFB("true", "Welcome");
            return false;
        });
        $('#AuthExtraDAPlink').click(function () {
            //hideAuthHolders();
            showAuthHolder();
            $(".RequestDelete_Holder").css("display", "block");
            $(".AH_Close").css("display", "block");
                $(".RequestDeletePartA").css("display", "block");
                $(".RequestDeletePartB").css("display", "none");
            return false;
        });
        //
        $('#AuthDeleteButton').click(function () {
            UserDeleteRequestSend();
            return false;
        });
        //
        $('#DeleteCancelButton').click(function () {
            hideAuthHolders();
            show_accountSettings_Holder();
            return false;
        });
        $('#Login_FacebookLoginRedirect_Holder').mouseup(function () {
            // here we can run code before going to FB Auth
            unlinkFB("false", "");
        });
        $('#Login_TwitterLoginRedirect_Holder').mouseup(function () {
            // here we can run code before going to TW Auth
            unlinkTW("false", "");
        });
        $('#FacebookLoginRedirect_Holder').mouseup(function () {
            // here we can run code before going to FB Auth
            unlinkFB("false", "");
        });
        $('#FacebookSignupRedirect_Holder').mouseup(function () {
            // here we can run code before going to FB Auth
            unlinkFB("false", "");
        });
        $('#SignInTW').mouseup(function () {
            // here we can run code before going to TW Auth
            AuthTWRedirect();
        });
        $('#SignInFB').mouseup(function () {
            // here we can run code before going to TW Auth
            AuthFBRedirect();
        });
        $('#SignUpTW').mouseup(function () {
            // here we can run code before going to TW Auth
            AuthTWRedirect();
        });
        $('#SignUpFB').mouseup(function () {
            // here we can run code before going to TW Auth
            AuthFBRedirect();
        });
        function AuthTWRedirect() {
            var returnUrlEL = "/";
            var myURL = document.domain;
            var a = location.pathname;
            // too late? SES
            localStorage.setItem("SocialReturnToURL", a);
            if (myURL == "local.gatesnotes.com") {
                returnUrlEL = "/back/local";
            }
            if (myURL == "sbe.gatesnotes.com") {
                returnUrlEL = "/back/sbe";
            }
            if (myURL == "staging.gatesnotes.com") {
                returnUrlEL = "/back/staging";
            }
            if (myURL == "ppe.gatesnotes.com") {
                returnUrlEL = "/back/ppe";
            }
            if (myURL == "portal.gatesnotes.com") {
                returnUrlEL = "/back/portal";
            }
            if (myURL == "gatesnotes.com" || myURL == "www.gatesnotes.com") {
                returnUrlEL = "/";
            }
            $.ajax({
                url: Auth4Config_AuthServiceURL + "ExternalLogins",
                dataType: "json",
                data: {
                    returnUrl: returnUrlEL,
                    generateState: "true"
                },
                type: "GET",
                success: function (data) {
                    var dataTW = data[1];
                    //console.log("dataTW.Url:" + dataTW.Url);
                    //console.log("dataTW.Name:" + dataTW.Name);
                    //console.log("dataTW.State:" + dataTW.State);
                    dataTWUrl = dataTW.Url.replace("/api/Account", "");
                    window.location.href = Auth4Config_AuthServiceURL + dataTWUrl;
                },
                error: function (request, status, error) {
                    console.log("ERROR:" + request.responseText);
                }
            });
        }
        function AuthFBRedirect() {
            var returnUrlEL = "/";
            var a = location.pathname;
            // too late? SES
            localStorage.setItem("SocialReturnToURL", a);
            var myURL = document.domain;
            if (myURL == "local.gatesnotes.com") {
                returnUrlEL = "/back/local";
            }
            if (myURL == "sbe.gatesnotes.com") {
                returnUrlEL = "/back/sbe";
            }
            if (myURL == "staging.gatesnotes.com") {
                returnUrlEL = "/back/staging";
            }
            if (myURL == "ppe.gatesnotes.com") {
                returnUrlEL = "/back/ppe";
            }
            if (myURL == "portal.gatesnotes.com") {
                returnUrlEL = "/back/portal";
            }
            if (myURL == "gatesnotes.com" || myURL == "www.gatesnotes.com") {
                returnUrlEL = "/";
            }
            //http://gatesnotesinsiders.azurewebsites.net/api/Account/ExternalLogins?returnUrl=%2F&generateState=true
            $.ajax({
                url: Auth4Config_AuthServiceURL + "ExternalLogins",
                dataType: "json",
                data: {
                    returnUrl: returnUrlEL,
                    generateState: "true"
                },
                type: "GET",
                success: function (data) {
                    var dataFB = data[0];
                    //console.log("dataFB.Url:" + dataFB.Url);
                    //console.log("dataFB.Name:" + dataFB.Name);
                    //console.log("dataFB.State:" + dataFB.State);
                    dataFBUrl = dataFB.Url.replace("/api/Account", "");
                    window.location.href = Auth4Config_AuthServiceURL + dataFBUrl;
                },
                error: function (request, status, error) {
                    console.log("ERROR:" + request.responseText);
                }
            });
        }
        $('#TwitterLoginRedirect_Holder').mouseup(function () {
            // here we can run code before going to TW Auth
            unlinkTW("false", "");
        });
        $('#TwitterSignupRedirect_Holder').mouseup(function () {
            // here we can run code before going to TW Auth
            unlinkTW("false", "");
        });
        $('#accountSettings_FacebookLoginRedirect_Holder').mouseup(function () {
            // here we can run code before going to FB Auth
            unlinkFB("false", "AccountSettings");
        });
        $('#accountSettings_TwitterLoginRedirect_Holder').mouseup(function () {
            // here we can run code before going to TW Auth
            unlinkTW("false", "AccountSettings");
        });
        $('#Welcome_FacebookLoginRedirect_Holder').mouseup(function () {
            // here we can run code before going to FB Auth
            unlinkFB("false", "Welcome");
        });
        $('#Welcome_TwitterLoginRedirect_Holder').mouseup(function () {
            // here we can run code before going to TW Auth
            unlinkTW("false", "Welcome");
        });
        $(".TGN_site_Menu").click(function () {
            toggle_mainMenu();
            return false;
        });
        $(".TGN_MainMenu_TopClose").click(function () {
            toggle_mainMenu();
            return false;
        });

        //
        // END Auth_4_0_ Button Clicks and Functions
        //


        function TGN_site_GetBookmarks() {
            //console.log("******** SETUP BOOKMARK DATA CALL FOR USERS WE THINK ARE LOGGED IN ********");
            //var TGN_site_BookmarkData = getlookGIdata("TGN_Site", "TGN_ArticleBookmark", "BookmarkList", currentUserUserName);
        }
        TGN_site_GetBookmarks();
    });
    //
    // END OF DOC READY FUNCTION
    //
    function toggle_mainMenu() {
        hideGNCommTopUserMenuPop();
        $("#TGN_MainMenu_Holder").toggleClass("showing");
        if ($("#TGN_MainMenu_Holder").hasClass("showing")) {
            $(".TGN_site_MenuIcon").css("display","none");
            $(".TGN_site_MenuX").css("display","block");
            TGN_site_Disable();
        } else {
            $(".TGN_site_MenuIcon").css("display","block");
            $(".TGN_site_MenuX").css("display","none");
            TGN_site_Enable();
        }
    }
    function TGN_hide_mainMenu() {
        $("#TGN_MainMenu_Holder").removeClass("showing");
        $(".TGN_site_MenuIcon").css("display","block");
        $(".TGN_site_MenuX").css("display","none");
        TGN_site_Enable();
    }
    function TGN_site_Disable() {
        //$(".TGN_site_Header").addClass("TGN_site_Disabled");
        //$(".TGN_site_Slideheader").addClass("TGN_site_Disabled");
        //$(".TGN_site_myProfileHeader").addClass("TGN_site_Disabled");
        //$(".TGN_site_ContentArea").addClass("TGN_site_Disabled");
        //$(".TGN_site_Footer").addClass("TGN_site_Disabled");
        $("#TGN_MainMenu_Screen").css("display","block");
    }
    function TGN_site_Enable() {
        //$(".TGN_site_Header").removeClass("TGN_site_Disabled");
        //$(".TGN_site_Slideheader").removeClass("TGN_site_Disabled");
        //$(".TGN_site_myProfileHeader").removeClass("TGN_site_Disabled");
        //$(".TGN_site_ContentArea").removeClass("TGN_site_Disabled");
        //$(".TGN_site_Footer").removeClass("TGN_site_Disabled");
        $("#TGN_MainMenu_Screen").css("display","none");
    }
    //function closeEditProfile() {
    //    if (currentUserData.ProfileImage != "") {
    //        if (currentUserImageProfileBlobData == "none") {
    //            $(".Auth_ProfileSettings_Nav_UserImage").css("background-image", "url(\"" + currentUserData.ProfileImage + "\")");
    //        } else {
    //            $(".Auth_ProfileSettings_Nav_UserImage").css("background-image", "url('data:image/jpg;base64," + currentUserImageProfileBlobData + "')");
    //        }
    //        $(".Auth_ProfileImage").css("opacity", 1);
    //    } else {
    //        $(".Auth_ProfileImage").css("opacity", 1);
    //    }
    //    $(".Auth_ProfileImage_Edit").css("background-color", "rgba(0,0,0,0)");
    //    $(".Auth_ProfileImage_Edit").css("display", "none");
    //    $(".Auth_ProfileImage_Progress").css("display", "none");
    //    $(".Auth_ProfileControls").css("display", "block");
    //    $(".Auth_ProfileControlsEdit").css("display", "none");
    //    $(".txtEntryBoxName").css("display", "none");
    //    $("#myProfile_txtProfileFirstName").css("display", "none");
    //    $("#myProfile_txtProfileLastName").css("display", "none");
    //    $("#Auth_FieldHolder_MP_Name").css("display", "none");
    //    $("#Auth_ProfileName").css("display", "block");
    //    $(".myProfileError").css("display", "none");
    //}
    function InitialAuthOmniture() {
        // Omniture
        //console.log("Omniture: " + readALSCookie("ALSU") + "currentUserData.NewsletterOption: " + currentUserData.NewsletterOption + ":" + currentUserData.IsApproved);
        if (readALSCookie("ALSU") == "ALS_closed" || readALSCookie("ALSU") == "ALS_signedup") {
            if (readALSCookie("ALSU") != "ALS_closed") {
                // User has signed in at some point
                if (getNewsletterOption("newsletter") == "true") {
                    if (currentUserData.IsApproved == "true") {
                        // signed in AND verified News ON
                        Auth_4_0_TrackRegState("signedin_vt_nlt");
                    } else {
                        // signed in News ON
                        Auth_4_0_TrackRegState("signedin_vf_nlt");
                    }
                } else if (getNewsletterOption("newsletter") == "false") {
                    if (currentUserData.IsApproved == "true") {
                        // signed in AND verified News OFF
                        Auth_4_0_TrackRegState("signedin_vt_nlf");
                    } else {
                        // signed in News OFF
                        Auth_4_0_TrackRegState("signedin_vf_nlf");
                    }
                    if (currentUserData.DeactivatedAccount == "true" || currentUserData.DeactivatedAccount == "requestedDelete") {
                        // signed in AND requested delete
                        Auth_4_0_TrackRegState("signedin_rd");
                    }
                } else {
                    // signed up but not currently in
                    Auth_4_0_TrackRegState("signedout");
                }
                //console.log("ALS_signedup");
            } else {
                // never signed up AND closed our CTA
                //console.log("ALS_closed");
                Auth_4_0_TrackRegState("closedCTA");
            }
        } else {
            // never signed up (or cleared/disabled cookies)
            //console.log("none");
            Auth_4_0_TrackRegState("noUserCookie");
        }
        //
    }
    function Auth_4_0_TrackRegState(regState) {
        //console.log("Auth_4_0_TrackRegState:" + regState);
        omnihelpers.registrationState(regState);
    }
    function UserDeleteRequestSend() {
        var userRequestOptional = document.getElementById('RequestDeleteTA');
        var userRequestOptionalENC = (userRequestOptional.value);
        $.ajax({
            url: Auth4Config_AuthServiceURL + "UserDeleteRequestSend",//?userRequestOptional=" + userRequestOptionalENC,
            headers: { 'authorization': 'Bearer ' + localStorage.getItem(tokenKey) },
            dataType: "json",
            data: {
                userRequestOptional: userRequestOptional.value
            },
            type: "POST",
            success: function (data) {
                //console.log("UserDeleteRequestSend" + data);
                $(".RequestDeletePartA").css("display", "none");
                $(".RequestDeletePartB").css("display", "block");
            },
            error: function (request, status, error) {
                console.log("ERROR:" + request.responseText + " e:" + error);
                if (error == "Unauthorized") {
                    noActiveUser();
                }
            }
        });
        return false;
    }
    function resendVerifyLink() {
        $.ajax({
            url: Auth4Config_AuthServiceURL + "resendVerifyLink",
            headers: { 'authorization': 'Bearer ' + localStorage.getItem(tokenKey) },
            dataType: "json",
            type: "GET",
            success: function (data) {
                //console.log("user data" + data);
            },
            error: function (request, status, error) {
                console.log("ERROR:" + request.responseText + " e:" + error);
                if (error == "Unauthorized") {
                    noActiveUser();
                }
            }
        });
        return false;
    }
    function closeminiCTA(whatCTA) {
        currentUserData.miniCTAcookie = "closed";
        currentUserminiCTAcookie = "closed";

        date = new Date();
        date.setDate(date.getDate() + 1);
        var endDateString = date.getFullYear() + '-' + (date.getMonth() + 1) + '-' + date.getDate();
        //console.log("endDateString:" + endDateString);

        currentUserminiCTAcookieEXP = endDateString;
        currentUserData.miniCTAcookieEXP = endDateString;

        compareUserInfo("");
        return false;
    }
    function authFB() {
        // set user properties before running click event
        //$('#accountSettings_FacebookLoginRedirect_LoginwithFacebook_facebookLoginButton').trigger('click');
    }
    function authTW() {
    }
    function unlinkTW(ulValue, overlayValue) {
        $.ajax({
            url: Auth4Config_AuthServiceURL + "unlinkTW?ulValue=" + ulValue + "&overlayValue=" + overlayValue,
            dataType: "json",
            headers: { 'authorization': 'Bearer ' + localStorage.getItem(tokenKey) },
            type: "GET",
            success: function (data) {
                //console.log("user data" + data);
                authTW();
            },
            error: function (request, status, error) {
                console.log("ERROR:" + request.responseText + " e:" + error);
                if (error == "Unauthorized") {
                    noActiveUser();
                }
            }
        });
        return false;
    }
    function unlinkFB(ulValue, overlayValue) {
        $.ajax({
            url: Auth4Config_AuthServiceURL + "unlinkFB?ulValue=" + ulValue + "&overlayValue=" + overlayValue,
            dataType: "json",
            headers: { 'authorization': 'Bearer ' + localStorage.getItem(tokenKey) },
            type: "GET",
            success: function (data) {
                //console.log("user data" + data);
                authFB();
            },
            error: function (request, status, error) {
                console.log("ERROR:" + request.responseText + " e:" + error);
                if (error == "Unauthorized") {
                    noActiveUser();
                }
            }
        });
        return false;
    }
    function setUploadedProfileImage() {
        localStorage.setItem('currentUserImageProfileBlobData',"");
        currentUserData.UploadedProfileImage = "UserUploaded";
        currentUserData.ProfileImage = "UserUploaded";
        compareUserInfo("GUI");
        $("#WEAuth_ProfileImage_Progress").find(".Auth_Profile_ProgressPreview").html("Uploaded");
            $(".Auth_IUP_Error").css("display", "none");
        return false;

    }
    function uploadProfileImage() {
        $('#UploadProfileImageFile').trigger('click');
    }
    function ProfilefileSelect() {
        //console.log("PFS");
        var data = new FormData();
        var files = $("#UploadProfileImageFile").get(0).files;
        var file = files[0];
        var name = file.name;
        var size = file.size;
        var type = file.type;
        var reader = new FileReader();
        reader.onload = function (e) {
        }
        reader.readAsDataURL(files[0]);
        // Add the uploaded image content to the form data collection
        if (files.length > 0 && size < 25000000 && (type == "image/jpeg" || type == "image/png")) {
            $(".Auth_ProfileSettings_Nav_UserUpload").css("display", "block");
            $(".Auth_ProfileImageEditLockup").css("opacity", 0);
            data.append("UploadedImage", files[0]);
            //new
            data.append("Name", currentUserData.PasswordToken);//"1234");
            // Make Ajax request with the contentType = false, and procesDate = false
            var ajaxRequest = $.ajax({
                type: "POST",
                headers: { 'authorization': 'Bearer ' + localStorage.getItem(tokenKey) },
                xhr: function () {  // Custom XMLHttpRequest
                    var myXhr = $.ajaxSettings.xhr();
                    if (myXhr.upload) { // Check if upload property exists
                        myXhr.upload.addEventListener('progress', PFprogressHandlingFunction, false); // For handling the progress of the upload
                    }
                    return myXhr;
                },
                url: Auth4Config_AuthServiceURL + "profileimage",//"http://gatesnotesazure.azurewebsites.net/api/ProfileImage?name=" + currentUserData.PasswordToken,//"/tgnservices/nlsu.asmx/uploadProfileImage",
                contentType: false,
                processData: false,
                data: data
            });

            ajaxRequest.done(function (xhr, textStatus) {
                currentUserImageProfileBlobCycle = 0;
                // Do other operation
                //console.log("ajax done");
                //console.log("textStatus:" + textStatus + " xhr:" + xhr);
                $(".Auth_ProfileSettings_Nav_UserUpload").css("display", "none");
                $(".Auth_ProfileImageEditLockup").css("opacity", 1);
                $(".TGN_SmallPassiveButton").css("display","none");
                // Give user feedback
                omnihelpers.editProfile("profile image");
                setUploadedProfileImage();
                //getUserInfo();
            });
        } else {
            // explain why image not uploaded
            $(".Auth_IUP_Error").css("display", "block");
            $(".Auth_ProfileSettings_Nav_UserUpload").css("display", "block");
            // The image you are trying to upload is either too big or is an unacceptable format. Please upload a .jpg or .png image that is under 25MB.
        }


    }
    function PFprogressHandlingFunction(e) {
        //console.log("PFprogressHandlingFunction");
        if (e.lengthComputable) {
            $('progress').attr({ value: e.loaded, max: e.total });
            //console.log("loaded:" + e.loaded + " total:" + e.total);
        }
    }

    function handleFBLoginKeyPress(e) {
        return false;
    }
    // disable FB Login on Enter Key
    document.onkeypress = function (evt) {
        return ((evt) ? evt : ((event) ? event : null)).keyCode != 13;
    };
    function handleLoginKeyPress(e) {
        var key = e.keyCode || e.which;
        //console.log(key);
        // esc key
        if (key == 27) {
            //
        }
        // enter key
        if (key == 13) {
            //logMeIn("signin");
            CheckUserName(LoginEmailelement.value, "signin");
        }

        return false;
    }
    function handleRegisterKeyPress(e) {
        var key = e.keyCode || e.which;
        if (key == 13) {
            RegisterMe();
        }

        return false;
    }
    function handleForgotPasswordKeyPress(e) {
        var key = e.keyCode || e.which;
        if (key == 13) {
            checkForgotPassword();
        }

        return false;
    }
    function showForgotPasswordError(text) {
        $("#AuthForgotPWtxt").css("display", "none");
        $("#FPemailValidationBoxB").css("display", "block");
        $("#FP_Mob_Password_Error").css("display", "block");
        $("#FPemailValidationBoxB").find(".validNoTxt").css("display", "inline-block");
        $("#FPemailValidationBoxB").find(".validNoTxt").html(text);
        $("#FP_Mob_Password_Error").html(text);
        //$(".AuthSUErrorTxt").html(text);
        //$(".AuthSUErrorTxt").css("display", "block");
        RegValidationSum += "Email";
        $("#FPemailValidationBoxB").find(".validNoDuplicateTxt").css("display", "none");
    }
    function checkForgotPassword() {
        // check to see if already registered
        var forgotEmail = $("#FPtxtEmail").val();
        if (!isValidEmailAddress(forgotEmail)) {
            //console.log(Auth4Config_EmailInvalid);
            showForgotPasswordError(Auth4Config_EmailInvalid);
        } else {
            $.ajax({
                url: Auth4Config_AuthServiceURL + "checkForgotPassword",//?email=" + forgotEmail,
                dataType: "json",
                data: {
                    email: forgotEmail
                },
                type: "POST",
                success: function (data) {
                    //console.log("forgotEmail DATA:" + data);
                    // exists
                    $("#AuthForgotPWtxt").css("display", "block");
                    $("#FPemailValidationBoxB").css("display", "none");
                    $("#FP_Mob_Password_Error").css("display", "none");
                    $("#FPemailValidationBoxB").find(".validNoTxt").css("display", "none");
                    $("#FPemailValidationBoxB").find(".validNoTxt").html("");
                    $("#FPemailValidationBoxB").find(".validNoDuplicateTxt").css("display", "none");
                    // disable field and button
                    $("#ResetPasswordButton").prop("disabled", true);
                    $("#ResetPasswordButton").css("display", "none");
                    $("#FPtxtEmail").prop("disabled", true);
                },
                error: function (request, status, error) {
                    console.log("ERROR:" + request.responseText);
                    // doesn't exist
                    showForgotPasswordError(Auth4Config_EmailMissing);
                }
            });
        }
    }
    function handleResetPasswordKeyPress(e) {
        var key = e.keyCode || e.which;
        if (key == 13) {
            checkResetPassword();
        }

        return false;
    }
    function checkResetPassword() {
        var newRP1 = document.getElementById('RPtxtPassword');
        var newRP2 = document.getElementById('RPtxtPasswordConfirm');


        // check pass 1
        password = newRP1.value;
        passwordconfirm = newRP2.value;
        //console.log(password + ":::" + passwordconfirm);
        var RPpassword1Valid = false;
        var RPpassword2Valid = false;
        if ((passwordconfirm == initialTxtPassConfirm || passwordconfirm == "") && (password == initialTxtPassword || password == "")) {
            $("#pass1ValidationBoxB").css("display", "none");
            RPpassword1Valid = false;
        } else {
            if (password.length < Auth4Config_PasswordMin || password == initialTxtPassword) {
                //console.log("bad pwd too short");
                showResetPasswordError(Auth4Config_PasswordTooShort);
            } else {
                //check for characters that aren't allowed
                //console.log(initialTxtPassword+":" + password);
                $("#RPpass1ValidationBoxB").css("display", "none");
                $("#RP_Mob_Password_Error").css("display", "none");
                $("#RPpass1ValidationBoxB").find(".validNoTxt").css("display", "none");
                RPpassword1Valid = true;
                // check pass 2
                //console.log(password + ":" + passwordconfirm + ":" + initialTxtPassConfirm + ":" + RegButtonClicked);
                if ((passwordconfirm == initialTxtPassConfirm || passwordconfirm == "") && (password == initialTxtPassword || password == "")) {
                    $("#RPpass2ValidationBoxB").css("display", "none");
                    RPpassword2Valid = false;
                } else {
                    if (password != passwordconfirm) {
                        //console.log("bad pwd not matching");
                        showResetPasswordError(Auth4Config_PasswordNotMatching);
                    } else {
                        //check for characters that aren't allowed
                        //console.log("good pwd:" + passwordconfirm);
                        $("#RPpass2ValidationBoxB").css("display", "none");
                        $("#RP_Mob_Password_Error").css("display", "none");
                        $("#RPpass2ValidationBoxB").find(".validNoTxt").css("display", "none");
                        RPpassword2Valid = true;

                    }
                }

            }
        }

        // if all good
        if (RPpassword1Valid && RPpassword2Valid) {
            //console.log(password + ":" + passwordconfirm + ":" + RPpassword1Valid + ":" + RPpassword2Valid);
            resetNewPassword(password);
        }
    }
    function showResetPasswordError(text) {
        $("#RPpass1ValidationBoxB").css("display", "block");
        $("#RP_Mob_Password_Error").css("display", "block");
        $("#RPpass1ValidationBoxB").find(".validNoTxt").css("display", "inline-block");
        $("#RPpass1ValidationBoxB").find(".validNoTxt").html(text);
        $("#RPpass2ValidationBoxB").css("display", "block");
        $("#RPpass2ValidationBoxB").find(".validNoTxt").css("display", "inline-block");
        $("#RPpass2ValidationBoxb").find(".validNoTxt").html("unable to reset password");
        $("#RP_Mob_Password_Error").html(text);
        //$(".RPAuthSUErrorTxt").html(text);
        RPpassword1Valid = false;
    }
    function resetNewPassword(newPassword) {
        var userToken = getParameterByName('reset');
        var userTokenH = getParameterByName('hash');
        userToken = userToken.replace("user", "");
        //console.log("new pass: " + newPassword + " UT: " + userToken);
        //userToken = parseInt(userToken);
        if (userToken != null) {
        }
        $.ajax({
            url: Auth4Config_AuthServiceURL + "resetNewPassword",
            dataType: "json",
            headers: { 'authorization': 'Bearer ' + localStorage.getItem(tokenKey) },
            data: {
                Password: newPassword,
                Code: userToken,
                Hash: userTokenH
                // send Code and Hash and Password
            },
            type: "POST",
            success: function (data) {
                //localStorage.setItem(tokenKey, data);// set once we hook this up
                //console.log("user data" + data);
                omnihelpers.editProfile("password");
                $("#RPAuth_Paragraph").css("display", "block");
                $("#SetNewPasswordButton").css("display", "none");
                $("#SetNewPasswordOKButton").css("display", "block");
                // disable reset form
                //$("#RPtxtPassword").prop('disabled', true);
                //$("#RPtxtPasswordConfirm").prop('disabled', true);
                // after short delay send to login page
                //setTimeout(function () {
                //    //window.location.href = '/';
                //    var a = location.pathname;
                //    window.history.replaceState("", "", a);
                //    //window.history.pushState("", "", '/');
                //    hideAuthHolders();
                //    showAuthHolder();
                //    $(".Login_Holder").css("display", "flex");
                //    $(".ResetPassword_Holder").css("display", "none");
                //    //omnihelpers.loginStart();
                //    forceFromServer = true;
                //    //getUserInfo();
                //}, 2000);
            },
            error: function (request, status, error) {
                console.log("ERROR:" + request.responseText);
                $("#RPpass2ValidationBoxB").css("display", "block");
                $("#RP_Mob_Password_Error").html("This reset password link is no longer valid")
                $("#RP_Mob_Password_Error").css("display", "block");
                $("#RPpass2ValidationBoxB").find(".validNoTxt").css("display", "inline-block");
                $("#RPpass2ValidationBoxb").find(".validNoTxt").html("unable to reset password");
                $("#SetNewPasswordButton").addClass("RegButtonDisabled");
                //$("#RP_Mob_Password_Error").html("unable to reset password");
                //$(".RPAuthSUErrorTxt").html("unable to reset password");
                //RegValidationSum += "Pass";
            }
        });
        return false;
    }
    function setNewPassword(newPassword, oldPassword) {
        //console.log("new pass: " + newPassword + ":" + oldPassword);
        if (oldPassword == null || oldPassword == "") {
            oldPassword = "f4f";
        }
        $.ajax({
            url: Auth4Config_AuthServiceURL + "setNewPassword",
            dataType: "json",
            headers: { 'authorization': 'Bearer ' + localStorage.getItem(tokenKey) },
            data: {
                newPassword: newPassword,
                oldPassword: oldPassword
            },
            type: "POST",
            success: function (data) {
                //console.log("SetNewPassData: " + data);
                omnihelpers.editProfile("password");
                ASPASSButtonClicked = "false";
                $("#AuthSavePassword").parent().css("display", "none");
                $("#AS_txtPassword").attr("placeholder","Reset your password");
                $("#AS_txtPassword").css("display", "inline-block");
                $("#AS_txtNewPassword").css("display", "none");
                $("#ASpassValidationBoxB").css("display", "none");
                $("#ASpassValidationBoxNewB").css("display", "none");
                $("#AS_Mob_Password_Error").css("display", "none");
                $("#ASpassValidationBoxB").find(".validNoTxt").css("display", "none");
                $("#AS_txtPassword").val('');
                $("#AS_txtNewPassword").val('');
                getUserInfo();
                //
            },
            error: function (request, status, error) {
                console.log("ERROR:" + request.responseText);
                // else update validation text
                $("#ASpassValidationBoxNewB").css("display", "block");
                $("#AS_Mob_Password_Error").css("display", "block");
                $("#ASpassValidationBoxNewB").find(".validNoTxt").css("display", "inline-block");
                $("#ASpassValidationBoxNewB").find(".validNoTxt").html(Auth4Config_PasswordUnableToChange);
                $("#AS_Mob_Password_Error").html(Auth4Config_PasswordUnableToChange);
            }
        });
        return false;
    }
    function setUserFirstTime() {
        currentUserData.FirstTimeUser = "false";
        compareUserInfo("");
            if (localStorage.getItem('currentUserCampaignQS') != null && localStorage.getItem('currentUserCampaignQS') != "") {
                setCRMField("gn_origincampaign", localStorage.getItem('currentUserCampaignQS'), "string");
                console.log("crm gn_origincampaign SENT: " + localStorage.getItem('currentUserCampaignQS'));
            } else {
                setCRMField("gn_origincampaign", "organic", "string");
                console.log("crm gn_origincampaign SENT: organic");
            }
        return false;

    }
    function getSuggestedReads() {
        if (currentUserData.Interest_Topic_List_CSV == "" || currentUserData.Interest_Topic_List_CSV == null) { currentUserData.Interest_Topic_List_CSV = ","; }
    }
    function resetreturnToOverlay() {
        currentUserData.returnToOverlay = "";
        compareUserInfo("");
        return false;
    }
    function compareUserInfo(optionalGetUserInfo) {
        currentUserData.CRMDirty = "true";
        currentUserData.NewsletterOption = JSON.stringify(currentUserNewsletterOptions);
        localStorage.setItem('currentUserData', JSON.stringify(currentUserData));
        $.ajax({
            url: Auth4Config_AuthServiceURL + "UserInfo2",
            dataType: "json",
            type: "GET",
            headers: { 'authorization': 'Bearer ' + localStorage.getItem(tokenKey) },
            success: function (returnedUserData) {
                // compare original | current | returned
                // if current != returned - check current v original if = then make current = returned if not then leave current as is
                for (key in returnedUserData) {
                    if (currentUserData[key] != returnedUserData[key]) {
                        //console.log(key+" orig:" + originalUserData[key] + " cur:" + currentUserData[key] + " ret:" + returnedUserData[key]);
                        if (currentUserData[key] == originalUserData[key]) {
                            currentUserData[key] = returnedUserData[key];
                        }
                    }
                }
                localStorage.setItem('currentUserData', JSON.stringify(currentUserData));
                currentUserEmail = currentUserData.CurrentEmail;
                localStorage.setItem('currentUserEmail', currentUserData.CurrentEmail);
                setTimeout(function () {
                    // set currentUserData
                    $.ajax({
                        url: Auth4Config_AuthServiceURL + "UserInfo2",
                        dataType: "json",
                        type: "POST",
                        data: currentUserData,
                        headers: { 'authorization': 'Bearer ' + localStorage.getItem(tokenKey) },
                        success: function (data) {
                            // post just returns "OK"
                            //currentUserData = jQuery.extend(true, {}, data);
                            originalUserData = jQuery.extend(true, {}, data);
                            if (optionalGetUserInfo == "GUI") {
                                forceFromServer = true;
                                getUserInfo();
                            } else {
                                populateAllAuthUserInfo(1);
                            }
                        },
                        error: function (request, status, error) {
                            console.log("ERROR:" + request.responseText + " e:" + error);
                            if (error == "Unauthorized") {
                                noActiveUser();
                            }
                        }
                    });
                }, 500);
            },
            error: function (request, status, error) {
                console.log("ERROR:" + request.responseText + " e:" + error);
                if (error == "Unauthorized") {
                    noActiveUser();
                }
            }
        });
    }
    function sendWelcomeEmail() {
        hideAuthHolders();
        $.ajax({
            url: Auth4Config_AuthServiceURL + "sendWelcomeEmail",
            headers: { 'authorization': 'Bearer ' + localStorage.getItem(tokenKey) },
            dataType: "json",
            type: "GET",
            success: function (data) {
            },
            error: function (request, status, error) {
            }
        });
        return false;
    }
    function unsubscribeEmail(email) {
        $.ajax({
            url: Auth4Config_AuthServiceURL + "unsubscribeEmail",
            dataType: "json",
            type: "POST",
            data: {
                Email: email
            },
            success: function (data) {
                // show MiniCTA with success message for CRM users
                // We are pre-checking so this should never happen - show overlay for GNI users that directs them to login and adjust their settings
                hideAuthHolders();
                //$(".CTA_TDD_Holder").css("display", "block");
                //$("#CTA_TDD_UnSubYes").css("display", "block");
                SetAuth50_UserNotification("CTA_TDD_UnSubYes");
            },
            error: function (request, status, error) {
                // show MiniCTA with failure message
                hideAuthHolders();
                //$(".CTA_TDD_Holder").css("display", "block");
                //$("#CTA_TDD_UnSubNo").css("display", "block");
                SetAuth50_UserNotification("CTA_TDD_UnSubNo");
            }
        });
        return false;
    }
    function ConfirmUnsubscribe(validateParam, hashParam) {
        // Track 1 - link with token and hash
        hideAuthHolders();
        $.ajax({
            url: Auth4Config_AuthServiceURL + "ConfirmUnsubscribe",
            dataType: "json",
            type: "POST",
            data: {
                Code: validateParam,
                Hash: hashParam
            },
            success: function (data) {
                // able to log user in - toggling them to off and routing them to Setting page
                //console.log("tokenKey:" + tokenKey + " data:" + data);
                localStorage.setItem(tokenKey, data);
                setNewsletterOptions("newsletter","false");
                setNewsletterOptions("survey","false");
                setNewsletterOptions("topofmind","false");
                currentUserData.returnToOverlay = "AccountSettings";
                compareUserInfo("GUI");
            },
            error: function (request, status, error) {
                // unable to log them in, need to show Auth_4_0_UnsubscribeSignIn Overlay
                // show overlay
                hideAuthHolders();
                showAuthHolder();
                $(".UnsubscribeSignIn_Holder").css("display", "block");
                // show close X
            }
        });
        return false;
    }
    function ConfirmEmail(validateParam,hashParam) {
        hideAuthHolders();
        $.ajax({
            url: Auth4Config_AuthServiceURL + "ConfirmEmail",
            dataType: "json",
            type: "POST",
            data: {
                Code: validateParam,
                Hash: hashParam
            },
            success: function (data) {
                localStorage.setItem(tokenKey, data);
                forceFromServer = true;
                getUserInfo();
            },
            error: function (request, status, error) {
                // show miniCTA with option to resend verify
                //$(".CTA_TDD_Holder").css("display", "block");
                //$('#CTA_TDD_CTAPARENT').children('div').css("display", "none");
                //$("#CTA_TDD_VF").css("display", "block");
                SetAuth50_UserNotification("CTA_TDD_VF");
            }
        });
        return false;
    }
    function processUserData(data) {
        //console.log("user data");
        //LOWER_GNI_LOAD: split the rest of this into a processUserData function
        setAuthHeaderUser();
        $.each(data, function (index, element) {
            if (element == null || element == "null") {
                element = "";
            }
            //console.log(index + ":" + element);
        });
        for (key in data) {
            if (currentUserData.CommentToken385155 == null || currentUserData.CommentToken385155 == "null") {
                currentUserData.CommentToken385155 = "";
            } else {
                //localStorage.setItem('UserCommentToken', currentUserData.CommentToken385155);
            }
            if (currentUserData.CommentToken385143 == null || currentUserData.CommentToken385143 == "null") {
                currentUserData.CommentToken385143 = "";
            } else {
                //localStorage.setItem('UserCommentToken', currentUserData.CommentToken385143);
            }
            if (currentUserData.LFID == null || currentUserData.LFID == "null") {
                currentUserData.LFID = "";
                localStorage.setItem('GNCommUserId', "");
                localStorage.setItem('GNCommUserIdNum', "");
            } else {
                localStorage.setItem('GNCommUserId', currentUserData.LFID);
                var LFIDval = currentUserData.LFID.replace("@gatesnotes.fyre.co", "");
                localStorage.setItem('GNCommUserIdNum', LFIDval);
            }
            // set commenting cookie for correct domain
            var A42myURL = document.domain;
            if (A42myURL == "www.gatesnotes.com") {
                localStorage.setItem('UserCommentToken', currentUserData.CommentToken385143);
            } else {
                localStorage.setItem('UserCommentToken', currentUserData.CommentToken385155);
            }
            TGNCom_GetNotificationsPollingCount = 0;
            if (currentUserData.CRMDirty == null || currentUserData.CRMDirty == "null") {
                currentUserData.CRMDirty = "";
            }
            if (currentUserData.title == null || currentUserData.title == "null") {
                currentUserData.title = "";
            }
            if (currentUserData.address == null || currentUserData.address == "null") {
                currentUserData.address = "";
            }
            localStorage.setItem('currentUserAddress', currentUserData.address);
            if (currentUserData.UIExtra1 == null || currentUserData.UIExtra1 == "null") {
                currentUserData.UIExtra1 = "";
            }
            if (currentUserData.UIExtra2 == null || currentUserData.UIExtra2 == "null") {
                currentUserData.UIExtra2 = "";
            }
            if (currentUserData.UIExtra3 == null || currentUserData.UIExtra3 == "null") {
                currentUserData.UIExtra3 = "";
            }
            if (currentUserData.FullName == null || currentUserData.FullName == "null") {
                currentUserData.FullName = "";
            }
            if (currentUserData.FirstName == null || currentUserData.FirstName == "null") {
                currentUserData.FirstName = "";
            }
            if (currentUserData.LastName == null || currentUserData.LastName == "null") {
                currentUserData.LastName = "";
            }
            //if (currentUserData.FullName != currentUserData.FirstName + " " + currentUserData.LastName) {
            //    currentUserData.FirstName = $.trim(currentUserData.FullName.replace(currentUserData.LastName, ''));
            //}
            if (currentUserData.NewsletterOption == null || currentUserData.NewsletterOption == "null") {
                currentUserData.NewsletterOption = "";
            }
            updateNewsLetterLegacyOptions();
            if (currentUserData.CommEMailOption == null || currentUserData.CommEMailOption == "null") {
                currentUserData.CommEMailOption = "true";
            }
            if (currentUserData.CommOnscreenOption == null || currentUserData.CommOnscreenOption == "null") {
                currentUserData.CommOnscreenOption = "true";
            }
            if (currentUserData.HasPassword == null || currentUserData.HasPassword == "null") {
                currentUserData.HasPassword = "";
            }
            if (currentUserData.CoverImage == null || currentUserData.CoverImage == "null") {
                currentUserData.CoverImage = "";
            }
            if (currentUserData.ProfileImage == null || currentUserData.ProfileImage == "null") {
                currentUserData.ProfileImage = "";
            }
            if (currentUserData.UserBlurb == null || currentUserData.UserBlurb == "null") {
                currentUserData.UserBlurb = "";
            }
            if (currentUserData.returnToOverlay == null || currentUserData.returnToOverlay == "null") {
                currentUserData.returnToOverlay = "";
            }
            if (currentUserData.returnToOverlay != "") {
                if (currentUserData.returnToOverlay == "AccountSettings") {
                    show_accountSettings_Holder();
                    resetreturnToOverlay();
                }
                if (currentUserData.returnToOverlay == "Welcome") {
                    //omnihelpers.signupComplete("social", getNewsletterOption("newsletter"), currentUserEmail);
                    showAuthWelcome();
                setUserFirstTime();
                    resetreturnToOverlay();
                }
            }
            if (currentUserData.Interest_Topic_List_CSV == null || currentUserData.Interest_Topic_List_CSV == "null") {
                currentUserData.Interest_Topic_List_CSV = "";
            }
            localStorage.setItem('UserInterest_Topic_List_CSV', currentUserData.Interest_Topic_List_CSV);
            if (currentUserData.FirstTimeUser == null || currentUserData.FirstTimeUser == "null") {
                currentUserData.FirstTimeUser = "";
            }
            if (currentUserData.IsApproved == null || currentUserData.IsApproved == "null") {
                currentUserData.IsApproved = "";
            }
            currentUserminiCTAcookie = data.miniCTAcookie;
            if (currentUserminiCTAcookie == null || currentUserminiCTAcookie == "null") {
                currentUserminiCTAcookie = "";
            }
            currentUserminiCTAcookieEXP = data.miniCTAcookieEXP;
            if (currentUserminiCTAcookieEXP == null || currentUserminiCTAcookieEXP == "null") {
                currentUserminiCTAcookieEXP = "";
            }
            // if currentUserminiCTAcookie = "closed" - check data - if expired reset cookie and EXP values
            if (currentUserminiCTAcookie == "closed") {
                var datecheck = Date.parse(currentUserminiCTAcookieEXP);
                date = new Date();
                //date.setDate(date.getDate() + 2); test to see if it expires correctly
                if (date > datecheck) {
                    currentUserminiCTAcookie = "expired";
                    currentUserminiCTAcookieEXP = "expired";
                    currentUserData.miniCTAcookie = "expired";
                    currentUserData.miniCTAcookieEXP = "expired";
                }
            }
            if (currentUserData.DeactivatedAccount == null || currentUserData.DeactivatedAccount == "null" || currentUserData.DeactivatedAccount == "true") {
                currentUserData.DeactivatedAccount = "false";
            }
            if (currentUserData.PasswordToken == null || currentUserData.PasswordToken == "null") {
                currentUserData.PasswordToken = "";
            }
            if (currentUserData.FBuser == null || currentUserData.FBuser == "null") {
                currentUserData.FBuser = "";
            }
            if (currentUserData.TWuser == null || currentUserData.TWuser == "null") {
                currentUserData.TWuser = "";
            }
            if (currentUserData.emailSource == null || currentUserData.emailSource == "null") {
                currentUserData.emailSource = "";
            }
            if (currentUserData.ProfileImage.indexOf("UserUploaded") >= 0) {
                //LOWER_GNI_LOAD: get this locally if we can
                if (localStorage.getItem('currentUserImageProfileBlobData') == null || localStorage.getItem('currentUserImageProfileBlobData') == '') {
                    if (currentUserImageProfileBlobCycle == 0) {
                        $.ajax({
                            url: Auth4Config_AuthServiceURL + "profileimage",//"http://gatesnotesazure.azurewebsites.net/api/ProfileImage",
                            dataType: "json",
                            headers: { 'authorization': 'Bearer ' + localStorage.getItem(tokenKey) },
                            type: "GET",
                            success: function (data) {
                                if (currentUserImageProfileBlobData != data) {
                                    setUserImageProfileBlobData(data);
                                    localStorage.setItem('currentUserImageProfileBlobData',data);
                                }
                            }
                        });
                    }
                } else {
                    setUserImageProfileBlobData(localStorage.getItem('currentUserImageProfileBlobData'));
                }
            } else {
                currentUserImageProfileBlobData = "none";
                currentUserImageProfileBlobDataStatus = "none";
            }
            if (currentUserData.IsApproved == "false" && currentUserEmail != "") {
                $(".validNoVerify").css("display", "block");
            } else {
                $(".validNoVerify").css("display", "none");
            }
            break;
        }
        // test first time social user
        //console.log("CUN: " + currentUserUserName + "FTU:" + currentUserData.FirstTimeUser);
        if (currentUserData.FirstTimeUser != "false") {
            // display social email option screen
            if (currentUserData.FirstTimeUser == "reg") {
                setUserFirstTime();
            } else {
                showAuthWelcome();
                setUserFirstTime();
                omnihelpers.signupComplete("social", getNewsletterOption("newsletter"), currentUserEmail);
            }
        }
        // test if we should show validation CTA
        //console.log("currentUserData.IsApproved: " + currentUserData.IsApproved + " index:" + document.location.pathname.toLowerCase().toLowerCase().indexOf("newsletter"));
        if (currentUserData.IsApproved == "false" && currentUserEmail != "" && currentUserminiCTAcookie != "closed" && document.location.pathname.toLowerCase().toLowerCase().indexOf("newsletter") < 0 && !CampaignEnabled) {
            // check for closed CTA cookie
            //$(".CTA_TDD_Holder").css("display", "block");
            //$("#CTA_TDD_PV").css("display", "block");
            //$("#CTA_TDD_PV").find(".CTA_TDD_Link").html("Resend verification email.");
            //$("#CTA_TDD_PV").find(".CTA_TDD_Response").html("");
            SetAuth50_UserNotification("CTA_TDD_PV");
        } else if (currentUserData.IsApproved == "true") {
            hideAuthHolders();
            // Handle Auth CTA
            $("#ALS_CTA").css("display", "none");
            $("#AUTH_VERIFY_CTA").css("display", "none");
            $("#AUTH_CTA").css("display", "block");
            //$(".CTA_TDD_Holder").css("display", "block");
            //$("#CTA_TDD_TFV").css("display", "block");
            SetAuth50_UserNotification("CTA_TDD_TFV");
            setIsApprovedNotified();
        }
        if (currentUserEmail == "" && currentUserData.IsApproved=="social") {
            // temp fix for mis-set DB flags
            currentUserData.IsApproved = "false";
            currentUserData.emailSource = "";
            compareUserInfo("GUI");
        } else {
            populateAllAuthUserInfo(1);
        }
        currentUserStatusChecked = "true:user";
        Auth50_GNI_UserStatus.a = "true:user:getUserInfo";
        //send campaign code to CRM if we have one, one hasn't already been sent and the user has just registered
        if (localStorage.getItem('currentUserCampaignQSstatus') == "SentToCRM") {
            console.log("crm cookie Previously SENT: " + localStorage.getItem('currentUserCampaignQS'));
        } else {
            if (localStorage.getItem('currentUserCampaignQS') != null && localStorage.getItem('currentUserCampaignQS') != "") {
                setCRMField("new_signupcampaign", localStorage.getItem('currentUserCampaignQS'), "string");//WT.mc_id//localStorage.setItem('currentUserCampaignQS', campaignParam);
                console.log("crm new_signupcampaign SENT: " + localStorage.getItem('currentUserCampaignQS'));
                localStorage.setItem('currentUserCampaignQSstatus', "SentToCRM");
            } else {
                setCRMField("new_signupcampaign", "organic", "string");
                console.log("crm new_signupcampaign SENT: organic");
                localStorage.setItem('currentUserCampaignQS', "organic");
                localStorage.setItem('currentUserCampaignQSstatus', "SentToCRM");
            }
        }
    }
    function setUserImageProfileBlobData(data) {
        currentUserImageProfileBlobCycle = 1;
        currentUserImageProfileBlobData = data;
        currentUserImageProfileBlobDataStatus = "loaded";
        $(".Auth_ProfileSettings_Nav_UserImage").css("background-image", "url('data:image/jpg;base64," + data + "')");
        $("#AuthenticationHolder_Welcome_Auth_ProfileImage").css("background-image", "url('data:image/jpg;base64," + data + "')");
        $(".ProfileIcon").css("background-image", "url('data:image/jpg;base64," + data + "')");
    }
    var local_currentUserData = null;
    function getUserInfo() {
        //LOWER_GNI_LOAD: check to see if we can get data locally
        //console.log("currentUserData: " + localStorage.getItem('currentUserData'));
        if (localStorage.getItem('currentUserData') != null) {
            local_currentUserData = JSON.parse(localStorage.getItem('currentUserData'));
        }
        if (local_currentUserData != null && forceFromServer != true) {
            // get info locally
            currentUserData = jQuery.extend(true, {}, local_currentUserData);
            originalUserData = jQuery.extend(true, {}, local_currentUserData);
            setTimeout(function() {
                processUserData(local_currentUserData);
            }, 1000);
        } else {
            // get info from server
            forceFromServer = false;
            $.ajax({
                url: Auth4Config_AuthServiceURL + "UserInfo2",
                dataType: "json",
                headers: { 'authorization': 'Bearer ' + localStorage.getItem(tokenKey) },
                type: "GET",
                success: function (data) {
                    //console.log("data2:" + data);
                    currentUserData = jQuery.extend(true, {}, data);
                    originalUserData = jQuery.extend(true, {}, data);
                    localStorage.setItem('currentUserData', JSON.stringify(currentUserData));
                    //console.log("currentUserData:FullName:" + currentUserData.FullName);
                    currentUserEmail = data.CurrentEmail;
                    localStorage.setItem('currentUserEmail', data.CurrentEmail);
                    processUserData(data);
                },
                error: function (request, status, error) {
                    console.log("ERROR:" + request.responseText + " e:" + error);
                    if (error == "Unauthorized") {
                        noActiveUser();
                    }
                }
            });
        }
        return false;
    }
    function updateNewsLetterLegacyOptions() {
        switch (currentUserData.NewsletterOption) {
            case "true":
                setNewsletterOptions("newsletter","true");
                setNewsletterOptions("survey","true");
                setNewsletterOptions("topofmind","true");
                break;
            case "false":
                setNewsletterOptions("newsletter","false");
                setNewsletterOptions("survey","false");
                setNewsletterOptions("topofmind","false");
                break;
            case "desired":
                setNewsletterOptions("newsletter","true");
                setNewsletterOptions("survey","true");
                setNewsletterOptions("topofmind","true");
                break;
            case "":
                setNewsletterOptions("newsletter","true");
                setNewsletterOptions("survey","true");
                setNewsletterOptions("topofmind","true");
                break;
                //case "\"{'subscriptions':{ 'newsletter':'true','survey':'true','topofmind':'false'}}\"":
                //    setNewsletterOptions("newsletter","true");
                //    setNewsletterOptions("survey","true");
                //    setNewsletterOptions("topofmind","false");
                //    break;
            default:
                currentUserNewsletterOptions = JSON.parse(currentUserData.NewsletterOption);
                break;
        }
        currentUserData.NewsletterOption = JSON.stringify(currentUserNewsletterOptions);
    }
    function setNewsletterOptions(id,value) {
        currentUserNewsletterOptions.subscriptions[id] = value;
    }
    function getNewsletterOption(id) {
        return currentUserNewsletterOptions.subscriptions[id];
    }

    function show_accountProfile_Holder() {
        //showAuthHolder();
        //$(".AH_Close").css("display", "none");
        $(".myProfile_Holder").css("display", "block");
        $(".TGN_site_myProfileHeader").css("display", "block");
        $(".myProfileBase_Holder").css("display", "block");
        $(".accountSettings_Holder").css("display", "none");
        $(".myProfile_Holder").css("display", "block");
        $(".Auth_ProfileSettings_NavigationHolder").css("display", "block");
        if (currentUserData.Interest_Topic_List_CSV != currentUserInterest_Topic_List_CSVPrev) {
            getSuggestedReads();
        }
        $(".Auth_ProfileSettings_Nav_BarItem").each(function (i, obj) {
            $(this).find(".Auth_ProfileSettings_Nav_BarItemTop").css("color","#9b9b9b");
            $(this).find(".Auth_ProfileSettings_Nav_BarItemBottom").css("background","#f3f3f3");
        });
        $(".Auth_ProfileSettings_Nav_Profile").find(".Auth_ProfileSettings_Nav_BarItemTop").css("color","#000000");
        $(".Auth_ProfileSettings_Nav_Profile").find(".Auth_ProfileSettings_Nav_BarItemBottom").css("background","#000000");

    }
    function hide_accountSettings_Holder() {
        $(".AH_Close").css("display", "none");
        $(".accountSettings_Holder").css("display", "none");
        $(".myProfile_Holder").css("display", "block");
        $(".myProfileBase_Holder").css("display", "block");
        $(".Auth_ProfileSettings_NavigationHolder").css("display", "block");
        if (currentUserData.Interest_Topic_List_CSV != currentUserInterest_Topic_List_CSVPrev) {
            getSuggestedReads();
        }
    }
    function show_accountSettings_Holder() {
        //showAuthHolder();
        $(".myProfile_Holder").css("display", "block");
        $(".TGN_site_myProfileHeader").css("display", "block");
        $(".accountSettings_Holder").css("display", "block");
        $(".Auth_ProfileSettings_NavigationHolder").css("display", "block");
        $(".myProfileBase_Holder").css("display", "none");
        $(".AH_Close").css("display", "none");
        $(".Auth_ProfileSettings_Nav_BarItem").each(function (i, obj) {
            $(this).find(".Auth_ProfileSettings_Nav_BarItemTop").css("color","#9b9b9b");
            $(this).find(".Auth_ProfileSettings_Nav_BarItemBottom").css("background","#f3f3f3");
        });
        $(".Auth_ProfileSettings_Nav_Settings").find(".Auth_ProfileSettings_Nav_BarItemTop").css("color","#000000");
        $(".Auth_ProfileSettings_Nav_Settings").find(".Auth_ProfileSettings_Nav_BarItemBottom").css("background","#000000");
        setTimeout(function() {
            askForUpdatedSubscriptionSettings();
        }, 10);
    }

    function hide_commentHistory_Holder() {
        $(".AH_Close").css("display", "none");
        $(".commentHistory_Holder").css("display", "none");
        var a = location.pathname;
        a = a.toLowerCase();
        if (a == "/profilesettings" || a == "/profile-settings") {
            $(".myProfile_Holder").css("display", "block");
            $(".myProfileBase_Holder").css("display", "block");
            $(".Auth_ProfileSettings_NavigationHolder").css("display", "block");
        } else {
            hideAuthHolders();
        }
    }
    var UserCommentsLoaded = false;
    function show_commentHistory_Holder() {
        //showAuthHolder();
        $(".myProfile_Holder").css("display", "block");
        $(".TGN_site_myProfileHeader").css("display", "block");
        $(".commentHistory_Holder").css("display", "block");
        $(".Auth_ProfileSettings_NavigationHolder").css("display", "block");
        $(".myProfileBase_Holder").css("display", "none");
        $(".AH_Close").css("display", "none");
        if (localStorage.getItem('UserCommentToken') == "" || localStorage.getItem('UserCommentToken') == "null" || localStorage.getItem('UserCommentToken') == null || UserCommentsLoaded) {

        } else {
            GNCommGetUserComments(localStorage.getItem('GNCommUserIdNum'));
            UserCommentsLoaded = true;
        }
        $(".Auth_ProfileSettings_Nav_BarItem").each(function (i, obj) {
            $(this).find(".Auth_ProfileSettings_Nav_BarItemTop").css("color","#9b9b9b");
            $(this).find(".Auth_ProfileSettings_Nav_BarItemBottom").css("background","#f3f3f3");
        });
        $(".Auth_ProfileSettings_Nav_CommentHistory").find(".Auth_ProfileSettings_Nav_BarItemTop").css("color","#000000");
        $(".Auth_ProfileSettings_Nav_CommentHistory").find(".Auth_ProfileSettings_Nav_BarItemBottom").css("background","#000000");
    }
    function show_bookmarks_Holder() {
        TGN_FillBookmarks();
        $(".myProfile_Holder").css("display", "block");
        $(".TGN_site_myProfileHeader").css("display", "block");
        $(".bookmarks_Holder").css("display", "block");
        $(".Auth_ProfileSettings_NavigationHolder").css("display", "block");
        $(".myProfileBase_Holder").css("display", "none");
        $(".AH_Close").css("display", "none");
        $(".Auth_ProfileSettings_Nav_BarItem").each(function (i, obj) {
            $(this).find(".Auth_ProfileSettings_Nav_BarItemTop").css("color","#9b9b9b");
            $(this).find(".Auth_ProfileSettings_Nav_BarItemBottom").css("background","#f3f3f3");
        });
        $(".Auth_ProfileSettings_Nav_Bookmarks").find(".Auth_ProfileSettings_Nav_BarItemTop").css("color","#000000");
        $(".Auth_ProfileSettings_Nav_Bookmarks").find(".Auth_ProfileSettings_Nav_BarItemBottom").css("background","#000000");
        //load bookmarked items
    }
    function TGN_site_scrollto(pos) {
        $("html, body").animate({ scrollTop: pos+"px" }, 1000);
    }

    function TwitterOAuth() {
        $.ajax({
            url: Auth4Config_AuthServiceURL + "TwitterOAuth",
            dataType: "json",
            headers: { 'authorization': 'Bearer ' + localStorage.getItem(tokenKey) },
            type: "GET",
            success: function (data) {
                //console.log("user data TO" + data);
                forceFromServer = true;
                getUserInfo();
            },
            error: function (request, status, error) {
                console.log("ERROR:" + request.responseText + " e:" + error);
                if (error == "Unauthorized") {
                    noActiveUser();
                }
            }
        });
        return false;
    }
    function setIsApprovedNotified() {
        currentUserData.IsApproved = "notified";
        compareUserInfo("");
        return false;
    }
    function Auth50_htmlEncode(value) {
        //create a in-memory div, set it's inner text(which jQuery automatically encodes)
        //then grab the encoded contents back out.  The div never exists on the page.
        value = value.split(";").join("&#59;");//.replace(";", "&#59;");
        value = value.split("%").join("&#37;");//.replace("%", "&#37;");
        //value = value.replace(";", "&#59;");
        //value = value.replace("%", "&#37;");
        return $('<div/>').text(value).html();
    }
    function EnableRegButton() {
        if (fullnameValid == true && emailValid == true && password1Valid == true && password2Valid == true && addressValid == true) {
            $("#RegButton").removeClass('RegButtonDisabled');
        } else {
            $("#RegButton").addClass('RegButtonDisabled');
        }
    }
    var registermelock = false;
    function RegisterMe() {
        // if all local checks are true
        if (fullnameValid == true && emailValid == true && password1Valid == true && password2Valid == true && addressValid == true && registermelock == false) {
            registermelock = true;
            var RegPSWelement2 = document.getElementById('txtPassword');
            email = RegEmailelement.value;
            //fullname = RegFullNameelement.value;
            fullname = RegFirstNameelement.value + " " + RegLastNameelement.value;
            title = RegTitleelement.value;
            if (title == "blank") {
                title = "";
            }
            //title = "z";
            firstname = RegFirstNameelement.value;
            lastname = RegLastNameelement.value;
            password = RegPSWelement2.value;
            address = Auth50_htmlEncode(address);
            var newsletteroption = RegCheckBoxValue;
            $.ajax({
                url: Auth4Config_AuthServiceURL + "RegisterFunction",
                dataType: "json",
                data: {
                    email: email,
                    password: password,
                    fullname: fullname,
                    title: title,
                    address: address,
                    firstname: firstname,
                    lastname: lastname,
                    firsttimeuser: "false",
                    newsletteroption: newsletteroption
                },
                type: "POST",
                success: function (data) {
                    createAuthCookie("ALSU", "ALS_signedup", 20 * 365);
                    myContactID = data.ContactId;
                    currentUserData.myContactID = myContactID;
                    localStorage.setItem('myContactID', myContactID);
                    currentUserData.FullName = fullname;
                    currentUserData.FirstName = firstname;
                    currentUserData.LastName = lastname;
                    currentUserData.UserName = data.UserName;
                    currentUserData.address = address;
                    currentUserEmail = email;
                    currentUserPassword = password;
                    setNewsletterOptions("newsletter",newsletteroption);
                    localStorage.setItem('FullName', currentUserData.FullName);
                    localStorage.setItem('FirstName', currentUserData.FirstName);
                    localStorage.setItem('LastName', currentUserData.LastName);
                    localStorage.setItem('UserName', currentUserData.UserName);
                    localStorage.setItem('currentUserEmail', currentUserEmail);
                    localStorage.setItem('currentUserAddress', currentUserData.address);
                    currentUserUserName = data.UserName;
                    localStorage.setItem('currentUserUserName',data.UserName);
                    localStorage.setItem('UserName', data.UserName);
                    //localStorage.setItem('currentUserPassword', currentUserPassword);
                    localStorage.setItem('NewsletterOption', getNewsletterOption("newsletter"));
                    omnihelpers.signupComplete("email", getNewsletterOption("newsletter"), currentUserEmail);

                    // new with Reg function returning all data
                    currentUserData = jQuery.extend(true, {}, data.UserInfo2);
                    //originalUserData = jQuery.extend(true, {}, data);
                    currentUserData.AccountCreatedDate = data.UserInfo2.AccountCreatedDate;
                    localStorage.setItem('currentUserData', JSON.stringify(currentUserData));
                    //currentUserEmail = data.CurrentEmail;
                    //localStorage.setItem('currentUserEmail', data.CurrentEmail);
                    //

                    // log user in
                    logMeIn("emailReg");
                    createAuthCookie("TGNCommentNotif_Data", "true", 1);
                    localStorage.setItem('TGNCommentNotif_Data', '{"notifications":[]}');
                    localStorage.setItem('currentUserCampaignQSstatus', "RegisterComplete");
                },
                error: function (request, status, error) {
                    console.log("ERROR:" + request.responseText);
                    var errorTxt = "Processing error.";
                    //$(".AuthSUErrorTxt").html(errorTxt);
                    //$(".AuthSUErrorTxt").css("display", "block");
                    omnihelpers.signupError("Processing error.", "email");
                    registermelock = false;
                }
            });
        } else {
            RegButtonClicked = "true";
        }
    }
    function CheckUserName(email, track) {
        if (track == "signin") {
            email = LoginEmailelement.value;
        }
        $.ajax({
            url: Auth4Config_AuthServiceURL + "CheckUserName",
            dataType: "json",
            data: {
                Email: email
            },
            type: "POST",
            success: function (data) {
                //
                localStorage.setItem(tokenKey, data.access_token);
                currentUserUserName = data.UserName;
                localStorage.setItem('UserName', data.UserName);
                if (track == "signin") {
                    logMeIn("signin");
                }

            },
            error: function (request, status, error) {
                console.log("ERROR:" + request.responseText);
                var errorTxt = "Please enter a valid email and password.";
                $(".AuthErrorTxt").html(errorTxt);
                $("#LI_Mob_All_Error").css("display", "block");
                $("#LI_Mob_All_Error").css("opacity", "1");
            }
        });

    }
    function logMeIn(track) {
        var LoginPSWelement2 = document.getElementById('LItxtPassword');
        if (track == "signin") {
            email = LoginEmailelement.value;
            password = LoginPSWelement2.value;
        } else if (track == "emailReg") {
            email = currentUserEmail;
            password = currentUserPassword;
        }
        $.ajax({
            url: Auth4Config_AuthServiceURL + "LoginFunction",
            dataType: "json",
            data: {
                Email: email,
                UserName: currentUserUserName,
                Password: password,
                grant_type: 'password',
            },
            type: "POST",
            success: function (data) {
                if (data.userName != localStorage.getItem('currentUserUserName')) {
                    console.log("2nd USER");
                    forceFromServer = true;
                    currentUserImageProfileBlobData = "";
                    localStorage.setItem('currentUserImageProfileBlobData',"");
                    localStorage.setItem('currentUserUserName',data.userName);
                }
                createAuthCookie("ALSU", "ALS_signedup", 20 * 365);
                //crm add 5192016
                currentUserActive = "true";
                localStorage.setItem('currentUserActive', currentUserActive);
                //
                localStorage.setItem(tokenKey, data.access_token);
                localStorage.setItem('currentUserEmail', data.userName);
                if (track == "signin") {
                    // users having filled out the signin form
                    $("#LI_Mob_All_Error").css("display", "none");
                    $("#LI_Mob_All_Error").css("opacity", "0");
                    hideAuthHolders();
                    currentUserEmail = data.userName;
                    setAuthHeaderUser();
                    getUserInfo();
                    omnihelpers.loginComplete("email", currentUserEmail);

                    var a = location.pathname;
                    a = a.toLowerCase();
                    if (a == "/signup" || a == "/signin" || a == "/signinfaq" || a == "/sign-up" || a == "/sign-in" || a == "/sign-in-faq") {
                        window.location.href = '/';
                    }
                    currentUserPassword = "";
                } else if (track == "emailReg") {
                    // users having just filled out the reg/signup form
                    sendWelcomeEmail();
                    //populateAllAuthUserInfo(1);
                    hideAuthHolders();
                    setAuthHeaderUser();
                    //forceFromServer = true;
                    getUserInfo();
                    showAuthWelcome();
                setUserFirstTime();
                } else if (track == "fbReg") {
                    // users having just logged in via FB
                } else if (track == "twReg") {
                    // users having just logged in via TW
                }


            },
            error: function (request, status, error) {
                console.log("ERROR:" + request.responseText);
                var errorTxt = "Please enter a valid email and password.";
                $(".AuthErrorTxt").html(errorTxt);
                $("#LI_Mob_All_Error").css("display", "block");
                $("#LI_Mob_All_Error").css("opacity", "1");
            }
        });
    }
    function updateInterests(el) {
        //console.log($(el).find(".ProSetTopics").text() + ":" + $(el).children(":first").children(":first").is(':checked'));
        if ($(el).children(":first").children(":first").is(':checked')) {
            $(el).children(":first").children(":first").prop('checked', false);
            $(el).find(".ProSetOn").css("display","none");
            $(el).find(".ProSetOff").css("display","inline-block");
        } else {
            $(el).children(":first").children(":first").prop('checked', true);
            $(el).find(".ProSetOn").css("display","inline-block");
            $(el).find(".ProSetOff").css("display","none");
        }
        setINT($(el).find(".ProSetTopics").text(), $(el).children(":first").children(":first").is(':checked'));
    }
    function setINT(intName, intValue) {
        var myIntListString = "";
        if (currentUserData.Interest_Topic_List_CSV == null)
        {
            currentUserData.Interest_Topic_List_CSV = "";
        }
        else
        {
            myIntListString = currentUserData.Interest_Topic_List_CSV;
        }
        if (intValue == true)
        {
            if (myIntListString.indexOf(intName) < 0) {
                myIntListString = myIntListString + "," + intName;
            }
        }
        else
        {
            if (myIntListString.indexOf(intName) >= 0) {
                myIntListString = myIntListString.replace(", " + intName, "");
                myIntListString = myIntListString.replace("," + intName, "");
                myIntListString = myIntListString.replace(intName, "");
            }
        }
        currentUserData.Interest_Topic_List_CSV = myIntListString;

        compareUserInfo("");
        if ($(".accountSettings_Holder").is(':visible')) {
            omnihelpers.editProfile("interest");
        }
        return false;
    }
    //DeactivateUserAccount
    function setDeactivated() {
        omnihelpers.deactivateAccount();
        currentUserData.DeactivatedAccount = "true";
        compareUserInfo("");
        logmeout();
        return false;
    }
    function setNewsLetterOption() {
        compareUserInfo("");
        if ($(".accountSettings_Holder").is(':visible')) {
            omnihelpers.editProfile("nl");
        }
        return false;
    }
    function setCommEMailOption() {
        compareUserInfo("");
        return false;
    }
    function setCommOnscreenOption() {
        populateCommentNotifications(TGNCom_GetNotificationsData);
        compareUserInfo("");
        return false;
    }
    function SaveMyProfileSettings() {
        currentUserData.FullName = currentUserData.FullName;
        currentUserData.FirstName = currentUserData.FirstName;
        currentUserData.LastName = currentUserData.LastName;
        compareUserInfo("");
        omnihelpers.editProfile("profile settings");
        return false;
    }
    function setUserEmail() {
        ////console.log("user data" + data);
        $.ajax({
            url: Auth4Config_AuthServiceURL + "setUserEmail",
            dataType: "json",
            headers: { 'authorization': 'Bearer ' + localStorage.getItem(tokenKey) },
            data: {
                UserEmail: currentUserEmail
            },
            type: "POST",
            success: function (data) {
                omnihelpers.editProfile("email");
                //console.log("user data" + data);
                $("#WEemailValidationBoxB").css("display", "none");
                $("#WE_Mob_Email_Error").css("display", "none");
                currentUserData.emailSource = "setUserEmail";
                compareUserInfo("GUI");
            },
            error: function (request, status, error) {
                console.log("ERROR:" + request.responseText + " e:" + error);
                if (error == "Unauthorized") {
                    noActiveUser();
                }
            }
        });
        return false;
    }
    function setUserFullName() {
        currentUserData.title = currentUserData.title;
        currentUserData.FullName = currentUserData.FullName;
        currentUserData.FirstName = currentUserData.FirstName;
        currentUserData.LastName = currentUserData.LastName;
        compareUserInfo("");
        omnihelpers.editProfile("full name");
        return false;
    }
    var AH_CloseOff = false;
    function hideAuthHolders() {
        $(".AH_Holder").scrollTop(0);
        $(".AH_Holder").css("display", "none");
        var a = location.pathname;
        a = a.toLowerCase();
        if (a == "/signup" || a == "/signin" || a == "/sign-up" || a == "/sign-in" || AH_CloseOff) {
            $(".AH_Close").css("display", "none");
        } else {
            $(".AH_Close").css("display", "block");
        }
        $(".accountSettings_Holder").css("display", "none");
        $(".commentHistory_Holder").css("display", "none");
        $(".bookmarks_Holder").css("display", "none");
        $(".AH_BackToProfile").css("display", "none");
        $(".Login_Holder").css("display", "none");
        $(".Register_Holder").css("display", "none");
        $(".FAQ_Holder").css("display", "none");
        $("#Auth_50_Content_Right_BottomInnerLI").css("display", "block");
        $(".ForgotPassword_Holder").css("display", "none");
        $(".myProfile_Holder").css("display", "none");
        $(".Auth_ProfileSettings_NavigationHolder").css("display", "none");
        $(".ResetPassword_Holder").css("display", "none");
        $(".SocialGetEmails_Holder").css("display", "none");
        $(".Welcome_Holder").css("display", "none");
        $(".Deregister_Holder").css("display", "none");
        $(".UnsubscribeSignIn_Holder").css("display", "none");
        $(".RequestDelete_Holder").css("display", "none");
        $("#AuthForgotPWtxt").css("display", "none");
        $("#FPemailValidationBoxb").css("display", "none");
        $("#FP_Mob_Password_Error").css("display", "none");
        $(".DeRegStep1").css("display", "block");
        $(".DeRegStep2").css("display", "none");
    }
    function showAuthHolder() {
        $(".AH_Holder").css("display", "block");
    }
    function showAuthHolders() {
        showAuthHolder();
        $(".accountSettings_Holder").css("display", "block");
        $(".Login_Holder").css("display", "flex");
        $(".Register_Holder").css("display", "flex");
        $(".FAQ_Holder").css("display", "none");
        $("#Auth_50_Content_Right_BottomInnerLI").css("display", "block");
        $(".ForgotPassword_Holder").css("display", "block");
        $(".myProfile_Holder").css("display", "block");
        $(".Auth_ProfileSettings_NavigationHolder").css("display", "block");
        $(".ResetPassword_Holder").css("display", "block");
        $(".SocialGetEmails_Holder").css("display", "block");
        $(".Welcome_Holder").css("display", "flex");
        $(".Deregister_Holder").css("display", "block");
        $(".UnsubscribeSignIn_Holder").css("display", "block");
        $(".RequestDelete_Holder").css("display", "block");
        $("#AuthForgotPWtxt").css("display", "block");
        $("#FPemailValidationBoxB").css("display", "block");
        $("#FP_Mob_Password_Error").css("display", "block");
    }
    function showAuthLogin() {
        hideAuthHolders();
        showAuthHolder();
        $(".Login_Holder").css("display", "flex");
        //omnihelpers.loginStart();
        $(".SIpop").css("display", "none");
        $("#LItxtEmail").val('');
        $("#LItxtPassword").val('');
        $("#LI_Mob_All_Error").css("display", "none");

        var a = location.pathname;
        a = a.toLowerCase();
        //console.log("url: " + a);
        if (a == "/signupfaq" || a == "/sign-up-faq") {
            $(".AH_Close").css("display", "none");
        } else {
        $("#AH_Close").removeClass("AH_Close_Roadblock");
        }
        $("#AH_Holder").removeClass("AH_Holder_Roadblock");
    }
    function showAuthRegister() {
        hideAuthHolders();
        showAuthHolder();
        $(".Register_Holder").css("display", "flex");
        $(".SIpop").css("display", "none");
        //$("#txtFirstName").val('');
        //$("#txtLastName").val('');
        //$("#txtEmail").val('');
        $("#txtPassword").val('');
        $("#txtPasswordConfirm").val('');
        $("#nameValidationBoxB").css("display", "none");
        $("#emailValidationBoxB").css("display", "none");
        $("#pass1ValidationBoxB").css("display", "none");
        $("#pass2ValidationBoxB").css("display", "none");
        $("#SU_Mob_All_Error").css("display", "none");

        RegButtonClicked = "false";
        var a = location.pathname;
        a = a.toLowerCase();
        //console.log("url: " + a);
        if (a == "/signupfaq" || a == "/sign-up-faq") {
            $(".AH_Close").css("display", "none");
        } else {
            $("#AH_Close").removeClass("AH_Close_Roadblock");
        }
        $("#AH_Holder").removeClass("AH_Holder_Roadblock");
    }
    function showAuthSGE() {
        hideAuthHolders();
        showAuthHolder();
        $(".SocialGetEmails_Holder").css("display", "block");
    }
    function showAuthWelcome() {
        hideAuthHolders();
        showAuthHolder();
        $(".Welcome_Holder").css("display", "flex");
    }
    function clearAllForms() {
        //
        if (localStorage.getItem('currentUserActive') != "false") {
            currentUserData.FullName = "";
            currentUserData.FirstName = "";
            currentUserData.LastName = "";
            currentUserEmail = "";
            setNewsletterOptions("newsletter","true");
            currentUserData.CoverImage = "";
            currentUserData.ProfileImage = "";
            currentUserData.Interest_Topic_List_CSV = "";
            //console.log("localStorage.getItem('currentUserActive'):" + localStorage.getItem('currentUserActive'))
            populateAllAuthUserInfo(1);
        }
    }
    function populateAllAuthUserInfo(level) {
        // set field values

        // Header
        $(".userName").html(currentUserData.FullName);

        // Welcome
        var AuthNames = currentUserData.FullName.split(" ");
        $(".AuthWelcomeName").html(AuthNames[0]);

        $('#WEtxtFullName').val(currentUserData.FullName);
        WE_Name = document.getElementById('WEtxtFullName');
        WE_Name.value = currentUserData.FullName;
        //$('#WEtxtFullName').prop('disabled', true);

        $('#WEtxtFirstName').val(currentUserData.FirstName);
        WE_FirstName = document.getElementById('WEtxtFirstName');
        WE_FirstName.value = currentUserData.FirstName;
        //$('#WEtxtFirstName').prop('disabled', true);

        $('#WEtxtLastName').val(currentUserData.LastName);
        WE_LastName = document.getElementById('WEtxtLastName');
        WE_LastName.value = currentUserData.LastName;
        //$('#WEtxtLastName').prop('disabled', true);
        //console.log("WE_Name: " + currentUserData.FullName + ":" + WE_Name.value)
        //$("#WEtxtEmail").prop('disabled', false);
        if (currentUserEmail.indexOf("@") >= 0) {
            $("#WEtxtEmail").val(currentUserEmail);
        } else {
            $("#WEtxtEmail").val("");
        }
        //$("#WEtxtEmail").prop('disabled', true);
        // interests

        // Account Settings
        $("#AS_txtUserTitle").val(currentUserData.title);
        $("#AS_TGN_site_TitleDrop").find(".TGN_site_TitleDropDefaultCopy").addClass("TGN_site_TitleDropDefaultCopyOFF");
        $("#AS_TGN_site_TitleDrop").find(".TGN_site_TitleDropSelectedCopy").text(currentUserData.title).addClass("TGN_site_TitleDropSelectedCopyON");


        //$("#AS_txtFullName").prop('disabled', false);
        $("#AS_txtFullName").val(currentUserData.FullName);
        //$("#AS_txtFullName").prop('disabled', true);

        //$("#AS_txtFirstName").prop('disabled', false);
        $("#AS_txtFirstName").val(currentUserData.FirstName);
        //$("#AS_txtFirstName").prop('disabled', true);

        //$("#AS_txtLastName").prop('disabled', false);
        $("#AS_txtLastName").val(currentUserData.LastName);
        //$("#AS_txtLastName").prop('disabled', true);

        //$("#AS_txtEmail").prop('disabled', false);
        if (currentUserEmail.indexOf("") >= 0) {
            $("#WEtxtEmail").val(currentUserEmail);
        } else {
            $("#WEtxtEmail").val("");
        }
        //$("#WEtxtEmail").prop('disabled', true);
        // interests

        // Account Settings
        //$("#AS_txtFullName").prop('disabled', false);
        $("#AS_txtFullName").val(currentUserData.FullName);
        //$("#AS_txtFullName").prop('disabled', true);

        //$("#AS_txtFirstName").prop('disabled', false);
        $("#AS_txtFirstName").val(currentUserData.FirstName);
        //$("#AS_txtFirstName").prop('disabled', true);

        //$("#AS_txtLastName").prop('disabled', false);
        $("#AS_txtLastName").val(currentUserData.LastName);
        //$("#AS_txtLastName").prop('disabled', true);

        //
        if (currentUserData.address != "") {
            Auth50_decodedAddressStore = decodeURI(currentUserData.address);
            Auth50_JSONAddressStore = jQuery.parseJSON(Auth50_decodedAddressStore);
            //console.log(JSONAddress);
            for (var i = 0; i < Auth50_JSONAddressStore.address_components.length; i++) {
                var addressType = Auth50_JSONAddressStore.address_components[i].types[0];
                if (addressType == "street_number") {
                    $("#AS_txtAddressL1").val(Auth50_JSONAddressStore.address_components[i].long_name);
                }
                if (addressType == "route") {
                    $("#AS_txtAddressL2").val(Auth50_JSONAddressStore.address_components[i].long_name);
                }
                if (addressType == "locality") {
                    $("#AS_txtCity").val(Auth50_JSONAddressStore.address_components[i].long_name);
                }
                if (addressType == "administrative_area_level_1") {
                    $("#AS_txtState").val(Auth50_JSONAddressStore.address_components[i].long_name);
                }
                if (addressType == "postal_code") {
                    $("#AS_txtPostalCode").val(Auth50_JSONAddressStore.address_components[i].long_name);
                }
                if (addressType == "country") {
                    $("#AS_txtCountry").val(Auth50_JSONAddressStore.address_components[i].long_name);
                }
            }
        } else {
            Auth50_JSONAddressStore = CreateNewAddressJSONObj("","","","","","");
        }
        Auth50_SetAddressSourceLocalStore();

        //$("#AS_txtEmail").prop('disabled', false);
        if (currentUserEmail.indexOf("@") >= 0) {
            $("#AS_txtEmail").val(currentUserEmail);
        } else {
            $("#AS_txtEmail").val("");
        }
        //$("#AS_txtEmail").prop('disabled', true);
        // AS Sub Text
        //console.log("currentUserEmail:" + currentUserEmail + ":" + currentUserEmail.indexOf("@"));
        if (currentUserEmail == "" || currentUserEmail.indexOf(""));
        if (currentUserEmail == "" || currentUserEmail.indexOf("@") < 0) {
            //console.log("NOT:" + currentUserEmail + ":" + currentUserEmail.indexOf("@"));
            $("#Auth_FieldHolder_AS_PASS").css("display", "none");
            $("#AuthEmailSubText_AS").html("In order to get emails from Bill you must provide an email");
            //$("#AuthEmailSubText_WE").html("In order to get emails from Bill you must provide an email");
            //$("#AuthEmailSubText_SE").html("In order to get emails from Bill you must provide an email");
            if (getNewsletterOption("newsletter") == "desired" || getNewsletterOption("newsletter") == "true") {
                $("#AuthEmailSubText_AS").css("display", "inline");
                //$("#AuthEmailSubText_WE").css("display", "block");
                //$("#AuthEmailSubText_SE").css("display", "block");
                $(".SE_Email_Holder").css("display", "block");
            } else {
                $("#AuthEmailSubText_AS").css("display", "none");
                $("#AuthEmailSubText_WE").css("display", "none");
                $("#AuthEmailSubText_SE").css("display", "none");
                $(".SE_Email_Holder").css("display", "none");
            }
        } else {
            //console.log("TRUE:" + currentUserEmail + ":" + currentUserEmail.indexOf("@"));
            $("#Auth_FieldHolder_AS_PASS").css("display", "block");
            if (getNewsletterOption("newsletter") == "true") {
                $("#AuthEmailSubText_AS").css("display", "inline");
                //$("#AuthEmailSubText_WE").css("display", "block");
                //$("#AuthEmailSubText_SE").css("display", "block");
                $("#AuthEmailSubText_AS").css("color", "#aaaaaa");
                $("#AuthEmailSubText_AS").html("(Sending emails to " + currentUserEmail + ")");
                //$("#AuthEmailSubText_WE").css("color", "#aaaaaa");
                //$("#AuthEmailSubText_WE").html("Sending emails to " + currentUserEmail);
                //$("#AuthEmailSubText_SE").css("color", "#aaaaaa");
                //$("#AuthEmailSubText_SE").html("Sending emails to " + currentUserEmail);
                $(".SE_Email_Holder").css("display", "none");
            }
        }

        $(".Auth_Subs_On").click(function () {
            setTGNcheckbox("OnOff",$(this).parent().parent().find("input"),"on");
            if ($(this).parent().parent().parent().attr("id") == "AuthcheckboxAS" || $(this).parent().parent().parent().attr("id") == "AuthcheckboxSE" || $(this).parent().parent().parent().attr("id") == "AuthcheckboxWE") {
                setNewsletterOptions("newsletter","true");
                setCommEMailOption();
            }
            if ($(this).parent().parent().parent().attr("id") == "AuthcheckboxAS1b") {
                setNewsletterOptions("survey","true");
                setCommEMailOption();
            }
            if ($(this).parent().parent().parent().attr("id") == "AuthcheckboxAS1c") {
                setNewsletterOptions("topofmind","true");
                setCommEMailOption();
            }
            if ($(this).parent().parent().parent().attr("id") == "AuthcheckboxAS2" || $(this).parent().parent().parent().attr("id") == "AuthcheckboxSE2" || $(this).parent().parent().parent().attr("id") == "AuthcheckboxWE2") {
                currentUserData.CommEMailOption = "true";
                setCommEMailOption();
            }
            if ($(this).parent().parent().parent().attr("id") == "AuthcheckboxAS3" || $(this).parent().parent().parent().attr("id") == "AuthcheckboxSE3" || $(this).parent().parent().parent().attr("id") == "AuthcheckboxWE3") {
                currentUserData.CommOnscreenOption = "true";
                setCommOnscreenOption();
            }
        });
        $(".Auth_Subs_Off").click(function () {
            setTGNcheckbox("OnOff",$(this).parent().parent().find("input"),"off");
            if ($(this).parent().parent().parent().attr("id") == "AuthcheckboxAS" || $(this).parent().parent().parent().attr("id") == "AuthcheckboxSE" || $(this).parent().parent().parent().attr("id") == "AuthcheckboxWE") {
                setNewsletterOptions("newsletter","false");
                setCommEMailOption();
            }
            if ($(this).parent().parent().parent().attr("id") == "AuthcheckboxAS1b") {
                setNewsletterOptions("survey","false");
                setCommEMailOption();
            }
            if ($(this).parent().parent().parent().attr("id") == "AuthcheckboxAS1c") {
                setNewsletterOptions("topofmind","false");
                setCommEMailOption();
            }
            if ($(this).parent().parent().parent().attr("id") == "AuthcheckboxAS2" || $(this).parent().parent().parent().attr("id") == "AuthcheckboxSE2" || $(this).parent().parent().parent().attr("id") == "AuthcheckboxWE2") {
                currentUserData.CommEMailOption = "false";
                setCommEMailOption();
            }
            if ($(this).parent().parent().parent().attr("id") == "AuthcheckboxAS3" || $(this).parent().parent().parent().attr("id") == "AuthcheckboxSE3" || $(this).parent().parent().parent().attr("id") == "AuthcheckboxWE3") {
                currentUserData.CommOnscreenOption = "false";
                setCommOnscreenOption();
            }
        });


        function setTGNcheckbox(type,el,dir) {
            if (type == "OnOff") {
                // On / Off pref toggles
                if (dir == "on") {
                    el.parent().parent().parent().find(".Auth_Subs_On").removeClass("Auth_Subs_InActive");
                    el.parent().parent().parent().find(".Auth_Subs_Off").removeClass("Auth_Subs_Active");
                    el.parent().parent().parent().find("input").addClass("checked");
                } else {
                    el.parent().parent().parent().find(".Auth_Subs_On").addClass("Auth_Subs_InActive");
                    el.parent().parent().parent().find(".Auth_Subs_Off").addClass("Auth_Subs_Active");
                    el.parent().parent().parent().find("input").removeClass("checked");
                }
            } else {
                // Plus / Check interest toggles
                if (dir == "on") {
                    el.prop('checked', true);
                    el.parent().parent().find(".ProSetOn").css("display","inline-block");
                    el.parent().parent().find(".ProSetOff").css("display","none");
                } else {
                    el.prop('checked', false);
                    el.parent().parent().find(".ProSetOn").css("display","none");
                    el.parent().parent().find(".ProSetOff").css("display","inline-block");
                }
            }
        }
        // turn on or off checkbox per user choice //currentUserData.NewsletterOption
        var tgn_checkbox = $("#AuthcheckboxAScb");
        if (getNewsletterOption("newsletter") == "true" || getNewsletterOption("newsletter") == "desired") {
            setTGNcheckbox("OnOff",tgn_checkbox,"on");
        } else {
            setTGNcheckbox("OnOff",tgn_checkbox,"off");
        }
        //getNewsletterOption("newsletter")
        // turn on or off checkbox per user choice //getNewsletterOption("newsletter")
        var Welcometgn_checkbox = $("#AuthcheckboxWEcb");
        if (getNewsletterOption("newsletter") == "true" || getNewsletterOption("newsletter") == "desired") {
            setTGNcheckbox("OnOff",Welcometgn_checkbox,"on");
        } else {
            setTGNcheckbox("OnOff",Welcometgn_checkbox,"off");
        }
        // turn on or off checkbox per user choice //getNewsletterOption("newsletter")
        var SEtgn_checkbox = $("#AuthcheckboxSEcb");
        if (getNewsletterOption("newsletter") == "true" || getNewsletterOption("newsletter") == "desired") {
            setTGNcheckbox("OnOff",SEtgn_checkbox,"on");
        } else {
            setTGNcheckbox("OnOff",SEtgn_checkbox,"off");
        }

        // turn on or off checkbox per user choice //getNewsletterOption("survey")
        var AS1atgn_checkbox = $("#AuthcheckboxAS1bcb");
        if (getNewsletterOption("survey") == "true") {
            setTGNcheckbox("OnOff",AS1atgn_checkbox,"on");
        } else {
            setTGNcheckbox("OnOff",AS1atgn_checkbox,"off");
        }
        // turn on or off checkbox per user choice //getNewsletterOption("topofmind")
        var AS1btgn_checkbox = $("#AuthcheckboxAS1ccb");
        if (getNewsletterOption("topofmind") == "true") {
            setTGNcheckbox("OnOff",AS1btgn_checkbox,"on");
        } else {
            setTGNcheckbox("OnOff",AS1btgn_checkbox,"off");
        }

        // turn on or off checkbox per user choice //currentUserData.CommEMailOption
        var AS2tgn_checkbox = $("#AuthcheckboxAS2cb");
        if (currentUserData.CommEMailOption == "true") {
            setTGNcheckbox("OnOff",AS2tgn_checkbox,"on");
        } else {
            setTGNcheckbox("OnOff",AS2tgn_checkbox,"off");
        }
        // turn on or off checkbox per user choice //currentUserData.CommOnscreenOption
        var AS3tgn_checkbox = $("#AuthcheckboxAS3cb");
        if (currentUserData.CommOnscreenOption == "true") {
            setTGNcheckbox("OnOff",AS3tgn_checkbox,"on");
        } else {
            setTGNcheckbox("OnOff",AS3tgn_checkbox,"off");
        }

        // turn on or off checkbox per user choice //currentUserData.CommEMailOption
        var WE2tgn_checkbox = $("#AuthcheckboxWE2cb");
        if (currentUserData.CommEMailOption == "true") {
            setTGNcheckbox("OnOff",WE2tgn_checkbox,"on");
        } else {
            setTGNcheckbox("OnOff",WE2tgn_checkbox,"off");
        }
        // turn on or off checkbox per user choice //currentUserData.CommOnscreenOption
        var WE3tgn_checkbox = $("#AuthcheckboxWE3cb");
        if (currentUserData.CommOnscreenOption == "true") {
            setTGNcheckbox("OnOff",WE3tgn_checkbox,"on");
        } else {
            setTGNcheckbox("OnOff",WE3tgn_checkbox,"off");
        }

        // turn on or off checkbox per user choice //currentUserData.CommEMailOption
        var SE2tgn_checkbox = $("#AuthcheckboxSE2cb");
        if (currentUserData.CommEMailOption == "true") {
            setTGNcheckbox("OnOff",SE2tgn_checkbox,"on");
        } else {
            setTGNcheckbox("OnOff",SE2tgn_checkbox,"off");
        }
        // turn on or off checkbox per user choice //currentUserData.CommOnscreenOption
        var SE3tgn_checkbox = $("#AuthcheckboxSE3cb");
        if (currentUserData.CommOnscreenOption == "true") {
            setTGNcheckbox("OnOff",SE3tgn_checkbox,"on");
        } else {
            setTGNcheckbox("OnOff",SE3tgn_checkbox,"off");
        }

        // Interests Both Welcome and Settings
        //console.log("currentUserData.Interest_Topic_List_CSV" + currentUserData.Interest_Topic_List_CSV);
        if (currentUserData.Interest_Topic_List_CSV.indexOf('Saving Lives') > -1) {
            $(".AI_SavingLives").each(function (i, obj) {
                setTGNcheckbox("PlusCheck",$(this),"on");
            });
        } else {
            $(".AI_SavingLives").each(function (i, obj) {
                setTGNcheckbox("PlusCheck",$(this),"off");
            });
        }
        if (currentUserData.Interest_Topic_List_CSV.indexOf('Energy Innovation') > -1) {
            $(".AI_EnergyInnovation").each(function (i, obj) {
                setTGNcheckbox("PlusCheck",$(this),"on");
            });
        } else {
            $(".AI_EnergyInnovation").each(function (i, obj) {
                setTGNcheckbox("PlusCheck",$(this),"off");
            });
        }
        if (currentUserData.Interest_Topic_List_CSV.indexOf('Improving Education') > -1) {
            $(".AI_ImprovingEducation").each(function (i, obj) {
                setTGNcheckbox("PlusCheck",$(this),"on");
            });
        } else {
            $(".AI_ImprovingEducation").each(function (i, obj) {
                setTGNcheckbox("PlusCheck",$(this),"off");
            });
        }
        if (currentUserData.Interest_Topic_List_CSV.indexOf('Philanthropy') > -1) {
            $(".AI_Philanthropy").each(function (i, obj) {
                setTGNcheckbox("PlusCheck",$(this),"on");
            });
        } else {
            $(".AI_Philanthropy").each(function (i, obj) {
                setTGNcheckbox("PlusCheck",$(this),"off");
            });
        }
        if (currentUserData.Interest_Topic_List_CSV.indexOf('Book Reviews') > -1) {
            $(".AI_BookReviews").each(function (i, obj) {
                setTGNcheckbox("PlusCheck",$(this),"on");
            });
        } else {
            $(".AI_BookReviews").each(function (i, obj) {
                setTGNcheckbox("PlusCheck",$(this),"off");
            });
        }
        if (currentUserData.Interest_Topic_List_CSV.indexOf('About Bill Gates') > -1) {
            $(".AI_AboutBill").each(function (i, obj) {
                setTGNcheckbox("PlusCheck",$(this),"on");
            });
        } else {
            $(".AI_AboutBill").each(function (i, obj) {
                setTGNcheckbox("PlusCheck",$(this),"off");
            });
        }
        //Alzheimers
        if (currentUserData.Interest_Topic_List_CSV.indexOf("Alzheimer's") > -1) {
            $(".AI_Alzheimers").each(function (i, obj) {
                setTGNcheckbox("PlusCheck",$(this),"on");
            });
        } else {
            $(".AI_Alzheimers").each(function (i, obj) {
                setTGNcheckbox("PlusCheck",$(this),"off");
            });
        }
        if (currentUserEmail.indexOf("@") >= 0) {
            $("#FPtxtEmail").val(currentUserEmail);
        } else {
            $("#FPtxtEmail").val("");
        }

        // Profile Page - Cover - Profile image - Name - Blurb - suggested reads
        //console.log("SET IMAGES: " + currentUserData.CoverImage+":"+currentUserData.ProfileImage);
        $(".Auth_ProfileSettings_Nav_UserName").html(currentUserData.FullName);
        var acdate = Date.parse(currentUserData.AccountCreatedDate);
        var monthName = new Intl.DateTimeFormat("en-US", { month: "long" }).format;
        var yearName = new Intl.DateTimeFormat("en-US", { year: "numeric" }).format;
        $(".Auth_ProfileSettings_Nav_UserMetricsDate").html(monthName(acdate) + " " + yearName(acdate));
        $("#Auth_ProfileFirstName").html(currentUserData.FirstName);
        $("#Auth_ProfileLastName").html(currentUserData.LastName);
        var ww = $(window).width();
        if (level == 1) {
            if (currentUserData.ProfileImage != "") {
                $(".UserInfo").css("top", "4px");
                if (currentUserImageProfileBlobData == "none") {
                    $(".ProfileIcon").css("background-image", "url(" + currentUserData.ProfileImage + ")");
                } else {
                    $(".ProfileIcon").css("background-image", "url('data:image/jpg;base64," + currentUserImageProfileBlobData + "')");
                }
                $(".ProfileIcon").css("border", "none");
                //$(".ProfileIcon").html("&nbsp;");
                //$(".ProfileIcon").css("opacity", 1);
                if (currentUserImageProfileBlobData == "none") {
                    $(".Auth_ProfileSettings_Nav_UserImage").css("background-image", "url(\"" + currentUserData.ProfileImage + "\")");
                    $("#Welcome_Auth_ProfileImage").css("background-image", "url(\"" + currentUserData.ProfileImage + "\")");
                } else {
                    $(".Auth_ProfileSettings_Nav_UserImage").css("background-image", "url('data:image/jpg;base64," + currentUserImageProfileBlobData + "')");
                    $("#Welcome_Auth_ProfileImage").css("background-image", "url('data:image/jpg;base64," + currentUserImageProfileBlobData + "')");
                }
                //$(".Auth_ProfileImage").css("opacity", 1);
                $(".Auth_ProfileImage").css("border", "1px solid #ccc");
            } else {
                $(".UserInfo").css("top", "4px");
                $(".Auth_ProfileSettings_Nav_UserImage").css("background-image", "url(\"/img/gn_profile_option_6_300.jpg\")");
                $("#Welcome_Auth_ProfileImage").css("background-image", "url(\"/img/gn_profile_option_6_300.jpg\")");
                //$(".ProfileIcon").html("&nbsp;");
                //$(".Auth_ProfileImage").css("opacity", 1);
                $(".ProfileIcon").css("background-image", "url(\"/img/gn_profile_option_6_300.jpg\")");
                //$(".ProfileIcon").css("opacity", 1);
            }
            //console.log(currentUserInterest_Topic_List_CSVPrev + ":" + currentUserData.Interest_Topic_List_CSV);
            if (currentUserInterest_Topic_List_CSVPrev != currentUserData.Interest_Topic_List_CSV && $(".myProfile_Holder").is(':visible')) {
                getSuggestedReads();
            } else {
                if (currentUserInterest_Topic_List_CSVFirstTime == true) {
                    currentUserInterest_Topic_List_CSVFirstTime = false;
                    getSuggestedReads();
                }
            }
        }
        setCIW();




        if (currentUserData.HasPassword == "truePD") {
            setAH_AS_txtPassword("Set a password");
        } else {
            setAH_AS_txtPassword("Reset your password");
        }
        if (firstrunJS == "true") {
            firstrunJS = "false";
            InitialAuthOmniture();
        }


        // get comment notifications
        if (TGNCom_GetNotificationsDone == "false") {
            TGNCom_GetNotificationsDone = "true";
            TGNCom_GetNotifications();
        }
    }
    function setAH_AS_txtPassword(placeholder) {
        $("#AS_txtPassword").val('');
        $("#AS_txtPassword").attr("placeholder", placeholder);
    }
    function setAuthHeaderUser() {
        //console.log("setAuthHeaderUser:" + Auth4Config_EnableUserAuth);
        // if Auth enabled
        if (Auth4Config_EnableUserAuth == 1) {
            $("#mobart_Art_SI_block").css("display", "none");
            $("#mobart_Art_USER_block").css("display", "inline-block");
            $(".SignInHeader").css("display", "none");
            $("#TGN_site_Header_LI").css("display", "none");
            $("#TGN_site_Header_LI_onblack").css("display", "none");
            $("#TGN_site_Slideheader_LI").css("display", "none");
            //$("#TGN_MainMenu_ProfileGroup").css("display", "block");
            $(".TGN_MainMenu_TopNSI").css("display", "none");
            $(".TGN_MainMenu_TopSI").css("display", "block");
            $(".ProfileIcon").css("display", "inline-block");
            $(".UserInfo").css("display", "inline-block");
            $(".socBlueRight").css("display", "none");
            $(".ProfileHeader_Holder").css("display", "inline-block");
            //$(".TGN_site_ArticleItembookmark").css("display","block");
            $(".GNI_UserOnly").css("display","inline-block");
            //TGN_BottomMenuS45_SI();
        }
    }
    function TGNCom_GetNotifications() {
        // check for local data cookie
        //console.log("TGNCommentNotif_Data:"+readALSCookie("TGNCommentNotif_Data"));
        if (readALSCookie("TGNCommentNotif_Data") != null && localStorage.getItem("TGNCommentNotif_Data") != null) {
            // if cookie exists pull from there
            TGNCom_GetNotificationsData = JSON.parse(localStorage.getItem("TGNCommentNotif_Data"));
            TGNCom_GetNotificationsPollingCount = 0;
            populateCommentNotifications(TGNCom_GetNotificationsData);
        } else {
            // if no cookie then go to API
            TGNCom_GetNotificationsAPI();
        }
    }
    function TGNCom_GetNotificationsAPI() {
        if (TGNCom_GetNotificationsPollingCount < 2 && currentUserStatusChecked == "true:user") {
            var myURL = document.domain;
            var LFSite = "385155";// non prod
            if (myURL == "www.gatesnotes.com") {
                LFSite = "385143";//prod site id
            }
            $.ajax({
                url: Auth4Config_AuthServiceURL + "TGNCom_GetNotifications",
                headers: { 'authorization': 'Bearer ' + localStorage.getItem(tokenKey) },
                dataType: "json",
                data: {
                    siteId: LFSite
                },
                type: "GET",
                success: function (data) {
                    //console.log("GetNotifications:" + data);
                    populateCommentNotifications(data);
                    TGNCom_GetNotificationsData = data;
                    TGNCom_GetNotificationsPollingCount = 0;
                    createAuthCookie("TGNCommentNotif_Data", "true", 1);
                    localStorage.setItem('TGNCommentNotif_Data', JSON.stringify(data));
                },
                error: function (request, status, error) {
                    console.log("ERROR:" + request.responseText);
                    TGNCom_GetNotificationsPollingCount += 1;
                }
            });
        }
        return false;
    }
    function setAuthHeaderSignIn() {
        // if Auth enabled
        //console.log("Auth4Config_EnableUserAuth 40: " + Auth4Config_EnableUserAuth);
        if (Auth4Config_EnableUserAuth == 1) {
            $("#mobart_Art_USER_block").css("display", "none");
            $("#mobart_Art_SI_block").css("display", "inline-block");
            $(".SignInHeader").css("display", "inline-block");
            $("#TGN_site_Header_LI").css("display", "inline-block");
            $("#TGN_site_Header_LI_onblack").css("display", "inline-block");
            $("#TGN_site_Slideheader_LI").css("display", "inline-block");
            $("#TGN_MainMenu_ProfileGroup").css("display", "none");
            $(".TGN_MainMenu_TopNSI").css("display", "block");
            $(".TGN_MainMenu_TopSI").css("display", "none");
            $(".ProfileIcon").css("display", "none");
            $(".UserInfo").css("display", "none");
            $(".socBlueRight").css("display", "block");
            $(".ProfileHeader_Holder").css("display", "inline-block");
            //$(".TGN_site_ArticleItembookmark").css("display","none");
            $(".GNI_UserOnly").css("display","none");
            var a = location.pathname;
            a = a.toLowerCase();

            setCIW();
            //TGN_BottomMenuS45_SO();
        }

    }

    function askForUpdatedSubscriptionSettings() {
        updateNewsLetterLegacyOptions();
        $.ajax({
            url: Auth4Config_AuthServiceURL + "SubscriptionSettings",
            headers: { 'authorization': 'Bearer ' + localStorage.getItem(tokenKey) },
            dataType: "json",
            data: {
            },
            type: "GET",
            success: function (data) {
                if (data != null) {
                    console.log("getUpdatedSubscriptionSettings:" + currentUserNewsletterOptions.subscriptions.newsletter +":"+ data.newsletter +" "+ currentUserNewsletterOptions.subscriptions.survey +":"+ data.surveyemails +" "+ currentUserNewsletterOptions.subscriptions.topofmind +":"+ data.topofmind);
                    //data = data.replace('"','');
                    //data = data.replace('"','');
                    //var mystring = data;
                    //var newchar = '"'
                    //mystring = mystring.split("'").join(newchar);
                    //dataObj = JSON.parse(mystring);
                    if (currentUserNewsletterOptions.subscriptions.newsletter == data.newsletter && currentUserNewsletterOptions.subscriptions.survey == data.surveyemails && currentUserNewsletterOptions.subscriptions.topofmind == data.topofmind) {
                        //currentUserNewsletterOptions = data;
                        //compareUserInfo();
                        console.log("equal");
                    } else {
                        setNewsletterOptions("newsletter",data.newsletter);
                        setNewsletterOptions("survey",data.surveyemails);
                        setNewsletterOptions("topofmind",data.topofmind);
                        compareUserInfo();
                        console.log("off");
                    }
                }
            },
            error: function (request, status, error) {
                console.log("ERROR:" + request.responseText + " e:" + error);
                if (error == "Unauthorized") {
                    noActiveUser();
                }
            }
        });
    }

    var qs = (function (a) {
        if (a == "") return {};
        var b = {};
        for (var i = 0; i < a.length; ++i) {
            var p = a[i].split('=', 2);
            if (p.length == 1)
                b[p[0]] = "";
            else
                b[p[0]] = decodeURIComponent(p[1].replace(/\+/g, " "));
        }
        return b;
    })(window.location.search.substr(1).split('&'));

    jQuery.fn.setSelection = function (selectionStart, selectionEnd) {
        //console.log("setSelection:" + selectionStart + "," + selectionEnd);
        if (this.length == 0) return this;
        input = this[0];

        if (input.createTextRange) {
            var range = input.createTextRange();
            range.collapse(true);
            range.moveEnd('character', selectionEnd);
            range.moveStart('character', selectionStart);
            range.select();
        } else if (input.setSelectionRange) {
            input.focus();
            input.setSelectionRange(selectionStart, selectionEnd);
        }

        return this;
    };
    jQuery.fn.setCursorPosition = function (position) {
        if (this.length == 0) return this;
        return $(this).setSelection(position, position);
    };
    /////**
    ////* iosCheckbox.js
    ////* Version: 1.0.0
    ////* Author: Ron Masas
    ////*/

    //(function ($) {
    //    $.fn.extend({
    //        iosCheckbox: function () {
    //            $(this).each(function () {
    //                ///**
    //                //* Original checkbox element
    //                //*/
    //                var org_checkbox = $(this);
    //                ///**
    //                //* iOS checkbox div
    //                //*/
    //                var tgn_checkbox = jQuery("<div>", { class: 'ios-ui-select' }).append(jQuery("<div>", { class: 'inner' })).append(jQuery("<span>", { class: 'ios-ui-txt' }));
    //                // If the original checkbox is checked, add checked class to the ios checkbox.
    //                if (org_checkbox.is(":checked")) {
    //                    tgn_checkbox.addClass("checked");
    //                }
    //                // Hide the original checkbox and print the new one.
    //                org_checkbox.hide().after(tgn_checkbox);
    //                // Add click event listener to the ios checkbox
    //                tgn_checkbox.click(function () {
    //                    //console.log($(this).parent().parent().attr("id"));
    //                    var what_IOS_CB = $(this).parent().parent().attr("id");
    //                    // Toggel the check state
    //                    //tgn_checkbox.toggleClass("checked");
    //                    $(this).parent().parent().find(".ios-ui-select").toggleClass("checked");

    //                    if (what_IOS_CB == "AuthcheckboxAS2" || what_IOS_CB == "AuthcheckboxWE2" || what_IOS_CB == "AuthcheckboxSE2") {
    //                        // email comment notifications
    //                        // Check if the ios checkbox is checked
    //                        if (tgn_checkbox.hasClass("checked")) {
    //                            // ON
    //                            //console.log("email comment notifications:ON");
    //                            currentUserData.CommEMailOption = "true";
    //                        } else {
    //                            // OFF
    //                            //console.log("email comment notifications:OFF");
    //                            currentUserData.CommEMailOption = "false";
    //                        }
    //                        setCommEMailOption();

    //                    } else if (what_IOS_CB == "AuthcheckboxAS3" || what_IOS_CB == "AuthcheckboxWE3" || what_IOS_CB == "AuthcheckboxSE3") {
    //                        // on-screen comment notifications
    //                        // Check if the ios checkbox is checked
    //                        if (tgn_checkbox.hasClass("checked")) {
    //                            // ON
    //                            //console.log("on-screen comment notifications:ON");
    //                            currentUserData.CommOnscreenOption = "true";
    //                        } else {
    //                            // OFF
    //                            //console.log("on-screen comment notifications:OFF");
    //                            currentUserData.CommOnscreenOption = "false";
    //                        }
    //                        setCommOnscreenOption();

    //                    } else if (what_IOS_CB == "AuthcheckboxAS1b") {
    //                        // SURVEY EMAIL SUBSCRIPTIONS
    //                        // Check if the ios checkbox is checked
    //                        if (tgn_checkbox.hasClass("checked")) {
    //                            // ON
    //                            //console.log("survey emails:ON");
    //                            setNewsletterOptions("survey","true");
    //                        } else {
    //                            // OFF
    //                            //console.log("survey emails:OFF");
    //                            setNewsletterOptions("survey","false");
    //                        }
    //                        setCommOnscreenOption();

    //                    } else if (what_IOS_CB == "AuthcheckboxAS1c") {
    //                        // TOPOFMIND EMAIL SUBSCRIPTIONS
    //                        // Check if the ios checkbox is checked
    //                        if (tgn_checkbox.hasClass("checked")) {
    //                            // ON
    //                            //console.log("topofmind emails:ON");
    //                            setNewsletterOptions("topofmind","true");
    //                        } else {
    //                            // OFF
    //                            //console.log("topofmind emails:OFF");
    //                            setNewsletterOptions("topofmind","false");
    //                        }
    //                        setCommOnscreenOption();

    //                    } else {
    //                        // Updates from Bill
    //                        //console.log("what_IOS_CB: "+what_IOS_CB);
    //                        // Check if the ios checkbox is checked
    //                        if (tgn_checkbox.hasClass("checked")) {
    //                            // Update state ON
    //                            org_checkbox.prop('checked', true);
    //                            RegCheckBoxValue = "true";
    //                            if (what_IOS_CB == "AuthcheckboxAS") {
    //                                setNewsletterOptions("newsletter","true");
    //                            } else {
    //                                setNewsletterOptions("newsletter","true");
    //                                setNewsletterOptions("survey","true");
    //                                setNewsletterOptions("topofmind","true");
    //                            }

    //                        } else {
    //                            // Update state OFF
    //                            org_checkbox.prop('checked', false);
    //                            RegCheckBoxValue = "true";
    //                            if (what_IOS_CB == "AuthcheckboxAS") {
    //                                setNewsletterOptions("newsletter","false");
    //                            } else {
    //                                setNewsletterOptions("newsletter","false");
    //                                setNewsletterOptions("survey","true");
    //                                setNewsletterOptions("topofmind","false");
    //                            }
    //                        }
    //                        //console.log("Page:" + $(this).parent().parent().parent().prop("id"));
    //                        if (getNewsletterOption("newsletter") == "true") {
    //                            $("#AuthEmailSubText_AS").css("display", "block");
    //                            $("#AuthEmailSubText_WE").css("display", "block");
    //                            if (currentUserEmail == "") {
    //                                setNewsletterOptions("newsletter","true");//was desired
    //                            }
    //                        } else {
    //                            $("#AuthEmailSubText_AS").css("display", "none");
    //                            $("#AuthEmailSubText_WE").css("display", "none");
    //                        }
    //                        if (!$('#Register_Holder').is(':visible')) {
    //                            setNewsLetterOption();
    //                        }
    //                    }
    //                });
    //            });
    //        }
    //    });
    //})(jQuery);


    //GOOGLE MAPS API
    var placeSearch, autocomplete;
    var pacAddOnAdded = false;
    var place = "";
    var componentForm = {
        street_number: 'short_name',
        route: 'long_name',
        locality: 'long_name',
        postal_town: 'long_name',
        administrative_area_level_1: 'short_name',
        administrative_area_level_2: 'long_name',
        country: 'long_name',
        postal_code: 'short_name'
    };

    function initAutocomplete() {
        autocomplete = new google.maps.places.Autocomplete(
            (document.getElementById('txtAddress')),
            {types: ['geocode']});
        autocomplete.addListener('place_changed', fillInAddress);
        autocomplete.addListener('input_changed', weHaveInputAddress);
        setTimeout(function () {
            weHaveInputAddress();
        }, 1000);
    }

    function weHaveInputAddress() {
        //console.log("weHaveInputAddress");
        if (!pacAddOnAdded) {
            pacAddOnAdded = true;
            $("#txtAddress").after($(".pac-container"));
            $(".Auth_50_GAPI_AddressArea").after("<div class='pac-add-on'>Not finding your address? <span class='pac-add-on-link'>click here</span></div>");
            $(".pac-add-on-link").click(function () {
                //console.log("show address");
                $(".Auth_50_ManualAddressArea").css("display","block");
                $(".pac-add-on").css("display","none");
                $(".Auth_50_GAPI_AddressArea").css("display","none");
                return false;
            });
            $(".pac-add-on-link").click(function () {
                //console.log("show address");
                $(".Auth_50_ManualAddressArea").css("display","block");
                $(".pac-add-on").css("display","none");
                $(".Auth_50_GAPI_AddressArea").css("display","none");
                return false;
            });
            $(".pac-add-on-link").on('mousedown', function () {
                //console.log("show address");
                $(".Auth_50_ManualAddressArea").css("display","block");
                $(".pac-add-on").css("display","none");
                $(".Auth_50_GAPI_AddressArea").css("display","none");
                return false;
            });
        }
        $("#txtAddress").after($(".pac-container"));
    }
    var Auth_50_PlaceSelected = "none";
    var Auth_50_placeStored = "";
    function Auth_50_CleanGAPI_Place(place) {
        if (place.hasOwnProperty('adr_address')) {
            delete place.adr_address;
        }
        if (place.hasOwnProperty('icon')) {
            delete place.icon;
        }
        if (place.hasOwnProperty('url')) {
            delete place.url;
        }
        if (place.hasOwnProperty('photos')) {
            delete place.photos;
        }
        if (place.hasOwnProperty('html_attributions')) {
            delete place.html_attributions;
        }
        if (place.hasOwnProperty('geometry')) {
            delete place.geometry;
        }
        address_sourceObj = {};
        address_sourceObj.long_name = "GAPI";
        address_sourceObj.short_name = "GAPI";
        address_sourceObj.types = ['address_source'];
        place.address_components.push(address_sourceObj);
    }
    function fillInAddress() {
        Auth_50_placeStored = RegAddresselement.value;
        place = autocomplete.getPlace();

        for (var component in componentForm) {
            if (document.getElementById(component) != null) {
                document.getElementById(component).value = '';
                document.getElementById(component).disabled = false;
            }
        }
        Auth_50_CleanGAPI_Place(place);
        //console.log(place);
        $("#Auth_50_DataPrint").html(JSON.stringify(place));
        address = JSON.stringify(place);
        for (var i = 0; i < place.address_components.length; i++) {
            var addressType = place.address_components[i].types[0];
            if (componentForm[addressType]) {
                var val = place.address_components[i][componentForm[addressType]];
                if (document.getElementById(addressType) != null) {
                    document.getElementById(addressType).value = val;
                }
            }
        }
        weHaveInputAddress();
        $("#txtAddressAN").css("display","block");
        var ww = $(window).width();
        if (ww < 680) {
            //$("#txtAddress").css("width","75%");
        }
        Auth_50_PlaceSelected = place;
        //AuthRunValidation();
    }

    function geolocate() {
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(function(position) {
                var geolocation = {
                    lat: position.coords.latitude,
                    lng: position.coords.longitude
                };
                var circle = new google.maps.Circle({
                    center: geolocation,
                    radius: position.coords.accuracy
                });
                autocomplete.setBounds(circle.getBounds());
            });
        }
    }
    // END GOOGLE MAPS API
</script>

<script>
    var ww = $(window).width();
    var wh = $(window).height();
    var maxCW = 1160;
    var minMargin = 20;
    $(document).ready(function () {
        size_TGN_site_ContentArea_to_screen();
        var throttled = TGN_throttle(size_TGN_site_ContentArea_to_screen, 1000);
        //$(".TGN_site").scroll(throttled);
        var throttled2 = TGN_throttle(fillBookmarkImages, 1000);
        $(".TGN_site").scroll(throttled2);

        $('.TGN_site').bind('scroll', function (event) {
            tgnscroll();
        });
        if (navigator.userAgent.match(/(iPhone|iPod|iPad)/i)) {
            $('.TGN_site').bind('touchmove', function (event) {
                tgnscroll();
            });
            $('.TGN_site').css('-webkit-overflow-scrolling', 'touch'); //turn off the horizontal scroll bars
        }
        var tgnscroll = function () {
            // close menus etc...
        };
        var ipadfix = function () {
            if (navigator.userAgent.match(/(iPhone|iPod|iPad)/i)) {
                $('html, body').css("width", $(window).width() + "px");
                $('html, body').css("max-width", $(window).width() + "px");
            }
        };
        ipadfix();

    });
    $(window).resize(function () {
        size_TGN_site_ContentArea_to_screen();
    });
    function size_TGN_site_ContentArea_to_screen() {
        //console.log("size_TGN_site_ContentArea_to_screen");
        ww = $(window).width();
        var isw = $(".TGN_site_InsideScroll").width();
        ww = isw;
        wh = $(window).height();
        var scrollTopContentArea = $(".TGN_site").scrollTop();
        if (ww < 680) {
            $(".TGN_site_ContentArea").css("width", (ww - minMargin * 2) + "px");
            $(".TGN_site_FixedHeadersHolder").css("width", (ww - minMargin * 2) + "px");
            $(".TGN_site_FixedHeadersHolder").css("margin-left", minMargin + "px");
            $(".TGN_site_FixedHeadersHolder").css("margin-right", minMargin + "px");
            $(".TGN_MainMenu_Holder").css("width", "auto");
            $(".TGN_MainMenu_Holder").css("left", minMargin + "px");
            $(".TGN_MainMenu_Holder").css("right", minMargin + "px");
            $(".GNCommTopUserMenuPop").css("right", minMargin + "px");
        } else if (ww < (maxCW + minMargin * 2)) {
            $(".TGN_site_ContentArea").css("width", (ww - minMargin * 2) + "px");
            $(".TGN_site_FixedHeadersHolder").css("width", (ww - minMargin * 2) + "px");
            $(".TGN_site_FixedHeadersHolder").css("margin-left", minMargin + "px");
            $(".TGN_site_FixedHeadersHolder").css("margin-right", minMargin + "px");
            $(".TGN_MainMenu_Holder").css("width", "269px");
            $(".TGN_MainMenu_Holder").css("left", "unset");
            $(".TGN_MainMenu_Holder").css("right", minMargin + "px");
            $(".GNCommTopUserMenuPop").css("right", minMargin + "px");
        } else {
            $(".TGN_site_ContentArea").css("width", (maxCW) + "px");
            $(".TGN_site_FixedHeadersHolder").css("width", (maxCW) + "px");
            $(".TGN_site_FixedHeadersHolder").css("margin-left", (ww - maxCW) / 2 + "px");
            $(".TGN_site_FixedHeadersHolder").css("margin-right", (ww - maxCW) / 2 + "px");
            $(".TGN_MainMenu_Holder").css("width", "269px");
            $(".TGN_MainMenu_Holder").css("left", "unset");
            $(".TGN_MainMenu_Holder").css("right", ((ww - maxCW) / 2) + "px");
            $(".GNCommTopUserMenuPop").css("right", ((ww - maxCW) / 2) + "px");
        }
        if ($('.TGN_site_Headersearch').is(':visible')) {
            $(".TGN_site_FixedHeadersHolder").css("width", (ww) + "px");
        }
        closeAllMenus();
    }
    function closeAllMenus() {
        TGN_hide_mainMenu();
        hideGNCommTopUserMenuPop();
        TGN_closeDropMenus();
    }
    function TGN_closeDropMenus() {
        $(".TGN_site_DropMenu").removeClass("showmenu");
    }
    $(document).click(function () {
        closeAllMenus();
    });
    var TGN_BookmarkGUIDS = [];
    function TGN_toggleArticleBookmark(artguid) {
        if (localStorage.getItem('TGN_Bookmark_List') == null || localStorage.getItem('TGN_Bookmark_List') == '') {
            localStorage.setItem('TGN_Bookmark_List', artguid);
        } else {
            var TGNABList = localStorage.getItem('TGN_Bookmark_List');
            if (TGN_ID_Is_In_TGN_Bookmark_List(artguid)) {
                TGNABList = TGN_removeCSVValue(TGNABList, artguid, ",");
            } else {
                TGNABList = TGNABList + "," + artguid;
            }
            localStorage.setItem('TGN_Bookmark_List', TGNABList);
        }
        TGN_ColorBookmarks();
    }
    var TGN_removeCSVValue = function (list, value, separator) {
        separator = separator || ",";
        var values = list.split(separator);
        for (var i = 0; i < values.length; i++) {
            if (values[i] == value) {
                values.splice(i, 1);
                return values.join(separator);
            }
        }
        return list;
    }
    var TGN_ID_Is_In_TGN_Bookmark_List = function (TGNarticleID) {
        if (localStorage.getItem('TGN_Bookmark_List') == "" || localStorage.getItem('TGN_Bookmark_List') == "null" || localStorage.getItem('TGN_Bookmark_List') == null || localStorage.getItem('TGN_Bookmark_List') == 'undefined') {
            return false;
        } else {
            var TGNABList = localStorage.getItem('TGN_Bookmark_List');
            if (TGNABList.indexOf(TGNarticleID) > -1) {
                return true;
            }
        }
        return false;
    }
    function TGN_ColorBookmarks() {
        $(".TGN_site_ArticleItembookmark").each(function (i, obj) {
            if (TGN_ID_Is_In_TGN_Bookmark_List($(this).attr("data-articleid"))) {
                $(this).find(".TGN_site_ArticleItembookmarkColor").css("display", "block");
                $(this).find(".TGN_site_ArticleItembookmarkColor").addClass("TGN_site_ArticleItembookmarkColorON");
            } else {
                $(this).find(".TGN_site_ArticleItembookmarkColor").css("display", "block");
                $(this).find(".TGN_site_ArticleItembookmarkColor").removeClass("TGN_site_ArticleItembookmarkColorON");
            }
        });
        $(".article_top_metricsItem").each(function (i, obj) {
            if (TGN_ID_Is_In_TGN_Bookmark_List($(this).attr("data-articleid"))) {
                $(this).find("path").css("fill", "#0049fb");
            } else {
                $(this).find("path").css("fill", "none");
            }
        });
    }
    // make articlelist from guids (GSRarr suggested reads guids) //TGN_FillBookmarks()
    function TGN_FillBookmarks() {
        $("#bookmarks_InnerHolder").html("");
        if (localStorage.getItem('TGN_Bookmark_List') == null || localStorage.getItem('TGN_Bookmark_List') == '' || localStorage.getItem('TGN_Bookmark_List') == 'undefined') {
            $(".bookmarks_none").css("display", "block");
        } else {
            var TGNABList = localStorage.getItem('TGN_Bookmark_List');
            TGN_BookmarkGUIDS = TGNABList.split(',');
            var GUIDs = JSON.stringify(TGN_BookmarkGUIDS);
            // JSON
            $.ajax({
                url: "/api/TGNWebAPI/MakeArticleListFromGUIDs?GUIDs=" + encodeURIComponent(GUIDs),
                dataType: "json",
                type: "GET",
                success: function (data) {
                    data = JSON.parse(data);
                    console.log("MakeArticleListFromGUIDs: " + data);
                    $(".bookmarks_none").css("display", "none");
                    var source = $("#BookmarkResultTemplate").html();
                    var template = Handlebars.compile(source);
                    var html = template(data);
                    var resultsReturnBox = $("#bookmarks_InnerHolder");
                    resultsReturnBox.prepend(html);
                    fillBookmarkImages();
                },
                error: function (textStatus, errorThrown) {
                    console.log("TGN_FillBookmarks - " + errorThrown + "ERROR");
                }
            });
        }
    }
    function fillBookmarkImages() {
        $(".bookmarks_InnerHolder").find(".bookmarks_LeftTopImg").find("img").each(function (i, obj) {
            if ($(this).attr("data-url") != "clickadded" && $(this).attr("data-url") != "set") {
                $(this).attr("data-url", "clickadded");
                $(this).parent().parent().parent().parent().find(".bookmarks_RightBottomSave").click(function (e) {
                    TGN_closeDropMenus();
                    TGN_toggleArticleBookmark($(this).parent().parent().parent().attr("data-articleid"));
                    $(this).parent().parent().parent().remove();
                    e.stopPropagation();
                });
            }
            if ($(this).attr("data-url") != "set") {
                TGN_site_isOnScreen($(this), $(this), "img");
            }
        });
    }
</script>

<script id="BookmarkResultTemplate" type="text/x-handlebars-templates">
    {{#each ArticleList}}
    <div class="bookmarks_Item" data-articleid="{{ArticleID}}">
        <div class="bookmarks_LeftTop">
            <a href="{{ArticleUrl}}">
                <div class="bookmarks_LeftTopImg"><img src="https://www.gatesnotes.com/media/GNIN/gray_4x6.png" data-src="{{ImageUrl}}" data-searchthumb="{{SearchThumbUrl}}" data-cover="{{SearchBookCoverUrl}}" data-thumbovercover="{{SearchThumbOverCover}}" data-url=""></div>
            </a>
        </div>
        <div class="bookmarks_RightBottom">
            <a href="{{ArticleUrl}}">
                <div class="bookmarks_RightBottomTitle">{{{SearchHeadline}}}</div>
                <div class="bookmarks_RightBottomDesc">{{{SearchBlurb}}}</div>
            </a>
            <div class="bookmarks_RightBottomLastLine">
                <div class="bookmarks_RightBottomDate">{{Date}}</div>
                <div class="bookmarks_RightBottomSave">
                    <div class="bookmarks_RightBottomMark">
                        <i class="icon-article-thumbnail-bookmark-outline"></i>
                        <i class="icon-article-thumbnail-bookmark"></i>
                    </div>
                    <span class="bookmarks_RightBottomMarkCopy">Unsave post</span>
                </div>
            </div>
        </div>
    </div>
    {{/each}}
</script>




<script>
    // Youtube controls
    var documentReadyYet = false;
    var youtubeStatus = true;
    var YTC = 0;
    var pauseYouTubeVideos = function () {
    };

    $(window).on('load', function () {
    })
    $(document).ready(function () {
    });


    //adjust styling for VR items framing
    $(".gnYoutube_VR_Outer").each(function (i) {
        if ($(this).attr("data-vr") == "True") {
            $(this).css("background-color", "#F3F3F3");
        }
    });
    //
    // YT Stuff
    // load  api
    var tag = document.createElement('script');
    tag.src = "//www.youtube.com/iframe_api";
    var firstScriptTag = document.getElementsByTagName('script')[0];
    firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
    //
    function onYouTubeIframeAPIReady() {
        //console.log("YTSTUFF_____________");
        documentReadyYet = true;
        //$("#whateverID0").addEventListener('onStateChange', function (e) {
        //    console.log('State is:', e.data);
        //});
        $("iframe").each(function (i) {
            if ($(this).attr("src")) {
                var src = $(this).attr('src');
                if (src.toLowerCase().indexOf("youtube") >= 0) {
                    $(this).attr('id', 'whateverID' + $(this).attr("data-yt"));
                    //$(this).parent().attr('id', 'gnYoutubeHolder' + YTC);
                    //$(this).on("onStateChange", "onPlayerStateChange");
                    //////
                    var player = {
                        playVideo: function (container, videoId) {
                            if (typeof (YT) == 'undefined' || typeof (YT.Player) == 'undefined') {
                                window.onYouTubePlayerAPIReady = function () {
                                    player.loadPlayer(container, videoId);
                                };
                                $.getScript('//www.youtube.com/player_api');
                            } else {
                                player.loadPlayer(container, videoId);
                            }
                        },
                        loadPlayer: function (container, videoId) {
                            window.myPlayer = new YT.Player(container, {
                                playerVars: {
                                    modestbranding: 1,
                                    rel: 0,
                                    showinfo: 0,
                                    autoplay: 1
                                },
                                height: 200,
                                width: 200,
                                videoId: videoId,
                                events: {
                                    'onStateChange': onPlayerStateChange
                                }
                            });
                        }
                    };

                    var containerId = 'whateverID' + $(this).attr("data-yt");//YTC;
                    var videoId = $(this).attr("data-yt");//'abc123';
                    player.playVideo(containerId, videoId);
                    //////
                    //YTC++;
                    if (src.indexOf('?') === -1) {
                        //alert("no ? found.");
                        $(this).attr('src', src + "?enablejsapi=1&origin=" + window.location.origin);
                    } else {
                        $(this).attr('src', src + "&enablejsapi=1&origin=" + window.location.origin);
                    }
                }
                //var src = $(this).attr('src');
                //console.log(src);

            }

        });
    }
    YTC = 0;
    var player;

    // event that will be fired when the state of the player changes
    function onPlayerStateChange(state) {
        // check if it's playing
        console.log("YT-State: " + state.data);
        youtubeStatus = state.data;
        //-1 unstarted
        //0 ended
        //1 playing
        //2 paused
        //3 buffering
        //5 video cued
        if (state.data == 1 || state.data == 3 || state.data == 5) {
            // is playing

        } else {

        }
    }

    function callPlayer(frame_id, func, args) {
        //console.log('callPlayerRun');
        if (window.jQuery && frame_id instanceof jQuery) frame_id = frame_id.get(0).id;
        var iframe = document.getElementById(frame_id);
        if (iframe && iframe.tagName.toUpperCase() != 'IFRAME') {
            iframe = iframe.getElementsByTagName('iframe')[0];
        }

        // When the player is not ready yet, add the event to a queue
        // Each frame_id is associated with an own queue.
        // Each queue has three possible states:
        //  undefined = uninitialised / array = queue / 0 = ready
        if (!callPlayer.queue) callPlayer.queue = {};
        //var queue = callPlayer.queue[frame_id],
        domReady = document.readyState == 'complete';

        if (domReady && !iframe) {
            // DOM is ready and iframe does not exist. Log a message
            window.console && console.log('callPlayer: Frame not found; id=' + frame_id);
            //if (queue) clearInterval(queue.poller);
        } else if (iframe && iframe.contentWindow) {
            console.log('post:' + JSON.stringify({
                "event": "command",
                "func": func,
                "args": args || [],
                "id": frame_id
            }));
            // When a function is supplied, just call it (like "onYouTubePlayerReady")
            if (func.call) return func();
            // Frame exists, send message
            iframe.contentWindow.postMessage(JSON.stringify({
                "event": "command",
                "func": func,
                "args": args || [],
                "id": frame_id
            }), "*");
        }

        /* IE8 does not support addEventListener... */
        function messageEvent(add, listener) {
            var w3 = add ? window.addEventListener : window.removeEventListener;
            w3 ?
                w3('message', listener, !1)
                :
                (add ? window.attachEvent : window.detachEvent)('onmessage', listener);
        }
    }
    // YT Stuff

    var YTcounter = 0;

    ///// iframe click
    var isOverIFrame = false;

    function processMouseOut() {
        //console.log("IFrame mouse >> OUT << detected.");
        isOverIFrame = false;
        top.focus();
    }

    function processMouseOver() {
        //console.log("IFrame mouse >> OVER << detected.");
        isOverIFrame = true;
    }

    function processIFrameClick() {
        if (isOverIFrame) {

            // replace with your function
            //console.log("IFrame >> CLICK << detected. ");
        }
    }

    function attachOnloadEvent(func, obj) {
        if (typeof window.addEventListener != 'undefined') {
            window.addEventListener('load', func, false);
        } else if (typeof document.addEventListener != 'undefined') {
            document.addEventListener('load', func, false);
        } else if (typeof window.attachEvent != 'undefined') {
            window.attachEvent('onload', func);
        } else {
            if (typeof window.onload == 'function') {
                var oldonload = onload;
                window.onload = function () {
                    oldonload();
                    func();
                };
            } else {
                window.onload = func;
            }
        }
    }

    function init() {
        var element = document.getElementsByTagName("iframe");
        for (var i = 0; i < element.length; i++) {
            element[i].onmouseover = processMouseOver;
            element[i].onmouseout = processMouseOut;
        }
        if (typeof window.attachEvent != 'undefined') {
            top.attachEvent('onblur', processIFrameClick);
        }
        else if (typeof window.addEventListener != 'undefined') {
            top.addEventListener('blur', processIFrameClick, false);
        }
    }

    attachOnloadEvent(init);
    /////
    pauseYouTubeVideos = function () {
        //console.log("pauseYouTubeVideos");
        if (documentReadyYet == true) {
            YTcounter = 0;
            var ytids = [];
            $("iframe").each(function (i) {
                if ($(this).attr("src")) {
                    var src = $(this).attr('src');
                    if (src.toLowerCase().indexOf("youtube") >= 0) {
                        ytids.push($(this).attr("data-yt"));
                        YTcounter++;
                    }
                }
            });
            for (var yti = 0; yti < YTcounter; yti++) {
                callPlayer("whateverID" + ytids[yti], "pauseVideo");
            }
        }
    }


    function tgn_VLP_setPlayer(element, lightbox) {
        vid = "";
        vr = "";
        title = "";
        description = "";
        byline = "";
        if (lightbox) {
            vid = element.find(".videos_videoitemYT_g3").attr("data-yt");
            vr = element.find(".videos_videoitemYT_g3").attr("data-vr");
            $("#tgn_VLP_PlayerContainer").addClass("tgn_VLP_Lightbox");
            title = element.find(".videos_videoitemtitle_g3").html();
            description = element.find(".videos_videoitemdescription_g3").html();
            byline = "";
            pauseYouTubeVideos();
            tgn_VLP_addLightboxDOM(vid, vr, title, description);
        } else {
            vid = element.find(".gnYoutubeHolder").attr("data-yt");
            vr = element.find(".gnYoutubeHolder").attr("data-vr");
            $("#tgn_VLP_PlayerContainer").removeClass("tgn_VLP_Lightbox");
            title = element.find(".tgn_NowPlaying_Module_title").html();
            description = element.find(".tgn_NowPlaying_Module_description").html();
            byline = element.find(".tgn_NowPlaying_Module_bylinedate").html();
            $("#tgn_VLP_PlayerContainer").find(".gnYoutubeHolder").html("<iframe id='whateverID" + vid + "' width='800' height='450' frameborder='0' src='https://www.youtube.com/embed/" + vid + "?rel=0&amp;modestbranding=1&amp;playsinline=1&amp;color=white&amp;showinfo=0' data-yt='" + vid + "' data-vr='" + vr + "'></iframe>");
            $("#tgn_VLP_PlayerContainer").find(".tgn_NowPlaying_Module_title").html(title);
            $("#tgn_VLP_PlayerContainer").find(".tgn_NowPlaying_Module_description").html(description);
            $("#tgn_VLP_PlayerContainer").find(".tgn_NowPlaying_Module_bylinedate").html(byline);
            onYouTubeIframeAPIReady();
        }
        try {
            s.events = "event8";
            s.eVar6 = title;
            s.prop9 = title;
            s.linkTrackVars = 'events,eVar6,prop9';
            s.linkTrackEvents = "event8";
            s.tl(true, 'o', title);
        } catch (e) {
            //console.log(title);
            //console.log(event);
            //console.log(e.message);
            //console.log(e.name);
        }
    }
    function tgn_VLP_addLightboxDOM(vid, vr, Vtitle, Vdescription) {
        $(".TGN_site_Lightbox_Video").html("<iframe id='whateverID" + vid + "' width='800' height='450' frameborder='0' src='https://www.youtube.com/embed/" + vid + "?rel=0&amp;modestbranding=1&amp;playsinline=1&amp;color=white&amp;showinfo=0' data-yt='" + vid + "' data-vr='" + vr + "'></iframe>");
        $(".TGN_site_Lightbox_Title").html(Vtitle);
        $(".TGN_site_Lightbox_Description").html(Vdescription);
        $(".TGN_site_Lightbox").css("display", "flex");
        if (vr == "True") {
            $(".TGN_site_Lightbox_VR_Addon").html("<div class='TGN_site_Lightbox_VR_Span'><span class='TGN_site_Lightbox_VR_SpanT1'>Mobile device users: </span><span class='TGN_site_Lightbox_VR_SpanT2'>To view the virtual reality film below, </span><a href='https://www.youtube.com/watch?v=" + vid + "&amp;feature=youtu.be'><span class='TGN_site_Lightbox_VR_SpanT3'>click here to open YouTube.</span></a></div>");
        }
        var title = Vtitle;
        //try {
        //    s.events = "event8";
        //    s.eVar6 = title;
        //    s.prop9 = title;
        //    s.linkTrackVars = 'events,eVar6,prop9';
        //    s.linkTrackEvents = "event8";
        //    s.tl(true, 'o', title);
        //} catch (e) {
        //    //console.log(title);
        //    //console.log(event);
        //    //console.log(e.message);
        //    //console.log(e.name);
        //}
    }
</script>



<script type="text/javascript">
    var TGN_View_Mode = "unset";
    $(window).on('load', function () {
        setTGN_View_Mode();
    });
    $(window).resize(function () {
        setTGN_View_Mode();
    });
    function setTGN_View_Mode() {
        var ww = $(window).width();
        if (ww > 980 && TGN_View_Mode != "desktop") {
            TGN_View_Mode = "desktop";
            $(".ShareableInlineImage_ImageDiv").each(function () {
                if ($(this).parent().find(".ShareableInlineImage_Image").attr("data-viewstate") != "D") {
                    $(this).parent().find(".ShareableInlineImage_Image").attr("src", $(this).attr("data-siiimage"));
                    $(this).parent().find(".ShareableInlineImage_Image").attr("data-viewstate", "D");
                }
            });
            $(".article_top_DMT_Image").each(function () {
                    $(this).attr("src", $(this).attr("data-src"));
                $(this).attr("data-url", "set");
                if ($(this).attr("data-src") == "") {
                    $(this).parent().css("display", "none");
                }
            });
            $(".article_top_DMT_Canvas").each(function () {
                    $(this).css("background-image", "url("+$(this).attr("data-src")+")");
                    $(this).attr("data-url", "set");
            });
        } else if (ww > 680 && ww <= 980 && TGN_View_Mode != "tablet") {
            TGN_View_Mode = "tablet";
            $(".ShareableInlineImage_ImageDiv").each(function () {
                if ($(this).parent().find(".ShareableInlineImage_Image").attr("data-viewstate") != "T") {
                $(this).parent().find(".ShareableInlineImage_Image").attr("src", $(this).find(".ShareableInlineImage_ImageT").attr("data-siiimagetabletoptional"));
                    $(this).parent().find(".ShareableInlineImage_Image").attr("data-viewstate", "T");
                }
            });
            $(".article_top_DMT_Image").each(function () {
                    $(this).attr("src", $(this).attr("data-src-tablet"));
                    $(this).attr("data-url", "set");
                if ($(this).attr("data-src-tablet") == "") {
                    $(this).parent().css("display", "none");
                }
            });
            $(".article_top_DMT_Canvas").each(function () {
                    $(this).css("background-image", "url("+$(this).attr("data-src-tablet")+")");
                    $(this).attr("data-url", "set");
            });
        } else if (ww <= 680 && TGN_View_Mode != "mobile") {
            TGN_View_Mode = "mobile";
            $(".ShareableInlineImage_ImageDiv").each(function () {
                if ($(this).parent().find(".ShareableInlineImage_Image").attr("data-viewstate") != "M") {
                $(this).parent().find(".ShareableInlineImage_Image").attr("src", $(this).find(".ShareableInlineImage_ImageM").attr("data-siiimagemobileoptional"));
                    $(this).parent().find(".ShareableInlineImage_Image").attr("data-viewstate", "M");
                }
            });
            $(".article_top_DMT_Image").each(function () {
                    $(this).attr("src", $(this).attr("data-src-mobile"));
                    $(this).attr("data-url", "set");
                if ($(this).attr("data-src-mobile") == "") {
                    $(this).parent().css("display", "none");
                }
            });
            $(".article_top_DMT_Canvas").each(function () {
                    $(this).css("background-image", "url("+$(this).attr("data-src-mobile")+")");
                    $(this).attr("data-url", "set");
            });
        }
    }
    $(document).ready(function () {
        var ww = $(window).width();
        $(".ShareableInlineImage_ImageDiv").each(function () {
            $(this).parent().attr("id", "SII_ID" + $(this).attr("data-siiinstancenumber"));
            // add border if selected //border: 1px solid #ccc;
            if ($(this).attr("data-siiimageborder") == "1") {
                $(this).parent().find(".ShareableInlineImage_Image").css("border", "1px solid #ccc");
            }
        });
        setTGN_View_Mode();
    });
</script>
    
<script type="text/javascript">
    //var GIURL = "https://gnquiz-staging.azurewebsites.net/api/Account/";
    var GIURL = "https://insiders.gatesnotes.com/api/Account/";
    var ItemStoreLookDataPoints = [];
    var ItemStoreLookDataPrize = [];
    var TGNARR_CampaignUserPrizes = [];
    var TGNARR_CampaignUserPrizesEarned = [];

    function setGI(group, item, type, value, user, st) {
        $.ajax({
            url: GIURL + "GIStore",
            dataType: "json",
            type: "POST",
            headers: { 'authorization': 'Bearer ' + localStorage.getItem(tokenKey) },
            data: {
                //GNIName: "",//user, // this is for testing only
                Group: group,
                Item: item,
                Type: type,
                Value: value,
                StorageType: st // 0 WriteOnce, 1 WriteMany, 2 WriteLast
            },
            success: function (data) {
                console.log("GI store set: " + data + ", " + item);
            },
            error: function (request, status, error) {
                console.log("ERROR:" + request.responseText);
            }
        });
    }
    function getlookGIdata(groups, item, types, user) {
        $.ajax({
            url: GIURL + "GILook",
            dataType: "json",
            headers: { 'authorization': 'Bearer ' + localStorage.getItem(tokenKey) },
            type: "POST",
            data: {
                //GNIName: "",//user, // for test
                GroupsCSV: groups,
                TypesCSV: types,
                Item: item,
            },
            success: function (data) {
                return data;
            },
            error: function (request, status, error) {
                console.log("ERROR:" + request.responseText);
                return "error";
            }
        });
    }
    function lookGI(groups, item, types, user) {
        $.ajax({
            url: GIURL + "GILook",
            dataType: "json",
            headers: { 'authorization': 'Bearer ' + localStorage.getItem(tokenKey) },
            type: "POST",
            data: {
                //GNIName: "",//user, // for test
                GroupsCSV: groups,
                TypesCSV: types,
                Item: item,
            },
            success: function (data) {
                //console.log("OK" + data);
                if (types == "Points") {
                    ItemStoreLookDataPoints = data;
                }
                if (types == "Prize") {
                    ItemStoreLookDataPrize = data;
                    try {
                        // add to Prize list
                        if ($.inArray(data[0].Group, TGNARR_CampaignUserPrizes) == -1) {
                            TGNARR_CampaignUserPrizes.push(data[0].Group);
                        }
                        // add to list of earned prizes
                        if ($.inArray(data[0].Item, TGNARR_CampaignUserPrizesEarned) == -1 && data[0].Value == 1) {
                            TGNARR_CampaignUserPrizesEarned.push(data[0].Item);
                        }
                        //console.log("GIPrize:Item:" + data[0].Item + ":Value:" + data[0].Value + ":InEarned:" + $.inArray(data[0].Item, TGNARR_CampaignUserPrizesEarned));
                    } catch (error) {
                    }
                }
            },
            error: function (request, status, error) {
                console.log("ERROR:" + request.responseText + " e:" + error);
                if (error == "Unauthorized") {
                    noActiveUser();
                }
            }
        });
    }

    function lookGICount(group, item) {
        $.ajax({
            url: GIURL + "GICount",
            dataType: "json",
            type: "POST",
            data: {
                Group: group,
                Item: item,
            },
            success: function (data) {
                //console.log("OK" + data);
            },
            error: function (request, status, error) {
                console.log("ERROR:" + request.responseText);
            }
        });
    }

    function setCRMField(field, value, type) {//type="string", "Yes/No", "integer"//fields:new_gaveaflock
        $.ajax({
            url: GIURL + "CRMFieldSet",
            dataType: "json",
            headers: { 'authorization': 'Bearer ' + localStorage.getItem(tokenKey) },
            type: "POST",
            data: {
                field: field,
                value: value,
                fieldType: type,
            },
            success: function (data) {
                console.log("crm field set: " + data + "," + field);
            },
            error: function (request, status, error) {
                console.log("ERROR:" + request.responseText);
            }
        });
    }

</script>

    

<style>
    .InlineColorField {
        position: relative;
        left: -3%;
        padding: 3%;
        width: 106%;
    }

.InlineConvoHolder {
    margin-left: auto !important;
    margin-right: auto !important;
    width: 100%;
    padding-left: 0%;
    padding-top: 0%;
    padding-bottom: 0%;
    padding-right: 0%;
    position: relative;
    left: 0%;
    margin-bottom: 1em;
    margin-top: 1em;
        max-width: 700px;
    margin-left: auto !important;
    margin-right: auto !important;
}

    .InlineConvoLine {
    }

    .InlineConvoName {
            font-weight: 600;
            font-family: LusitanaBold, LusitanaSemiBold, Lusitana, serif;
        font-style: normal;
        color: #000;
        margin-right: 2px;
    }


    .ShareableQuote_FB {
        display: inline-block;
        width: 34px;
        height: 34px;
        cursor: pointer;
        background-color: white;
        pointer-events: all;
    }

    .ShareableQuote_TW {
        display: inline-block;
        width: 34px;
        height: 34px;
        margin-left: 5px;
        cursor: pointer;
        background-color: white;
        pointer-events: all;
    }

    .ShareableQuote_ShareIcons {
        margin-left: auto;
        margin-right: auto;
        display: none !important;
        width: 90px;
        margin-top: 10px;
        margin-bottom: 30px;
        background-color: white;
        pointer-events: none;
        cursor: pointer;
    }

    .ShareableQuote_Holder {
        text-align: left;
        color: black;
        font-size: 28px !important;
        line-height: 35px !important;
        pointer-events: all;
        font-family: source-serif-pro, 'Source Serif Pro', 'LyonDisplay-Bold', 'LyonDisplay-Medium', serif;
        font-weight: 600;
        margin-top: 10px;
        margin-bottom: 10px;
        border-left: 2px solid black;
        padding-left: 24px;
    }

    .ShareableQuote_Attrib {
        color: black;
        font-style: italic;
        margin-left: 0px;
        font-size: 18px;
        line-height: 35px;
    }
.ShareableQuote_Text {
    margin-left: 0px;
    margin-right: auto;
    display: flex;
    flex-direction: column;
}
    .ShareableQuote_Line {
        display: inline-block;
        width: 0px;
        min-width: 0px;
        background-color: black;
        margin-right: 0px;
    }

    .ShareableQuote_Tweet {
        display: none;
    }

    .ShareableQuote_FBD {
        display: none;
    }

    .ShareableQuote_FBT {
        display: none;
    }


    .gnYoutubeHolder {
        position: relative;
        padding-bottom: 50.93%; /*56.25%;*/
        padding-top: 30px;
        height: 0;
        overflow: hidden;
    }

        .gnYoutubeHolder iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
    
.TGNarticleMobileOnly {
  display: none; }

.TGNarticleDesktopOnly {
  display: inherit; }

    @media all and (max-width: 980px) {
  .TGNarticleMobileOnly {
    display: inherit; }

  .TGNarticleDesktopOnly {
    display: none; }
        .InlineConvoLine {
            width: 6px;
        }
    }

    @media all and (max-width: 820px) {
    }

    @media all and (max-width: 680px) {
        .InlineConvoLine {
            width: 0px;
            display: none;
        }
    }

    @media all and (max-width: 480px) {
        .ShareableQuote_Holder {
            font-size: 18px !important;
            line-height: 22px !important;
        }

        #ShareableQuote_Text {
            margin-bottom: 10px;
        }
    }

    @media all and (max-width: 430px) {
    }

    @media all and (max-width: 350px) {
    }

    @media all and (max-width: 340px) {
    }

    @media all and (max-width: 319px) {
    }
</style>

    <script type='text/javascript'>
        var appInsights = window.appInsights || function (config) {
            function r(config) { t[config] = function () { var i = arguments; t.queue.push(function () { t[config].apply(t, i) }) } }
            var t = { config: config }, u = document, e = window, o = 'script', s = u.createElement(o), i, f; for (s.src = config.url || '//az416426.vo.msecnd.net/scripts/a/ai.0.js', u.getElementsByTagName(o)[0].parentNode.appendChild(s), t.cookie = u.cookie, t.queue = [], i = ['Event', 'Exception', 'Metric', 'PageView', 'Trace', 'Ajax']; i.length;)r('track' + i.pop()); return r('setAuthenticatedUserContext'), r('clearAuthenticatedUserContext'), config.disableExceptionTracking || (i = 'onerror', r('_' + i), f = e[i], e[i] = function (config, r, u, e, o) { var s = f && f(config, r, u, e, o); return s !== !0 && t['_' + i](config, r, u, e, o), s }), t
        }({
            instrumentationKey: '47000385-8eec-4c1d-bd69-522ae19ed9f6'
        });

        window.appInsights = appInsights;
        appInsights.trackPageView();

/**/</script>
</head>
<body>
    
    


<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NV84C88"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

    
    

    <div id="TGN_site" class="TGN_site">
        <div class="TGN_site_InsideScroll">
            
            
            <div class="TGN_site_Slideheader">
                
                
    <style>
    .slideheader_DropHeader {
        background: white;
        color: black;
    }
    .slideheader_DropHeaderContentArea {
        color: black;
    }
    .slideheader_DropHeader .TGN_site_MenuIcon {
        color: black;
    }
    .slideheader_DropHeader .TGN_site_HeaderLink {
        color: black;
    }
</style>

<style>
    .slideheader_DropHeader {
        height: 66px;
        position: fixed;
        top: -110px;
        width: 100%;
        display: flex;
        align-items: center;
        z-index: 30;
        -webkit-transition: all 700ms cubic-bezier(0.215, 0.610, 0.355, 1.000);
        -moz-transition: all 700ms cubic-bezier(0.215, 0.610, 0.355, 1.000);
        -o-transition: all 700ms cubic-bezier(0.215, 0.610, 0.355, 1.000);
        transition: all 700ms cubic-bezier(0.215, 0.610, 0.355, 1.000); /* easeOutCubic */
        -webkit-transition-timing-function: cubic-bezier(0.215, 0.610, 0.355, 1.000);
        -moz-transition-timing-function: cubic-bezier(0.215, 0.610, 0.355, 1.000);
        -o-transition-timing-function: cubic-bezier(0.215, 0.610, 0.355, 1.000);
        transition-timing-function: cubic-bezier(0.215, 0.610, 0.355, 1.000); /* easeOutCubic */
    }

    .slideheader_title {
        display: flex;
        font-family: 'Roboto Condensed', 'Asap Condensed', 'neue-haas-unica', sans-serif;
        font-weight: 600;
        font-size: 16px;
        margin-left: 12px;
        border-bottom: 3px solid black;
        line-height: 20px;
    }
    .slideheader_title_white {
        border-bottom: 3px solid white;
        color: white;
    }
    .slideheader_DropHeaderBorder {
        /* border-bottom: 1px solid #ddd; */
        box-shadow: 0 2px 4px 0 rgba(0,0,0,0.09);
    }

    .slideheader_DropHeaderContentArea {
        max-width: 1160px;
        margin-left: auto;
        margin-right: auto;
        display: flex;
        align-items: center;
        width: 100%;
        justify-content: space-between;
    }

    .slideheader_DropHeader .TGN_site_Logo {
        letter-spacing: -1.5px;
        font-size: 44px;
        line-height: 46px;
        margin-top: 0px;
    }

        .TGN_site_Slideheader_LI {
            color: #0049fb !important;
        }
        .TGN_site_Slideheader_LI:hover {
            opacity:.6;
        }
.slideheader_articleDHtitleLU {
    display: flex;
    height: 29px;
    flex-flow: column;
    position: relative;
    top: 1px;
}
    .slideheader_articleDHtitleTOP {
        display: block;
        height: 6px;
    }

    .slideheader_articleDHtitle {
        font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
        font-weight: 300;
        font-size: 16px;
        line-height: 23px;
        margin-left: 12px;
        height: 23px;
    }

    .slideheader_DropHeader .TGN_site_HeaderLink {
        float: right;
        margin-right: 24px;
        font-family: 'Roboto Condensed', 'Asap Condensed', 'neue-haas-unica', sans-serif;
        font-size: 14px;
        font-weight: 600;
        text-transform: uppercase;
        cursor: pointer;
    }

    .TGN_site_Slideheader_SU {
    height: 24px;
    width: 57px;
    border: 1px solid #0049fb;
    border-radius: 0px;
    text-align: center;
    line-height: 24px;
    color: #0049fb !important;
    }
    .TGN_site_Slideheader_SU:hover {
    opacity:.6;
    }

    .TGN_site_Slideheader_SU_onblack {
        height: 24px;
        width: 57px;
        border: 1px solid #0049fb;
        border-radius: 0px;
        text-align: center;
        line-height: 24px;
        color: white !important;
        background-color: #0049fb;
    }

    .TGN_site_ProfileSlideNavHolder {
        height: 40px;
        background: #f3f3f3;
        width: 100%;
        display: flex;
        align-items: flex-end;
        position: absolute;
        top: 66px;
        border-bottom: 1px solid #d3d3d3;
    }

    @media all and (min-width: 1021px) {
        /*Desktop only*/
    }

    @media all and (min-width: 681px) {
        /*Desktop and Tablet*/
    }

    @media all and (min-width: 681px) and (max-width: 1020px) {
        /*Tablet only*/
    }

    @media all and (max-width: 1110px) {
    }

    @media all and (max-width: 1020px) {
        /*Mobile and Tablet*/
        .slideheader_DropHeader .TGN_site_Logo {
            letter-spacing: -1.5px;
            font-size: 32px;
            line-height: 36px;
            margin-top: 0px;
        }

        .slideheader_DropHeader .TGN_site_HeaderLink {
            display: none;
            font-size: 12px;
        }

        .slideheader_DropHeader .TGN_site_HeaderIcon {
            display: none;
        }

        .slideheader_articleDHtitle {
            display: none;
        }

        .slideheader_DropHeaderContentArea {
        }
    }

    @media all and (max-width: 850px) {
    }

    @media all and (max-width: 680px) {
        /*Mobile only*/
        .slideheader_DropHeader {
            height: 40px;
        }
    .slideheader_title {
        display: none;
    }

            .slideheader_DropHeader .TGN_site_HeaderLink {
                font-size: 11px;
            }

        .TGN_site_Slideheader_LI {
            display: none !important;
        }
.TGN_site_Slideheader_LI_onblack {
            display: none !important;
        }
        .slideheader_articleDHtitle {
        }

        .TGN_site_ProfileSlideNavHolder {
            top: 40px;
        }
    }
</style>



<script>
    var ww = $(window).width();
    var wh = $(window).height();
    var maxCW = 1160;
    var minMargin = 20;
    $(document).ready(function () {
        size_TGN_site_Slideheader_to_screen();
    });
    $(window).resize(function () {
        size_TGN_site_Slideheader_to_screen();
    });

    var throttled = TGN_throttle(size_TGN_site_Slideheader_to_screen, 500);
    $(".TGN_site").scroll(throttled);

    function size_TGN_site_Slideheader_to_screen() {
        //console.log("size_TGN_site_Slideheader_to_screen");
        ww = $(window).width();
        var isw = $(".TGN_site_InsideScroll").width();
        ww = isw;
        wh = $(window).height();
        var scrollTopContentArea = $(".TGN_site").scrollTop();
        if (ww < (maxCW + minMargin * 2)) {
            $(".slideheader_DropHeaderContentArea").css("width", (ww - minMargin * 2) + "px");
            $(".slideheader_DropHeaderContentArea").css("margin-left", (minMargin) + "px");
        } else {
            $(".slideheader_DropHeaderContentArea").css("width", (maxCW) + "px");
            $(".slideheader_DropHeaderContentArea").css("margin-left", "auto");
        }
        $(".slideheader_DropHeader").css("width", (ww) + "px");
        if (scrollTopContentArea > 300) {
            $(".slideheader_DropHeader").css("top", "0px");
        } else {
            $(".slideheader_DropHeader").css("top", "-110px");
        }
    }
</script>

<div class="slideheader_DropHeader slideheader_DropHeaderBorder">
    <div class="slideheader_DropHeaderContentArea" data-headeroption="article">
        <div class="TGN_site_HeaderL">
                <a href="/">
                    <div class="TGN_site_Logo"></div>
                </a>
                <div class="slideheader_articleDHtitleLU">
                    <div class="slideheader_articleDHtitleTOP"></div>
                    <div class="slideheader_articleDHtitle"></div>
                </div>
        </div>
        <div class="TGN_site_HeaderR">
                            <div id="TGN_site_Slideheader_LI" class="TGN_site_HeaderLink TGN_site_Slideheader_LI">Log in</div>
                <div id="TGN_site_Slideheader_SU" class="TGN_site_HeaderLink SignInHeader TGN_site_Slideheader_SU">Sign up</div>
                                <a href="/Search"><div class="TGN_site_SearchIcon" style="color:black;"><i class="icon-search"></i></div></a>
            <div class="TGN_site_Profile ProfileIcon"></div>
            <div class="TGN_site_Menu">
                <div class="TGN_site_MenuIcon">
                    <i class="icon-hamburger-menu-3"></i>
                </div>
                <div class="TGN_site_MenuX">
                    <i class="icon-close-x"></i>
                </div>
            </div>
        </div>
    </div>
</div>


            </div>
            <div class="TGN_site_FixedHeadersHolder">
                
                
    <style>
    .AH_BackToProfile {
        font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
        font-weight: 200;
        font-style: normal;
        margin: 10px;
        cursor: pointer;
        font-size: 14px;
    }

        .AH_BackToProfile:hover {
            color: #3379be;
        }

    .commentHistory_Holder {
        font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
        font-weight: 300;
        font-style: normal;
    }

        .commentHistory_Holder a {
            color: black;
            text-decoration: none;
        }

    .commentHistory_Stream {
        min-height: 500px;
        margin-top: 24px;
        margin-bottom: 50px;
    }

    .commentHistory_ItemTitle {
        font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
        margin-bottom: 10px;
        font-size: 20px;
        cursor: pointer;
        color: #666;
    }

        .commentHistory_ItemTitle:hover {
            color: #3379be;
        }

    .commentHistory_ItemReply {
        margin-bottom: 10px;
        color: #666;
        padding-left: 20px;
        font-size: 14px;
    }

    .commentHistory_ItemReply_I {
        display: inline-block;
    }

    .commentHistory_ItemReply_T1 {
        display: inline-block;
    }

    .commentHistory_ItemReply_T2 {
        display: inline-block;
    }

    .commentHistory_ItemDescription {
        margin-bottom: 10px;
        padding-left: 20px;
        text-align: left;
    }

    .commentHistory_ItemFooter {
        margin-bottom: 30px;
        color: #666;
        padding-left: 20px;
        font-size: 12px;
    }

    .commentHistory_ItemFooter_View {
        cursor: pointer;
        color: #3379be;
        font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
        font-weight: 400;
    }

        .commentHistory_ItemFooter_View:hover {
            color: #194f97;
        }

    #commentHistory_ItemTemplate {
        display: none;
    }

    #commentHistory_Holder {
        display: none;
    }

    .bookmarks_Holder {
        display: none;
        margin-top: 24px;
        margin-bottom: 50px;
    }

    #AH_BackToProfile {
        display: none;
    }


    .EditProfileButton_v2 {
        display: inline-block;
        margin-top: 10px;
        cursor: pointer;
    }

        .EditProfileButton_v2:hover {
            color: #3379be;
        }

    .AccountSettingsButton_v2 {
        display: inline-block;
        margin-left: 30px;
        margin-right: 30px;
        margin-top: 10px;
        cursor: pointer;
    }

        .AccountSettingsButton_v2:hover {
            color: #3379be;
        }

    .CommentHistoryButton_v2 {
        display: inline-block;
        margin-top: 10px;
        cursor: pointer;
    }

        .CommentHistoryButton_v2:hover {
            color: #3379be;
        }

    .Auth_ProfileControlsI {
        display: inline-block;
        margin-right: 10px;
    }

    .Auth_ProfileControlsD {
        display: inline-block;
    }

    .Auth_ProfileControlsA {
        display: none;
    }

    .TGN_BottomMenuS45_SettingsHeaderItem {
        color: #404040;
        font-size: 14px;
        font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
        font-weight: 300;
        font-style: normal;
        cursor: pointer;
    }

        .TGN_BottomMenuS45_SettingsHeaderItem:hover {
            color: #3379be;
        }

    .GNCommTopNotify {
        position: relative;
        top: 23px;
        left: 20px;
        background: red;
        width: 16px;
        height: 16px;
        text-align: center;
        color: white;
        font-size: 13px;
        line-height: 18px;
        padding: 3px;
        padding-left: 3px;
        border-radius: 2px;
        opacity: 0;
        pointer-events: none;
    }

    .GNCommMobArtNotify {
        position: absolute;
        top: 20px;
        left: 158px;
        background: red;
        width: 14px;
        height: 19px;
        color: white;
        font-size: 13px;
        line-height: 13px;
        padding: 3px;
        padding-left: 3px;
        border-radius: 2px;
        display: none;
        opacity: 1;
    }

    #GNCommNotificationBlockBase {
        display: none;
    }

    .GNCommTopNotifyExpand {
        background: #F3F3F3;
        width: 260px;
        max-height: 244px;
        overflow-y: auto;
        overflow-x: hidden;
        padding: 0px;
        clear: both;
        margin: 1px;
        display: none;
        opacity: 1;
    }

    #GNAuthTopNotifyExpand {
        display: block;
    }

    .GNCommMobArtNotifyExpand {
        background: #eee;
        width: 260px;
        max-height: 154px;
        overflow-y: auto;
        border: 1px solid #ccc;
        border-top: 0px solid white;
        overflow-x: hidden;
        padding: 3px;
        clear: both;
        display: none;
        margin-top: 40px;
        position: relative;
        left: -1px;
        opacity: 1;
    }
.GNCommNotificationBlock {
    background: #F3F3F3;
    font-size: 13px;
    line-height: 16px;
    padding-top: 6px;
    padding-bottom: 6px;
    border-bottom: 1px solid #F2F2F2;
    align-items: center;
}
.GNCommNB_icon {
    display: inline-flex;
    align-items: center;
    justify-content: flex-start;
    width: 40px;
    height: 32px;
    padding-left: 15px;
    color: #B8B8B8;
    vertical-align: top;
    font-size: 19px;
}
.GNAuthNB_icon {
    color: #FF0000;
    text-align: center;
    display: inline-flex;
    align-items: center;
    justify-content: flex-start;
    width: 40px;
    height: 32px;
    padding-left: 15px;
    vertical-align: top;
    font-size: 19px;
}
#GNAuth_NB_CTA_TDD_TFV .GNAuthNB_icon {
    color: #000000;
}
#GNAuth_NB_CTA_TDD_TGNNL .GNAuthNB_icon {
    color: #000000;
}
#GNAuth_NB_CTA_TDD_UnSubYes .GNAuthNB_icon {
    color: #000000;
}
    .GNCommNB_description {
        display: inline-block;
        width: 150px;
        height: 32px;
        color: #404040;
        cursor: pointer;
    }

        .GNCommNB_description:hover {
            color: #3379be;
        }

    .GNCommNB_descLink {
    }
.GNCommNB_time {
    display: inline-flex;
    align-items: center;
    justify-content: flex-start;
    width: 80px;
    height: auto;
    text-align: right;
    float: none;
    padding-right: 10px;
    font-size: 10px;
    color: #B8B8B8;
}
    .GNAuthNB_description {
        display: block;
        width: 150px;
        height: auto;
        padding-left: 6px;
    }

    .GNAuthNB_descA {
        display: inline;
        color: #404040;
    }

    .GNAuthNB_descLink {
        display: inline;
        color: #404040;
        cursor: pointer;
    }

        .GNAuthNB_descLink:hover {
            color: #3379be;
        }

    #GNCommTopUP_SignOut {
        font-weight: 700;
    }

    .SettingsHeader {
        display: inline-block;
        float: left;
        text-align: left;
        padding-left: 12px;
    }

    .GNCommTopUserMenuPop {
        position: fixed;
        top: 70px;
        right: 0px;
        width: 260px;
        z-index: 31;
        background: white;
        padding: 0px;
        padding-top: 0px;
        padding-bottom: 0px;
        border: 1px solid #d9d9d9;
        border-radius: 0px;
        color: #404040;
        font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
        font-weight: 300;
        font-size: 16px;
        line-height: 18px;
        display: none;
    }

        .GNCommTopUserMenuPop:before {
            content: "";
            position: absolute;
            top: 0px;
            right: 88px;
            height: 20px;
            width: 20px;
            background: white;
            box-sizing: border-box;
            transform: rotate(-45deg) translate(70%);
            border-top: inherit;
            border-right: inherit;
            box-shadow: inherit;
        }

    .GNCommTopUP_MenuItem {
        margin-bottom: 11px;
        cursor: pointer;
    }

        .GNCommTopUP_MenuItem:hover {
            color: #3379be;
        }

    .LogOutHeader {
        display: inline-block;
        float: right;
        background: #fff;
        width: 110px;
        text-align: right;
        padding: 0px;
        padding-right: 12px;
        position: unset;
        color: #3379be;
        text-decoration: none;
        font-size: 16px;
        margin-left: 0px;
        height: auto;
    }

    #TGN_BottomMenuS45_LogOutHeader {
        text-decoration: none;
        margin-top: auto;
        display: inline-block;
        float: right;
        padding-right: 23px;
        line-height: 20px;
        pointer-events: all !important;
    }

    .commentHistory_Empty {
        display: block;
    }
.bookmarks_none {
    font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
    font-weight: 300;
    font-style: normal;
}
    #GNAuth_NB_CTA_TDD_PV {
        display: none;
    }

    #GNAuth_NB_CTA_TDD_VF {
        display: none;
    }

    #GNAuth_NB_CTA_TDD_TFV {
        display: none;
    }

    #GNAuth_NB_CTA_TDD_DAA {
        display: none;
    }

    #GNAuth_NB_CTA_TDD_TGNNL {
        display: none;
    }

    #GNAuth_NB_CTA_TDD_UnSubYes {
        display: none;
    }

    #GNAuth_NB_CTA_TDD_UnSubNo {
        display: none;
    }


    @media all and (max-width: 1020px) {
        .GNCommTopUserMenuPop {
            /*display:none !important;
    opacity:0;
    pointer-events:none;*/
        }

    }

    @media all and (max-width: 680px) {
            .GNCommTopUserMenuPop:before {
                right: 74px;
            }

        .GNCommTopUserMenuPop {
            top: 58px;
        }
        .GNCommTopNotify {
            top: 10px;
            left: 10px;
            width: 10px;
            height: 12px;
            font-size: 12px;
            line-height: 14px;
            border-radius: 0px;
        }

        .commentHistory_ItemDescription {
            text-align: left;
        }

        .EditProfileButton_v2 {
            display: block;
            max-width: 200px;
            margin-left: auto;
            margin-right: auto;
            clear: both;
            overflow: hidden;
            margin-top: 30px;
        }

        .AccountSettingsButton_v2 {
            display: block;
            max-width: 200px;
            margin-left: auto;
            margin-right: auto;
            clear: both;
            overflow: hidden;
        }

        .CommentHistoryButton_v2 {
            display: block;
            max-width: 200px;
            margin-left: auto;
            margin-right: auto;
            clear: both;
            overflow: hidden;
        }

        .Auth_ProfileControlsI {
            float: left;
        }

        .Auth_ProfileControlsD {
            float: left;
        }

        .Auth_ProfileControlsA {
            display: inline-block;
            float: right;
        }

        .commentHistory_ItemReply {
            padding-left: 0px;
        }

        .commentHistory_Stream {
        }
    }

    @media all and (max-width: 480px) {
        .GNCommNotificationBlock {
            font-size: 12px;
            line-height: 14px;
        }

        .GNCommNB_icon {
            width: 30px;
        }

        .GNCommNB_description {
        }

        .GNAuthNB_description {
        }
    }

    @media all and (max-width: 370px) {
        .GNCommNB_description {
        }

        .GNAuthNB_description {
        }
    }
</style>


<div id="GNCommTopUserMenuPop" class="GNCommTopUserMenuPop">
    <div class="TGN_MainMenu_Grouping" id="GNCommTopUserMenuPop_ProfileGroup">
        <div id="GNCommTopUP_SignOut" class="GNCommTopUP_SignOut GNCommTopUP_MenuItem">Log out</div>
        <a href="/Profile-Settings"><div id="GNCommTopUP_ProSet" class="GNCommTopUP_ProSet GNCommTopUP_MenuItem">My profile and settings</div></a>
        <a href="/Profile-Settings?profilepage=bookmarks"><div id="GNCommTopUP_MyBookMarks" class="GNCommTopUP_MyBookMarks GNCommTopUP_MenuItem">My bookmarks</div></a>
        <div id="GNCommTopUP_ComHis" class="GNCommTopUP_ComHis GNCommTopUP_MenuItem">Comment history</div>
    </div>
    <div id="GNAuthTopNotifyExpand" class="GNCommTopNotifyExpand">
        <div id="GNAuth_NB_CTA_TDD_PV" class="GNCommNotificationBlock">
            <div class="GNAuthNB_icon"><i class="icon-exclamation"></i></div>
            <div class="GNAuthNB_description">
                <span class="GNAuthNB_descA">Please complete your account verification. </span>
                <span id="GNAuth_NB_CTA_TDD_PVLink" class="GNAuthNB_descLink">Resend verification email.</span>
                <div class="GNCommNB_time">today</div>
            </div>
        </div>
        <div id="GNAuth_NB_CTA_TDD_VF" class="GNCommNotificationBlock">
            <div class="GNAuthNB_icon"><i class="icon-exclamation"></i></div>
            <div class="GNAuthNB_description">
                <span class="GNAuthNB_descA">This verification token has expired. </span>
                <span class="GNAuthNB_descLink"></span>
                <div class="GNCommNB_time">today</div>
            </div>
        </div>
        <div id="GNAuth_NB_CTA_TDD_TFV" class="GNCommNotificationBlock">
            <div class="GNAuthNB_icon"><i class="icon-profile"></i></div>
            <div class="GNAuthNB_description">
                <span class="GNAuthNB_descA">Your email address has been verified. </span>
                <span id="GNAuth_NB_CTA_TDD_TFVLink" class="GNAuthNB_descLink">Update my profile.</span>
                <div class="GNCommNB_time">today</div>
            </div>
        </div>
        <div id="GNAuth_NB_CTA_TDD_DAA" class="GNCommNotificationBlock">
            <div class="GNAuthNB_icon"><i class="icon-exclamation"></i></div>
            <div class="GNAuthNB_description">
                <span class="GNAuthNB_descA">Your account has been deactivated. </span>
                <span id="GNAuth_NB_CTA_TDD_DAALink" class="GNAuthNB_descLink">Sign in to re-activate your account.</span>
                <div class="GNCommNB_time">today</div>
            </div>
        </div>
        <div id="GNAuth_NB_CTA_TDD_TGNNL" class="GNCommNotificationBlock">
            <div class="GNAuthNB_icon"><i class="icon-gallery"></i></div>
            <div class="GNAuthNB_description">
                <span class="GNAuthNB_descA">View all newsletters in the </span>
                <span id="GNAuth_NB_CTA_TDD_TGNNLLink" class="GNAuthNB_descLink">newsletter archive</span>
                <div class="GNCommNB_time">today</div>
            </div>
        </div>
        <div id="GNAuth_NB_CTA_TDD_UnSubYes" class="GNCommNotificationBlock">
            <div class="GNAuthNB_icon"><i class="icon-mail"></i></div>
            <div class="GNAuthNB_description">
                <span class="GNAuthNB_descA">You are now unsubscribed from receiving emails. </span>
                <span class="GNAuthNB_descLink"></span>
                <div class="GNCommNB_time">today</div>
            </div>
        </div>
        <div id="GNAuth_NB_CTA_TDD_UnSubNo" class="GNCommNotificationBlock">
            <div class="GNAuthNB_icon"><i class="icon-exclamation"></i></div>
            <div class="GNAuthNB_description">
                <span class="GNAuthNB_descA">Sorry, we were unable to unsubscribe you at this time. </span>
                <span class="GNAuthNB_descLink"></span>
                <div class="GNCommNB_time">today</div>
            </div>
        </div>
    </div>
    <div id="GNCommTopNotifyExpand" class="GNCommTopNotifyExpand"></div>
</div>

<div id="GNCommTopNotify" class="GNCommTopNotify">0</div>
<div id="GNCommMobArtNotify" class="GNCommMobArtNotify">0</div>

<div id="GNCommNotificationBlockBase" class="GNCommNotificationBlock">
    <div class="GNCommNB_icon"><i class="icon-comment-outline"></i></div>
    <div class="GNCommNB_description">
        <span class="GNCommNB_descA"></span>
        <span class="GNCommNB_descLink"></span>
        <div class="GNCommNB_time"></div>
    </div>
</div>

<div id="AH_BackToProfile" class="AH_BackToProfile">
    <span class="AH_BackToProfile_I"><i class="icon-left-arrow-01"></i></span><span class="AH_BackToProfile_T">Back to profile</span>
</div>
<div id="commentHistory_Holder" class="commentHistory_Holder">
    <div class="commentHistory_Stream">
        <div class="Auth_SectionHeader50">Comment Items</div>
        <div class="commentHistory_Empty">You have not left any comments yet.</div>

        <div id="commentHistory_ItemTemplate" class="commentHistory_Item">
            <a class="commentHistory_ItemTitleLink" href="/"><div class="commentHistory_ItemTitle" data-url="">title</div></a>
            <div class="commentHistory_ItemReply">
                <div class="commentHistory_ItemReply_I"><i class="icon-reply_v1-01"></i></div>
                <div class="commentHistory_ItemReply_T1">in reply to</div>
                <div class="commentHistory_ItemReply_T2">name</div>
            </div>
            <div class="commentHistory_ItemDescription">description</div>
            <div class="commentHistory_ItemFooter">
                <span class="commentHistory_ItemFooter_T"></span>
                <span class="commentHistory_ItemFooter_Dot"><i class="icon-dot"></i></span>
                <span class="commentHistory_ItemFooter_H1"></span>
                <span class="commentHistory_ItemFooter_H2"></span>
                <span class="commentHistory_ItemFooter_DotH"><i class="icon-dot"></i></span>
                <span class="commentHistory_ItemFooter_R1"></span>
                <span class="commentHistory_ItemFooter_R2"></span>
                <span class="commentHistory_ItemFooter_DotR"><i class="icon-dot"></i></span>
                <a class="commentHistory_ItemFooter_ViewLink" href="/"><span class="commentHistory_ItemFooter_View" data-url="">View&nbsp;Comment</span></a>
            </div>
        </div>
    </div>

</div>
<div id="bookmarks_Holder" class="bookmarks_Holder">
    <div class="Auth_SectionHeader50">Saved Posts</div>
    <div class="bookmarks_none">You haven’t bookmarked any posts yet.</div>
    <div id="bookmarks_InnerHolder" class="bookmarks_InnerHolder">
    </div>
</div>

<script type="text/javascript">
    var TGNC_NotificationCount = 0;
    var GNCommTopUserMenuPopState = "off";
    var GNCommLFUserCommentsData = "";
    var GNCommContentThreadData = "";
    var GNCommMaxHistory = 10;

    var TGNCom_GetNotificationsDone = "false";


    $(document).ready(function () {
        $(".TGN_site_Header").find(".TGN_site_Profile").append($("#GNCommTopNotify"));
        $(".TGN_site_Header").find(".TGN_site_Profile").append($("#GNCommTopUserMenuPop"));

        $(".myProfile_Holder").prepend($("#AH_BackToProfile"));
        $(".myProfile_Holder").append($("#commentHistory_Holder"));
        $(".myProfile_Holder").append($("#bookmarks_Holder"));


        // get notifications

        //2
        //var TGNC_NotificationsDataRaw = '{"notifications": [{ "type": "Like", "text": "3 people liked", "time": "1 min ago" },{ "type": "Reply", "text": "Ian replied to", "time": "2 days ago" }]}';
        //var TGNC_NotificationsDataRaw = '{"notifications": [{ "articleURL": "https://local.gatesnotes.com/Development/Foreign-Aid-Helps-Americas-Economy", " collectionID": "202235390", "commentID": "721571805", "type": "Like", "otherGNIfirstname": "Craig", "replyToGNIInfo2ID": "5", "likeCount": "1", "timeFrame": "2017-08-05T01:17:51.000Z", "interactitonID": "12" },{ "articleURL": "https://local.gatesnotes.com/Development/Foreign-Aid-Helps-Americas-Economy", " collectionID": "202235390", "commentID": "721571861", "type": "Reply", "otherGNIfirstname": "Craig6", "replyToGNIInfo2ID": "6", "likeCount": "0", "timeFrame": "2017-08-05T01:18:07.000Z", "interactitonID": "13" }]}';

        //4
        //var TGNC_NotificationsDataRaw = '{"notifications": [{ "type": "Like", "text": "3 people liked", "time": "1 min ago" },{ "type": "Reply", "text": "Ian replied to", "time": "2 days ago" },{ "type": "Reply", "text": "Ian replied to", "time": "2 days ago" },{ "type": "Like", "text": "3 people liked", "time": "1 year ago" }]}';
        var TGNC_NotificationsDataRaw = '{"notifications": [{ "articleURL": "https://local.gatesnotes.com/Development/Foreign-Aid-Helps-Americas-Economy", "collectionID": "202235390", "commentID": "721571805", "type": "Like", "otherGNIfirstname": "Craig", "replyToGNIInfo2ID": "5", "likeCount": "1", "timeFrame": "2017-08-05T01:17:51.000Z", "interactitonID": "12" },{ "articleURL": "https://local.gatesnotes.com/Development/Foreign-Aid-Helps-Americas-Economy", "collectionID": "202235390", "commentID": "721571861", "type": "Reply", "otherGNIfirstname": "Craig6", "replyToGNIInfo2ID": "6", "likeCount": "0", "timeFrame": "2017-08-05T01:18:07.000Z", "interactitonID": "13" },{ "articleURL": "https://local.gatesnotes.com/Development/Foreign-Aid-Helps-Americas-Economy", " collectionID": "202235390", "commentID": "721571805", "type": "Like", "otherGNIfirstname": "Craig", "replyToGNIInfo2ID": "5", "likeCount": "1", "timeFrame": "2017-08-05T01:17:51.000Z", "interactitonID": "12" },{ "articleURL": "https://local.gatesnotes.com/Development/Foreign-Aid-Helps-Americas-Economy", " collectionID": "202235390", "commentID": "721571861", "type": "Reply", "otherGNIfirstname": "Craig6", "replyToGNIInfo2ID": "6", "likeCount": "0", "timeFrame": "2017-08-05T01:18:07.000Z", "interactitonID": "13" }]}';

        //0
        //var TGNC_NotificationsDataRaw = '{"notifications": []}';

        var TGNC_NotificationsDataObj = $.parseJSON(TGNC_NotificationsDataRaw);

        //populateCommentNotifications(TGNC_NotificationsDataObj);


        // get history

        //2
        var TGNC_HistoryDataRaw = '{"history": [{ "message": "2345678", "title": "The Bread Lab in My Backyard", "url": "https://www.gatesnotes.com/Development/Bread-Lab", "replyname": "", "description": "I like to make bread. It should be easy. Man has been doing it for years! The problem is that if you dont treat it with respect it can all go horribly wrong and you end up with a brick and not a loaf!", "time": "2 days ago", "likes": "2", "replies": "0" },{ "message": "1234567", "title": "What Cowboys Can Teach Us About Feeding the World", "url": "https://www.gatesnotes.com/Development/What-Cowboys-Can-Teach-Us-About-Feeding-the-World", "replyname": "Ian Saunders", "description": "Im glad to see Gates did not leave the Environmental Health issues out of the article.", "time": "13 days ago", "likes": "0", "replies": "1" }]}';

        var TGNC_HistoryDataObj = $.parseJSON(TGNC_HistoryDataRaw);
        //populateCommentHistoryStream(TGNC_HistoryDataObj);



        $("#GNCommTopUP_ComHis").click(function () {
            hideGNCommTopUserMenuPop();
            hideAuthHolders();
            window.location.href = '/Profile-Settings?profilepage=comments';
            //show_commentHistory_Holder();
        });
        $("#GNCommTopUP_ProSet").click(function () {
            //hideGNCommTopUserMenuPop();
            //hideAuthHolders();
            //window.location.href = '/Profile-Settings';
        });
        $("#GNCommTopUP_SignOut").click(function () {
            hideGNCommTopUserMenuPop();
            logmeout();
        });
        ProcessGNCommQueryStrings();

    });


    function showGNCommTopUserMenuPop() {
        //setTGNBodyHeightMenuS45();
        $("#GNCommTopUserMenuPop").css("display", "block");
        GNCommTopUserMenuPopState = "on";
        //console.log("# of notifications: " + TGNC_NotificationCount + Auth50_UserNotification.status);
        if (TGNC_NotificationCount == 0 && Auth50_UserNotification.status == "none") {
            TGNCommentNotif_ViewedMenu = false;
            createAuthCookie("TGNCommentNotif_ViewedMenu", "false", .004);
        } else {
            TGNCommentNotif_ViewedMenu = true;
            createAuthCookie("TGNCommentNotif_ViewedMenu", "true", .01);
        }
        GNCommFormatMenuNotifications();
    }
    function hideGNCommTopUserMenuPop() {
        $("#GNCommTopUserMenuPop").css("display", "none");
        GNCommTopUserMenuPopState = "off";
    }
    var GNCommCalculateTimeFrame = function (dt) {
        var d = new Date(dt);
        var Today = new Date();
        var days = Calculatedays(d, Today);
        var months = Math.floor(days / 30);
        var years = Math.floor(days / 365);
        if (days <= 0) {
            return "today";
        }
        else if (days == 1) {
            return "yesterday";
        }
        else if (days <= 30) {
            return "" + days + " days ago";
        }
        else if (months < 2) {
            return "" + months + " month ago";
        }
        else if (months < 13) {
            return "" + months + " months ago";
        }
        else if (years < 2) {
            return "" + years + " year ago";
        }
        else {
            return "" + years + " years ago";
        }
    };

    function populateCommentNotifications(data) {
        // add notifications
        Auth50_GNI_UserStatus.a = "true:user:populateCommentNotifications";

        TGNC_NotificationCount = data.notifications.length;

        // if change in # of notifications reset viewed cookie
        if (readALSCookie("TGNCommentNotif_TGNC_NotificationCount") != TGNC_NotificationCount) {
            TGNCommentNotif_ViewedMenu = false;
            createAuthCookie("TGNCommentNotif_ViewedMenu", "false", .004);
        }
        createAuthCookie("TGNCommentNotif_TGNC_NotificationCount", TGNC_NotificationCount, 400);

        //console.log("TGNC_NotificationCount:" + TGNC_NotificationCount + " currentUserData.CommOnscreenOption:" + currentUserData.CommOnscreenOption);
        if ((TGNC_NotificationCount > 0 && currentUserData.CommOnscreenOption == "true") || Auth50_UserNotification.status != "none") {
            // display notifications
            $("#GNCommTopNotifyExpand").html("");
            for (var i = 0; i < TGNC_NotificationCount; i++) {
                switch (data.notifications[i].type) {
                    case "like":
                        $("#GNCommNotificationBlockBase").find(".GNCommNB_icon").html("<i class='icon-like-heart-selected'></i>");
                        $("#GNCommNotificationBlockBase").find(".GNCommNB_descA").html(data.notifications[i].likeCount);
                        if (data.notifications[i].likeCount == "1") {
                            $("#GNCommNotificationBlockBase").find(".GNCommNB_descLink").html(" person liked your comment");
                        } else {
                            $("#GNCommNotificationBlockBase").find(".GNCommNB_descLink").html(" people liked your comment");
                        }
                        break;
                    case "reply":
                        $("#GNCommNotificationBlockBase").find(".GNCommNB_icon").html("<i class='icon-comment-outline'></i>");
                        var names = data.notifications[i].displayName.split(' ');
                        $("#GNCommNotificationBlockBase").find(".GNCommNB_descA").html(names[0]);
                        $("#GNCommNotificationBlockBase").find(".GNCommNB_descLink").html(" replied to your comment");
                        break;
                    // add case for notifications
                }
                $("#GNCommNotificationBlockBase").find(".GNCommNB_time").html(GNCommCalculateTimeFrame(data.notifications[i].timeFrame));
                $("#GNCommNotificationBlockBase").find(".GNCommNB_description").attr("id", "GNCommNB_descriptionT" + i);
                $("#GNCommNotificationBlockBase").find(".GNCommNB_description").attr("data-articleURL", data.notifications[i].articleURL);
                $("#GNCommNotificationBlockBase").find(".GNCommNB_description").attr("data-commentID", data.notifications[i].commentID);
                $("#GNCommNotificationBlockBase").find(".GNCommNB_description").attr("data-collectionID", data.notifications[i].collectionID);
                $("#GNCommNotificationBlockBase").find(".GNCommNB_description").attr("data-interactionID", data.notifications[i].interactionID);
                $("#GNCommTopNotifyExpand").append($("#GNCommNotificationBlockBase").clone(false).attr("id", "GNCommNotificationBlockT" + i).css("display", "block"));
                $("#GNCommNotificationBlockBase").find(".GNCommNB_description").attr("id", "GNCommNB_descriptionB" + i);
            }
            // set menu to show notifications
            GNCommFormatMenuNotifications();

        } else {
            // hide notifications
            if (Auth50_UserNotification.status == "none") {
                GNCommHideMenuNotifications();
            }
        }
        GNComm_SizeScroll();
        $(".GNCommNB_description").click(function () {

            var GNCommNB_descriptionID = $(this).attr("id");
            var GNCommNB_descriptionarticleURL = $(this).attr("data-articleURL");
            var GNCommNB_descriptioncommentID = $(this).attr("data-commentID");
            var GNCommNB_descriptioncollectionID = $(this).attr("data-collectionID");
            var GNCommNB_descriptioninteractionID = $(this).attr("data-interactionID");
            GNCommNB_descriptionID = GNCommNB_descriptionID.replace('GNCommNB_description', '');
            GNCommNB_descriptionLOC = GNCommNB_descriptionID.substring(0, 1);
            GNCommNB_descriptionID = GNCommNB_descriptionID.substring(1, GNCommNB_descriptionID.length);
            //console.log("item:" + GNCommNB_descriptionLOC + ":" + GNCommNB_descriptionID + ":" + GNCommNB_descriptionarticleURL + ":" + GNCommNB_descriptioncommentID);

            TGNCom_ClearNotifications(GNCommNB_descriptioninteractionID, GNCommNB_descriptionarticleURL, GNCommNB_descriptioncollectionID, GNCommNB_descriptioncommentID);
            //window.location.href = GNCommNB_descriptionarticleURL + '#lf-content=' + GNCommNB_descriptioncollectionID + ":" + GNCommNB_descriptioncommentID;
        });
    }

    Auth50_UserNotification.registerListener(function (val) {
        console.log("The value of NE Auth50_UserNotification.status changed to: " + val);
        switch (val) {
            case "CTA_TDD_PV":
                $("#GNAuth_NB_CTA_TDD_PV").css("display", "flex");
                break;
            case "CTA_TDD_VF":
                $("#GNAuth_NB_CTA_TDD_VF").css("display", "flex");
                break;
            case "CTA_TDD_TFV":
                $("#GNAuth_NB_CTA_TDD_TFV").css("display", "flex");
                break;
            case "CTA_TDD_DAA":
                $("#GNAuth_NB_CTA_TDD_DAA").css("display", "flex");
                break;
            case "CTA_TDD_TGNNL":
                $("#GNAuth_NB_CTA_TDD_TGNNL").css("display", "flex");
                break;
            case "CTA_TDD_UnSubYes":
                $("#GNAuth_NB_CTA_TDD_UnSubYes").css("display", "flex");
                break;
            case "CTA_TDD_UnSubNo":
                $("#GNAuth_NB_CTA_TDD_UnSubNo").css("display", "flex");
                break;
        }
    });
    function GNCommFormatMenuNotifications() {
        //console.log("GNCommFormatMenuNotifications: " + Auth50_UserNotification.status);
        if (Auth50_UserNotification.status == "none" && TGNC_NotificationCount == 0) {
            GNCommHideMenuNotifications();
        } else {
            // all notif
            //$("#TGN_BottomMenuS45SignInExpand").css("display", "block");

            $("#GNCommTopUP_ProSet").css("display", "block");
            $("#GNCommTopUP_ComHis").css("display", "none");
            $("#GNCommTopUP_SignOut").css("display", "block");
            if (!TGNCommentNotif_ViewedMenu) {
                $("#GNCommTopNotify").css("display", "block");
                $("#GNCommTopNotify").css("opacity", 1);
                //$("#GNCommMobArtNotify").css("display", "block");
                //$("#GNCommMobArtNotify").css("opacity", 1);
            } else {
                $("#GNCommTopNotify").css("display", "none");
                $("#GNCommTopNotify").css("opacity", 0);
                $("#GNCommMobArtNotify").css("display", "none");
                $("#GNCommMobArtNotify").css("opacity", 0);
            }
            $("#TGN_BottomMenuS45SignInExpand").css("display", "none");
            if (TGNC_NotificationCount > 0) {
                // comm notif
                $("#GNCommTopNotifyExpand").css("display", "block");
            }
            if (Auth50_UserNotification.status != "none") {
                // auth notif
                $("#GNAuthTopNotifyExpand").css("display", "block");

                TGNC_NotificationCount += 1;
            }
            if (TGNC_NotificationCount == 0) {
                $("#GNCommTopNotify").html(1);
                $("#GNCommMobArtNotify").html(1);
            } else if (TGNC_NotificationCount < 10) {
                $("#GNCommTopNotify").html(TGNC_NotificationCount);
                $("#GNCommMobArtNotify").html(TGNC_NotificationCount);
            } else {
                $("#GNCommTopNotify").html("!");
                $("#GNCommMobArtNotify").html("!");
            }
            if (Auth50_UserNotification.status != "none") {
                // auth notif
                TGNC_NotificationCount -= 1;
            }
        }
    }
    function GNCommHideMenuNotifications() {
        $("#GNCommTopNotifyExpand").css("display", "none");
        $("#GNAuthTopNotifyExpand").css("display", "none");
        $("#GNCommTopUP_ProSet").css("display", "block");

        // add logic here to see if user has any history and display this link if so
        $("#GNCommTopUP_ComHis").css("display", "block");

        $("#GNCommTopUP_SignOut").css("display", "block");

        $("#GNCommTopNotify").css("display", "none");
        $("#GNCommTopNotify").css("opacity", 0);
        $("#GNCommMobArtNotify").css("display", "none");
        $("#GNCommMobArtNotify").css("opacity", 0);
    }

    function TGNCom_ClearNotifications(NotificationArray, GNCommNB_descriptionarticleURL, GNCommNB_descriptioncollectionID, GNCommNB_descriptioncommentID) {
        var notificationsToClear = NotificationArray + "";
        $.ajax({
            url: Auth4Config_AuthServiceURL + "TGNCom_ClearNotifications",
            headers: { 'authorization': 'Bearer ' + localStorage.getItem(tokenKey) },
            dataType: "json",
            data: {
                InteractionID: notificationsToClear
            },
            type: "POST",
            success: function (data) {
                //console.log("window.location.hash:" + window.location.hash);
                var TGNCom_prevHash = window.location.hash;
                window.location.href = GNCommNB_descriptionarticleURL + '#lf-content=' + GNCommNB_descriptioncollectionID + ":" + GNCommNB_descriptioncommentID;
                //console.log("window.location.hash:" + window.location.hash);
                if (TGNCom_prevHash != window.location.hash) {
                    window.location.reload();
                }
            },
            error: function (request, status, error) {
                console.log("ERROR:" + request.responseText);
            }
        });
        return false;
    }
    function ProcessGNCommQueryStrings() {
        // move to comment controls and wait for comment stream to load before running
        var GNComm_PageHash = location.hash;
        var GNComm_PageHashIDS = GNComm_PageHash.split('=')[1];
        if ($(".commentHeading").length && GNComm_PageHash.indexOf("lf-content") >= 0) {
            setTimeout(function () { delayScrollToCommentSection(GNComm_PageHashIDS.split(':')[0], GNComm_PageHashIDS.split(':')[1]) }, 4000);
        }
    }
    function delayScrollToCommentSection(id0, id1) {
        var scrollTopCommentsVal = $(".commentHeading").offset().top;
        //console.log("GNComm_PageHash:" + id0 + ":" + id1);
        $(".TGN_site").delay(0).animate({ scrollTop: scrollTopCommentsVal - 120 }, 500);
        $(".GNCommBeTheFirst").html("-");
        $(".fyre-comment-article[data-message-id='" + id1 + "']").css("background-color", "#FAF4DB");
        highlightMessage = id1;
    }


    function GNCommGetUserComments(userid) {
        $.ajax({
            url: "https://gatesnotes.bootstrap.fyre.co/api/v3.0/author/" + userid + "/comments/?lftoken=" + localStorage.getItem('UserCommentToken'),
            type: 'GET',
            async: true,
            cache: false,
            timeout: 30000,
            error: function () {

            },
            success: function (data) {
                GNCommLFUserCommentsData = data;
                GNCommGetUserContent(localStorage.getItem('GNCommUserId'));
            }
        });
    }

    function GNCommGetUserContent(userid) {
        $.ajax({
            url: "https://gatesnotes.bootstrap.fyre.co/api/v3.0/author/" + userid + "/content/?limit=" + GNCommMaxHistory,
            type: 'GET',
            async: true,
            cache: false,
            timeout: 30000,
            error: function () {

            },
            success: function (data) {
                populateCommentHistoryStream(data);
            }
        });
    }
    function GNCommGetContentThread(collection_id, content_id) {
        $.ajax({
            url: "https://gatesnotes.bootstrap.fyre.co/api/v3.0/content/thread/?collection_id=" + collection_id + "&content_id=" + content_id + "&depth_only=true",
            type: 'GET',
            async: true,
            cache: false,
            timeout: 30000,
            error: function () {
            },
            success: function (data) {
                GNCommFindAndSetAuthor(data.data.content[data.data.content.length - 1].content.authorId, data.data.authors, content_id);
            }
        });
    }
    function GNCommFindAndSetAuthor(nameKey, returnedUserData, parentId) {
        for (nameKey in returnedUserData) {
            if (returnedUserData[nameKey].id == nameKey) {
                //console.log("found:" + returnedUserData[nameKey].displayName + ":" + parentId);
                GNCommUpdateParentNames(returnedUserData[nameKey].displayName, parentId);
            }
        }
    }

    function populateCommentHistoryStream(data) {

        TGNC_HistoryCount = data.data.content.length;
        var TGNC_HistoryCount2 = GNCommLFUserCommentsData.data.length;
        TGNC_HistoryCount = Math.min(TGNC_HistoryCount, TGNC_HistoryCount2, GNCommMaxHistory);

        if (TGNC_HistoryCount > 0) {
            // display notifications
            for (var i = 0; i < TGNC_HistoryCount; i++) {
                var TGNC_linkURL = data.data.content[i].url;
                var myURL = document.domain;
                if (myURL != "www.gatesnotes.com") {
                    TGNC_linkURL = TGNC_linkURL.replace("www.gatesnotes.com", myURL);
                }
                var TGNC_decodedString = GNCommLFUserCommentsData.data[i].conv_title;
                TGNC_decodedString = TGNC_decodedString.replace("â", "&rsquo;");
                TGNC_decodedString = TGNC_decodedString.replace("â¦    ", "...");
                //var TGNC_decodedHTML = decodeURI(GNCommLFUserCommentsData.data[i].conv_title);
                //var TGNC_parsedHTML = $.parseHTML(TGNC_decodedHTML);
                //var TGNC_decodedString = $.parseHTML(TGNC_parsedHTML[0].textContent);
                $("#commentHistory_ItemTemplate").find(".commentHistory_ItemTitle").html(TGNC_decodedString);
                $("#commentHistory_ItemTemplate").find(".commentHistory_ItemTitleLink").attr("href", TGNC_linkURL);
                $("#commentHistory_ItemTemplate").find(".commentHistory_ItemTitle").attr("data-url", data.data.content[i].url);
                if (data.data.content[i].content.parentId == "") {
                    $("#commentHistory_ItemTemplate").find(".commentHistory_ItemReply").css("display", "none");
                } else {
                    $("#commentHistory_ItemTemplate").find(".commentHistory_ItemReply").css("display", "block");
                    $("#commentHistory_ItemTemplate").find(".commentHistory_ItemReply_T2").html("");
                    $("#commentHistory_ItemTemplate").find(".commentHistory_ItemReply_T2").attr("data-parentID", data.data.content[i].content.parentId);
                    GNCommGetContentThread(data.data.content[i].collectionId, data.data.content[i].content.parentId);
                }
                $("#commentHistory_ItemTemplate").find(".commentHistory_ItemDescription").html(data.data.content[i].content.bodyHtml);
                var utcSeconds = data.data.content[i].content.createdAt;
                var d = new Date(0); // The 0 there is the key, which sets the date to the epoch
                d.setUTCSeconds(utcSeconds);
                $("#commentHistory_ItemTemplate").find(".commentHistory_ItemFooter_T").html(GNCommCalculateTimeFrame(d));
                if (data.data.content[i].content.annotations.likedBy != null) {
                    $("#commentHistory_ItemTemplate").find(".commentHistory_ItemFooter_H1").html(data.data.content[i].content.annotations.likedBy.length);
                    $("#commentHistory_ItemTemplate").find(".commentHistory_ItemFooter_H1").css("display", "inline-block");
                    $("#commentHistory_ItemTemplate").find(".commentHistory_ItemFooter_H2").css("display", "inline-block");
                    $("#commentHistory_ItemTemplate").find(".commentHistory_ItemFooter_DotH").css("display", "inline-block");
                    switch (data.data.content[i].content.annotations.likedBy.length) {
                        case 0:
                            $("#commentHistory_ItemTemplate").find(".commentHistory_ItemFooter_H1").css("display", "none");
                            $("#commentHistory_ItemTemplate").find(".commentHistory_ItemFooter_H2").css("display", "none");
                            $("#commentHistory_ItemTemplate").find(".commentHistory_ItemFooter_DotH").css("display", "none");
                            break;
                        case 1:
                            $("#commentHistory_ItemTemplate").find(".commentHistory_ItemFooter_H2").html(" Like");
                            break;
                        default:
                            $("#commentHistory_ItemTemplate").find(".commentHistory_ItemFooter_H2").html(" Likes");
                            break;
                    }
                } else {
                    $("#commentHistory_ItemTemplate").find(".commentHistory_ItemFooter_H1").css("display", "none");
                    $("#commentHistory_ItemTemplate").find(".commentHistory_ItemFooter_H2").css("display", "none");
                    $("#commentHistory_ItemTemplate").find(".commentHistory_ItemFooter_DotH").css("display", "none");
                }
                $("#commentHistory_ItemTemplate").find(".commentHistory_ItemFooter_R1").html(GNCommLFUserCommentsData.data[i].num_replies);
                $("#commentHistory_ItemTemplate").find(".commentHistory_ItemFooter_R1").css("display", "inline-block");
                $("#commentHistory_ItemTemplate").find(".commentHistory_ItemFooter_R2").css("display", "inline-block");
                $("#commentHistory_ItemTemplate").find(".commentHistory_ItemFooter_DotR").css("display", "inline-block");
                switch (GNCommLFUserCommentsData.data[i].num_replies) {
                    case 0:
                        $("#commentHistory_ItemTemplate").find(".commentHistory_ItemFooter_R1").css("display", "none");
                        $("#commentHistory_ItemTemplate").find(".commentHistory_ItemFooter_R2").css("display", "none");
                        $("#commentHistory_ItemTemplate").find(".commentHistory_ItemFooter_DotR").css("display", "none");
                        break;
                    case 1:
                        $("#commentHistory_ItemTemplate").find(".commentHistory_ItemFooter_R2").html(" Reply");
                        break;
                    default:
                        $("#commentHistory_ItemTemplate").find(".commentHistory_ItemFooter_R2").html(" Replies");
                        break;
                }
                $("#commentHistory_ItemTemplate").find(".commentHistory_ItemFooter_View").attr("data-url", data.data.content[i].url);
                $("#commentHistory_ItemTemplate").find(".commentHistory_ItemFooter_ViewLink").attr("href", TGNC_linkURL);

                $(".commentHistory_Stream").append($("#commentHistory_ItemTemplate").clone(false).attr("id", "commentHistory_Item" + i).css("display", "block"));
            }
            $(".commentHistory_Empty").css("display", "none");
        } else {
            $(".commentHistory_Empty").css("display", "block");
        }
    }
    function GNCommUpdateParentNames(name, id) {
        var GNCommUPNFoundItem = $(".commentHistory_ItemReply_T2[data-parentid='" + id + "']");
        GNCommUPNFoundItem.html(name);
    }
    function GNComm_SizeScroll() {
        $("#TGN_BottomMenuS45SignInExpand").css("display", "block");
        $("#TGN_BottomMenuS45SignInExpand").css("display", "none");
        //TGN_BottomMenuS45_closeSI();
        var ww = $(window).width();
        if (ww > 980) {
            TGN_BottomMenuS45_H = 0;
        } else {
            TGN_BottomMenuS45_H = 60;
        }
        //setTGNBodyHeightMenuS45();
        $(".fyre-comment-article[data-message-id='" + highlightMessage + "']").css("background-color", "#FAF4DB");
    }
    $(window).resize(function () {
        setTimeout(function () {
            GNComm_SizeScroll();
        }, 150);
    });
    var throttled = TGN_throttle(GNComm_SizeScroll, 1000);
    $(".TGN_site").scroll(throttled);
    var highlightMessage = "9x9";
</script>

                
                
                
                
                
                
    <style>
    .TGN_site_HeaderC {
        background-color: white;
        color: black;
    }
    .TGN_site_Header {
        color: black;
    }
    .TGN_site_MenuIcon {
        color: black;
    }
    .TGN_site_Tbobg {
        color: black;
    }
    .TGN_site_Header .TGN_site_HeaderLink {
        color: black;
    }
    .TGN_site_Headermobile .TGN_site_HeaderLink {
        color: black !important;
    }
    .TGN_site_Headermobile .TGN_site_Tbobg {
        color: black !important;
    }
</style>

<style>
    html {
        overflow-x: hidden;
    }

    body {
        padding: 0px;
        margin: 0px;
    }


    .TGN_site_Header_LI {
        color: #0049fb !important;
        display:none;
    }
    .TGN_site_Header_LI_onblack {
        color: white !important;
        display:none;
    }

    .TGN_site_Header_SU {
        height: 24px;
        width: 57px;
        border: 1px solid #0049fb;
        border-radius: 0px;
        text-align: center;
        line-height: 24px;
        color: #0049fb !important;
        display:none;
    }
    .TGN_site_Header_SU_onblack {
height: 24px;
    width: 57px;
    border: 1px solid #0049fb;
    border-radius: 0px;
    text-align: center;
    line-height: 24px;
    color: white !important;
    background-color: #0049fb;
    }

    .TGN_site_Headermobile .TGN_site_HeaderLink {
        margin-left: 24px;
    }

    .TGN_site_Header {
        height: 66px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        max-width: 1160px;
        margin-left: auto;
        margin-right: auto;
    }

    .TGN_site_HeaderC {
        position: absolute;
        top: 0px;
        left: 0px;
        height: 66px;
        display: flex;
        align-items: center;
        width: 100%;
        justify-content: center;
        pointer-events: none;
        z-index: -1;
    }

        .TGN_site_HeaderC.boxed {
            box-shadow: 0 2px 4px 0 rgba(0,0,0,0.09);
        }
.TGN_site_HeaderL {
    display: flex;
    align-items: flex-end;
}
    .TGN_site_HeaderR {
        display: flex;
        align-items: center;
        justify-content: flex-end;
    }
    .TGN_site_Header .TGN_site_HeaderLink:hover {
        opacity:.6;
    }

    .TGN_site_Header .TGN_site_HeaderLink {
        float: right;
        margin-right: 24px;
        font-family: 'Roboto Condensed', 'Asap Condensed', 'neue-haas-unica', sans-serif;
        font-size: 14px;
        font-weight: 600;
        text-transform: uppercase;
        cursor: pointer;
    }


    .TGN_site_HeaderIcon {
        margin-right: 16px;
        font-size: 20px;
    }

    .TGN_site_MenuIcon {
        text-align: center;
        font-size: 27px;
        cursor: pointer;
    }
    .TGN_site_MenuIcon:hover {
        opacity:.6;
    }

    .TGN_site_Menu {
        width: 27px;
        float: left;
        margin-right: 0px;
    }

    .TGN_site_MenuX {
        display: none;
        text-align: center;
        font-size: 22px;
    }


    .TGN_site_Hline {
        box-sizing: border-box;
        height: 1px;
        width: 100%;
        background: black;
        max-width: 1160px;
        margin-left: auto;
        margin-right: auto;
    }

    .TGN_site_Logo {
        background-image: url(/img/TGN_Logo-01.svg);
        background-repeat: no-repeat;
        height: 29px;
        width: 180px;
    }

    .TGN_site_Tbobg {
        background-image: url(/img/TGN_TBOBG-01.svg);
        background-repeat: no-repeat;
        height: 21px;
        width: 78px;
        margin-top: 8px;
        margin-left: 10px;
            color: white;
    font-family: 'Roboto Condensed', 'Asap Condensed', 'neue-haas-unica', sans-serif;
    font-weight: 600;
    }
.slideheader_DropHeader .TGN_site_Tbobg {
        width: 188px;
    }
    .TGN_site_Logo.white {
        background-image: url(/img/TGN_Logo-W-01.svg);
    }

    .TGN_site_Tbobg.white {
        background-image: url(/img/TGN_TBOBG-W-01.svg);
    }

    .TGN_site_Profile {
        background: gray;
        background-size: cover;
        width: 40px;
        height: 40px;
        float: right;
        border-radius: 3000px;
        margin-right: 24px;
        display: none;
        cursor:pointer;
    }
    .TGN_site_Profile:hover {
        /*opacity:.6;*/
    }
    
    .TGN_site_SearchIcon {
        font-size: 23px;
        margin-right: 24px;
        cursor: pointer;
    }
    .TGN_site_SearchIcon:hover {
        opacity:.6;
    }

    .TGN_site_ArticleItems {
        display: flex;
        align-items: flex-start;
        justify-content: space-between;
        margin-bottom: 40px;
    }

        .TGN_site_ArticleItems a {
            text-decoration: none !important;
        }

    .TGN_site_ArticleItemsTop {
        display: flex;
        align-items: flex-start;
        justify-content: space-between;
        width: 48.9%;
    }

    .TGN_site_ArticleItemsBottom {
        display: flex;
        align-items: flex-start;
        justify-content: space-between;
        width: 48.9%;
    }

    .TGN_site_ArticleItem {
        width: 47.9%;
    }

    .TGN_site_ArticleItem:hover .TGN_site_ArticleItemtitle {
        text-decoration:underline;
    }

    .TGN_site_ArticleItemimage {
        width: 100%;
        background: #808080;
    }

        .TGN_site_ArticleItemimage img {
            width: 100%;
            margin: 0px;
            padding: 0px;
            display: block;
        }

    .TGN_site_ArticleItemtitle {
        color: #000000;
        font-family: source-serif-pro, 'Source Serif Pro', 'LyonDisplay-Medium', serif;
        font-weight: 700;
        font-size: 18px;
        line-height: 20px;
        margin-top: 14px;
        margin-bottom: 7px;
    }

    .TGN_site_ArticleItemdescription {
        color: #404040;
        font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
        font-size: 14px;
        line-height: 18px;
        overflow-wrap: break-word;
    }

    .TGN_site_ArticleItemcopy {
        width: 100%;
    }

    .TGN_site_ArticleItembooktitle {
        display: none;
    }

    .TGN_site_ArticleItemimagemobile {
        display: none;
    }

    .TGN_site_Titledsections {
        margin-bottom: 32px;
    }

    .TGN_site_Titledsectionstop {
        display: flex;
        align-items: center;
        height: 38px;
    }

    .TGN_site_Titledsections a {
        text-decoration: none !important;
        color: black;
    }

    .TGN_site_Titledsectionstop a {
    display: flex;
    align-items: center;
    justify-content: flex-end;
    width: 100%;
    color: black;
    }
.TGN_site_Titledsectionstopleft {
    width: 50%;
    display: flex;
    align-items: center;
    font-family: 'Roboto Condensed', 'Asap Condensed', 'neue-haas-unica', sans-serif;
    font-weight: 600;
    font-size: 16px;
    letter-spacing: 0px;
    line-height: 23px;
    text-transform: uppercase;
}
.TGN_site_Titledsectionstitle {
    border-bottom: 3px solid black;
    white-space: nowrap;
}
    .TGN_site_Titledsectionstopright {
        width: 50%;
        display: flex;
        align-items: center;
        justify-content: flex-end;
        font-family: 'HelveticaNeueW01-75Bold','HelveticaNeue Bold','Helvetica LT Std Bold',Helvetica, 'Roboto Condensed', 'Asap Condensed', 'neue-haas-unica', sans-serif;
        font-size: 13px;
        line-height: 14px;
        letter-spacing: .2px;
        cursor: pointer;
    }
    .TGN_site_Titledsectionstopright:hover .TGN_site_Moreitems {
        opacity:.6;
    }
    .TGN_site_Titledsectionstopright:hover .TGN_site_Moreitemsarrow {
        opacity:.6;
    }

    .TGN_site_Moreitemsarrow {
        font-size: 13px;
        margin-left: 5px;
        line-height: 14px;
        opacity: .7;
        margin-top: 0px;
    }

    .TGN_site_Titledsectionsbottom {
        margin-top: 6px;
        display: flex;
        justify-content: space-between;
    }

        .TGN_site_Titledsectionsbottom a {
            text-decoration: none !important;
            color: black;
        }

    .footer {
        height: 800px;
        background: black;
        width: 100%;
    }

    .TGN_site_Headermobile {
        display: none;
    }

    .TGN_site_HeaderRLinks {
        display: flex;
        justify-content: flex-end;
    }

    .TGN_site_Hline1gw {
        box-sizing: border-box;
        height: 1px;
        width: 100%;
        background: white;
        opacity: .3;
    }

    .TGN_site_Hline2g {
        box-sizing: border-box;
        height: 2px;
        width: 100%;
        background: black;
        opacity: .3;
    }

    .TGN_site_Hline1b {
        box-sizing: border-box;
        height: 1px;
        width: 100%;
        background: black;
    }

    .TGN_site_Innercollumn {
        font-family: Lusitana,serif;
        font-size: 18px;
        line-height: 28px;
        max-width: 780px;
        margin-left: auto;
        margin-right: auto;
    }
.TGN_site_Article_body a {
    color: #c00;
    text-decoration: none;
}
.TGN_site_Article_body a:hover {
    text-decoration: underline;
}
    .TGN_site_Article_body p {
        max-width: 700px;
        margin-left: auto !important;
        margin-right: auto !important;
    }
.TGN_site_Article_body ol {
    max-width: 672px;
    margin-left: auto !important;
    margin-right: auto !important;
    padding-left: 28px !important;
  /*counter-reset: item;*/
}
.TGN_site_Article_body ul {
    max-width: 672px;
    margin-left: auto !important;
    margin-right: auto !important;
    padding-left: 28px !important;
        list-style-type: disc;
}

.TGN_site_Article_body ol > li {
  /*margin: 0;
  list-style-type: none;
  counter-increment: item;*/
      margin-top: 18px;
}
.TGN_site_Article_body ul > li {
    margin-top: 18px;
}
.TGN_site_Article_body ol > li:before {
    /*display: inline-block;
    padding-right: 2px;
    font-weight: bold;
    text-align: right;
    content: counter(item) ".";
    margin-left: -13px;*/
}
    .TGN_site_Articlecollumn {
        max-width: 780px;
        margin-left: auto;
        margin-right: auto;
    }
.TGN_site_Article_body {
    margin-top: 32px;
    font-size: 18px;
    line-height: 28px;
    font-family: Lusitana,serif;
}
        .TGN_site_Article_body img {
            width: 100% !important;
            max-width: 100% !important;
            height: auto !important;
        }

        .TGN_site_Article_body img {
            width: 100% !important;
            max-width: 100% !important;
            height: auto !important;
        }

    .articleContent a {
        color: #0049fb;
        text-decoration: none;
    }

        .articleContent a:hover {
            color: white;
            text-decoration: none;
            background-color: #0049fb;
        }


    .TGN_site_ArticleItembookmark {
        position: absolute;
        margin-top: 18px;
        margin-left: 8px;
        color: white;
        font-size: 28px;
        z-index: 1;
        cursor: pointer;
        display: none;
    }

    .TGN_site_ArticleItembookmarkOutline {
        position: absolute;
        color: #f1f1f1;
    }

        .TGN_site_ArticleItembookmarkOutline i::before {
            /*text-shadow: 1px 1px 1px rgba(127, 127, 127, 0.4);*/
        }
.TGN_site_ArticleItembookmarkColor {
    color: rgba(0,0,0,0.07);
}

    .TGN_site_ArticleItembookmarkColorON {
        color: #0049fb;
    }

    .TGN_site_ArticleItemSearchThumb {
        width: 23.5%;
        margin-bottom: 24px;
    }
    .TGN_site_ArticleItemSearchThumb:hover .TGN_site_ArticleItemtitle {
        text-decoration: underline;
    }

        .TGN_site_ArticleItemSearchThumb a {
            text-decoration: none !important;
            color: black;
        }

    .TGN_site_ArticleItembylinedate {
        color: #757575;
        font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
        font-weight: 300;
        font-size: 14px;
        line-height: 15px;
        margin-top: 7px;
        display: none;
    }

    .TGN_site_ArticleItemDesktopdate {
        color: #757575;
        margin-bottom: 7px;
        font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
        font-size: 12px;
        line-height: 14px;
    }
.TGN_site_Article_body_Max600 {
    max-width: 700px;
    margin-left: auto !important;
    margin-right: auto !important;
}
.TGN_site_Article_body_Max600 img {
    width: 100%;
    max-width: 600px !important;
}
.TGN_site_Article_body_Max500 {
    max-width: 700px;
    margin-left: auto !important;
    margin-right: auto !important;
}
    .TGN_site_Article_body_Max500 img {
        width: 100%;
        max-width: 500px !important;
    }
.TGN_site_Article_body_Max450 {
    max-width: 700px;
    margin-left: auto !important;
    margin-right: auto !important;
}
    .TGN_site_Article_body_Max450 img {
        width: 100%;
        max-width: 450px !important;
    }
.TGN_site_Article_body_Max400 {
    max-width: 700px;
    margin-left: auto !important;
    margin-right: auto !important;
}
    .TGN_site_Article_body_Max400 img {
        width: 100%;
        max-width: 400px !important;
    }
.TGN_site_Article_body_Max300 {
    max-width: 700px;
    margin-left: auto !important;
    margin-right: auto !important;
}
    .TGN_site_Article_body_Max300 img {
        width: 100%;
        max-width: 300px !important;
    }

    @media all and (min-width: 1021px) {
        /*Desktop only*/
        .TGN_site_Desktop {
        }

        .TGN_site_DesktopTablet {
        }

        .TGN_site_Tablet {
            display: none;
        }

        .TGN_site_TabletMobile {
            display: none;
        }

        .TGN_site_Mobile {
            display: none;
        }
    }

    @media all and (min-width: 681px) {
        /*Desktop and Tablet*/
    }

    @media all and (min-width: 681px) and (max-width: 1020px) {
        /*Tablet only*/
        .TGN_site_Desktop {
            display: none;
        }

        .TGN_site_DesktopTablet {
        }

        .TGN_site_Tablet {
        }

        .TGN_site_TabletMobile {
        }

        .TGN_site_Mobile {
            display: none;
        }
    }

    @media all and (max-width: 1110px) {
    }

    @media all and (max-width: 1020px) {
        /*Mobile and Tablet*/

    .TGN_site_ArticleItembookmarkColor {
        color: rgba(0,0,0,0.2);
    }
    .TGN_site_ArticleItembookmarkColorON {
    color: #0049fb;
}
        .TGN_site_ArticleItembookmark {
            margin-top: -1px;
        }
.TGN_site_Article_body ol {
    padding-left: 10px !important;
}
.TGN_site_Article_body ul {
    padding-left: 10px !important;
}

        .TGN_site_Titledsectionstop {

        }

        .TGN_site_Moreitemsarrow {
            font-size: 12px;
        }

        .TGN_site_ArticleItems {
            display: block;
            align-items: unset;
            justify-content: unset;
            margin-bottom: 16px;
        }

        .TGN_site_ArticleItemsTop {
            width: 100%;
        }

        .TGN_site_ArticleItemsBottom {
            width: 100%;
        }

        .TGN_site_Titledsectionsbottom {
            display: block;
            justify-content: unset;
        }

            .TGN_site_Titledsectionsbottom a {
                display: flex;
                align-items: flex-start;
                justify-content: space-between;
                width: 100%;
            }

        .TGN_site_ArticleItem {
            width: 47.9%;
            display: flex;
            align-items: flex-start;
            justify-content: space-between;
            margin-bottom: 24px;
        }

        .TGN_site_ArticleItemimage {
            width: 38%;
        }

        .TGN_site_ArticleItemcopy {
            width: 58%;
        }

        .TGN_site_ArticleItemimagemobile {
            width: 33%;
            display: block;
        }

            .TGN_site_ArticleItemimagemobile img {
                width: 100%;
                margin: 0px;
                padding: 0px;
                display: block;
            }

        .TGN_site_ArticleItembooktitle {
            font-family: 'Roboto Condensed', 'Asap Condensed', 'neue-haas-unica', sans-serif;
            font-size: 18px;
            line-height: 22px;
            text-transform: uppercase;
            font-style: italic;
            display: block;
        }

        .TGN_site_Titledsectionstopright {
            letter-spacing: .4px;
        }

        .TGN_site_Titledsectionstopleft {
        }

        .TGN_site_Titledsections {
            margin-bottom: 16px;
        }

        .TGN_site_Titledsections {
            overflow: hidden;
        }




        .TGN_site_ArticleItems a {
            display: flex;
            align-items: flex-start;
            justify-content: space-between;
            width: 100%;
        }

        .TGN_site_Hline2g {
            box-sizing: border-box;
            height: 1px;
            width: 100%;
            background: black;
        }

        .TGN_site_Hline1b {
            box-sizing: border-box;
            height: 1px;
            width: 100%;
            background: black;
        }

        .TGN_site_Article_body {
            margin-top: 16px;
            font-size: 18px;
            line-height: 26px;
        }

        .TGN_site_HeaderR {
            width: auto;
        }

        .TGN_site_Header .TGN_site_HeaderLink {
            font-size: 12px;
        }

        .TGN_site_ArticleItemtitle {
            margin-top: -2px;
            max-width: 200px;
        }

        .TGN_site_ArticleItemdescription {
            max-width: 200px;
        }


        .TGN_site_ArticleItembylinedate {
            font-size: 12px;
            margin-top: 5px;
            display: block;
        }

        .TGN_site_ArticleItemDesktopdate {
            font-size: 12px;
            margin-top: 5px;
            display: none;
        }

        .TGN_site_ArticleItemSearchThumb {
            margin-bottom: 0px;
            width: 47.9%;
        }

            .TGN_site_ArticleItemSearchThumb a {
                display: flex;
                align-items: flex-start;
                justify-content: space-between;
                margin-bottom: 16px;
            }
    }

    @media all and (max-width: 850px) {
        .TGN_site_Header .TGN_site_HeaderRLinks {
            display: none;
        }
    }

    @media all and (max-width: 680px) {
        /*Mobile only*/
        .slideheader_DropHeader .TGN_site_Tbobg {
            width: auto;
        }
        .TGN_site_Moreitems {
            overflow: hidden;
            max-height: 28px;
        }
        .TGN_site_Titledsections {
            margin-bottom: 24px;
        }
.TGN_site_HeaderL {
    align-items: center;
}
        .TGN_site_Header_LI {
            display: none !important;
        }
        .TGN_site_Header_LI_onblack {
            display: none !important;
        }

        .TGN_site_Titledsectionstop {
            height: 30px;
        }

        .TGN_site_SearchIcon {
            font-size: 18px;
        }

        .TGN_site_MenuIcon {
            font-size: 23px;
        }

        .TGN_site_Menu {
            width: 23px;
        }

        .TGN_site_MenuX {
            font-size: 18px;
        }


        .TGN_site_Logo {
            height: 20px;
            width: 122px;
        }

        .TGN_site_Tbobg {
            background-image: none;
            background-repeat: no-repeat;
            height: auto;
            width: auto;
            margin-top: 0px;
            margin-left: 0px;
            font-size: 12px;
        }

        .TGN_site_Profile {
            width: 25px;
            height: 25px;
        }



        .TGN_site_Header .TGN_site_Tbobg {
            display: none;
        }

        .TGN_site_Header {
            height: 40px;
            margin-top: 0px;
        }

        .TGN_site_HeaderC {
            height: 40px;
            margin-top: 0px;
        }

        .TGN_site_Headermobile {
            height: 30px;
            font-size: 12px;
            /*display: flex;*/
            align-items: center;
            justify-content: space-between;
            font-size: 12px;
            font-family: 'Roboto Condensed', 'Asap Condensed', 'neue-haas-unica', sans-serif;
            font-weight: 600;
            color: black !important;
            text-transform: uppercase;
        }

            .TGN_site_Headermobile .tbobg {
                font-size: 12px;
                font-family: 'Roboto Condensed', 'Asap Condensed', 'neue-haas-unica', sans-serif;
                letter-spacing: 0.12px;
            }

        .TGN_site_HeaderLink {
            font-size: 12px;
            float: right;
            font-family: 'Roboto Condensed', 'Asap Condensed', 'neue-haas-unica', sans-serif;
            letter-spacing: 0.12px;
            font-weight: 600;
        }

        .TGN_site_Headermobile .TGN_site_HeaderLink:not(:last-child) {
            margin-right: 24px;
        }




        .TGN_site_Header {
        }

        .TGN_site_HeaderC {
        }

        .TGN_site_Logo {
            /*height: 18px;
    width: 110px;*/
            height: 20px;
            width: 122px;
        }

        .TGN_site_Headermobile {
            font-size: 11px;
            height: 22px;
        }

        .TGN_site_HeaderLink {
            font-size: 11px;
        }

        .TGN_site_Header .TGN_site_HeaderLink {
            font-size: 11px;
        }

        .TGN_site_Profile {
            width: 22px;
            height: 22px;
        }

        .TGN_site_Titledsectionstopright {
            font-size: 12px;
            line-height: 28px;
        }

        .TGN_site_Hline {
            box-sizing: border-box;
            height: 1px;
            width: 100%;
            background: black;
        }

        .TGN_site_Titledsectionstopleft {
            font-size: 12px;
            line-height: 15px;
            width: 75%;
        }

        .TGN_site_Titledsectionstopright {
            width: 55%;
        }

        .TGN_site_ArticleItemsBottom .TGN_site_ArticleItem:last-child {
            /*display: none;*/
        }

        .TGN_site_ArticleItem {
            width: 100%;
            display: flex;
            align-items: flex-start;
            justify-content: space-between;
            vertical-align: top;
            margin-bottom: 20px;
        }

        .TGN_site_ArticleItems {
            display: block;
            align-items: unset;
            justify-content: unset;
            margin-bottom: 24px;
        }

        .TGN_site_ArticleItemimage {
            width: 33%;
        }

        .TGN_site_ArticleItemcopy {
            width: 62%;
        }

        .TGN_site_ArticleItemtitle {
        }

        .TGN_site_ArticleItemsTop {
            display: block;
            align-items: unset;
            justify-content: unset;
            width: 100%;
        }

        .TGN_site_ArticleItemsBottom {
            display: block;
            align-items: unset;
            justify-content: unset;
            width: 100%;
        }

        .TGN_site_Desktop {
            display: none;
        }

        .TGN_site_DesktopTablet {
            display: none;
        }

        .TGN_site_Tablet {
            display: none;
        }

        .TGN_site_TabletMobile {
        }

        .TGN_site_Mobile {
        }

        .TGN_site_Header_SU {
            height: 18px;
            width: 48px;
            line-height: 18px;
        }
        .TGN_site_Header_SU_onblack {
            height: 18px;
            width: 48px;
            line-height: 18px;
        }


        .TGN_site_ArticleItemSearchThumb {
            width: 100%;
        }
    }


    @media all and (max-width: 360px) {
        /*Mobile small only*/
        .TGN_site_Headermobile {
            font-size: 9px;
        }

        .TGN_site_Headermobile {
            font-size: 9px;
        }

        .TGN_site_HeaderLink {
            font-size: 9px;
        }

        .TGN_site_Header .TGN_site_HeaderLink {
            font-size: 9px;
        }
    }
</style>



<script id="TGN_Square_Grid_Item_Template" type="text/x-handlebars-templates">
    {{#each ArticleList}}
    <div class="TGN_site_ArticleItemSearchThumb" data-articleid="{{ArticleID}}">
        <a href="{{ArticleUrl}}">
            <div class="TGN_site_ArticleItemimage"><img src="https://www.gatesnotes.com/media/GNIN/gray_1x1.png" data-src="{{SearchThumbUrl}}" data-blogroll-src="{{ImageUrl}}" data-cover="{{SearchBookCoverUrl}}" data-thumbovercover="{{SearchThumbOverCover}}" data-url="{{ImageUrl}}" data-square-url="{{SearchThumbUrl}}" data-SearchThumbOverCover="{{SearchThumbOverCover}}" data-cover-url="{{SearchBookCoverUrl}}"></div>
            <div class="TGN_site_ArticleItemcopy">
                <div class="TGN_site_ArticleItemtitle">{{{SearchHeadline}}}</div>
                <div class="TGN_site_ArticleItemdescription">{{{SearchBlurb}}}</div>
                <div class="TGN_site_ArticleItembylinedate" data-dateval="{{RollOverDate}}">{{Date}}</div>
            </div>
        </a>
    </div>
    {{/each}}
</script>

<script>
    var ww = $(window).width();
    var wh = $(window).height();
    var maxCW = 1160;
    var minMargin = 20;
    $(document).ready(function () {
        size_TGN_site_Header_to_screen();
        TGN_squares_LoadImages();
        $("img").parents('p').css("max-width", "100%");
    });
    $(window).resize(function () {
        size_TGN_site_Header_to_screen();
        TGN_squares_LoadImages();
    });
    var throttled = TGN_throttle(size_TGN_site_Header_to_screen, 1000);
    $(".TGN_site").scroll(throttled);
    var throttled2 = TGN_throttle(TGN_squares_LoadImages, 1000);
    $(".TGN_site").scroll(throttled2);
    function size_TGN_site_Header_to_screen() {
        //console.log("size_TGN_site_Header_to_screen");
        ww = $(window).width();
        var isw = $(".TGN_site_InsideScroll").width();
        ww = isw;
        wh = $(window).height();
        var scrollTopContentArea = $(".TGN_site").scrollTop();
        if (ww < (maxCW + minMargin * 2)) {
            $(".TGN_site_HeaderC").css("width", (ww) + "px");
        } else {
            $(".TGN_site_HeaderC").css("width", (ww) + "px");
        }
    }
    function TGN_squares_LoadImages() {
        //console.log("TGN_search_LoadImages");
        $(".TGN_Books_OuterHolder").find(".TGN_site_ArticleItemimage").find("img").each(function (i, obj) {
            //console.log($(this).attr("data-url"));
            if ($(this).attr("data-url") == "set" || $(this).attr("data-src") == null || $(this).attr("data-src") == "") {

            } else {
                TGN_site_isOnScreen($(this), $(this), "img");
            }
        });
    }
</script>

    <div class="TGN_site_HeaderC">

    </div>

<div class="TGN_site_Header">
    <a href="/">
        <div class="TGN_site_HeaderL">
                <div class="TGN_site_Logo"></div>
                <div class="TGN_site_Tbobg"></div>
        </div>
    </a>
    <div class="TGN_site_HeaderR">
                    <div id="TGN_site_Header_LI" class="TGN_site_HeaderLink TGN_site_Header_LI">Log in</div>
            <div id="TGN_site_Header_SU" class="TGN_site_HeaderLink SignInHeader TGN_site_Header_SU">Sign up</div>
                        <a href="/Search"><div class="TGN_site_SearchIcon" style="color:black;"><i class="icon-search"></i></div></a>
        <div class="TGN_site_Profile ProfileIcon"></div>
        <div class="TGN_site_Menu">
            <div class="TGN_site_MenuIcon">
                <i class="icon-hamburger-menu-3"></i>
            </div>
            <div class="TGN_site_MenuX">
                <i class="icon-close-x"></i>
            </div>
        </div>
    </div>
</div>
 
    <div class="TGN_site_Hline"></div>
<style>
    #TGN_MainMenu_Screen {
        position: fixed;
        top: 0px;
        left: 0px;
        width: 100%;
        height: 10000px;
        background: white;
        opacity: .8;
        z-index: 100;
        display: none;
        pointer-events: all;
        overflow: hidden;
    }

    .TGN_site_Disabled {
        opacity: .3;
        pointer-events: none;
    }

    #TGN_MainMenu_Holder.showing {
        height: fit-content;
        display: block !important;
    }

    #TGN_MainMenu_Holder {
        font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
        font-weight: 300;
        font-size: 16px;
        line-height: 18px;
        color: black !important;
        padding: 0px;
        height: 0px;
        position: fixed;
        top: 0px;
        right: 0px;
        width: 269px;
        /*-webkit-transition: all 0.30s ease-in-out;
      -moz-transition: all 0.30s ease-in-out;
      -ms-transition: all 0.30s ease-in-out;
      -o-transition: all 0.30s ease-in-out;*/
        display: none;
        z-index: 101;
    }
    /*#TGN_MainMenu_Holder:before {
        content: "";
        position: absolute;
        top: 0px;
        right: 33px;
        height: 20px;
        width: 20px;
        background: #F3F3F3;
        box-sizing: border-box;
        transform: rotate(-45deg) translate(70%);
        border-top: inherit;
        border-right: inherit;
        box-shadow: inherit;
    }*/
    .TGN_MainMenu_Top {
        min-height: 212px;
        background-color: #303030;
        color: white;
        overflow: hidden;
        position: relative;
    }

    .TGN_MainMenu_TopSI {
        display: none;
        width: 170px;
        margin-left: 16px;
        padding-top: 16px;
    }

    .TGN_MainMenu_TopNSI {
        display: none;
        width: 170px;
        margin-left: 16px;
        padding-top: 16px;
    }

    .TGN_MainMenu_TopAbove {
        height: 65px;
        border-bottom: 1px solid white;
        display: flex;
        align-items: center;
    }

    .TGN_MainMenu_TopTBOBG {
        background-image: url(/img/TGN_TBOBG-W-01.svg);
        background-repeat: no-repeat;
        height: 21px;
        width: 68px;
        margin-left: 16px;
    }

    .TGN_MainMenu_TopClose {
        font-size: 22px;
        position: absolute;
        right: 16px;
        cursor: pointer;
    }

    .TGN_MainMenu_TopBelowImage {
        position: absolute;
        bottom: -1px;
        width: 269px;
        height: 167px;
        background-image: url('https://www.gatesnotes.com/media/GNIN/BillTransparent11_260.png');
        background-size: 177px 167px;
        background-repeat: no-repeat;
        background-position-x: 119px;
        background-position-y: 8px;
        pointer-events: none;
    }

    .TGN_MainMenu_TopBelow {
        background-color: #303030;
    }
.TGN_MainMenu_Button {
    display: inline-block;
    padding-left: 16px;
    padding-right: 16px;
    margin-top: 16px;
    line-height: 31px;
    background-color: white;
    color: black;
    border-radius: 0px;
    font-weight: 600;
    font-size: 14px;
    cursor: pointer;
    margin-bottom: 16px;
    font-family: 'Roboto Condensed', 'Asap Condensed', 'neue-haas-unica', sans-serif;
    text-transform: uppercase;
}
.TGN_MainMenu_Button:hover {
    color:#0049fb;
}
    .TGN_MainMenu_TopSIQuote {
        font-size: 15px;
        line-height: 17px;
    }
.TGN_MainMenu_TopNSICTA {
    font-family: source-serif-pro, 'Source Serif Pro', 'Lyon Display Web','LyonDisplay-Medium', serif;
    font-size: 22px;
    line-height: 26px;
    letter-spacing: -0.1px;
    font-weight: 700;
}
    #TGN_MainMenu_Holder a {
        color: black;
        text-decoration: none !important;
    }
#TGN_MainMenu_Holder a:hover {
    color:#0049fb;
}
#TGN_MainMenu_Holder .li i {
    color:black !important;
}

    #TGN_MainMenu_Holder .ul {
        padding: 0px;
        border: 0px solid rgba(117,117,117,0.5);
        background-color: white;
        box-shadow: 1px 1px 2px 1px rgba(0,0,0,0.12);
    }

    #TGN_MainMenu_Holder .li {
        margin-bottom: 11px;
    }

    .TGN_MainMenu_Grouping {
        border-bottom: 1px solid #ccc;
        padding: 24px;
        padding-bottom: 13px;
    }

        .TGN_MainMenu_Grouping a {
            color: black;
            text-decoration: none;
        }

    #TGN_MainMenu_ProfileGroup {
        display: none;
        font-weight: 700;
    }

    #TGN_MainMenu_Signout {
        cursor: pointer;
    }

    .TGN_MainMenu_SocialShare {
        font-size: 12px;
        margin-top: 0px;
        margin-bottom: 10px;
    }

        .TGN_MainMenu_SocialShare .iconBlock {
            background: black;
            border-radius: 3000px;
            color: white;
            text-align: center;
            width: 24px;
            height: 24px;
            line-height: 23px;
            margin-right: 12px;
        }

    @media all and (max-width: 1020px) {
        #TGN_MainMenu_Holder {
        }

            #TGN_MainMenu_Holder:before {
                right: 17px;
            }
    }

    @media all and (max-width: 680px) {
        .TGN_MainMenu_TopAbove {
            height: 39px;
        }

        .TGN_MainMenu_TopBelowImage {
            width: 100%;
            background-position-x: right;
        }

        .TGN_MainMenu_TopSI {
            width: 58%;
        }

        .TGN_MainMenu_Grouping {
            padding: 14px;
            padding-bottom: 7px;
        }
.TGN_MainMenu_TopNSI {
    padding-top: 20px;
}
    }

    @media all and (max-width: 480px) {
        .TGN_MainMenu_TopBelowImage {
            height: 147px;
            background-size: 155px 147px;
            background-position-y: 15px;
        }

        .TGN_MainMenu_Top {
            min-height: 192px;
        }
    }


    @media all and (max-width: 370px) {
        .TGN_MainMenu_TopSI {
            width: 160px;
        }
    }


    @media all and (max-width: 339px) {
        .TGN_MainMenu_Top {
            min-height: 39px;
        }

        .TGN_MainMenu_TopBelow {
            display: none;
        }

        .TGN_MainMenu_TopBelowImage {
            display: none;
        }
    }
</style>

<script type="text/javascript">
    //$(window).on('load', function () {
    //});
    $(document).ready(function () {
        $(".TGN_MainMenu_SocialShare").find(".icon-facebook").click(function () {
            TGN_Follow_FB();
        });
        $(".TGN_MainMenu_SocialShare").find(".icon-twitter").click(function () {
            TGN_Follow_TW();
        });
        $(".TGN_MainMenu_SocialShare").find(".icon-linkedin").click(function () {
            TGN_Follow_LI();
        });
        $(".TGN_MainMenu_SocialShare").find(".icon-instagram").click(function () {
            TGN_Follow_IG();
        });
        $(".TGN_MainMenu_SocialShare").find(".icon-youtube").click(function () {
            TGN_Follow_YT();
        });
        $("#TGN_MainMenu_Signout").click(function () {
            logmeout();
        });
        $(".TGN_MainMenu_TopNSIButton").click(function () {
            showAuthRegister();
            omnihelpers.signupPath("SiteMenu");
        });
        $(".TGN_MainMenu_TopSIButton").click(function () {

        });
        $("#TGN_MainMenu_Screen").click(function () {

        });
    });
    $(document).keydown(function (e) {
        //console.log("You pressed: "+e.which);
        if (e.ctrlKey && (e.which === 37)) {
            //console.log("You pressed CTRL + Left Arrow");
            location.href = $(".articlePrev").attr('href');
        }
        if (e.ctrlKey && (e.which === 39)) {
            //console.log("You pressed CTRL + Right Arrow");
            location.href = $(".articleNext").attr('href');
        }
    });
</script>

<div class="TGN_MainMenu_Holder" id="TGN_MainMenu_Holder">
    <div class="TGN_MainMenu_Top">
        <div class="TGN_MainMenu_TopAbove">
            <div class="TGN_MainMenu_TopTBOBG"></div>
            <div class="TGN_MainMenu_TopClose">
                <i class="icon-close-x"></i>
            </div>
        </div>
        <div class="TGN_MainMenu_TopBelow">
            <div class="TGN_MainMenu_TopSI">
                <div class="TGN_MainMenu_TopSIQuote">
                    “More than three-quarters of the world’s poor rely on agriculture to earn a living.”
                </div>
                <a href="/Development/FarmBeats">
                    <div class="TGN_MainMenu_TopSIButton TGN_MainMenu_Button">
                        watch video
                    </div>
                </a>
            </div>
            <div class="TGN_MainMenu_TopNSI">
                <div class="TGN_MainMenu_TopNSICTA">
                    Become a Gates Notes Insider
                </div>
                <div class="TGN_MainMenu_TopNSIButton TGN_MainMenu_Button">
                    Sign up
                </div>
            </div>
        </div>
        <div class="TGN_MainMenu_TopBelowImage">

        </div>
    </div>
    <div class="ul">
        <div class="TGN_MainMenu_Grouping" id="TGN_MainMenu_ProfileGroup">
            <div class="li" id="TGN_MainMenu_Signout">
                <span class="TGN_CTA_LinkStyle_01">Log out</span>
            </div>
        </div>
        <!-- Main Menu HTML Block from sitecore -->


        <div class="TGN_MainMenu_Grouping">
            <div class="li" onclick="location.href='/Search';">
                <a href="/Search"><i class="icon-search" style="margin-right: 8px;"></i><span>Search</span></a>
            </div>
            <div class="li" onclick="location.href='/Books';">
                <a href="/Books"><i class="icon-book-outline" style="margin-right: 8px;"></i><span>Books</span></a>
            </div>
            <div class="li" onclick="location.href='/Videos';">
                <a href="/Videos"><i class="icon-youtube" style="margin-right: 8px;"></i><span>Videos</span></a>
            </div>
        </div>
        <div class="TGN_MainMenu_Grouping">
            <!--<div class="li" onclick="location.href='/2020-Annual-Letter';">
                <a href="/2020-Annual-Letter"><span>Annual Letter</span></a>
            </div>-->
            <div class="li" onclick="location.href='/Mosquito-week';">
                <a href="/Mosquito-week"><span>Mosquito week</span></a>
            </div>
            <div class="li" onclick="location.href='/Epidemic-preparedness';">
                <a href="/Epidemic-preparedness"><span>Epidemic preparedness</span></a>
            </div>
            <div class="li" onclick="location.href='/All';">
                <a href="/All"><span>All posts</span></a>
            </div>
            <div class="li" onclick="location.href='/Saving-lives';">
                <a href="/Saving-lives"><span>Saving lives</span></a>
            </div>
            <div class="li" onclick="location.href='/Climate-and-energy';">
                <a href="/Climate-and-energy"><span>Climate and energy</span></a>
            </div>
            <div class="li" onclick="location.href='/Education';">
                <a href="/Education"><span>Education</span></a>
            </div>
            <div class="li" onclick="location.href='/Personal';">
                <a href="/Personal"><span>Personal</span></a>
            </div>
            <div class="li" onclick="location.href='/Bio';">
                <a href="/Bio"><span>About Bill</span></a>
            </div>
        </div>
        <div class="TGN_MainMenu_Grouping">
            <div class="TGN_MainMenu_SocialShare">
                <div class="iconBlock">
                    <i class="icon-facebook"></i>
                </div>
                <div class="iconBlock">
                    <i class="icon-twitter"></i>
                </div>
                <div class="iconBlock">
                    <i class="icon-linkedin"></i>
                </div>
                <div class="iconBlock">
                    <i class="icon-instagram"></i>
                </div>
                <div class="iconBlock">
                    <i class="icon-youtube"></i>
                </div>
            </div>
        </div>

<!-- END Main Menu HTML Block from sitecore -->

<!-- Override Mosquito Week copy in Main Menu HTML Block from sitecore -->
<script type="text/javascript">
    $(document).ready(function () {
        if ($(".TGNLandingPageMoreTitleTopic").html() == "mosquito week") {
            $(".TGNLandingPageMoreTitleTopic").html("Mosquito Week");
        }
    });
</script>
<!-- END Override Mosquito Week copy in Main Menu HTML Block from sitecore -->
        
    </div>
</div>

<div class="TGN_MainMenu_Screen" id="TGN_MainMenu_Screen"></div>


            </div>
            <div class="TGN_site_myProfileHeader">
                <div class="TGN_site_ContentArea">
                    
                    
                </div>
            </div>
            <div id="TGN_site_BioHolder" class="TGN_site_BioHolder"></div>
            <div class="TGN_site_ContentArea">
                









                <div class="TGN_site_Landing">
                    
                    
                </div>
                <div class="TGN_site_Books">
                    <div class="TGN_Books_OuterHolder">
                        
                    </div>
                    
                </div>
                <div class="TGN_site_Features">
                    
                    <div class="TGN_site_VideosLandingPage_Outer">
                        
                        
                    </div>
                    
                    <div class="myProfile_Holder" id="myProfile_Holder">
                        <div class="accountSettings_Holder" id="accountSettings_Holder">
                            
                            
    <div class="Auth_SectionHeader50">Personal Information</div>

<div class="Auth_SectionHolder">
    <form id="Auth_50_Form_AS_F1" autocomplete="off">
        <div class="Auth_FieldHolder">
            <div class="Auth_50_AS_InputLine">
                <div class="Auth_Title_Block">
                    
                    <select id="AS_txtUserTitle" name="honorific-prefix" autocomplete="honorific-prefix" class="txtEntryBox">
                        <option selected value="blank" style="display: none;">Title</option>
                        <option value="Mr">Mr</option>
                        <option value="Mrs">Mrs</option>
                        <option value="Ms">Ms</option>
                        <option value="Miss">Miss</option>
                        <option value="Mx">Mx</option>
                        <option value="Dr">Dr</option>
                    </select>
                    <div id="AS_TGN_site_TitleDrop" class="TGN_site_TitleDrop">
                        <span class="TGN_site_TitleDropDefaultCopy">Title</span>
                        <span class="TGN_site_TitleDropSelectedCopy"></span>
                        <div class="TGN_site_TitleDropMenu" data-itemnum="0">
                            <div class="TGN_site_TitleDropMenuItem" data-itemnum="0">Mr</div>
                            <div class="TGN_site_TitleDropMenuItem" data-itemnum="1">Mrs</div>
                            <div class="TGN_site_TitleDropMenuItem" data-itemnum="2">Ms</div>
                            <div class="TGN_site_TitleDropMenuItem" data-itemnum="3">Miss</div>
                            <div class="TGN_site_TitleDropMenuItem" data-itemnum="4">Mx</div>
                            <div class="TGN_site_TitleDropMenuItem" data-itemnum="5">Dr</div>
                        </div>
                    </div>
                </div>
                <div class="Auth_FirstName_Block">
                    
                    <input name="name" type="text" maxlength="256" id="AS_txtFullName" class="txtEntryBox" placeholder="Full name" autocomplete="name">
                    <input name="given-name" type="text" maxlength="20" id="AS_txtFirstName" class="txtEntryBox" placeholder="First name" autocomplete="given-name">
                </div>
                <div class="Auth_LastName_Block">
                    
                    <input name="family-name" type="text" maxlength="30" id="AS_txtLastName" class="txtEntryBox" placeholder="Last name" autocomplete="family-name">
                </div>
                <div id="ASnameValidationBoxB" class="validationBoxB">
                    <span class="validNoTxt"></span>
                </div>
                <div class="Auth_FieldEditControls">
                    <div class="AuthCancelButtonS" id="AuthCancelName">
                        Cancel
                    </div>
                    <div class="AuthSaveButtonS" id="AuthSaveName">
                        Save
                    </div>
                </div>
            </div>
            <span class="AuthErrorTxt" id="AS_Mob_Name_Error"></span>
        </div>
    </form>
    <form id="Auth_50_Form_AS_F2" autocomplete="off">
        <div class="Auth_50_AS_InputLine">
            <div class="Auth_FieldHolder">
                
                <input name="email" type="email" maxlength="256" id="AS_txtEmail" class="txtEntryBox" placeholder="Email address" autocomplete="email">
                <div id="ASemailValidationBoxB" class="validationBoxB">
                    <span class="validNoTxt"></span>
                    <span class="validNoDuplicateTxt">This email is already registered</span>
                </div>
                <div class="Auth_FieldEditControls">
                    <div class="AuthCancelButtonS" id="AuthCancelEmail">
                        Cancel
                    </div>
                    <div class="AuthSaveButtonS" id="AuthSaveEmail">
                        Save
                    </div>
                </div>
                <div class="validNoVerify" id="validNoVerifyAS">Please verify email address. Click verification link sent to this email address or <span class="resendVerify">resend verification email</span>.</div>
            </div>
            <span class="AuthErrorTxt" id="AS_Mob_Email_Error"></span>
        </div>
    </form>
    <form id="Auth_50_Form_AS_F3" autocomplete="off">
        <div class="Auth_50_AS_InputLine">
            <div class="Auth_FieldHolder" id="Auth_FieldHolder_AS_PASS">
                
                <input name="current-password" type="password" maxlength="256" id="AS_txtPassword" class="txtEntryBox" placeholder="Set a password" autocomplete="off">
                <div id="ASpassValidationBoxB" class="validationBoxB">
                    <span class="validNoTxt"></span>
                </div>
                <input name="new-password" type="password" maxlength="256" id="AS_txtNewPassword" class="txtEntryBox" placeholder="New password" autocomplete="off">
                <div id="ASpassValidationBoxNewB" class="validationBoxB">
                    <span class="validNoTxt"></span>
                </div>
                <div class="Auth_FieldEditControls">
                    <div class="AuthCancelButtonS" id="AuthCancelPassword">
                        Cancel
                    </div>
                    <div class="AuthSaveButtonS" id="AuthSavePassword">
                        Save
                    </div>
                </div>
            </div>
            <span class="AuthErrorTxt" id="AS_Mob_Password_Error"></span>
        </div>
    </form>
    <form id="Auth_50_Form_AS_F4" autocomplete="off">
        <div id="Auth_50_ManualAddressAreaAS_Holder">
            <div class="Auth_SectionDivider"></div>
            <div class="Auth_SectionHeader50">Address</div>
            <div class="Auth_SectionHolder">
                <div class="Auth_50_ManualAddressAreaAS">
                    <div class="Auth_50_AS_InputLine">
                        
                        <input tabindex="33" name="address-line1" type="text" maxlength="30" ID="AS_txtAddressL1" class="txtEntryBox" placeholder="Address line 1" autocomplete="address-line1">
                        <div id="AS_addressL1_ValidationBoxB" class="validationBoxB">
                            <span class="validNoTxt"></span>
                        </div>
                    </div>
                    <div class="Auth_50_AS_InputLine">
                        
                        <input tabindex="33" name="address-line2" type="text" maxlength="120" ID="AS_txtAddressL2" class="txtEntryBox" placeholder="Address line 2" autocomplete="address-line2">
                        <div id="AS_addressL2_ValidationBoxB" class="validationBoxB">
                            <span class="validNoTxt"></span>
                        </div>
                    </div>
                    <div class="Auth_50_AS_InputLine">
                        
                        <input tabindex="33" name="address-level2" type="text" maxlength="120" ID="AS_txtCity" class="txtEntryBox" placeholder="City" autocomplete="address-level2">
                        <div id="AS_addressCI_ValidationBoxB" class="validationBoxB">
                            <span class="validNoTxt"></span>
                        </div>
                    </div>
                    <div class="Auth_50_AS_InputLine">
                        
                        <input tabindex="33" name="address-level1" type="text" maxlength="120" ID="AS_txtState" class="txtEntryBox" placeholder="State / Province / Region" autocomplete="address-level1">
                        <div id="AS_addressST_ValidationBoxB" class="validationBoxB">
                            <span class="validNoTxt"></span>
                        </div>
                    </div>
                    <div class="Auth_50_AS_InputLine">
                        
                        <input tabindex="33" name="postal-code" type="text" maxlength="30" ID="AS_txtPostalCode" class="txtEntryBox" placeholder="Zip or postal code" autocomplete="postal-code">
                        <div id="AS_addressZI_ValidationBoxB" class="validationBoxB">
                            <span class="validNoTxt"></span>
                        </div>
                    </div>
                    <div class="Auth_50_AS_InputLine">
                        
                        <input tabindex="33" name="country-name" type="text" maxlength="120" ID="AS_txtCountry" class="txtEntryBox" placeholder="Country" autocomplete="country">
                        <div id="AS_addressCO_ValidationBoxB" class="validationBoxB">
                            <span class="validNoTxt"></span>
                        </div>
                        <div class="Auth_FieldEditControls">
                            <div class="AuthCancelButtonS" id="AuthCancelAddress">
                                Cancel
                            </div>
                            <div class="AuthSaveButtonS" id="AuthSaveAddress">
                                Save
                            </div>
                        </div>
                    </div>
                </div>
                <span class="AuthErrorTxt" id="AS_Address_Error"></span>
            </div>
        </div>
    </form>
    <form id="Auth_50_Form_AS_F5" autocomplete="off">
        <div class="Auth_SectionDivider"></div>

        <div class="Auth_SectionHeader50">Email and Notification Settings</div>

        <div class="Auth_SectionHolder">

            <div class="Authcheckbox" id="AuthcheckboxAS">
                <div class="Auth_Subs_Holder">
                    <div class="Auth_Subs_Text">
                        <span class="AuthcheckboxTxt">Send me updates from Bill Gates</span>
                        <div class="AuthEmailSubText" id="AuthEmailSubText_AS">You must provide an email</div>
                    </div>
                    <div class="Auth_Subs_OnOff">
                        <div class="Auth_Subs_On">On</div>
                        <div class="Auth_Subs_Off">Off</div>
                    </div>
                    <div class="Auth_checkbox">
                        <input type="checkbox" id="AuthcheckboxAScb" />
                    </div>
                </div>
            </div>
            <div class="Authcheckbox" id="AuthcheckboxAS1b">
                <div class="Auth_Subs_Holder">
                    <div class="Auth_Subs_Text">
                        <span class="AuthcheckboxTxt">Send me Gates Notes survey emails</span>
                    </div>
                    <div class="Auth_Subs_OnOff">
                        <div class="Auth_Subs_On">On</div>
                        <div class="Auth_Subs_Off">Off</div>
                    </div>
                    <div class="Auth_checkbox">
                        <input type="checkbox" id="AuthcheckboxAS1bcb" />
                    </div>
                </div>
            </div>
            <div class="Authcheckbox" id="AuthcheckboxAS1c">
                <div class="Auth_Subs_Holder">
                    <div class="Auth_Subs_Text">
                        <span class="AuthcheckboxTxt">Send me the weekly Top of Mind newsletter</span>
                    </div>
                    <div class="Auth_Subs_OnOff">
                        <div class="Auth_Subs_On">On</div>
                        <div class="Auth_Subs_Off">Off</div>
                    </div>
                    <div class="Auth_checkbox">
                        <input type="checkbox" id="AuthcheckboxAS1ccb" />
                    </div>
                </div>
            </div>
            <div class="Authcheckbox" id="AuthcheckboxAS2">
                <div class="Auth_Subs_Holder">
                    <div class="Auth_Subs_Text">
                        <span class="AuthcheckboxTxt">Email me comment notifications</span>
                    </div>
                    <div class="Auth_Subs_OnOff">
                        <div class="Auth_Subs_On">On</div>
                        <div class="Auth_Subs_Off">Off</div>
                    </div>
                    <div class="Auth_checkbox">
                        <input type="checkbox" id="AuthcheckboxAS2cb" />
                    </div>
                </div>
            </div>
            <div class="Authcheckbox" id="AuthcheckboxAS3">
                <div class="Auth_Subs_Holder">
                    <div class="Auth_Subs_Text">
                        <span class="AuthcheckboxTxt">On-screen comment notifications</span>
                    </div>
                    <div class="Auth_Subs_OnOff">
                        <div class="Auth_Subs_On">On</div>
                        <div class="Auth_Subs_Off">Off</div>
                    </div>
                    <div class="Auth_checkbox">
                        <input type="checkbox" id="AuthcheckboxAS3cb" />
                    </div>
                </div>
            </div>

        </div>
    </form>
    <form id="Auth_50_Form_AS_F6" autocomplete="off">
        <div class="Auth_SectionDivider"></div>

        <div class="Auth_SectionHeader50 Auth_SectionHeader50Snug">Interests</div>

        <div class="Auth_SectionHolder">
            <span class="Auth_Paragraph_Profile">Select interests to personalize your profile and experience on Gates Notes.</span>
            <div class="Auth_Int_Holder">
                <div class="Auth_Int_Left">
                    <div class="ul">
                        <div class="li" onclick="updateInterests(this);">
                            <div class="Auth_checkbox">
                                <input type="checkbox" id="AI_SavingLives" name="AI_SavingLives" class="AI_SavingLives" value="1" />
                            </div>
                            <span class="ProSetOn"><i class="icon-check-mark"></i></span>
                            <span class="ProSetOff"><i class="icon-plus"></i></span>
                            <span class="ProSetTopics">Saving Lives</span>
                        </div>
                        <div class="li" onclick="updateInterests(this);">
                            <div class="Auth_checkbox">
                                <input type="checkbox" id="AI_EnergyInnovation" name="AI_EnergyInnovation" class="AI_EnergyInnovation" value="1" />
                            </div>
                            <span class="ProSetOn"><i class="icon-check-mark"></i></span>
                            <span class="ProSetOff"><i class="icon-plus"></i></span>
                            <span class="ProSetTopics">Energy Innovation</span>
                        </div>
                        <div class="li" onclick="updateInterests(this);">
                            <div class="Auth_checkbox">
                                <input type="checkbox" id="AI_ImprovingEducation" name="AI_ImprovingEducation" class="AI_ImprovingEducation" value="1" />
                            </div>
                            <span class="ProSetOn"><i class="icon-check-mark"></i></span>
                            <span class="ProSetOff"><i class="icon-plus"></i></span>
                            <span class="ProSetTopics">Improving Education</span>
                        </div>
                        <div class="li" onclick="updateInterests(this);">
                            <div class="Auth_checkbox">
                                <input type="checkbox" id="AI_Alzheimers" name="AI_Alzheimers" class="AI_Alzheimers" value="1" />
                            </div>
                            <span class="ProSetOn"><i class="icon-check-mark"></i></span>
                            <span class="ProSetOff"><i class="icon-plus"></i></span>
                            <span class="ProSetTopics">Alzheimer's</span>
                        </div>
                    </div>
                </div>
                <div class="Auth_Int_Right">
                    <div class="ul">
                        <div class="li" onclick="updateInterests(this);">
                            <div class="Auth_checkbox">
                                <input type="checkbox" id="AI_Philanthropy" name="AI_Philanthropy" class="AI_Philanthropy" value="1" />
                            </div>
                            <span class="ProSetOn"><i class="icon-check-mark"></i></span>
                            <span class="ProSetOff"><i class="icon-plus"></i></span>
                            <span class="ProSetTopics">Philanthropy</span>
                        </div>
                        <div class="li" onclick="updateInterests(this);">
                            <div class="Auth_checkbox">
                                <input type="checkbox" id="AI_BookReviews" name="AI_BookReviews" class="AI_BookReviews" value="1" />
                            </div>
                            <span class="ProSetOn"><i class="icon-check-mark"></i></span>
                            <span class="ProSetOff"><i class="icon-plus"></i></span>
                            <span class="ProSetTopics">Book Reviews</span>
                        </div>
                        <div class="li" onclick="updateInterests(this);">
                            <div class="Auth_checkbox">
                                <input type="checkbox" id="AI_AboutBill" name="AI_AboutBill" class="AI_AboutBill" value="1" />
                            </div>
                            <span class="ProSetOn"><i class="icon-check-mark"></i></span>
                            <span class="ProSetOff"><i class="icon-plus"></i></span>
                            <span class="ProSetTopics">About Bill Gates</span>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </form>






</div>







<div class="Auth_SectionDivider"></div>

<div class="Auth_SectionHeader50 Auth_SectionHeader50Snug">Account Deactivation</div>

<div class="Auth_SectionHolder">
    <span class="Auth_Paragraph_Profile">Click the link below to begin the account deactivation process.</span>
    <div class="TGN_PassiveButton" id="AuthExtraDAlink">Deactivate account</div>
    <div class="Auth_Paragraph_Profile">If you would like to permanently delete your Gates Notes account and remove it’s content, please <span class="Auth_Paragraph_link" id="AuthExtraDAPlink">send us a request here.</span></div>
</div>

                        </div>
                        <div class="myProfileBase_Holder" id="myProfileBase_Holder">
                            
                            
                            
                            
                        </div>
                    </div>
                </div>
                <div class="TGN_site_Home">
                    
                    <div class="TGN_site_Home_hero"></div>
                    <div class="TGN_site_Home_latest"></div>
                    <div class="TGN_site_Home_videos"></div>
                    <div class="TGN_site_Home_reviews"></div>
                    <div class="TGN_site_Home_cta"></div>
                    <div class="TGN_site_Home_featuremodules"></div>
                </div>
                <div class="TGN_site_Article">
                    <div class="TGN_site_Articlecollumn">
                        <div class="TGN_site_Article_top">
                            
                            
    

<script>
    var ww = $(window).width();
    var wh = $(window).height();
    $(document).ready(function () {
        setTimeout(getCommentCount2, 100);
        setTimeout(getCommentCount2, 1000);
        setTimeout(getCommentCount2, 3000);
        $("#article_top_metricsItem_bookmark").click(function () {
            TGN_closeDropMenus();
            TGN_toggleArticleBookmark($(this).attr("data-articleid"));
        });
        $("#article_top_metricsItemComment").click(function () {
            setTimeout(function () { delayScrollToCommentSection("", "") }, 0);
        });
        TGN_ColorBookmarks();
        $(".slideheader_articleDHtitle").html($(".article_top_head").html());
    });
    $(window).on('load', function () {
        TGN_article_LoadImages();
    });
    $(window).resize(function () {
        TGN_article_LoadImages();
    });
    var throttled = TGN_throttle(TGN_article_LoadImages, 1000);
    $(".TGN_site").scroll(throttled);
    function TGN_article_LoadImages() {
        //console.log("TGN_article_LoadImages");
        $(".TGN_site_Article").find(".article_top_articlehero").find("img").each(function (i, obj) {
            if ($(this).attr("data-url") != "set") {
                TGN_site_isOnScreen($(this), $(this), "img");
            }
        });
    }
    var commentTry = 0;
    function getCommentCount2() {
        var i = GNCommActiveCommentsNumber;//parseInt($(".GNCommMessageDisplayTBody:visible").length);
        if (i == 0) {
            $("#article_top_metricsItemComment").html("" + (0 + i));
            $("#article_top_metricsItemComment").css("display", "none");
        } else {
            $("#article_top_metricsItemComment").html("" + (0 + i));
            $("#article_top_metricsItemComment").css("display", "inline-block");
        }
    }
</script>



<div class="article_top_subhead">Of microbes and men</div>
<div class="article_top_head">You should appreciate germs</div>
<div class="article_top_description"><i>I Contain Multitudes</i> helped me see microorganisms in a whole new light.</div>
<div class="article_top_byline">By <span class="article_top_bylinebold">Bill Gates</span></div><span class="article_top_chim"> | </span>
<div class="article_top_dateline">March 28, 2017 <span class="article_top_metric_readtime"></span></div>
<div class="article_top_articlehero"><img class="article_top_DMT_Image" src="https://www.gatesnotes.com/media/GNIN/gray_4x6.png" data-src="https://media.gatesnotes.com/-/media/Images/Books/Health/I-Contain-Multitudes/i-contain-multitudes_2017_780px.ashx" data-src-tablet="https://media.gatesnotes.com/-/media/Images/Books/Health/I-Contain-Multitudes/i-contain-multitudes_2017_780px.ashx" data-src-mobile="https://media.gatesnotes.com/-/media/Images/Books/Health/I-Contain-Multitudes/i-contain-multitudes_2017_780px.ashx" /></div>

<div class="TGN_site_Innercollumn">
    <div class="article_top_metrics">
        <div class="article_top_metricsItem article_top_metricsItemCircle"><a target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://www.gatesnotes.com/Books/I-Contain-Multitudes?WT.mc_id=00_00_00_share_fb&title=You should appreciate germs&quote=Ed Yong’s book &lt;i&gt;I Contain Multitudes&lt;/i&gt; helped me see microorganisms in a whole new light."><i class="icon-facebook"></i></a></div>
        <div class="article_top_metricsItem article_top_metricsItemCircle"><a target="_blank" href="https://twitter.com/intent/tweet?text=You+should+appreciate+germs&url=http://b-gat.es/2nO7bPU?WT.mc_id=00_00_00_share_tw&via=billgates"><i class="icon-twitter"></i></a></div>
        <div class="article_top_metricsItem article_top_metricsItemCircle"><a target="_blank" href="https://www.linkedin.com/shareArticle?mini=true&source=GatesNotes&url=https://www.gatesnotes.com/Books/I-Contain-Multitudes?WT.mc_id=00_00_00_share_li&title=You should appreciate germs"><i class="icon-linkedin"></i></a></div>

        <div class="article_top_metricsItem article_top_metricsItemCircle"><a target="_blank" href="mailto:?subject=From%20GatesNotes%2Ecom%3A%20You%20should%20appreciate%20germs&amp;body=Here%20is%20a%20post%20from%20Bill%20Gates%27s%20blog%20that%20might%20interest%20you%3A%0D%0A%0D%0A%E2%80%94%20You%20should%20appreciate%20germs%20%E2%80%94%0D%0AEd%20Yong%E2%80%99s%20book%20%3Ci%3EI%20Contain%20Multitudes%3C%2Fi%3E%20helped%20me%20see%20microorganisms%20in%20a%20whole%20new%20light.%0D%0Ahttps%3A%2F%2Fwww.gatesnotes.com%2FBooks%2FI-Contain-Multitudes?WT.mc_id=00_00_00_share_em"><i class="icon-mail"></i></a></div>
        <div id="article_top_metricsItem_bookmark" class="article_top_metricsItem GNI_UserOnly" data-articleid="b08e5e0d-3677-48ac-9448-92b0aa5d0040"><svg stroke="none" width="16px" height="25px" viewBox="0 0 16 25" class="article_top_metricsItemCSVG"><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g stroke="#666" fill="none"><path fill="none" d="M0.5,0.5 L0.5,24.5 L8.1716264,19.5137775 L15.5,24.4404006 L15.5,0.5 L0.5,0.5 Z"></path></g></g></svg></div>
        <div id="article_top_metricsItemComment" class="article_top_metricsItem article_top_metricsItemComment">0</div>
    </div>
    <div class="article_top_line"></div>
</div>



                        </div>
                        <div id="TGN_site_Article_body" class="TGN_site_Article_body">
                            
                            
                            
    <div class='TGN_Article_ReadTimeSection'>
<style>
    @media all and (min-width: 1021px) {
        /*Desktop only*/
    }

    @media all and (min-width: 681px) {
        /*Desktop and Tablet*/
    }

    @media all and (min-width: 681px) and (max-width: 1020px) {
        /*Tablet only*/
    }

    @media all and (max-width: 1110px) {
    }

    @media all and (max-width: 1020px) {
        /*Mobile and Tablet*/
    }

    @media all and (max-width: 850px) {
    }

    @media all and (max-width: 680px) {
        /*Mobile only*/
    }
</style>

<style>



    .commentstitle {
        font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
        font-weight: 300;
        font-size: 24px;
        line-height: 30px;
    }

    .commentsentry {
        height: 54px;
        border: 1px solid rgba(0,0,0,0.12);
        display: flex;
        align-items: center;
        justify-content: flex-start;
        margin-bottom: 48px;
        margin-top: 18px;
    }

    .commentsentryplus {
        color: rgba(0,0,0,0.12);
        font-size: 40px;
        margin-left: 16px;
        margin-right: 16px;
    }

    .commentsentrytext {
        font-family: source-serif-pro, 'Source Serif Pro', 'LyonDisplay-Medium', serif;
        font-weight: 600;
        font-size: 16px;
        line-height: 19px;
        color: #cccccc;
    }

    .commentsPI {
        background: gray;
        width: 30px;
        height: 30px;
        border-radius: 3000px;
    }

    .commentsLINE {
        display: flex;
        align-items: center;
        justify-content: flex-start;
        margin-top: 0px;
        margin-bottom: 10px;
    }

    .commentsNAME {
        margin-left: 16px;
        margin-right: 13px;
        font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
        font-weight: 300;
        font-size: 18px;
        line-height: 23px;
    }

    .commentsTIME {
        color: #CCCCCC;
        font-family: source-serif-pro, 'Source Serif Pro', 'LyonDisplay-Medium', serif;
        font-weight: 600;
        font-size: 16px;
        line-height: 20px;
    }

    .commentsSPACE {
        min-width: 45px !important;
        background: white;
        height: 0px;
    }

    .commentsCOMMENT {
        color: #303030;
        font-family: source-serif-pro, 'Source Serif Pro', 'LyonDisplay-Medium', serif;
        font-weight: 600;
        font-size: 16px;
        line-height: 20px;
    }

    .commentsREPLY {
        color: #757575;
        font-family: source-serif-pro, 'Source Serif Pro', 'LyonDisplay-Medium', serif;
        font-weight: 600;
        font-size: 12px;
        line-height: 14px;
        margin-right: 14px;
        margin-left: 16px;
    }

    .commentsREPORT {
        color: #CCCCCC;
        font-family: source-serif-pro, 'Source Serif Pro', 'LyonDisplay-Medium', serif;
        font-weight: 600;
        font-size: 12px;
        line-height: 14px;
        margin-right: 14px;
        margin-left: 16px;
    }

    .commentsH {
        color: #e15b6c;
    }

    .commentsHoff {
        color: #cccccc;
    }

    .commentsSUB {
        margin-top: 0px;
    }

    .commentsVLINE {
        width: 2px;
        background: rgba(0,0,0,0.12);
        margin-right: 15px;
        min-height: 100%;
        height: 100%;
    }

    .commentsMAIN {
        margin-bottom: 30px;
        margin-top: 30px;
    }

    .ReadTheseModule .TGN_site_ArticleItem {
        width: 32%;
    }

    .TGN_site_Hline {
        /*display:none;*/
    }

    /*MEDIA*/

    @media all and (max-width: 960px) {


        .ReadTheseModule .TGN_site_Titledsectionsbottom {
            margin-top: 17px;
            width: 130%;
        }

        .ReadTheseModule .TGN_site_Titledsections {
            overflow: hidden;
        }

        .ReadTheseModule .articletitle {
            font-size: 18px;
            line-height: 23px;
            margin-top: 10px;
            margin-bottom: 6px;
        }

        .ReadTheseModule .articledescription {
            font-size: 16px;
            line-height: 18px;
        }

        .commentsNAME {
            font-size: 16px;
            line-height: 20px;
        }

        .commentsCOMMENT {
            font-size: 16px;
            line-height: 19px;
        }
    }


    @media all and (max-width: 680px) {
        .ReadTheseModule .TGN_site_Titledsectionsbottom {
            margin-top: 17px;
            width: 200%;
        }
    }
</style>

<script>
    var ww = $(window).width();
    var wh = $(window).height();
    $(document).ready(function () {
        SizeContentToScreen();
        //$(".TGN_site_Bodycopy").append($(".articleContent"));
    });
    $(window).resize(function () {
        SizeContentToScreen();
    });
    window.onscroll = function () { SizeContentToScreen() };
    function SizeContentToScreen() {
        ww = $(window).width();
        wh = $(window).height();
        var scrollTopContentArea = $(".TGN_site").scrollTop();
        var scrollTopReadTheseModule = $(".TGN_RelatedContent_Holder").offset();
        if (scrollTopContentArea + (wh * .75) > scrollTopReadTheseModule.top) {
            $(".HeaderShareLinks").css("display", "block");
        } else {
            $(".HeaderShareLinks").css("display", "none");
        }
        $(".commentsVLINE").each(function (i, obj) {
            $(this).css("height", $(this).parent().height() + "px");
        });
    }
</script>

<div class="TGN_site_Innercollumn">
    <div id="TGN_site_Bodycopy" class="TGN_site_Bodycopy">
    </div>
</div>
<p>I&rsquo;ve been perpetuating a misconception. </p>
<p>When I give talks about global health, I typically speak about microbes as threats we need to wipe off the map. And it&rsquo;s certainly true that some microbes, like the ones that cause malaria and tuberculosis, are responsible for tremendous suffering and death around the world. But the view that microbes always equal disease and are essentially bad things is an oversimplification.</p>
<p>I&rsquo;m seeing microbes with new eyes and talking about them in different terms thanks to British journalist Ed Yong. After reading his super-interesting book <em>I Contain Multitudes</em>, I had a chance to chat with him in person about his view that &ldquo;microbes are mostly not to be feared or destroyed but to be cherished, admired, and studied.&rdquo;</p>
<!-- [EMBEDED VIDEO ITEM] -->

<style>
    .gnYoutube_VR_Outer {
        width: 100%;
        margin-left: 0%;
        padding: 0%;
        font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
        font-weight: 300;
        font-size: 16px;
        line-height: 18px;
    }

    .gnYoutube_VR_SpanT1 {
        font-weight: 600;
    }

    .gnYoutube_VR_Span {
        margin-top: 4px;
        margin-bottom: 8px;
        max-width: 760px;
    }
</style>
<div class="gnYoutube_VR_Outer" data-vr="False">
    <div class="gnYoutubeHolder videoEmbed" id="gnYoutubeHolder1">
        <iframe id="whateverIDHME44N9J8Iw" width="800" height="450" frameborder="0" src="https://www.youtube.com/embed/HME44N9J8Iw?rel=0&amp;modestbranding=1&amp;playsinline=1&amp;color=white&amp;showinfo=0" data-yt="HME44N9J8Iw" data-vr="False"></iframe>
    </div>
</div>
<script>

    $(window).on('load', function () {
        onYouTubeIframeAPIReady();
    })
</script>
<p>In <em>I Contain Multitudes</em>, Yong synthesizes literally hundreds and hundreds of papers, but he never overwhelms you with the science. He just keeps imparting one surprising, fascinating insight after the next. <em>I Contain Multitudes</em> is science journalism at its best.</p>
<p>Yong makes clear that only a tiny fraction of microbes have the ability to make us sick. There are approximately 100 species of bacteria that cause infectious disease in humans. But there are hundreds of thousands of species that live peacefully, symbiotically within us, primarily in our gut. Microbes help us digest our food, break down toxins, guide our physical development, protect us from disease, and even speed human evolution. We are utterly dependent on them.</p>
<p>We are also utterly inseparable from them. Yong illustrates that we are at least as much microbe as human. We literally have more microbial cells living inside our bodies than human cells. And even the cells we label &ldquo;human&rdquo; are part microbe. With the exception of red blood cells and sperm, all our cells are powered by mitochondria, which are likely the descendants of ancient bacteria that became integrated into the type of cells that subsequently gave rise to all complex life. (The story of how that happened is the subject of another book I loved: <em><a href="/Books/The-Vital-Question" target="_blank">The Vital Question</a></em>, by the biologist Nick Lane.)</p>


<style>
</style>
<a name="ShareableQuote"></a>
<div class="ShareableQuote_Holder">
    <div class="ShareableQuote_Text" data-sqinstance="0" data-sqtwittersharetext="&amp;ldquo;We have been tilting at microbes for too long, and created a world that is hostile to the ones we need.&amp;rdquo; &lt;span style=&quot;white-space: nowrap;&quot;&gt;&amp;mdash;&amp;nbsp;Ed&amp;nbsp;Yong&lt;/span&gt;" data-sqfacebooksharedescription="Read Bill Gates&amp;rsquo;s review of &lt;em&gt;I Contain Multitudes.&lt;/em&gt;" data-sqfacebooksharelink="&amp;ldquo;We have been tilting at microbes for too long, and created a world that is hostile to the ones we need.&amp;rdquo; &lt;span style=&quot;white-space: nowrap;&quot;&gt;&amp;mdash; Ed Yong&lt;/span&gt;" data-sqfacebookshareimage="/-/media/Images/Books/Health/I-Contain-Multitudes/multitudes_2017_800px_v1.ashx"><div class="ShareableQuote_Line"></div>&ldquo;We have been tilting at microbes for too long, and created a world that is hostile to the ones we need.&rdquo; <span style="white-space: nowrap;">&mdash;&nbsp;Ed&nbsp;Yong</span></div>
    <div class="ShareableQuote_ShareIcons">
        <div class="ShareableQuote_FB"><img src="/img/TGN_badge_TransOutlines_C_Fb.svg"></div>
        <div class="ShareableQuote_TW"><img src="/img/TGN_badge_TransOutlines_C_Tw.svg"></div>
    </div>
    <div class="ShareableQuote_Tweet">&ldquo;We have been tilting at microbes for too long, and created a world that is hostile to the ones we need.&rdquo; <span style="white-space: nowrap;">&mdash;&nbsp;Ed&nbsp;Yong</span></div>
    <div class="ShareableQuote_FBD">Read Bill Gates&rsquo;s review of <em>I Contain Multitudes.</em></div>
    <div class="ShareableQuote_FBT">&ldquo;We have been tilting at microbes for too long, and created a world that is hostile to the ones we need.&rdquo; <span style="white-space: nowrap;">&mdash; Ed Yong</span></div>
</div>
<script type="text/javascript">
    ////FB
    // this loads the Facebook API
    (function (d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) { return; }
        js = d.createElement(s); js.id = id;
        js.src = "//connect.facebook.net/en_US/sdk.js";
        fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));
    window.fbAsyncInit = function () {
        var appId = '420779058102184';
        console.log("w.l.h: " + window.location.hostname);
        if (window.location.hostname == "sbe.gatesnotes.com")
            appId = '830309017065434';
        if (window.location.hostname == "www.gatesnotes.com")
            appId = '457615207752379';
        if (window.location.hostname == "ppe.gatesnotes.com")
            appId = '429505780566866';
        if (window.location.hostname == "quiz.gatesnotes.com")
            appId = '997767477001135';
        FB.init({
            appId: appId, // stagin -
            xfbml: true,
            version: 'v2.10'
        });
    };
    function htmlEncode(value) {
        //create a in-memory div, set it's inner text(which jQuery automatically encodes)
        //then grab the encoded contents back out.  The div never exists on the page.
        return $('<div/>').text(value).html();
    }
    $(document).ready(function () {
        //// add a couple non-breaking spaces to avoid widdows
        ////FB
        $(".ShareableQuote_FB").on('click', function (event) {
            event.stopPropagation();
            event.stopImmediatePropagation();
            // shareable quotes omniture tracking
            s.linkTrackVars = "events,eVar9";
            s.linkTrackEvents = "event11";
            s.events = "event11";
            s.tl(true, "o", "facebook shareable quote");
            //console.log("SQ_FB:" + window.location);
            //postShareTGNMI16("TGNMI16_Share", true, false, false);//fb tw em
            var FBDesc = ($(this).parent().parent().find(".ShareableQuote_FBD").text());
            var FBTitle = ($(this).parent().parent().find(".ShareableQuote_FBT").text());
            FB.ui(
            {
                method: 'share',
                name: 'Name',
                href: 'https://www.gatesnotes.com' + document.location.pathname.toLowerCase(),
                caption: 'www.gatesnotes.com',//line 3 // auto adds meta name="author" tag prop to end
                description: '' + htmlEncode(FBDesc),//line 2
                link: 'https://www.gatesnotes.com' + document.location.pathname.toLowerCase(),
                message: '', //not sure what this does
                picture: 'https://www.gatesnotes.com//-/media/Images/Books/Health/I-Contain-Multitudes/multitudes_2017_800px_v1.ashx',
                title: '' + htmlEncode(FBTitle),//line 1
            },
            function (response) {
                if (response && response.post_id) {
                    //alert('Post was published.');
                }
                else {
                    //alert('Post was not published.');
                }
            })
        });
        ////TW
        $(".ShareableQuote_TW").on('click', function (event) {
            event.stopPropagation();
            event.stopImmediatePropagation();
            // shareable quotes omniture tracking
            s.linkTrackVars = "events,eVar9";
            s.linkTrackEvents = "event11";
            s.events = "event11";
            s.tl(true, "o", "twitter shareable quote");
            //postShareTGNMI16("TGNMI16_Share", false, true, false);//fb tw em
            var tweet = $(this).parent().parent().find(".ShareableQuote_Tweet").text();
            //console.log("escape:" + escape(tweet));
            //console.log("encodeURI:" + encodeURI(tweet));
            //console.log("encodeURIComponent:" + encodeURIComponent(tweet));
            var unencodedQuizTWString = 'https://twitter.com/intent/tweet?text=' + encodeURIComponent(tweet) + "%20" + 'https://www.gatesnotes.com' + document.location.pathname.toLowerCase() + "?WT.mc_id=00_00_00_share_tw" + "%20via%20%40billgates&related=";
            var encodedQuizTWString = htmlEncode(unencodedQuizTWString);
            window.open('' + encodedQuizTWString);
            return false;
        });
    });
</script> 

<p>I found some of Yong&rsquo;s reporting directly relevant to my role as a parent. Melinda and I&mdash;and most parents in the U.S. and other rich countries&mdash;have dramatically cut down on our children&rsquo;s exposure to the diverse array of microbes that for millennia have helped human beings strengthen their immune systems and avoid inflammatory diseases. As Yong puts it, &ldquo;We have been tilting at microbes for too long, and created a world that is hostile to the ones we need.&rdquo;</p>
<p>It&rsquo;s not just all the anti-bacterial soaps and sanitizers we Americans use. Another major problem is the excessive use of antibiotics. On net, antibiotics have been unbelievably positive for humanity. But every time we give them, we are carpet-bombing our microbial ecosystem (microbiome), not merely knocking out pathogens. &ldquo;A rich, thriving microbiome acts as a barrier to invasive pathogens,&rdquo; writes Yong. &ldquo;When our old friends vanish, that barrier disappears [and] more dangerous species can exploit the &hellip; ecological vacancies.&rdquo;</p>
<p>As you can imagine, the book is also quite relevant to my work at our foundation, especially in the area of children&rsquo;s growth and development. Yong explains why, if we want to prevent malnutrition, we not only need to help alleviate hunger and provide key micronutrients. We will also need to learn why some kids&rsquo; microbiomes are out of balance and how to restore them back to a healthy state. </p>
<p>Not only could this lead to low-cost interventions for malnutrition. I suspect this line of research will also help scientists make inroads against many other diseases. The list of disorders that have been linked to disruptions in the microbiome includes Crohn&rsquo;s disease, ulcerative colitis, irritable bowel syndrome, colon cancer, obesity, type 1 diabetes, type 2 diabetes, and Parkinson&rsquo;s disease. Even though we don&rsquo;t have good ways of manipulating the microbiome to head off disease, I am hopeful we will eventually. I&rsquo;m particularly excited about the implications for neurodegenerative diseases like Parkinson&rsquo;s. It may turn out that these diseases get their start in the gut a decade or more before any brain symptoms show up. If that&rsquo;s the case, the gut may prove to be a great target for medicines, giving new hope to many millions of families.</p>
<p>Another area of intense interest for Yong and for me is harnessing benign microbes to fight dangerous ones. Our foundation has been supporting some cutting-edge work to infect certain species of mosquitoes with a very common bacterium called <em>Wolbachia </em>to make it impossible for these mosquitoes to spread a painful, debilitating disease called dengue fever. </p>
<p>As Yong reports, this approach worked wonders in its first field trial, in eastern Australia. In just four months, <em>Wolbachia</em>-infected mosquitoes almost totally replaced the mosquitoes capable of carrying the virus that causes dengue&mdash;effectively wiping out dengue in the region. (I had a chance to <a href="/Health/Why-I-Gave-Blood-to-Defeat-Dengue-Mosquito-Week" target="_blank">see and report on</a> this work on a visit to Indonesia<ins cite="mailto:Lowell%20Weiss" datetime="2017-03-22T10:05">,</ins> in 2014.) The implications of these tests are huge. We believe that <em>Wolbachia</em> could also be effective at stopping the spread of other viruses, such as Chikungunya and Zika. This approach might also have the potential to be a powerful tool in the fight against malaria.</p>
<p>In the end, <em>I Contain Multitudes</em> is a healthy corrective. Yong succeeds in his intention to give us a &ldquo;grander view of life&rdquo; and does so without falling prey to grand, unifying explanations that are far too simplistic. He presents our inner ecosystems in all their wondrous messiness and complexity. And he offers realistic optimism that our growing knowledge of the human microbiome will lead to great new opportunities for enhancing our health.</p>

<script type="text/javascript">
    TGN_Page_Style = "article";
    var listOfObjects = [];
    var mainIIG = 0;
    var IsAnAL2016 = false;
    var HasDownloadMenu = false;
    $(document).ready(function () {
        //console.log("ArticleJS_Ready");
        $(".bottom").css("display", "block");
        IsAnAL2016 = $(".al2016Article").is(":visible");
        HasDownloadMenu = $('#AL2016DownloadMenuData').is(":visible");
        adjustPrevNext();
        getCommentCount();
        var referrer = document.referrer;
        //console.log(referrer);
        isAnArticlePage = true;
        formatInlineElems();
        // move progbar
        $(".TGNBannersHolder").prepend($(".TGNArticleProgBar"));

    });
        $(window).on('load', function () {
            TGN_article_SetReadTime();
        });
    function TGN_article_SetReadTime() {
        $(".TGN_Article_ReadTimeSection").each(function (i, obj) {
            var text = "";
            if ($(this).hasClass("TGN_LS_SubArticle")) {
                var element = obj;
                text = element.innerText || element.textContent;
                var article_top_metric_WordCount = WordCount(text);
                var article_top_metric_readtime = Math.ceil(article_top_metric_WordCount/265)
                $(this).find(".article_top_metric_readtime").html("<i class='icon-dot'></i> " + article_top_metric_readtime + " minute read");
            } else {
                var element = obj;
                text = element.innerText || element.textContent;
                var article_top_metric_WordCount = WordCount(text);
                var article_top_metric_readtime = Math.ceil(article_top_metric_WordCount/265)
                $(this).parent().parent().find(".article_top_metric_readtime").html("<i class='icon-dot'></i> " + article_top_metric_readtime + " minute read");
            }
        });
        }
        function WordCount(str) {
            return str.split(" ").length;
        }
    $(window).resize(function () {
        adjustPrevNext();
        adjustPQ();
        if ($('.InlineImageGalleryBase').length) {
            adjustIIG();
        }
    });
    window.onorientationchange = function () {

        var orientation = window.orientation;

        // Look at the value of window.orientation:

        if (orientation === 0) {

            // iPad is in Portrait mode.

        }

        else if (orientation === 90) {

            // iPad is in Landscape mode. The screen is turned to the left.

        }


        else if (orientation === -90) {

            // iPad is in Landscape mode. The screen is turned to the right.

        }
        if ($('.InlineImageGalleryBase').length) {
            adjustIIG();
        }

    }
    function iignext() {
        var ww = $(window).width();
        mainIIG += 1;
        if (mainIIG > listOfObjects.length - 1) { mainIIG = 0; }
        $('.InlineImageGalleryMain').html(listOfObjects[mainIIG].outerHTML);
        nIIG = mainIIG + 1;
        if (nIIG > listOfObjects.length - 1) { nIIG = 0; }
        $('.InlineImageGalleryNextImage').html(listOfObjects[nIIG].outerHTML);
        pIIG = mainIIG - 1;
        if (pIIG < 0) { pIIG = listOfObjects.length - 1; }
        $('.InlineImageGalleryPrevImage').html(listOfObjects[pIIG].outerHTML);
        //$('.InlineImageGalleryText').html("<span class='iigPrevArrow'>&lt;&lt;</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"+(mainIIG+1)+"&nbsp;&nbsp;of&nbsp;&nbsp;"+listOfObjects.length+"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class='iigNextArrow'>&gt;&gt;</span><br><br><b>"+listOfObjects[0].dataset.caption1+"</b><br>"+listOfObjects[mainIIG].attributes.data-description.value+"<br>");

        var capt01 = listOfObjects[mainIIG].getAttribute('data-caption1');//listOfObjects[mainIIG].dataset.caption1
        var capt02 = listOfObjects[mainIIG].getAttribute('data-caption2');
        if (capt01 == null) { capt01 = ""; }
        if (capt02 == null) { capt02 = ""; }
        if (ww < 800) {
            $('.InlineImageGalleryText').html("<div class='IIGcountIcon'><i class='galleryicon icon-gallery_2'></i></div><div class='IIGcount'>" + (mainIIG + 1) + "&nbsp;&nbsp;of&nbsp;&nbsp;" + listOfObjects.length + "</div><span class='IIGheadline'>" + capt01 + " <span class='IIGheadline2'>" + capt02 + "</span></span>");
        } else {
            $('.InlineImageGalleryText').html("<div class='IIGcountIcon'><i class='galleryicon icon-gallery_2'></i></div><div class='IIGcount'>" + (mainIIG + 1) + "&nbsp;&nbsp;of&nbsp;&nbsp;" + listOfObjects.length + "</div><span class='IIGheadline'>" + capt01 + " <span class='IIGheadline2'>" + capt02 + "</span></span>");
        }

        $('.iigNextArrow').click(function () {
            iignext();
        })
        $('.iigPrevArrow').click(function () {
            iigprev();
        })
        adjustIIG();
    }
    function iigprev() {
        var ww = $(window).width();
        mainIIG -= 1;
        if (mainIIG < 0) { mainIIG = listOfObjects.length - 1; }
        $('.InlineImageGalleryMain').html(listOfObjects[mainIIG].outerHTML);
        nIIG = mainIIG + 1;
        if (nIIG > listOfObjects.length - 1) { nIIG = 0; }
        $('.InlineImageGalleryNextImage').html(listOfObjects[nIIG].outerHTML);
        pIIG = mainIIG - 1;
        if (pIIG < 0) { pIIG = listOfObjects.length - 1; }
        $('.InlineImageGalleryPrevImage').html(listOfObjects[pIIG].outerHTML);

        var capt01 = listOfObjects[mainIIG].getAttribute('data-caption1');//listOfObjects[mainIIG].dataset.caption1
        var capt02 = listOfObjects[mainIIG].getAttribute('data-caption2');
        if (capt01 == null) { capt01 = ""; }
        if (capt02 == null) { capt02 = ""; }
        if (ww < 800) {
            $('.InlineImageGalleryText').html("<div class='IIGcountIcon'><i class='galleryicon icon-gallery_2'></i></div><div class='IIGcount'>" + (mainIIG + 1) + "&nbsp;&nbsp;of&nbsp;&nbsp;" + listOfObjects.length + "</div><span class='IIGheadline'>" + capt01 + " <span class='IIGheadline2'>" + capt02 + "</span></span>");
        } else {
            $('.InlineImageGalleryText').html("<div class='IIGcountIcon'><i class='galleryicon icon-gallery_2'></i></div><div class='IIGcount'>" + (mainIIG + 1) + "&nbsp;&nbsp;of&nbsp;&nbsp;" + listOfObjects.length + "</div><span class='IIGheadline'>" + capt01 + " <span class='IIGheadline2'>" + capt02 + "</span></span>");
        }

        $('.iigNextArrow').click(function () {
            iignext();
        })
        $('.iigPrevArrow').click(function () {
            iigprev();
        })
        adjustIIG();
    }
    function adjustPQ() {
        var pqW = $('.suspendedR').width();
        var pqH = $('.suspendedR').height();
        $('.pqrq').css("margin-left", pqW - 60);
        $('.pqrq').css("margin-top", pqH - 110);
    }
    function adjustIIG() {
        var ww = $(window).width();
        var iigW = $('.InlineImageGalleryBase').width();
        //console.log(ww);
        //if (iigW<512){iigW=512;}
        var iigMW = iigW;//-4
        var iigMH = iigMW * 0.666666667;
        var iigOL = $('.InlineImageGalleryBase').offset().left;
        var iigACOL = $('.articleContent').offset().left;
        $('.InlineImageGalleryPre').css("left", iigOL - iigACOL);
        //$('.InlineImageGalleryBase').css("width",iigW);
        $('.InlineImageGalleryMain').css("width", iigMW);
        $('.InlineImageGalleryMain').css("height", "auto");
        $('.InlineImageGalleryPrev').css("width", (iigMW + 10) / 2);
        $('.InlineImageGalleryPrev').css("top", (-iigMH / 2 - 20));
        $('.InlineImageGalleryNext').css("width", (iigMW + 10) / 2);
        $('.InlineImageGalleryNext').css("left", (iigMW + 10) - 57);
        $('.InlineImageGalleryNext').css("top", ((-iigMH / 2 - 20) - 70));
        $('.InlineImageGalleryPrevImage').css("left", ((iigMW + 10) / 2) - 152);
        $('.InlineImageGalleryBase').css("height", iigMH);
        $('.InlineImageGalleryText').css("width", "auto");
        //if(ww<980){
        //    //$('.InlineImageGalleryText').css("left",iigMW-(((iigMW-35))-0));
        //}else{
        //    //$('.InlineImageGalleryText').css("left",iigMW-(((iigMW-35))-0));
        //    //$('.InlineImageGalleryText').css("width",((iigMW+10)/2)-152);
        //    //$('.InlineImageGalleryText').css("left",iigMW-(((iigMW+10)/2)-152));
        //}
        if (ww < 800) {
            //$('.IIGheadline').text("PHOTO GALLERY");
            $('.IIGheadline').css("top", 5);
            //$('.IIGcountIcon').css("left",iigMW/2-60-41);
            //$('.IIGheadline').css("left",iigMW/2-41);
            $('.IIGheadline').css("width", iigMW - 25);
            $('.InlineImageGalleryText').css("height", $('.IIGheadline').height() + 15);
            $('.InlineImageGalleryBase').css("height", $('.IIGheadline').height() + iigMH + 20);
        } else {
            if (mainIIG < 0) { mainIIG = listOfObjects.length - 1; }
            $('.InlineImageGalleryMain').html(listOfObjects[mainIIG].outerHTML);
            nIIG = mainIIG + 1;
            if (nIIG > listOfObjects.length - 1) { nIIG = 0; }
            $('.InlineImageGalleryNextImage').html(listOfObjects[nIIG].outerHTML);
            pIIG = mainIIG - 1;
            if (pIIG < 0) { pIIG = listOfObjects.length - 1; }
            $('.InlineImageGalleryPrevImage').html(listOfObjects[pIIG].outerHTML);
            var capt01 = listOfObjects[mainIIG].getAttribute('data-caption1');//listOfObjects[mainIIG].dataset.caption1
            var capt02 = listOfObjects[mainIIG].getAttribute('data-caption2');
            if (capt01 == null) { capt01 = ""; }
            if (capt02 == null) { capt02 = ""; }
            $('.InlineImageGalleryText').html("<div class='IIGcountIcon'><i class='galleryicon icon-gallery_2'></i></div><div class='IIGcount'>" + (mainIIG + 1) + "&nbsp;&nbsp;of&nbsp;&nbsp;" + listOfObjects.length + "</div><span class='IIGheadline'>" + capt01 + " <span class='IIGheadline2'>" + capt02 + "</span></span>");
            $('.IIGheadline').css("width", iigMW - 200);
            var headH = $('.IIGheadline').height();
            if (headH == 15) {
                $('.IIGheadline').css("top", 17);
            } else if (headH == 30) {
                $('.IIGheadline').css("top", 9);
            } else if (headH == 45) {
                $('.IIGheadline').css("top", 2);
            } else {
                $('.IIGheadline').css("top", 17);
            }
            $('.InlineImageGalleryText').css("height", 50);

            //console.log("h: "+$('.IIGheadline').height()+" w: "+$('.IIGheadline').width());
        }
    }
    // ADD SUPPORT FOR INLINE INTERACTIVE FILES
    function formatInlineElems() {
        // related content //small-12 medium-12 large-12 columns
        var listOfRelated = [];
        $('.promounit').each(function (i, obj) {
            listOfRelated.push(obj);
        });
        //console.log(listOfRelated);
        // CTA
        $('.bgcta').each(function (i, obj) {
            //console.log($(this).children().eq(1).prop('src'));
            $(this).after("<div class='suspendedCTA' id='bgcta" + i + "'><a href='" + $(this).attr("data-link") + "'><div class='suspendedBCTA' id='bgctab" + i + "'>" + $(this).children().eq(0).clone().wrap('<p>').parent().html() + "</div></a></div>");
            var imgOn = $(this).children().eq(1).prop('src');
            var imgOff = $(this).children().eq(0).prop('src');
            $("#bgctab" + i).mouseenter(function () {
                $(this).find('img').attr("src", "" + imgOn);
            }).mouseleave(function () {
                $(this).find('img').attr("src", "" + imgOff);
            });
            $(this).remove();
            $("#bgctab" + i).children(0).attr("width", "100%");
        });
        // marginalia right
        $('.bgsbnoter').each(function (i, obj) {
            var ww = $(window).width();
            if (ww > 980) {
                $(this).after("<div class='suspendedNOTER' id='gbli" + i + "'><div class='suspendedNOTERB' id='bgsbnoter" + i + "'>" + $(this).html() + "</div></div>");
                $(this).remove();
                $("#bgsbnoter" + i).children(0).attr("width", "100%");
                $("#bgsbnoter" + i).css("position", "relative");
                $("#bgsbnoter" + i).css("top", $(this).attr("offsetY"));
                $("#bgsbnoter" + i).css("left", $(this).attr("offsetX"));
            } else {
                $(this).remove();
            }
        });
        // marginalia left
        $('.bgsbnotel').each(function (i, obj) {
            var ww = $(window).width();
            if (ww > 980) {
                $(this).after("<div class='suspendedNOTEL' id='gbli" + i + "'><div class='suspendedNOTELB' id='bgsbnotel" + i + "'>" + $(this).html() + "</div></div>");
                $(this).remove();
                $("#bgsbnotel" + i).children(0).attr("width", "100%");
                $("#bgsbnotel" + i).css("position", "relative");
                $("#bgsbnotel" + i).css("top", $(this).attr("offsetY"));
                $("#bgsbnotel" + i).css("left", $(this).attr("offsetX"));
            } else {
                $(this).remove();
            }
        });
        // left image
        $('.bgli').each(function (i, obj) {
            //$(this).after( "<div class='suspended' id='gbli"+i+"'><div class='suspendedB' id='gblib"+i+"'>"+listOfRelated[0].outerHTML+"</div></div>" ); // related content
            $(this).after("<div class='suspended' id='gbli" + i + "'><div class='suspendedB' id='gblib" + i + "'>" + $(this).html() + "</div></div>");
            $(this).remove();
            $("#gblib" + i).children(0).attr("width", "100%");
        });
        // block quote
        $('.bgbq').each(function (i, obj) {
            var PQAtext = $(this).find(".bgbqa").html();
            $(this).find(".bgbqa").remove();
            var PQtext = $(this).html();
            //var s = PQtext.replace(/\u201C/g, "&nbsp;<span class='pqqq'>&ldquo;</span>");
            //var s2 = s.replace(/\u201D/g, "<span class='pqqq'>&rdquo;</span>");
            $(this).after("<div class='ShareableQuote_Holder'><div class='ShareableQuote_Text' data-sqinstance='" + i + "' data-sqtwittersharetext='' data-sqfacebooksharedescription='' data-sqfacebooksharelink='' data-sqfacebookshareimage=''><div class='ShareableQuote_Line'></div>" + PQtext + "</div><div class='ShareableQuote_Attrib'>" + PQAtext + "</div></div>");
            $(this).remove();
            //$(".articleContent p").css("z-index", "1");
            //$(".articleContent p").css("position", "relative");
        });
        // underline
        $('.TGNil_underline').each(function (i, obj) {
            $(this).css("border-bottom", "0px solid " + "#f5d840");//+$(this).attr("mycolor"));
            $(this).css("box-shadow", "inset 0 -5px 0 " + "#f5d840");//+$(this).attr("mycolor"));
            $(this).css("color", "inherit");
            $(this).css("-webkit-transition", "background .15s cubic-bezier(.33,.66,.66,1)");
            $(this).css("transition", "background .15s cubic-bezier(.33,.66,.66,1)");
        });
        // highlight
        $('.TGNil_highlight').each(function (i, obj) {
            $(this).css("border-bottom", "2px solid " + $(this).attr("mycolor"));
            $(this).css("box-shadow", "inset 0 -23px 0 " + $(this).attr("mycolor"));
            $(this).css("color", "inherit");
            $(this).css("-webkit-transition", "background .15s cubic-bezier(.33,.66,.66,1)");
            $(this).css("transition", "background .15s cubic-bezier(.33,.66,.66,1)");
        });
        // inline image gallery
        $('.bgiig').css("display", "block");//remove after testing
        $('.bgiig').each(function (i, obj) {
            $(this).children().each(function () {
                $(this).attr('style', 'height:auto!important;width:100%!important;');
                listOfObjects.push(this);
            });
            var capt01 = listOfObjects[0].getAttribute('data-caption1');//listOfObjects[0].dataset.caption1
            var capt02 = listOfObjects[0].getAttribute('data-caption2');
            if (capt01 == null) { capt01 = ""; }
            if (capt02 == null) { capt02 = ""; }
            //thumb.getAttribute('data-bigwidth')
            $(this).after("<div class='InlineImageGalleryPre'><div class='InlineImageGalleryPreThumb'><i class='galleryicon icon-gallery_2'></i></div><div class='InlineImageGalleryPreText'>PHOTO GALLERY</div></div><div class='InlineImageGalleryBase'><div class='InlineImageGalleryMain'>" + listOfObjects[0].outerHTML + "</div><div class='InlineImageGalleryPrev'></div><div class='InlineImageGalleryNext'></div><div class='InlineImageGalleryText'><div class='IIGcountIcon'><i class='galleryicon icon-gallery_2'></i></div><div class='IIGcount'>1&nbsp;&nbsp;of&nbsp;&nbsp;" + listOfObjects.length + "</div><span class='IIGheadline'>" + capt01 + " <span class='IIGheadline2'>" + capt02 + "</span></span></div></div>");
            //$(this).after( "<div class='InlineImageGalleryPre'><div class='InlineImageGalleryPreThumb'><i class='galleryicon icon-gallery_2'></i></div><div class='InlineImageGalleryPreText'>PHOTO GALLERY</div></div><div class='InlineImageGalleryBase'><div class='InlineImageGalleryMain'>"+listOfObjects[0].outerHTML+"</div><div class='InlineImageGalleryPrev'></div><div class='InlineImageGalleryNext'></div><div class='InlineImageGalleryText'><div class='IIGcountIcon'><i class='galleryicon icon-gallery_2'></i></div><div class='IIGcount'>1&nbsp;&nbsp;of&nbsp;&nbsp;"+listOfObjects.length+"</div><span class='IIGheadline'>"+listOfObjects[0].dataset.caption1+" <span class='IIGheadline2'>"+listOfObjects[mainIIG].dataset.caption2+"</span></span></div></div>" );
            $(this).remove();
            //console.log(listOfObjects);
            //$('.articleContent').css("color","#F00");
        });
        var IIGlength = listOfObjects.length;
        //console.log(IIGlength);
        $('.InlineImageGalleryNext').click(function () {
            iignext();
        })
        $('.InlineImageGalleryPrev').click(function () {
            iigprev();
        })
        $('.iigNextArrow').click(function () {
            iignext();
        })
        $('.iigPrevArrow').click(function () {
            iigprev();
        })
        //
        if ($('.InlineImageGalleryBase').length) {
            adjustIIG();
        }
        //
        if ($('.suspendedR').length) {
            adjustPQ();
        }
        //$('.suspended').each(function (i, obj) {
        //    var thisW = $(this).width();
        //    var thisH = $(this).height();
        //    if(thisW>thisH){
        //        $(this).css("width",450);
        //    }
        //});

    }
    function getCommentCount() {
        var see = $(".disqusLink").text();
        if (see == "") {
            setTimeout(getCommentCount, 500);
        }
        else {
            var i = parseInt(see);
            $(".commentCount").each(function (ii, v) {
                $(v).text(i.toString());
            });

        }
    }
    var scrollwidthDU = function () {

        var inner = document.createElement('p');
        inner.style.width = "100%";
        inner.style.height = "200px";

        var outer = document.createElement('div');
        outer.style.position = "absolute";
        outer.style.top = "0px";
        outer.style.left = "0px";
        outer.style.visibility = "hidden";
        outer.style.width = "200px";
        outer.style.height = "150px";
        outer.style.overflow = "hidden";
        outer.appendChild(inner);

        document.body.appendChild(outer);
        var w1 = inner.offsetWidth;
        outer.style.overflow = 'scroll';
        var w2 = inner.offsetWidth;
        if (w1 == w2) w2 = outer.clientWidth;

        document.body.removeChild(outer);

        return (w1 - w2);

    }();
    function adjustPrevNext() {

        var hn = $(".nextText").height();
        var hp = $(".prevText").height();
        var h = Math.max(hn + 24, hp + 24);
        //console.log("prev " + hp + " next " + hn);
        $("#content_0_nextLink").css("height", h + "px");
        $("#content_0_prevLink").css("height", h + "px");
        //$(".nextText").css("padding-top", (((h-hn) / 2) + 8) + "px");
        //$(".prevText").css("padding-top", (((h-hp) / 2) + 8) + "px");

        $(".nextArrow").css("padding-top", (((h - 33) / 2)) + "px");
        $(".prevArrow").css("padding-top", (((h - 33) / 2)) + "px");
    }
    function doOmnitureEvent(event) {
        try {
            s.linkTrackVars = "events,eVar9";
            s.linkTrackEvents = "event11,event12,event13,event15";
            s.events = event;
            s.tl(true, 'o', 'article');
        } catch (e) {
            //console.log(e.message);
            //console.log(e.name);
        }
    }

    $(document).ready(function () {

        // Omniture Stuff
        var tagsLocation = $(".TGN_site_Footer").offset().top; // was tagsLocation
        var scrolledToTags = false;
        var scrolledToComments = false;
        var tgnbody = $(".TGN_site");
        $(".fbShareThis").click(function () {
            s.eVar9 = "facebook share";
            doOmnitureEvent("event11");
        });
        $(".twitterShareThis").click(function () {
            s.eVar9 = "twitter share";
            doOmnitureEvent("event12");
        });
        $(".TGN_site").scroll(function () {

            if (scrolledToTags === false) {
                if (tgnbody.height() + tgnbody.scrollTop() > tagsLocation) {
                    scrolledToTags = true;
                    doOmnitureEvent("event13");
                }
            }
            if (scrolledToComments === false) {
                if (tgnbody.scrollTop() > tagsLocation) {
                    scrolledToComments = true;
                    doOmnitureEvent("event15");
                }
            }
        });
    });

    $(document).ready(function () {
    });
</script></div>

                        </div>
                        <div class="TGN_site_Article_readnext">
                            
                            
    <style>

#TGN_RelatedContent_ArticlesBox {
    display: flex;
    width: 100%;
    justify-content: space-between;
    align-items: flex-start;
}
.TGN_RelatedContent_Slide {
    width: 32%;
    display: none;
}
.TGN_RelatedContent_Slide:hover .TGN_RelatedContent_FeatureArticleRighttitle {
    text-decoration:underline;
}
.TGN_RelatedContent_Slide:nth-child(-n+3){
    display:block;
}
    .TGN_RelatedContent_Holder {
        margin-top: 40px;
        margin-bottom: 40px;
        padding: 0px;
    }

    .TGN_RelatedContent_Title {
        color: black;
        margin-left: 0px;
        margin-bottom: 8px;
        font-family: source-serif-pro, 'Source Serif Pro', 'LyonDisplay-Medium', serif;
        font-size: 32px;
        font-weight: 600;
        line-height: 28px;
        height: 38px;
        letter-spacing: 0.06px;
        display: flex;
    }

    .TGN_RelatedContent_Holder .TGN_site_Titledsectionstopright {
        display: none;
    }

    .TGN_RelatedContent_Holder .TGN_site_Moreitems {
        cursor: pointer;
        display: none;
    }

    .TGN_RelatedContent_Scroller {
        overflow-y: hidden;
        overflow-x: hidden;
        display: flex;
        align-items: center;
        justify-content: space-between;
    }

    .TGN_RelatedContent_RightArrow {
        display: none;
        text-align: center;
        font-size: 32px;
        cursor: pointer;
        color: black;
    }

    .TGN_RelatedContent_FeatureArticle {
        display: inline-block;
    }
.TGN_RelatedContent_FeatureArticleLink {
    display: flex;
    align-items: flex-start;
    align-content: flex-start;
    text-decoration: none;
    justify-content: flex-start;
    flex-flow: column;
}
.TGN_RelatedContent_FeatureArticleTop {
    width: 100%;
    display: block;
}
.TGN_RelatedContent_FeatureArticleRighttitle {
    color: #000000;
    font-family: source-serif-pro, 'Source Serif Pro', 'LyonDisplay-Medium', serif;
    font-weight: 700;
    font-size: 18px;
    line-height: 20px;
    margin-top: 10px;
    margin-bottom: 7px;
}
.TGN_RelatedContent_FeatureArticleRightblurb {
    margin-bottom: 2px;
    color: #404040;
    font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
    font-size: 14px;
    line-height: 18px;
    overflow-wrap: break-word;
}
    .TGN_RelatedContent_FeatureArticleRightbydate {
        color: black;
        font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
        font-size: 18px;
        line-height: 30px;
        font-weight: 400;
        display: none;
    }

    .TGN_RelatedContent_FeatureArticleRightdate {
        display: none;
    }

    #TGN_RelatedContent_FeatureArticleLeft {
        width: 47.9%;
    }

    #TGN_RelatedContent_FeatureArticleRight {
        margin-left: 3%;
        width: 47.9%;
    }
.TGN_RelatedContent_FeatureArticleImg {
    width: 100%;
    display: block;
}
.TGN_RelatedContent_FeatureArticleImg img {
    width: 100%;
}
    @media all and (min-width: 1021px) {
        /*Desktop only*/
    }

    @media all and (min-width: 681px) {
        /*Desktop and Tablet*/
    }

    @media all and (min-width: 681px) and (max-width: 1020px) {
        /*Tablet only*/
    }

    @media all and (max-width: 1110px) {
    }

    @media all and (max-width: 1020px) {
        .TGN_RelatedContent_Title {
            height: 30px;
        }
    }

    @media all and (max-width: 980px) {
        .TGN_RelatedContent_RightArrow {
        }

        .TGN_RelatedContent_Holder {
            margin-left: 30px;
            margin-right: 30px;
        }
    }

    @media all and (max-width: 780px) {
        .TGN_RelatedContent_RightArrow {
        }

        .TGN_RelatedContent_Holder {
            margin-left: 0px;
            margin-right: 0px;
        }
    }

    @media all and (max-width: 680px) {
        .TGN_RelatedContent_Title {
            margin-bottom: 10px;
        }

        .TGN_RelatedContent_FeatureArticleLink {
            align-items: flex-start;
        }

        #TGN_RelatedContent_FeatureArticleLeft {
            width: 33%;
            background: #808080;
        }

        #TGN_RelatedContent_FeatureArticleRight {
            margin-left: 3%;
            width: 64%;
        }

        .TGN_RelatedContent_FeatureArticleRighttitle {
            font-size: 18px;
            line-height: 21px;
            margin-top: 2px;
            margin-bottom: 2px;
        }

        .TGN_RelatedContent_FeatureArticleRightblurb {
            font-size: 14px;
            line-height: 17px;
        }

        .TGN_RelatedContent_FeatureArticleImg {
            display: block;
            width: 100%;
        }

        .TGN_RelatedContent_Holder .TGN_site_Titledsectionstopright {
            /*display:flex;*/
        }

        .TGN_RelatedContent_RightArrow {
            display: none;
        }
        
.TGN_RelatedContent_Slide {
    width: 49%;
    display: none;
}
.TGN_RelatedContent_Slide:nth-child(3){
    display:none;
}
.TGN_RelatedContent_Slide:nth-child(-n+2){
    display:block;
}
    }
    @media all and (max-width: 480px) {
#TGN_RelatedContent_ArticlesBox {
    flex-flow: column;
}
.TGN_RelatedContent_Slide {
    width: 100%;
    display: block;
        margin-bottom: 20px;
}
.TGN_RelatedContent_Slide:nth-child(-n+4){
    display:block;
}
    }
</style>
<div class="TGN_RelatedContent_Holder">
    <div class="TGN_RelatedContent_Title">
        <div class="TGN_site_Titledsectionstopleft">
            <div class="TGN_site_Titledsectionstitle">Read this next</div>
        </div>
        <div class="TGN_site_Titledsectionstopright">
            <div class="TGN_site_Moreitems">NEXT</div>
            <div class="TGN_site_Moreitemsarrow"><span class="TGN_RelatedContent_MobileRightArrow"><i class="icon-left-point-arrow"></i></span></div>
        </div>
    </div>
    <div class="TGN_RelatedContent_Scroller">
        <div id="TGN_RelatedContent_ArticlesBox">
            
        </div>
        <div class="TGN_RelatedContent_RightArrow">
            <i class="icon-left-point-arrow"></i>
        </div>
    </div>
</div>


<script id="TGN_RelatedContentItem" type="text/x-handlebars-templates">
    {{#each ArticleList}}
    <div class="TGN_RelatedContent_Slide" data-articleID="{{ArticleID}}">
        <a class="TGN_RelatedContent_FeatureArticleLink" href="{{ArticleUrl}}">
            <div class="TGN_RelatedContent_FeatureArticleTop">
                <div class="TGN_RelatedContent_FeatureArticleImg"><img src="{{ImageUrl}}" data-src="{{SearchThumbUrl}}" data-blogroll-src="{{ImageUrl}}" data-cover="{{SearchBookCoverUrl}}" data-thumbovercover="{{SearchThumbOverCover}}" data-url="{{ImageUrl}}" data-square-url="{{SearchThumbUrl}}" data-SearchThumbOverCover="{{SearchThumbOverCover}}" data-cover-url="{{SearchBookCoverUrl}}"></div>
            </div>
            <div class="TGN_RelatedContent_FeatureArticleBottom">
                <div class="TGN_RelatedContent_FeatureArticleRighttitle">{{{SearchHeadline}}}</div>
                <div class="TGN_RelatedContent_FeatureArticleRightblurb" style="white-space: pre-line">{{{SearchBlurb}}}</div>
            </div>
        </a>
    </div>
    {{/each}}
</script>


<script type="text/javascript">
    $(document).ready(function () {
        //console.log("TGNRelatedContent_JS");
        GetThreeRelatedContentItems();
    });
    function GetThreeRelatedContentItems() {
        $.ajax({
            url: "/api/TGNWebAPI/GetThreeRelatedContentItems",
            dataType: "json",
            data: {
                pageID: TGNPageID.toUpperCase()
            },
            type: "GET",
            success: function (data) {
                data = JSON.parse(data);
                var source = $("#TGN_RelatedContentItem").html();
                var template = Handlebars.compile(source);
                var html = template(data);
                var resultsReturnBox = $("#TGN_RelatedContent_ArticlesBox");
                resultsReturnBox.html(html);
            },
            error: function (request, status, error) {
                console.log("ERROR:" + request.responseText + " e:" + error);
                //
            }
        });
    }
    var throttled = TGN_throttle(TGNRC_ShowVisibleThumbnails, 1000);
    $(".TGN_site").scroll(throttled);

    $(window).resize(function () {
        setTimeout(function () {
            TGNRC_ShowVisibleThumbnails();
        }, 150);
    });
    function TGNRC_ShowVisibleThumbnails() {
        //console.log("TGNRC_ShowVisibleThumbnails");
        $(".TGN_RelatedContent_FeatureArticleImg").each(function (i, obj) {
            if ($(this).is(':visible') && TGNRCisOnScreen($(this))) {
                if ($(this).attr("data-url") != "set") {
                    $(this).attr("src", $(this).attr("data-stnurl"));
                    $(this).attr("data-url", "set");
                }
            }
        });
    }
    function TGNRCisOnScreen(element) {
        var doc = document.documentElement;
        var left = (window.pageXOffset || doc.scrollLeft) - (doc.clientLeft || 0);
        var top = (window.pageYOffset || doc.scrollTop) - (doc.clientTop || 0);
        var scrollPosition = top;
        var elementPos = element.offset();
        var boxPos = $("#TGN_RelatedContent_ArticlesBox").offset();
        var curLeft = elementPos.left - boxPos.left;
        var boxScrollLeft = $(".TGN_RelatedContent_Scroller").scrollLeft();
        var screenHeight = $(window).height();
        if ((((elementPos.top - scrollPosition) + (element.height() / 1.5)) < screenHeight) && ((curLeft - boxScrollLeft) < $("#TGN_RelatedContent_ArticlesBox").width())) {
            return true;
        } else {
            return false;
        }
    }
</script>

                        </div>
                        <div class="TGN_site_Article_cta">
                            
                            
    

                        </div>
                        <div class="TGN_site_Article_comments">
                            
    
    <script src="//cdn.livefyre.com/Livefyre.js"></script>
<style>
    .comment-roadblock {
        display: block;
        background-color: #3379be;
        color: white;
        line-height: 60px;
        text-align: center;
        width: 240px;
        height: 60px;
        margin-right: auto;
        margin-left: auto;
        cursor: pointer;
        font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
    font-weight: 600;
        font-style: normal;
        margin-bottom: 20px;
    }
.commentHeading {
    /*font-style: normal;
    margin-bottom: 24px;
    display: block;
    width: 100%;
    text-align: left;
    color: #000000;
    font-family: 'Roboto Condensed', 'Asap Condensed', 'neue-haas-unica', sans-serif;
    font-size: 28px;
    letter-spacing: -0.07px;
    line-height: 34px;
    font-weight: 600;
    text-transform: uppercase;
    border-bottom: 1px solid black;*/
    max-width: 78px !important;
    display: block;
    margin-bottom: 12px;
}

    .commentContactUs {
        border-bottom: 1px solid #ccc;
    }

    .commentsLockedText {
        text-align: center;
        color: rgb(112,112,112);
        font-size: 10px;
    }

    .commentsLocked {
        width: 100%;
            clear: both;
            display:none;
            margin-bottom: 90px;
                position: relative;
    top: 0px;
    }

    .commentsLockedHR {
        display: block;
        height: 1px;
        border: 0;
        border-top: 1px solid #ccc;
        margin: 16px 0;
        padding: 0;
    }

        @media all and (max-width: 680px) {
            .commentHeading {
    max-width: 59px !important;
}
        }
</style>

<script>
    var liveFyreLive = new Date("2017/2/12");
    var month = 31 * 1000 * 60 * 60 * 24;
    var days = 1000 * 60 * 60 * 24;
    var monthsLive = 1;
    var CommentState = false;
    var userauthurl = "";
    var userAuthToken = "";
    var userNameFyre = "";
    var UserCommentToken = "UserCommentToken";
    var fyreeditor;
    var LFNetwork = "gatesnotes";//-int";
    var LFSite = "385155";
    var networkConfig = {
        network: 'gatesnotes.fyre.co'//-int.fyre.co'
    };
    var GNCommDisplayedCommentsNumber = 0;
    var GNCommActiveCommentsNumber = 0;
    var convConfig = {
        siteId: LFSite,//'TGNUAT:385155'prod'TGNWWW:385143'
        articleId: 'B08E5E0D-3677-48AC-9448-92B0AA5D0040',  // need to put in url
        el: 'livefyre',
        collectionMeta: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJhcnRpY2xlSWQiOiJCMDhFNUUwRC0zNjc3LTQ4QUMtOTQ0OC05MkIwQUE1RDAwNDAiLCJ0YWdzIjoiQXJ0aWNsZSIsInRpdGxlIjoiWW91IHNob3VsZCBhcHByZWNpYXRlIGdlcm1zIiwidHlwZSI6ImxpdmVjb21tZW50cyIsInVybCI6Imh0dHBzOi8vd3d3LmdhdGVzbm90ZXMuY29tL0Jvb2tzL0ktQ29udGFpbi1NdWx0aXR1ZGVzIiwiaXNzIjoidXJuOmxpdmVmeXJlOmdhdGVzbm90ZXMuZnlyZS5jbzpzaXRlPTM4NTE0MyJ9.0DLuDaxLge-GM6iLCH5VAlzI2POBEK7sE8X8yR02ARc',
        checksum: '4767acf2f302c34a4ae4fad1b5cf1810',
        initialNumVisible: 5,
        animations: false,
        editorCss: '{background: ‘#ccc’, color: ‘red’, font: ’30px “Helvetica Neue”, Helvetica, Arial, Geneva, sans-serif’}',
    };

    var convConfigTab = {
        siteId: LFSite,//'TGNUAT:385155'prod'TGNWWW:385143'
        articleId: 'B08E5E0D-3677-48AC-9448-92B0AA5D0040',  // need to put in url
        el: 'livefyre-tablet',
        collectionMeta: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJhcnRpY2xlSWQiOiJCMDhFNUUwRC0zNjc3LTQ4QUMtOTQ0OC05MkIwQUE1RDAwNDAiLCJ0YWdzIjoiQXJ0aWNsZSIsInRpdGxlIjoiWW91IHNob3VsZCBhcHByZWNpYXRlIGdlcm1zIiwidHlwZSI6ImxpdmVjb21tZW50cyIsInVybCI6Imh0dHBzOi8vd3d3LmdhdGVzbm90ZXMuY29tL0Jvb2tzL0ktQ29udGFpbi1NdWx0aXR1ZGVzIiwiaXNzIjoidXJuOmxpdmVmeXJlOmdhdGVzbm90ZXMuZnlyZS5jbzpzaXRlPTM4NTE0MyJ9.0DLuDaxLge-GM6iLCH5VAlzI2POBEK7sE8X8yR02ARc',
        checksum: '4767acf2f302c34a4ae4fad1b5cf1810',
        animations: false,
        editorCss: '{background: ‘#ccc’, color: ‘red’, font: ’30px “Helvetica Neue”, Helvetica, Arial, Geneva, sans-serif’}',

    };


    //function isGNILoggedIn() {
    //    if (currentUserActive == "true") {
    //        if (currentUserData.IsApproved != "false" && currentUserData.IsApproved != undefined && currentUserData.IsApproved != "") {
    //            return true;
    //        } else {
    //            return false;
    //        }
    //    } else {
    //        return false;
    //    }
    //}
    function setGNILoggedIn() {
        //$(".fyre-editor").css("display", "block");
        //$(".GNCommProfileImage").attr("style", $("#mobart_Art_USER_HolderPI").attr("style") + ";margin-top: 0px;margin-right: 10px;").addClass($("#mobart_Art_USER_HolderPI").attr("class"));
        $(".fyre-comment-wrapper").css("pointer-events", "all");
        $(".GNCommFooterFlag").css("display", "inline-block");
    }
    function setGNILoggedOut() {
        if (CommentState != false) {
            //$(".GNCommProfileImage").attr("style", "").removeClass($("#mobart_Art_USER_HolderPI").attr("class"));
            $(".fyre-comment-wrapper").css("pointer-events", "none");
            $(".GNCommFooterFlag").css("display", "none");
            CommentState = false;
            commentLogout();
        }
    }
    function commentLoggedIn() {
        setGNILoggedIn();
    }
    function commentLoggedOut() {
        //setGNILoggedOut();
    }
    function setGNICommentUI() {
        if (isGNILoggedIn()) {
            setGNILoggedIn();
        } else {
            setGNILoggedOut();
        }
    }
    function getCommentToken() {
        //console.log("UserCommentToken: " + localStorage.getItem('UserCommentToken'));
        if (localStorage.getItem('UserCommentToken') == null || localStorage.getItem('UserCommentToken') == "null" || localStorage.getItem('UserCommentToken') == "") {
            // if no local storage version get from endpoint
            Livefyre.auth.logout(commentLoggedOut);
            $.ajax({
                url: Auth4Config_AuthServiceURL + "CommentToken",
                dataType: "json",
                data: {
                    network: escape(LFNetwork),
                    site: escape(LFSite)
                },
                headers: { 'authorization': 'Bearer ' + localStorage.getItem(tokenKey) },
                type: "GET",
                success: function (data) {
                    userAuthToken = data.Token;
                    localStorage.setItem('UserCommentToken', data.Token);
                    userName = data.UserName;
                    userNameFyre = data.UserName;
                    Livefyre.auth.login(commentLoggedIn);
                    //alert("Comment Token Good " + data.UserName);
                },
                error: function (xhr, error, thrown) {
                    //alert("Bad " + xhr.statusText);
                },

            });
        } else {
            // get local storage
            userAuthToken = localStorage.getItem('UserCommentToken');//+"zzzz";//
            userName = localStorage.getItem('UserName');
            userNameFyre = localStorage.getItem('UserName');
            GNCommUnfollowCollection();
            //Livefyre.auth.login(commentLoggedIn);
        }
        return false;
    }
    function GNCommSyncMe() {
        $.ajax({
            url: Auth4Config_AuthServiceURL + "SyncMe",
            dataType: "json",
            headers: { 'authorization': 'Bearer ' + localStorage.getItem(tokenKey) },
            type: "GET",
            success: function (data) {
                console.log("SyncMeSuccess");
            },
            error: function (xhr, error, thrown) {
                //alert("Bad " + xhr.statusText);
                console.log("SyncMeError");
            },

        });
        return false;
    }
    function commentLogin() {
        getCommentToken();
    }
    function commentLogout() {
        //alert("Comment Logging out");
        //Livefyre.auth.logout(commentLoggedOut);
        //localStorage.setItem(userCommentToken, "");
        //localStorage.setItem(tokenKey, "");
    }


    $(document).ready(function () {
        $.ajaxSetup({ cache: false });
        var diff = Math.abs(new Date() - liveFyreLive);
        daysLive = Math.floor(diff / days);
        monthsLive = Math.floor(diff / month);

        //if (daysLive < 30) {
        //    $("#commentLockedDuration").text(daysLive.toString() + " days");
        //} else if (monthsLive > 1) {
        //    $("#commentLockedDuration").text(monthsLive.toString() + " months");
        //} else {
        //    $("#commentLockedDuration").text("a month");
        //}
        var myURL = document.domain;

        if (myURL == "www.gatesnotes.com") {// || myURL == "local.gatesnotes.com"
            LFNetwork = "gatesnotes";
            LFSite = "385143";//prod site id
            convConfig = {
                siteId: LFSite,//'TGNUAT:385155'prod'TGNWWW:385143'
                articleId: 'B08E5E0D-3677-48AC-9448-92B0AA5D0040',  // need to put in url
                el: 'livefyre',
                collectionMeta: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJhcnRpY2xlSWQiOiJCMDhFNUUwRC0zNjc3LTQ4QUMtOTQ0OC05MkIwQUE1RDAwNDAiLCJ0YWdzIjoiQXJ0aWNsZSIsInRpdGxlIjoiWW91IHNob3VsZCBhcHByZWNpYXRlIGdlcm1zIiwidHlwZSI6ImxpdmVjb21tZW50cyIsInVybCI6Imh0dHBzOi8vd3d3LmdhdGVzbm90ZXMuY29tL0Jvb2tzL0ktQ29udGFpbi1NdWx0aXR1ZGVzIiwiaXNzIjoidXJuOmxpdmVmeXJlOmdhdGVzbm90ZXMuZnlyZS5jbzpzaXRlPTM4NTE0MyJ9.0DLuDaxLge-GM6iLCH5VAlzI2POBEK7sE8X8yR02ARc',
                checksum: '4767acf2f302c34a4ae4fad1b5cf1810',
                initialNumVisible: 5,
                animations: false,
                editorCss: '{background: ‘#ccc’, color: ‘red’, font: ’30px “Helvetica Neue”, Helvetica, Arial, Geneva, sans-serif’}',
            };

            convConfigTab = {
                siteId: LFSite,//'TGNUAT:385155'prod'TGNWWW:385143'
                articleId: 'B08E5E0D-3677-48AC-9448-92B0AA5D0040',  // need to put in url
                el: 'livefyre-tablet',
                collectionMeta: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJhcnRpY2xlSWQiOiJCMDhFNUUwRC0zNjc3LTQ4QUMtOTQ0OC05MkIwQUE1RDAwNDAiLCJ0YWdzIjoiQXJ0aWNsZSIsInRpdGxlIjoiWW91IHNob3VsZCBhcHByZWNpYXRlIGdlcm1zIiwidHlwZSI6ImxpdmVjb21tZW50cyIsInVybCI6Imh0dHBzOi8vd3d3LmdhdGVzbm90ZXMuY29tL0Jvb2tzL0ktQ29udGFpbi1NdWx0aXR1ZGVzIiwiaXNzIjoidXJuOmxpdmVmeXJlOmdhdGVzbm90ZXMuZnlyZS5jbzpzaXRlPTM4NTE0MyJ9.0DLuDaxLge-GM6iLCH5VAlzI2POBEK7sE8X8yR02ARc',
                checksum: '4767acf2f302c34a4ae4fad1b5cf1810',
                animations: false,
                editorCss: '{background: ‘#ccc’, color: ‘red’, font: ’30px “Helvetica Neue”, Helvetica, Arial, Geneva, sans-serif’}',

            };
        }

       var uName = localStorage.getItem('UserName');
        if ((uName == null) || (uName == "")) {
            uName = "NoName";
        }
        var uNameNoSP = uName.replace(" ", "");
        if (localStorage.getItem(tokenKey) == "") {
            localStorage.setItem(UserCommentToken, "");
        } else {
            //getCommentToken();
        }
        // poll for log-in-out
        setInterval(checkGNIState, 500);
    });
    function checkGNIState() {
        //console.log(CommentState +":"+ isGNILoggedIn())
        if (CommentState != isGNILoggedIn()) {
            if (isGNILoggedIn()) {
                commentLogin();
                CommentState = true;
                $("#GNCommPleaseVerify").css("display", "none");
                $("#GNCommSignUpOrLogIn").css("display", "none");
            }
        }
    }

    Livefyre.require(['fyre.conv#3', 'auth'], function (Conv, auth) {
        //new Conv(networkConfig, [convConfig, convConfigTab], function (commentsWidget) {
        new Conv(networkConfig, [convConfig], function (commentsWidget) {
            commentsWidget.on('commentPosted', function (data) {
                cleanPosts();
                //console.log("GNComm:EVENT:commentPosted");
                localStorage.setItem("userCommentTemp", "");
            });
            commentsWidget.on('initialRenderComplete', function (data) {
                lfInitialRenderComplete(data);
                //console.log("GNComm:EVENT:initialRenderComplete" + GNCommGetTimeCheck());
            });
            commentsWidget.on('userLoggedIn', function (data) {
                //if (CommentState == true) {
                //    setGNICommentUI();
                //    console.log("GNComm:EVENT:userLoggedIn");
                //    GNCommUserEmail = data.id;
                //    GNCommUserId = GNCommUserEmail.replace("@gatesnotes.fyre.co", "");
                //    GNCommAvater = data.avatar;
                //    GNCommdisplayName = data.displayName;
                //    GNCommisModerator = data.isModerator;
                //    //$(".goog-inline-block .fyre-button-right-inner-box").text("+");
                //} else {
                //    commentLogout();
                //}
                setGNICommentUI();
                //console.log("GNComm:EVENT:userLoggedIn");
                GNCommUserEmail = data.id;
                GNCommUserId = GNCommUserEmail.replace("@gatesnotes.fyre.co", "");
                localStorage.setItem("GNCommUserId", GNCommUserEmail);
                localStorage.setItem("GNCommUserIdNum", GNCommUserId);
                GNCommAvater = data.avatar;
                GNCommdisplayName = data.displayName;
                GNCommisModerator = data.isModerator;
                //$(".goog-inline-block .fyre-button-right-inner-box").text("+");
            });
            commentsWidget.on('userLoggedOut', function (data) {
                setGNICommentUI();
                //console.log("GNComm:EVENT:userLoggedOut");
                localStorage.setItem("userCommentTemp", "");
            });
            commentsWidget.on('commentCountUpdated', function (data) {
                //numcommentsLF = "Open Comments (" + data.toString() + ")";
                //$(".fyre-stream-more .fyre-buttonT").text(numcommentsLF);
                // Adjust for legacy number
                GNCommActiveCommentsNumber = data;
                setTimeout(function () {
                    GNCommCountDisplayed();
                    cleanPosts();
                }, 100);
                //console.log("GNComm:EVENT:commentCountUpdated");
                localStorage.setItem("userCommentTemp", "");
            });
            commentsWidget.on('showMore', function (data) {
                event.stopPropagation();
                setTimeout(function () {
                    $(".GNCommForm").attr("data-counted", "reset");
                    cleanPosts();
                }, 300);
                //console.log("GNComm:EVENT:showMore");
            });
        });
        auth.delegate({
            login: function (callback) {
                //alert("Comment Login");
                //console.log("GNComm:EVENT:login");
                callback(null, { livefyre: userAuthToken });

            },
            logout: function (callback) {
                //alert("Comment Logout");
                //console.log("GNComm:EVENT:Logout");
                callback(null);
            },
        });
    });

</script>


<style>
.TGN_site_Article_comments {
    display: flex;
    flex-flow: column;
    margin-bottom: 20px;
}
    .GNCommForm {
        box-sizing: border-box;
        color: rgb(45,45,45);
        display: block;
        font-family: Lusitana, serif;
        font-feature-settings: 'kern' 1, 'liga' 1, 'pnum' 1;
        font-size: 16px;
        font-weight: 200;
        line-height: 24px;
        margin-bottom: 10px;
        margin-left: 0px;
        margin-right: 0px;
        margin-top: 0px;
        text-size-adjust: 100%;
        -webkit-font-smoothing: antialiased;
    }
    .GNCommPostWrapper {
        background-attachment: scroll;
        background-clip: border-box;
        background-color: rgb(255, 255, 255);
        background-image: none;
        background-origin: padding-box;
        background-position-x: 0%;
        background-position-y: 0%;
        background-size: auto;
        border-bottom-color: rgb(232, 232, 232);
        border-bottom-style: solid;
        border-bottom-width: 1px;
        border-image-outset: 0px;
        border-image-repeat: stretch;
        border-image-slice: 100%;
        border-image-source: none;
        border-image-width: 1;
        border-left-color: rgb(232, 232, 232);
        border-left-style: solid;
        border-left-width: 1px;
        border-right-color: rgb(232, 232, 232);
        border-right-style: solid;
        border-right-width: 1px;
        border-top-color: rgb(232, 232, 232);
        border-top-style: solid;
        border-top-width: 1px;
        box-sizing: border-box;
        color: #b0b0b0;
        display: flex;
        font-family: Lusitana, serif;
        font-feature-settings: 'kern' 1, 'liga' 1, 'pnum' 1;
        font-size: 16px;
        font-weight: 200;
        line-height: 24px;
        padding-bottom: 10px;
        padding-left: 10px;
        padding-right: 5px;
        padding-top: 10px;
        text-size-adjust: 100%;
        transition-delay: 0s;
        transition-duration: 0.4s;
        transition-property: border-color;
        transition-timing-function: ease-in-out;
        -webkit-font-smoothing: antialiased;
        display: flex;
    justify-content: flex-start;
    align-items: center;
    align-content: center;
    }

    textarea[placeholder]:empty:before {
        content: attr(placeholder);
        color: #d3d3d3;
        font-size: 11px;
        font-family: Lusitana, serif;
    }

    textarea[placeholder]:empty:focus:before {
        content: "";
    }
    .GNCommText {
        box-sizing: border-box;
        color: #b0b0b0;
        display: flex;
        flex-basis: 0%;
        flex-grow: 1;
        flex-shrink: 1;
            font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
        font-feature-settings: 'kern' 1, 'liga' 1, 'pnum' 1;
        font-size: 14px;
        font-weight: 200;
        line-height: 24px;
        text-size-adjust: 100%;
        -webkit-box-flex: 1;
        -webkit-font-smoothing: antialiased;
    }
        .GNCommText > textarea {
            background-attachment: scroll;
            background-clip: border-box;
            background-color: rgba(0, 0, 0, 0);
            background-image: none;
            background-origin: padding-box;
            background-position-x: 0%;
            background-position-y: 0%;
            background-size: auto;
            border-bottom-color: #b0b0b0;
            border-bottom-style: none;
            border-bottom-width: 0px;
            border-image-outset: 0px;
            border-image-repeat: stretch;
            border-image-slice: 100%;
            border-image-source: none;
            border-image-width: 1;
            border-left-color: #b0b0b0;
            border-left-style: none;
            border-left-width: 0px;
            border-right-color: #b0b0b0;
            border-right-style: none;
            border-right-width: 0px;
            border-top-color: #b0b0b0;
            border-top-style: none;
            border-top-width: 0px;
            box-sizing: border-box;
            color: black !important;
            cursor: auto;
            display: block;
            flex-basis: 0%;
            flex-direction: column;
            flex-grow: 1;
            flex-shrink: 1;
            font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
        font-feature-settings: 'kern' 1, 'liga' 1, 'pnum' 1;
        font-size: 14px;
            font-stretch: normal;
            font-style: normal;
            font-variant-caps: normal;
            font-variant-ligatures: normal;
            font-variant-numeric: normal;
            height: 25px;
            letter-spacing: normal;
            line-height: normal;
            margin-bottom: 0px;
            margin-left: 0px;
            margin-right: 0px;
            margin-top: 5px;
            min-height: 25px;
            overflow-x: hidden;
            overflow-y: hidden;
            padding-bottom: 0px;
            padding-left: 0px;
            padding-right: 0px;
            padding-top: 0px;
            resize: none;
            text-align: start;
            text-indent: 0px;
            text-rendering: auto;
            text-shadow: none;
            text-size-adjust: 100%;
            text-transform: none;
            user-select: text;
            white-space: pre-wrap;
            word-spacing: 0px;
            word-wrap: break-word;
            writing-mode: horizontal-tb;
            -webkit-appearance: none;
            -webkit-box-flex: 1;
            -webkit-font-smoothing: antialiased;
            -webkit-border-image: none;
            -webkit-rtl-ordering: logical;
        border: none;
    overflow: auto;
    outline: none;
    -webkit-box-shadow: none;
    -moz-box-shadow: none;
    box-shadow: none;

        font-family: source-serif-pro, 'Source Serif Pro', 'LyonDisplay-Medium', serif;
        font-weight: 600;
    font-size: 16px;
    line-height: 19px;
        }
.GNCommPost {
    box-sizing: border-box;
    color: #b0b0b0;
    cursor: pointer;
    display: block;
    font-family: Lusitana, serif;
    font-feature-settings: 'kern' 1, 'liga' 1, 'pnum' 1;
    font-size: 20px;
    font-weight: 200;
    height: 20px;
    line-height: 20px;
    margin-left: 0px;
    text-size-adjust: 100%;
    vertical-align: middle;
    width: 30px;
    -webkit-font-smoothing: antialiased;
}
        .GNCommPost > svg {
            box-sizing: border-box;
            color: rgba(0,0,0,0.12);
            cursor: pointer;
            display: inline;
            font-family: Lusitana, serif;
            font-feature-settings: 'kern' 1, 'liga' 1, 'pnum' 1;
            font-size: 40px;
            font-weight: 200;
            height: 30px;
            line-height: 24px;
            margin-left: 0px;
            text-size-adjust: 100%;
            vertical-align: middle;
            width: 30px;
            -webkit-font-smoothing: antialiased;
        }

        
    .GNCommReply {
        box-sizing: border-box;
        color: rgb(45,45,45);
        display: block;
        font-family: Lusitana, serif;
        font-feature-settings: 'kern' 1, 'liga' 1, 'pnum' 1;
        font-size: 16px;
        font-weight: 200;
        line-height: 24px;
        margin-bottom: 10px;
        margin-left: 0px;
        margin-right: 0px;
        margin-top: 12px;
        text-size-adjust: 100%;
        -webkit-font-smoothing: antialiased;
    }
    .GNCommReplyPostWrapper {
        background-attachment: scroll;
        background-clip: border-box;
        background-color: rgb(255, 255, 255);
        background-image: none;
        background-origin: padding-box;
        background-position-x: 0%;
        background-position-y: 0%;
        background-size: auto;
        border-bottom-color: rgb(232, 232, 232);
        border-bottom-style: solid;
        border-bottom-width: 1px;
        border-image-outset: 0px;
        border-image-repeat: stretch;
        border-image-slice: 100%;
        border-image-source: none;
        border-image-width: 1;
        border-left-color: rgb(232, 232, 232);
        border-left-style: solid;
        border-left-width: 1px;
        border-right-color: rgb(232, 232, 232);
        border-right-style: solid;
        border-right-width: 1px;
        border-top-color: rgb(232, 232, 232);
        border-top-style: solid;
        border-top-width: 1px;
        box-sizing: border-box;
        color: #b0b0b0;
        display: flex;
        font-family: Lusitana, serif;
        font-feature-settings: 'kern' 1, 'liga' 1, 'pnum' 1;
        font-size: 16px;
        font-weight: 200;
        line-height: 24px;
        padding-bottom: 10px;
        padding-left: 20px;
        padding-right: 5px;
        padding-top: 10px;
        text-size-adjust: 100%;
        transition-delay: 0s;
        transition-duration: 0.4s;
        transition-property: border-color;
        transition-timing-function: ease-in-out;
        -webkit-font-smoothing: antialiased;
    }
    .GNCommReplyText {
        box-sizing: border-box;
        color: #b0b0b0;
        display: flex;
        flex-basis: 0%;
        flex-grow: 1;
        flex-shrink: 1;
            font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
        font-feature-settings: 'kern' 1, 'liga' 1, 'pnum' 1;
        font-size: 14px;
        font-weight: 200;
        line-height: 24px;
        text-size-adjust: 100%;
        -webkit-box-flex: 1;
        -webkit-font-smoothing: antialiased;
    }
        .GNCommReplyText > textarea {
            background-attachment: scroll;
            background-clip: border-box;
            background-color: rgba(0, 0, 0, 0);
            background-image: none;
            background-origin: padding-box;
            background-position-x: 0%;
            background-position-y: 0%;
            background-size: auto;
            border-bottom-color: #b0b0b0;
            border-bottom-style: none;
            border-bottom-width: 0px;
            border-image-outset: 0px;
            border-image-repeat: stretch;
            border-image-slice: 100%;
            border-image-source: none;
            border-image-width: 1;
            border-left-color: #b0b0b0;
            border-left-style: none;
            border-left-width: 0px;
            border-right-color: #b0b0b0;
            border-right-style: none;
            border-right-width: 0px;
            border-top-color: #b0b0b0;
            border-top-style: none;
            border-top-width: 0px;
            box-sizing: border-box;
            color: black !important;
            cursor: auto;
            display: block;
            flex-basis: 0%;
            flex-direction: column;
            flex-grow: 1;
            flex-shrink: 1;
            font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
        font-feature-settings: 'kern' 1, 'liga' 1, 'pnum' 1;
        font-size: 14px;
            font-stretch: normal;
            font-style: normal;
            font-variant-caps: normal;
            font-variant-ligatures: normal;
            font-variant-numeric: normal;
            height: 25px;
            letter-spacing: normal;
            line-height: normal;
            margin-bottom: 0px;
            margin-left: 0px;
            margin-right: 0px;
            margin-top: 5px;
            min-height: 25px;
            overflow-x: hidden;
            overflow-y: hidden;
            padding-bottom: 0px;
            padding-left: 0px;
            padding-right: 0px;
            padding-top: 0px;
            resize: none;
            text-align: start;
            text-indent: 0px;
            text-rendering: auto;
            text-shadow: none;
            text-size-adjust: 100%;
            text-transform: none;
            user-select: text;
            white-space: pre-wrap;
            word-spacing: 0px;
            word-wrap: break-word;
            writing-mode: horizontal-tb;
            -webkit-appearance: none;
            -webkit-box-flex: 1;
            -webkit-font-smoothing: antialiased;
            -webkit-border-image: none;
            -webkit-rtl-ordering: logical;
        border: none;
    overflow: auto;
    outline: none;
    -webkit-box-shadow: none;
    -moz-box-shadow: none;
    box-shadow: none;

        font-family: source-serif-pro, 'Source Serif Pro', 'LyonDisplay-Medium', serif;
            font-weight: 600;
    font-size: 16px;
    line-height: 19px;
        }
    .GNCommReplyPost {
        box-sizing: border-box;
        color: #b0b0b0;
        cursor: pointer;
        display: block;
        font-family: Lusitana, serif;
        font-feature-settings: 'kern' 1, 'liga' 1, 'pnum' 1;
        font-size: 16px;
        font-weight: 200;
        height: 30px;
        line-height: 24px;
        margin-left: 10px;
        text-size-adjust: 100%;
        vertical-align: middle;
        width: 30px;
        -webkit-font-smoothing: antialiased;
    }
        .GNCommReplyPost > svg {
            box-sizing: border-box;
            color: #b0b0b0;
            cursor: pointer;
            display: inline;
            font-family: Lusitana, serif;
            font-feature-settings: 'kern' 1, 'liga' 1, 'pnum' 1;
            font-size: 16px;
            font-weight: 200;
            height: 30px;
            line-height: 24px;
            margin-left: 0px;
            text-size-adjust: 100%;
            vertical-align: middle;
            width: 30px;
            -webkit-font-smoothing: antialiased;
        }



    .cls-1 {
        box-sizing: border-box;
        color: #b0b0b0;
        cursor: pointer;
        display: inline;
        fill: none;
        font-family: Lusitana, serif;
        font-feature-settings: 'kern' 1, 'liga' 1, 'pnum' 1;
        font-size: 16px;
        font-weight: 200;
        height: auto;
        line-height: 24px;
        stroke: rgb(204, 204, 204);
        stroke-miterlimit: 10;
        stroke-width: 2px;
        text-size-adjust: 100%;
        transform-origin: 0px 0px;
        transition-delay: 0s;
        transition-duration: 0.4s;
        transition-property: all;
        transition-timing-function: ease;
        width: auto;
        -webkit-font-smoothing: antialiased;
    }
</style>
 
<script type="text/javascript">

    function autoGrowTextArea2(textField) {
        var cHeight = textField.prop('clientHeight');
        var sHeight = textField.prop('scrollHeight');
        if (cHeight < sHeight) {
            textField.height(sHeight);
            if (textField.prop('clientHeight') < textField.prop('scrollHeight')) {
                var newHeight = textField.prop('scrollHeight') * 2 - textField.prop('clientHeight');
                textField.height(newHeight);
            }
        }
    }
    var GNCommUserEmail = "";
    var GNCommUserId = "";
    var GNCommAvater = "";
    var GNCommdisplayName = "";
    var GNCommisModerator = false;
    var collectionId = 203737780; //"75891292";//"183174663";
    var fyreEmail = GNCommUserId + "@livefyre.com";
    var commentText = "hooo";
    
    function GNCommPostFill(t) {

    }
    function GNCommGetItemData(id) {
        //var url = "https://gatesnotes.bootstrap.fyre.co/api/v3.0/content/thread/?collection_id=" + collectionId + "&content_id=" + id + "&depth_only=true";
        //var dd = "";
        //$.get(url, dd, function (data) {
        //    var see = data;
        //    return see;
        //}
        //);

        //console.log("GNComm:Post:GetItemData:Time:" + GNCommGetTimeCheck());
        $.ajax({
            url: "https://gatesnotes.bootstrap.fyre.co/api/v3.0/content/thread/?collection_id=" + collectionId + "&content_id=" + id + "&depth_only=true&nocache="+new Date().toString(),
            type: 'GET',
            async: true,
            cache: false,
            timeout: 30000,
            error: function(){
                //return "";
            },
            success: function(data){
                //console.log("GNComm:Post:GetItemDataSuccess:Time:" + GNCommGetTimeCheck());
                var LFitemData = data;
                if (LFitemData.data.content.length > 2) {
                    //console.log("id: "+id + " data: "+ LFitemData.data.content.length);
                    writeThirdLevelMentions(LFitemData.data.content[LFitemData.data.content.length-1].content.id,LFitemData.data.content[LFitemData.data.content.length-1].content.parentId);
                }
                if (LFitemData && LFitemData.data.content[LFitemData.data.content.length-1].content.bodyHtml) {
                    writeLFMessageBodyHTML(LFitemData.data.content[LFitemData.data.content.length-1].content.id,LFitemData.data.content[LFitemData.data.content.length-1].content.bodyHtml);
                }
            }
        });
    }
    function GNCommGetUser() {
        var url = "https://gatesnotes.quill.fyre.co/profiles/?id="+ GNCommUserId +"&lftoken=" + userAuthToken;
        var dd = "";
        $.post(url, dd, function (data) {
            var see = data;
        });

    }
    function GNCommUnfollowCollection(tag_name) {
        var url = "https://gatesnotes.quill.fyre.co/api/v3.0/collection/"+collectionId+"/unfollow/?lftoken=" + userAuthToken;
        var dd = "";
        $.post(url, dd, function (data) {
            var see = data;
            //token is valid
            Livefyre.auth.logout(commentLoggedOut);
            Livefyre.auth.login(commentLoggedIn);
        })
        .fail(function(response) {
            console.log("GNCommUnfollowCollection:Fail:Time:" + GNCommGetTimeCheck());
            console.log('Error: ' + response.responseText);
            //token no longer valid
            localStorage.setItem('UserCommentToken', '');
            getCommentToken();
            //if (response.responseJSON.error_type == "AuthenticationError") {
            //}
        });

    }
    function GNCommHideNotifications() {
        $("#GNCommOOPS").css("display", "none");
        $("#GNCommHTML").css("display", "none");
        $("#GNCommDuplicate").css("display", "none");
        $("#GNCommPleaseVerify").css("display", "none");
        $("#GNCommSignUpOrLogIn").css("display", "none");
        $("#GNCommWaitingtop").css("display", "none");
        $(".GNCommWaiting").css("display", "none");
        $(".GNCommWaiting").css("color","#b0b0b0");
        $(".GNCommWaitingDots").css("display","inline-block");
        $(".GNCommWaitingMessage").html("posting");
        $(".GNCommFooterEditMenu").css("display", "none");
        $(".GNCommReply").css("display", "none");
        $(".GNCommReplyTA").css("height", "25px");
        $(".GNCommReplyTA").val("");
    }
    function GNCommEditPost(id,text) {
        GNCommHideNotifications();
        var url = "https://gatesnotes.quill.fyre.co/api/v3.0/message/" + id + "/edit/?lftoken=" + userAuthToken;
        var dd = "body=" + text + "&collection_id=" + collectionId;
        //console.log("GNComm:Edit:Post:Time:" + GNCommGetTimeCheck());
        $.post(url, dd, function (data) {
            var see = data;
            //console.log("HTML:"+data.data.messages[0].content.bodyHtml);
            //console.log("GNComm:Edit:Data:Time:" + GNCommGetTimeCheck());
            setTimeout(function () {
                cleanPosts();
            }, 100);
        })
        .fail(function(response) {
            console.log("GNComm:Edit:Fail:Time:" + GNCommGetTimeCheck());
            console.log('Error: ' + response.responseText);
            var GNCommFoundItem = $(".fyre-comment-article[data-message-id='" + id + "']");
            if (response.responseJSON.error_type == "DuplicateCommentError") {
                GNCommFoundItem.find(".GNCommReply").after($("#GNCommDuplicate"));
                $("#GNCommDuplicate").css("display", "block");
            } else if (response.responseJSON.error_type == "MalformedCommentError") {
                GNCommFoundItem.find(".GNCommReply").after($("#GNCommHTML"));
                $("#GNCommHTML").css("display", "block");
            } else {
                GNCommFoundItem.find(".GNCommReply").after($("#GNCommOOPS"));
                $("#GNCommOOPS").css("display", "block");
            }
        });
    }
    function GNCommFlag(id, tag) {
        GNCommHideNotifications();
        //URL:https://gatesnotes.quill.fyre.co/api/v3.0/message/696728786/flag/spam/?lftoken=
        var url = "https://gatesnotes.quill.fyre.co/api/v3.0/message/" + id + "/flag/" + tag + "/?lftoken=" + userAuthToken;
        var dd = "message_id=" + id + "&collection_id=" + collectionId + "&flag=" + tag + "&notes=flagFromUI&email";
        //console.log("GNComm:Flag:Post:Time:" + GNCommGetTimeCheck());
        $.post(url, dd, function (data) {
            var see = data;
            //console.log("GNComm:Flag:Data:Time:" + GNCommGetTimeCheck());
            setTimeout(function () {
                cleanPosts();
            }, 100);
        })
        .fail(function(response) {
            console.log("GNComm:Flag:Fail:Time:" + GNCommGetTimeCheck());
            console.log('Error: ' + response.responseText);
            $("#GNCommOOPS").css("display", "block");
        });
    }
    function GNCommDelete(id) {
        GNCommHideNotifications();
        var url = "https://gatesnotes.quill.fyre.co/api/v3.0/message/"+id+"/delete/?collection_id=" + collectionId + "&lftoken=" + userAuthToken + "&site_id=" + LFSite;
        var dd = "";
        //console.log("GNComm:DELETE:Post:Time:" + GNCommGetTimeCheck());
        $.post(url, dd, function (data) {
            var see = data;
            //console.log("GNComm:DELETE:Data:Time:" + GNCommGetTimeCheck());
            setTimeout(function () {
                cleanPosts();
            }, 100);
        })
        .fail(function(response) {
            console.log("GNComm:DELETE:Fail:Time:" + GNCommGetTimeCheck());
            console.log('Error: ' + response.responseText);
            $("#GNCommOOPS").css("display", "block");
        });
    }
    function GNCommLike(id) {
        GNCommHideNotifications();
        var GNCommFoundItem = $(".fyre-comment-article[data-message-id='" + id + "']");
        var url = "https://gatesnotes.quill.fyre.co/api/v3.0/message/"+id+"/like/?collection_id=" + collectionId + "&lftoken=" + userAuthToken;
        var dd = "";
        //console.log("GNComm:Like:Post:Time:" + GNCommGetTimeCheck());
        $.post(url, dd, function (data) {
            var see = data;
            //console.log("GNComm:Like:Data:Time:" + GNCommGetTimeCheck());
            setTimeout(function () {
                cleanPosts();
            }, 100);
            TGNCom_SetEvent(id,"Like",GNCommFoundItem.attr("data-author-id"));
        })
        .fail(function(response) {
            console.log("GNComm:Like:Fail:Time:" + GNCommGetTimeCheck());
            console.log('Error: ' + response.responseText);
        });
    }

    function TGNCom_SetEvent(commentID,type,parentUserID) {
        var d = new Date();
        var iso_time = d.toISOString(); //"2014-05-06T18:49:16.029Z"
        $.ajax({
            url: Auth4Config_AuthServiceURL + "TGNCom_SetEvent",
            headers: { 'authorization': 'Bearer ' + localStorage.getItem(tokenKey) },
            dataType: "json",
            data: {
                articleURL: window.location.pathname + "",
                articleTitle: encodeURIComponent(document.querySelectorAll('meta[property=\'og:title\']')[0].content) + "",
                collectionID: collectionId,
                commentID: commentID,
                parentUserID: parentUserID.replace("@gatesnotes.fyre.co", ""),
                timeFrame: iso_time,
                siteId: LFSite,
                type: type
            },
            type: "POST",
            success: function (data) {
                console.log("SET EVENT:" + data);
            },
            error: function (request, status, error) {
                console.log("ERROR:" + request.responseText);
            }
        });
        return false;
    }



    function GNCommDisLike(id) {
        GNCommHideNotifications();
        var GNCommFoundItem = $(".fyre-comment-article[data-message-id='" + id + "']");
        var url = "https://gatesnotes.quill.fyre.co/api/v3.0/message/"+id+"/unlike/?collection_id=" + collectionId + "&lftoken=" + userAuthToken;
        var dd = "";
        //console.log("GNComm:DisLike:Post:Time:" + GNCommGetTimeCheck());
        $.post(url, dd, function (data) {
            var see = data;
            //console.log("GNComm:DisLike:Data:Time:" + GNCommGetTimeCheck());
            setTimeout(function () {
                cleanPosts();
            }, 100);
            TGNCom_SetEvent(id,"RemoveLike",GNCommFoundItem.attr("data-author-id"));
        })
        .fail(function(response) {
            console.log("GNComm:DisLike:Fail:Time:" + GNCommGetTimeCheck());
            console.log('Error: ' + response.responseText);
        });
    }
    function GNCommGetTimeCheck() {
        var d = new Date();
        var m = d.getMinutes();
        var s = d.getSeconds();
        var mi = d.getMilliseconds();
        return ""+m+":"+s+":"+mi;
    }
    function GNCommPost() {
        //console.log("GNComm:Post:START:Time:"+GNCommGetTimeCheck());
        if (!isGNILoggedIn()) {
            // store the message in case it needs to be saved and then sent when the user's logged in
            if (currentUserActive == "true" && currentUserData.IsApproved == "false") {
                //console.log("logged in but not verified");
                $("#GNCommWaitingtop").after($("#GNCommPleaseVerify"));
                $("#GNCommPleaseVerify").css("display", "block");
            } else {
                //MenuS45_OpenSignIn();
                $("#GNCommWaitingtop").after($("#GNCommSignUpOrLogIn"));
                $("#GNCommSignUpOrLogIn").css("display", "block");
            }
        } else if ($('#GNCommTA').val().length > 0) {
            $("#GNCommWaitingtop").css("display","block");
            GNCommPostNew($('#GNCommTA').val());
            $('#GNCommTA').val("");
            $('#GNCommTA').css("height","25px");
        }
        localStorage.setItem("userCommentTemp", $('#GNCommTA').val());
    }
    function GNCommPostNew(t) {
        //t = t.replace("%", "%25");
        //t = t.replace(";", "%3B");
        t=encodeURIComponent(t);
        GNCommHideNotifications();
        $("#GNCommWaitingtop").after($("#GNCommPleaseVerify"));
        $("#GNCommWaitingtop").after($("#GNCommDuplicate"));
        $("#GNCommWaitingtop").after($("#GNCommHTML"));
        $("#GNCommWaitingtop").after($("#GNCommOOPS"));
        $("#GNCommWaitingtop").after($("#GNCommSignUpOrLogIn"));
        // GET https://bgc3.bootstrap.fyre.co/bs3/network / siteid / articleid / bootstrap.html
        // https://bgc3.quill.fyre.co/api/v3.0/collection/183174663/post/?
        // https://bgc3.quill.fyre.co/api/v3.0/collection/183174663/post/?lftoken=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJkb21haW4iOiJCR0MzLmZ5cmUuY28iLCJleHBpcmVzIjoxNDkwNzQxODA5LjAyNzUwMSwidXNlcl9pZCI6IjE4MjlmNGI4LWIwMzktNDNmYy1hNzEwLWZlZGIzYTdjNGRmZiJ9.mY_tfdFuUIkLAJRPSC1rWXZCAeaR4LnSIysUj36c7HQ
        commentText = t;
        var url = "https://gatesnotes.quill.fyre.co/api/v3.0/collection/" + collectionId + "/post/?lftoken=" + userAuthToken;
        var dd = "body=" + t + "&_bi=" + GNCommUserId;
        //console.log("GNComm:Post:POST:Time:"+GNCommGetTimeCheck());
        $.post(url, dd, function (data) {
            var see = data;
            //console.log("HTML:"+data.data.messages[0].content.bodyHtml);
            //console.log("GNComm:Post:DATA:Time:"+GNCommGetTimeCheck());
            setTimeout(function () {
                cleanPosts();
            }, 100);
        })
        .fail(function(response) {
            console.log("GNComm:Post:FAIL:Time:"+GNCommGetTimeCheck());
            console.log('Error: ' + response.responseText);
            if (response.responseJSON.error_type == "DuplicateCommentError") {
                $("#GNCommDuplicate").css("display", "block");
            } else if (response.responseJSON.error_type == "MalformedCommentError") {
                $("#GNCommHTML").css("display", "block");
            } else {
                $("#GNCommOOPS").css("display", "block");
            }
        });

    }
    function GNCommReplyPost(value,id) {
        //console.log("GNComm:Reply:START:Time:"+GNCommGetTimeCheck());
        var GNCommFoundItem = $(".fyre-comment-article[data-message-id='" + id + "']");
        if (!isGNILoggedIn()) {
            // store the message in case it needs to be saved and then sent when the user's logged in
            if (currentUserActive == "true" && currentUserData.IsApproved == "false") {
                //console.log("logged in but not verified");
                //$("#GNCommWaitingtop").after($("#GNCommPleaseVerify"));
                $("#GNCommPleaseVerify").css("display", "block");
                GNCommFoundItem.find(".GNCommWaiting").css("display", "none");
            } else {
                //MenuS45_OpenSignIn();
                $("#GNCommSignUpOrLogIn").css("display", "block");
                GNCommFoundItem.find(".GNCommWaiting").css("display", "none");
            }
        } else if (value.length > 0) {
            GNCommReplyPostNew(value,id,GNCommFoundItem.attr("data-author-id"));//693154486
            $(".GNCommReply").css("display","none");
            $(".GNCommReplyTA").val("");
            GNCommFoundItem.find(".GNCommReplyTA").css("height", "25px");
        } else {
            GNCommFoundItem.find(".GNCommWaiting").css("display", "none");
        }
    }
    function GNCommReplyPostNew(t,id,authID) {
        //t = t.replace("%", "%25");
        //t = t.replace(";", "%3B");
        t=encodeURIComponent(t);
        GNCommHideNotifications();
        commentText = t;
        var url = "https://gatesnotes.quill.fyre.co/api/v3.0/collection/" + collectionId + "/post/?lftoken=" + userAuthToken;
        var dd = "body=" + t + "&parent_id=" + id + "&_bi=" + GNCommUserId;
        //console.log("GNComm:Reply:POST:Time:"+GNCommGetTimeCheck());
        $.post(url, dd, function (data) {
            var see = data;
            //console.log("HTML:"+data.data.messages[0].content.bodyHtml);
            //console.log("GNComm:Reply:DATA:Time:"+GNCommGetTimeCheck());
            TGNCom_SetEvent(id,"Reply",authID);
        })
        .fail(function(response) {
            console.log("GNComm:Reply:FAIL:Time:"+GNCommGetTimeCheck());
            console.log('Error: ' + response.responseText);
            var GNCommFoundItem = $(".fyre-comment-article[data-message-id='" + id + "']");
            //GNCommFoundItem.find(".GNCommWaiting").css("color","#890d0d");
            GNCommFoundItem.find(".GNCommWaitingDots").css("display","none");
            if (response.responseJSON.error_type == "DuplicateCommentError") {
                //$("#GNCommDuplicate").css("display", "block");
                //GNCommFoundItem.find(".GNCommWaitingMessage").html("Sorry, duplicate comments are not allowed.");
                GNCommFoundItem.find(".GNCommReply").after($("#GNCommDuplicate"));
                $("#GNCommDuplicate").css("display", "block");
            } else if (response.responseJSON.error_type == "MalformedCommentError") {
                //$("#GNCommHTML").css("display", "block");
                //GNCommFoundItem.find(".GNCommWaitingMessage").html("Sorry, that HTML is not allowed.");
                GNCommFoundItem.find(".GNCommReply").after($("#GNCommHTML"));
                $("#GNCommHTML").css("display", "block");
            } else {
                //$("#GNCommOOPS").css("display", "block");
                //GNCommFoundItem.find(".GNCommWaitingMessage").html("Sorry, something went wrong.");
                GNCommFoundItem.find(".GNCommReply").after($("#GNCommOOPS"));
                $("#GNCommOOPS").css("display", "block");
            }

        });
        setTimeout(function () {
            cleanPosts();
        }, 100);

    }


    $(document).ready(function () {
        $('#GNCommTA').bind('keyup', function (event) {
            var key = event.which;
            if (key == 13) {
                GNCommPost();
            }
            else {
                autoGrowTextArea2($(this));
            }
        });
        $('#GNCommPost').bind('click', function (event) {
            GNCommPost();
        });
        //$('#GNCommTA').val(localStorage.getItem('userCommentTemp'));
    });
</script>

<div class="newComments">
    <!-- div class="comment-roadblock">Sign In</div -->
    <div class="commentHeading TGN_site_Titledsectionstitle TGN_site_Titledsectionstopleft">Comments</div>
    <div class="GNCommForm">
        <div class="GNCommPostWrapper">
            
            <span class="GNCommPost" id="GNCommPost"><i class="icon-plus"></i></span>
            <div class="GNCommText">
                <textarea id="GNCommTA" placeholder="Add a comment…" rows="1" style="overflow: hidden; word-wrap: break-word; height: 25px;"></textarea>
            </div>
        </div>
        <div id="GNCommWaitingtop" class="GNCommWaiting"><span class="GNCommWaitingMessage">posting</span> <span class="GNCommWaitingDots">...</span></div>
        <div id="GNCommPleaseVerify" class="GNCommNotificationBox"><span class="GNCommPleaseVerifyIcon"><img src="/img/GNComm_Exclaim.svg" class="GNCommNotificationIcon" style=""></span><span class="GNCommPleaseVerifyT1">Please verify your email in order to make comments.&nbsp;</span><span class="GNCommPleaseVerifyT2">Click here to resend verification email</span></div>
        <div id="GNCommDuplicate" class="GNCommNotificationBox"><span class="GNCommPleaseVerifyIcon"><img src="/img/GNComm_NotAllowed.svg" class="GNCommNotificationIcon" style=""></span><span class="GNCommPleaseVerifyT1">Sorry, duplicate comments are not allowed.&nbsp;</span><span class="GNCommNotificationBoxClose"><i class="icon-close-x"></i></span></div>
        <div id="GNCommHTML" class="GNCommNotificationBox"><span class="GNCommPleaseVerifyIcon"><img src="/img/GNComm_NotAllowed.svg" class="GNCommNotificationIcon" style=""></span><span class="GNCommPleaseVerifyT1">Sorry, that HTML is not allowed.&nbsp;</span><span class="GNCommNotificationBoxClose"><i class="icon-close-x"></i></span></div>
        <div id="GNCommOOPS" class="GNCommNotificationBox"><span class="GNCommPleaseVerifyIcon"><img src="/img/GNComm_NotAllowed.svg" class="GNCommNotificationIcon" style=""></span><span class="GNCommPleaseVerifyT1">Sorry, something went wrong.&nbsp;</span><span class="GNCommNotificationBoxClose"><i class="icon-close-x"></i></span></div>
        <div id="GNCommSignUpOrLogIn" class="GNCommNotificationBox"><span class="GNCommPleaseVerifyIcon"><img src="/img/GNComm_Exclaim.svg" class="GNCommNotificationIcon" style=""></span><span class="GNCommPleaseVerifyT1">In order to comment you must be a Gates Notes Insider. Please&nbsp;</span><span class="GNCommSignUpOrLogInSU">sign up</span><span class="GNCommPleaseVerifyT1">&nbsp;or&nbsp;</span><span class="GNCommSignUpOrLogInLI">log in</span><span class="GNCommPleaseVerifyT1">&nbsp;to continue.&nbsp;</span></div>
    </div>

    <div id="livefyre"></div>

    <div class="commentsLocked">
    </div>
</div>
    <div class="GNCommBeTheFirst">Be the first to leave a comment.</div>

<div id="GNCommReplyBase" class="GNCommReply">
    <div class="GNCommReplyPostWrapper">
        
        <div class="GNCommReplyText">
            <textarea class="GNCommReplyTA" placeholder="Add a comment…" rows="1" style="overflow: hidden; word-wrap: break-word; height: 25px;"></textarea>
        </div>
        <span class="GNCommReplyPost">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 36 36"><line class="cls-1" x1="10.5" y1="18" x2="25.5" y2="18"></line><line class="cls-1" x1="18" y1="10.5" x2="18" y2="25.5"></line></svg>
        </span>
    </div>
</div>

<div id="GNCommFooterBase" class="GNCommFooter" style="display:none;">
    <div class="GNCommFooterLike">
        <div class="heartDiv"><i class="icon-like-heart-selected"></i></div>
        <span class="heartNum"></span>
    </div>
    <div class="GNCommFooterReply">
        <span class="GNCommFooterReplyText">Reply</span>
    </div>
    <div class="GNCommFooterEdit">
        <span class="GNCommFooterEditText">Edit</span>
        <div class="GNCommFooterEditMenu">
            <div class="GNCommFooterEditMenuArrow"></div>
            <div class="GNCommFooterEditMenuEdit">Edit</div>
            <div class="GNCommFooterEditMenuDelete">Delete</div>
            <div class="GNCommFooterEditMenuWhiteBox"></div>
        </div>
    </div>
    <div class="GNCommFooterFlag">
        <span class="GNCommFooterFlagText">Report</span>
    </div>
    <div class="GNCommWaiting"><span class="GNCommWaitingMessage">posting</span> <span class="GNCommWaitingDots">...</span></div>
</div>

<div id="GNCommFooterBaseLocked" class="GNCommFooter">
    <div class="GNCommFooterLocked">
        <span class="GNCommFooterLockedIconSpan"><img src="/img/GNComm_Lock.svg" class="GNCommFooterLockedIcon" style=""></span>
        <span class="GNCommFooterLockedText">Comment Locked</span>
        <div class="GNComm_LegacyRO_Box">
            <div class="GNComm_LegacyRO_Arrow"></div>
            <div class="GNComm_LegacyRO_BoxClose"><i class="icon-close-x"></i></div>
            <span class="GNComm_LegacyRO_BoxT1">Comments more than 2 months old are locked. For more information, </span>
            <span class="GNComm_LegacyRO_BoxT2">contact us.</span>
        </div>
    </div>
    <div class="GNCommFooterFlag">
        <span class="GNCommFooterFlagText">Report</span>
    </div>
</div>

<div class="GNCommDeleteOverlay">
    <div class="GNCommDeleteOverlayWhiteBox">
        <div id="GNCommDeleteOverlayClose"><i class="icon-close-x"></i></div>
        <div class="GNCommDeleteOverlayTitle">Delete Comment?</div>
        <div class="GNCommDeleteOverlayBody">Deleting this comment will remove replies to this comment by you and others as well. This action cannot be undone.</div>
        <div id="GNCommDeleteOverlayButton" class="TGN_PassiveButton" data-content-id="">Delete Comment</div>
    </div>
</div>
<div class="GNCommFlagOverlay">
    <div class="GNCommFlagOverlayWhiteBox">
        <div id="GNCommFlagOverlayClose"><i class="icon-close-x"></i></div>
        <div class="GNCommFlagOverlayStep1">
            <div class="GNCommFlagOverlayTitle">Why do you want to report this comment?</div>
            <div class="GNCommFlagOverlayBody">
                <div class="GNCommFlagOverlayBodyRow">
                    <div class="Auth_Comm_checkbox">
                        <input type="checkbox" id="GNCommFlag1" value="1">
                    </div>
                    <div class="GNCommFlagOverlayBodyText">It's annoying or not interesting</div>
                </div>
                <div class="GNCommFlagOverlayBodyRow">
                    <div class="Auth_Comm_checkbox">
                        <input type="checkbox" id="GNCommFlag2" value="1">
                    </div>
                    <div class="GNCommFlagOverlayBodyText">It's abusive and/or vulgar</div>
                </div>
                <div class="GNCommFlagOverlayBodyRow">
                    <div class="Auth_Comm_checkbox">
                        <input type="checkbox" id="GNCommFlag3" value="1">
                    </div>
                    <div class="GNCommFlagOverlayBodyText">It's spam</div>
                </div>
            </div>
            <div id="GNCommFlagOverlayButton" class="TGN_PassiveButton" data-content-id="" data-flag-type="">Report Comment</div>
        </div>
        <div class="GNCommFlagOverlayStep2">
            <div class="GNCommFlagOverlayTitle">Your report has been submitted.</div>
            <div id="GNCommFlagOverlayButtonClose" class="TGN_PassiveButton">Close</div>
        </div>
    </div>
</div>
<div id="GNCommEditBoxBase" class="GNCommEditBox">
    <div class="GNCommEditBoxTextArea">
        <textarea class="GNCommEditBoxTA" placeholder="" rows="1" style="overflow: hidden;"></textarea>
    </div>
    <div class="GNCommEditBoxSave">
        Save
    </div>
    <div class="GNCommEditBoxCancel">
        Cancel
    </div>
</div>
<div id="GNCommMessageDisplayBase" class="GNCommMessageDisplay">
    <div class="GNCommMessageDisplayLeft">
        <div class="GNCommMessageDisplayAvatar">
            <img src="" class="GNCommMessageDisplayAvatarImg" alt="">
        </div>
    </div>
    <div class="GNCommMessageDisplayRight">
        <div class="GNCommMessageDisplayText">
            <span class="GNCommMessageDisplayTName"></span>
            <span class="GNCommMessageDisplayTMention"></span>

            <span class="GNCommDisplayTime"></span>
            <span class="GNCommMessageDisplayTBody"></span>
        </div>
        <div class="GNCommMessageDisplayFooter">

        </div>
    </div>
</div>



<style>
    #mobart_Art_LISU_Divider {
    display: inline-block;
    margin: 0px;
    color: #949494;
}
    .TGNMag_Art_SI_Holder {
    display: inline-block;
    margin-right: 7px;
    margin-left: 7px;
}
.GNCommMessageDisplayTBody {
    display: block;
    margin-top: -10px;
    font-size: 16px;
    line-height: 20px;
}
.GNCommNotificationIcon {
    max-width: 24px;
    padding: 0px !important;
    margin: 0px !important;
    position: relative;
    top: 5px;
}
    .fyre .fyre-stream-more {
        text-align: center !important;
    }
    .fyre-comment-deleted {
        
    }
.GNCommNotificationBox {
    display: none;
    padding: 0px;
    margin-top: 10px;
    font-size: 16px;
    line-height: 24px;
    font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
    font-weight: 600;
    color: black;
}
    .GNCommPleaseVerifyIcon {
    padding-left: 0px;
    padding-right: 12px;
    font-size: 12px;
}
    .GNCommPleaseVerifyT2 {
    color: #4472C4 !important;
    cursor: pointer;
}
    .GNCommSignUpOrLogInSU {
    color: #4472C4 !important;
    cursor: pointer;
    }
    .GNCommSignUpOrLogInLI {
    color: #4472C4 !important;
    cursor: pointer;
    }
    .GNCommNotificationBoxClose {
    float: right;
    padding-right: 10px;
    color: #999999;
    font-size: 10px;
    cursor: pointer;
}
    .GNCommWaiting {
    margin: 10px;
        margin-top: 0px;
        font-size: 10px;
    font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
    font-weight: 600;
    color: #b0b0b0;
    display:none;
}
.GNComm_LegacyRO_Box {
    background: #f2f1f3;
    min-height: 40px;
    display: block;
    position: absolute;
    left: 37px;
    z-index: 9;
    padding: 12px;
    padding-right: 34px;
    border-radius: 0px;
    max-width: 460px;
        margin-top: 50px;
        display:none;
}
.GNComm_LegacyRO_BoxClose {
    position: absolute;
    right: 6px;
    top: 6px;
    cursor: pointer;
    display:none;
}
.GNComm_LegacyRO_BoxT1 {
    font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
    font-size: 14px;
    line-height: 18px;
    font-weight: 400;
    font-style: normal;
    color: #000000 !important;
    text-transform: none;
}
.GNComm_LegacyRO_BoxT2 {
    font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
    font-size: 14px;
    line-height: 18px;
    font-weight: 400;
    font-style: normal;
    color: #4472C4 !important;
    cursor: pointer;
    text-transform: none;
}

.GNComm_LegacyRO_Arrow {
    background: #f2f1f3;
    height: 16px;
    width: 16px;
    position: absolute;
    margin-left: 12px;
        margin-top: -18px;
    -webkit-transform: rotate(45deg);
    -moz-transform: rotate(45deg);
    -o-transform: rotate(45deg);
    filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=5);
}
.GNCommFooterLocked:hover {
    color:#000000;
}
        .fyre-comment-article
        {
                width: 100%;
                margin-top:32px;
        }
.fyre .fyre-comment-replies-indent .fyre-comment-article {
    margin-top: 22px;
    border-left: 1px solid #a4a4a4;
    padding-left: 15px;
}
.fyre a {
    background: none;
    border: none;
    color: #0049fb;
    text-decoration: none;
}
.fyre a:hover {
    background-color: #0049fb;
    color: white;
    text-decoration: none;
}
    .GNCommFooterLocked {
    display: flex;
    align-items: center;
    justify-content: flex-start;
}
.GNCommFooterLockedIcon {
    display: inline-block;
    height: 20px;
    opacity: .3;
    position: relative;
    top: -2px;
}
.GNCommFooterLockedIconSpan {
    margin-left:-6px;
    font-size: 18px;
    margin-right: 0px;
}
.GNCommFooterLockedText {
    margin-right: 20px;
}
    .GNCommFooterFlagIcon {
    display: block;
    height: 12px;
    opacity: .3;
    position: relative;
    top: 2px;
}
    .GNCommFooterFlagIcon:hover {
    opacity: 1;
}
    ::-webkit-input-placeholder { /* WebKit, Blink, Edge */
    color:    #D9D9D9;
}
:-moz-placeholder { /* Mozilla Firefox 4 to 18 */
   color:    #D9D9D9;
   opacity:  1;
}
::-moz-placeholder { /* Mozilla Firefox 19+ */
   color:    #D9D9D9;
   opacity:  1;
}
:-ms-input-placeholder { /* Internet Explorer 10-11 */
   color:    #D9D9D9;
}
::-ms-input-placeholder { /* Microsoft Edge */
   color:    #D9D9D9;
}
    .GNComm_SignIn_Title {
    font-size: 26px;
        line-height: 32px;
    margin-bottom: 36px;
    font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
    font-weight: 600;
    font-style: normal;
}
    .GNComm_SignIn_BodyArea {
    display: block;
    margin: auto;
    max-width: 400px;
    margin-top: 20px;
    margin-bottom: 20px;
}
    .GNComm_SignIn_Body {
    font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
    font-weight: 200;
    font-style: normal;
    font-size: 14px;
    letter-spacing: 0;
    line-height: 19px;
}
    .GNComm_SignIn_BodyLink {
    font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
    font-weight: 200;
    font-style: normal;
    font-size: 14px;
    letter-spacing: 0;
    line-height: 19px;
    color: #3379be;
    cursor:pointer;
}
    .GNComm_SignIn_Arrows1 {
    font-size: 25px;
    display: block;
}
    .GNComm_SignIn_Arrows2 {
    font-size: 23px;
    display: block;
    margin-top: -14px;
}
    .fyre-notifier-container {
    display: none !important;
    }
    .fyre-comment-user {
    display: none !important;
}
    .fyre-comment-head {
    display: none !important;
}
    .fyre-comment-body {
    display: none !important;
}
    .fyre-stream-refresh {
    display: none !important;
    }
    .fyre .fyre-stream-content-not-found {
    font-size: 14px !important;
}
    .fyre-thread-breakout-stream {
    padding-left: 10px;
    padding-bottom: 30px;
}
    .GNCommMessageDisplay {
    color: black !important;
    font-size: 18px !important;
        font-family: Lusitana,serif;
    font-weight: normal !important;
    font-style: normal !important;
    line-height: 21px;
        display: flex;
    align-items: center;
    justify-content: flex-start;
    margin-top: 0px;
}
    .GNCommMessageDisplayLeft {
    height: 100%;
    min-width: 30px;
    min-height: 30px;
    max-width: 30px;
    margin-right: 10px;
    display: block;
}
    img.GNCommMessageDisplayAvatarImg {
    background: gray;
    width: 30px;
    height: 30px;
    border-radius: 3000px;
}
    .GNCommMessageDisplayRight {
    height: 100%;
    min-height: 20px;
    min-width: 200px;
    display: block;
    position: relative;
    top: -30px;
    left: 48px;
    width: 91%;
}
    .GNCommMessageDisplayTName {
    color: black;
    margin-right: 3px;
    font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
    font-size: 16px;
    line-height: 20px;
    font-weight: 500;
}
    .GNCommMessageDisplayTCol {
    font-size: 14px;
    font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
    font-weight: 600;
    color:#2A2A2A;
}
    .GNCommMessageDisplayTMention {
    color: #2A2A2A !important;
    font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
    font-weight: 300;
    font-size: 16px;
    display:none;
    margin-left:-3px;
}
    .GNCommFooterFlagText {

    }
    .GNCommMessageDisplayTMCol {
    color: #3379be !important;
    font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
    font-weight: 400;
    font-size: 12px;
    display:none;
    }
    .GNCommEditBox {
    margin-top: -33px;
}
    .GNCommEditBoxTextArea {
    border: 1px #d5d5d5 solid;
    border-radius: 0px;
    margin-left: 43px;
    margin-top: 4px;
    margin-bottom: 4px;
    padding: 10px;
    min-height: 54px;
    
        box-sizing: border-box;
        color: #b0b0b0;
        display: flex;
        flex-basis: 0%;
        flex-grow: 1;
        flex-shrink: 1;
            font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
    font-weight: 600;
        font-feature-settings: 'kern' 1, 'liga' 1, 'pnum' 1;
        font-size: 14px;
        font-weight: 200;
        line-height: 24px;
        text-size-adjust: 100%;
        -webkit-box-flex: 1;
        -webkit-font-smoothing: antialiased;
}
        .GNCommEditBoxTextArea > textarea {
            background-attachment: scroll;
            background-clip: border-box;
            background-color: rgba(0, 0, 0, 0);
            background-image: none;
            background-origin: padding-box;
            background-position-x: 0%;
            background-position-y: 0%;
            background-size: auto;
            border-bottom-color: #b0b0b0;
            border-bottom-style: none;
            border-bottom-width: 0px;
            border-image-outset: 0px;
            border-image-repeat: stretch;
            border-image-slice: 100%;
            border-image-source: none;
            border-image-width: 1;
            border-left-color: #b0b0b0;
            border-left-style: none;
            border-left-width: 0px;
            border-right-color: #b0b0b0;
            border-right-style: none;
            border-right-width: 0px;
            border-top-color: #b0b0b0;
            border-top-style: none;
            border-top-width: 0px;
            box-sizing: border-box;
            color: #2a2a2a !important;
            cursor: auto;
            display: block;
            flex-basis: 0%;
            flex-direction: column;
            flex-grow: 1;
            flex-shrink: 1;
            font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
        font-feature-settings: 'kern' 1, 'liga' 1, 'pnum' 1;
        font-size: 14px;
            font-stretch: normal;
            font-style: normal;
            font-variant-caps: normal;
            font-variant-ligatures: normal;
            font-variant-numeric: normal;
            font-weight: 400;
            height: 25px;
            letter-spacing: normal;
            line-height: normal;
            margin-bottom: 0px;
            margin-left: 0px;
            margin-right: 0px;
            margin-top: 5px;
            min-height: 25px;
            overflow-x: hidden;
            overflow-y: hidden;
            padding-bottom: 0px;
            padding-left: 0px;
            padding-right: 0px;
            padding-top: 0px;
            resize: none;
            text-align: start;
            text-indent: 0px;
            text-rendering: auto;
            text-shadow: none;
            text-size-adjust: 100%;
            text-transform: none;
            user-select: text;
            white-space: pre-wrap;
            word-spacing: 0px;
            word-wrap: break-word;
            writing-mode: horizontal-tb;
            -webkit-appearance: none;
            -webkit-box-flex: 1;
            -webkit-font-smoothing: antialiased;
            -webkit-border-image: none;
            -webkit-rtl-ordering: logical;
        border: none;
    overflow: auto;
    outline: none;
    -webkit-box-shadow: none;
    -moz-box-shadow: none;
    box-shadow: none;
        }
    .GNCommMessageDisplayTBody p {
    display: inherit;
}
    .GNCommEditBoxTA {
    display: inline-block;
    border: 0px black solid;
    line-height: normal;
    resize: none;
    font-family: Lusitana, serif;
    font-feature-settings: 'kern' 1, 'liga' 1, 'pnum' 1;
    font-size: 16px;
    font-stretch: normal;
    font-style: normal;
    font-variant-caps: normal;
    font-variant-ligatures: normal;
    font-variant-numeric: normal;
    font-weight: 400;
    letter-spacing: normal;
    width: 100%;
    color: #b0b0b0;
    overflow: hidden !important;
    word-wrap: normal;
    height: 25px;
    min-height: 25px;
    border: none;
    overflow: auto;
    outline: none;
    -webkit-box-shadow: none;
    -moz-box-shadow: none;
    box-shadow: none;
    margin-top: 0px;
}
    .GNCommEditBoxSave {
    display: inline-block;
    position: relative;
    left: 46px;
    cursor: pointer;
}
    .GNCommEditBoxCancel {
    display: inline-block;
    position: relative;
    left: 50px;
    cursor: pointer;
}
.GNCommBeTheFirst {
    text-align: center;
    margin: 10px;
    color: #b0b0b0;
    font-size: 14px;
    font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif !important;
    font-weight: 300;
    font-style: normal;
    display: none;
    margin-top: -50px;
    margin-bottom: 80px;
}
    span.GNCommMention {
    display: inline-block;
    float: left;
    color: #3379be !important;
    float: left !important;
    margin-top: 3px !important;
    margin-right: 5px !important;
    font-size: 12px !important;
    font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif !important;
    font-weight: 300;
    font-style: normal !important;
    line-height: 18px;
}
.GNCommDeleteOverlay {
    position: absolute;
    top: 0px;
    left: 0px;
    width: 100%;
    height: 100%;
    background-color: rgba(0,0,0,.4);
    z-index: 40;
        display: none;
}
.GNCommDeleteOverlayWhiteBox {
    display: block;
    background: white;
    margin: 20%;
        text-align: center;
}
#GNCommDeleteOverlayClose {
    display: flex;
    float: right;
    cursor: pointer;
    width: 40px;
    height: 40px;
    align-items: center;
    justify-content: center;
}
.GNCommDeleteOverlayTitle {
    display: block;
    font-size: 26px;
    margin-bottom: 36px;
    font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
    font-weight: 200;
    font-style: normal;
    clear: both;
    margin-top: 40px;
}
.GNCommDeleteOverlayBody {
    font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
    font-weight: 200;
    font-style: normal;
    color: #666;
    display: block;
    margin-left: auto;
    width: 60%;
    margin-bottom: 36px;
    margin-right: auto;
}
#GNCommDeleteOverlayButton {
}
#GNCommDeleteOverlayButton:hover {
}
.Auth_Comm_checkbox {
    display: block;
    margin-right: 10px;
    text-align: center;
}
.GNCommFlagOverlay {
    position: absolute;
    top: 0px;
    left: 0px;
    width: 100%;
    height: 100%;
    background-color: rgba(0,0,0,.4);
    z-index: 40;
        display: none;
}
.GNCommFlagOverlayWhiteBox {
    display: block;
    background: white;
    margin: 20%;
        text-align: center;
}
#GNCommFlagOverlayClose {
    display: flex;
    float: right;
    cursor: pointer;
    width: 40px;
    height: 40px;
    align-items: center;
    justify-content: center;
}
.GNCommFlagOverlayTitle {
    display: block;
    font-size: 26px;
    margin-bottom: 36px;
    font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
    font-weight: 600;
    font-style: normal;
    clear: both;
    margin-top: 40px;
    max-width: 80%;
    margin-left: auto;
    margin-right: auto;
}
.GNCommFlagOverlayBody {
    font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
    font-weight: 200;
    font-style: normal;
    color: #666;
    display: table;
    margin-left: auto;
    margin-right: auto;
    margin-bottom: 16px;
    text-align: left;
}
.GNCommFlagOverlayBodyText {
    display: inline-block;
    height: 20px;
    position: relative;
    top: -1px;
    font-weight: 400;
    color: black;
}
#GNCommFlagOverlayButton {
}
#GNCommFlagOverlayButton:hover {
}
#GNCommFlagOverlayButtonClose {
}
#GNCommFlagOverlayButtonClose:hover {
}
.GNCommFlagOverlayStep1 {

}
.GNCommFlagOverlayStep2 {
    display:none;
}
.GNCommFlagOverlayBodyRow {
    display: flex;
    height: 34px;
}
    .GNCommFooterEditMenu {
    position: absolute;
    height: 60px;
    width: 50px;
    background: white;
    border: 1px solid #d3d3d3;
    text-align: center;
    padding: 4px;
    line-height: 23px;
    margin-left: -14px;
    display:none;
        margin-top: -100px;
            cursor: default;
}
    .GNCommFooterEditMenuEdit {
    cursor: pointer;
}
    .GNCommFooterEditMenuDelete {
    cursor: pointer;
}
.GNCommFooterEditMenuWhiteBox {
    position: absolute;
    background: white;
    height: 15px;
    width: 100%;
    margin-left: -4px;
    margin-top: 3px;
}
.GNCommFooterEditMenuArrow {
    background: white;
    height: 16px;
    width: 16px;
    position: absolute;
    margin-left: 12px;
        margin-top: 55px;
    border: 1px solid #d3d3d3;
    -webkit-transform: rotate(45deg);
    -moz-transform: rotate(45deg);
    -o-transform: rotate(45deg);
    filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=5);
}
    #GNCommReplyBase {
    display: none;
}
    #GNCommEditBoxBase {
    display: none;
}
    #GNCommMessageDisplayBase {
        display: none;
    }
    #GNCommFooterBase {
    display: none;
}
    #GNCommFooterBaseLocked {
    display: none;
}
    .fyre .fyre-comment-footer {
        display: none !important;
    }
    time.fyre-comment-date {
    display: none !important;
}
    .fyre-comment-wrapper {
    margin-top: 25px;
    display: block;
}
.GNCommFooter {
    cursor: pointer;
    margin-left: 49px;
    margin-top: -18px;
    margin-bottom: 4px;
    color: #838383;
    font-family: 'Roboto Condensed', 'Asap Condensed', 'neue-haas-unica', sans-serif;
    text-transform: uppercase;
    font-size: 12px;
    line-height: 12px;
    margin-right: 14px;
    letter-spacing: .2px;
    align-items: center;
    justify-content: flex-start;
}
    .GNCommFooterLike {
    display: inline-block;
        margin-right: 20px;
}
    .GNCommFooterLike:hover
    {
        color: #000000;
    }
    .GNCommFooterReply {
    display: inline-block;
        margin-right: 20px;
}
    .GNCommFooterReply:hover
    {
        color: #000000;
    }
    .GNCommFooterEdit {
    display: inline-block;
        margin-right: 20px;
}
    .GNCommFooterEditText:hover
    {
        color: #000000;
    }
    .GNCommFooterEditMenuEdit:hover
    {
        color: #000000;
    }
    .GNCommFooterEditMenuDelete:hover
    {
        color: #000000;
    }
.GNCommDisplayTime {
    display: inline-block;
    cursor: context-menu;
    font-weight: 300;
    font-style: normal;
    margin-left: 5px;
    color: #949494;
    font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
font-size: 13px;
    line-height: 20px;
}
    .GNCommDisplayTime:hover
    {
    }
    .GNCommFooterFlag {
    display: inline-block;
}
    .GNCommFooterFlag:hover
    {
        color: #000000;
    }
span.heartNum {
    line-height: 18px;
    margin-left: 4px;
}



    .fyre-modal-alert-black {
            display: none !important;
    }
    .fyre .fyre-comment-actions span {
            display: none !important;
}
    .fyre.fyre-width-small .fyre-comment-container .fyre-comment-replies-indent .fyre-user-avatar
    {
        -webkit-border-radius: 50% !important;
        -moz-border-radius: 50% !important;
        -ms-border-radius: 50% !important;
        -o-border-radius: 50% !important;
        border-radius: 50% !important;
    }
    .fyre .fyre-comment-actions {
    float: none;
    display: inline-block;
    font-size: 11px;
    margin-top: 0px;
    text-align: left;
    font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
    font-weight: 200;
    font-size: 10.5px;
    line-height: 14px;
    color: #d3d3d3;
}
    .fyre .fyre-comment-like-count {
    font-size: 11px;
    text-decoration: none;
    line-height: 30px;
    margin-left: 2px;
}
/*.GNCommReplyPost {
    position: absolute;
    right: 6px;
    width: 30px;
    cursor: pointer;
        margin-top: -30px;
}
.GNCommReply {
    border: 1px #d5d5d5 solid;
    border-radius: 0px;
    margin-left: 43px;
    margin-top: 4px;
    margin-bottom: 4px;
    padding: 10px;
    height: 54px;
}
.GNCommReplyText {
    display: inline-block;
    margin-top: -10px;
    position: absolute;
    width: 70%;
    height: 30px;
}
.GNCommReplyTA {
    display: inline-block;
    line-height: 40px;
    resize: none;
    font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
    font-feature-settings: 'kern' 1, 'liga' 1, 'pnum' 1;
    font-size: 14px;
    font-stretch: normal;
    font-style: normal;
    font-variant-caps: normal;
    font-variant-ligatures: normal;
    font-variant-numeric: normal;
    font-weight: 400;
    letter-spacing: normal;
    width: 100%;
            color: #2a2a2a !important;
        overflow: hidden !important;
    word-wrap: normal;
    height: 50px !important;
    min-height: 50px !important;
        border: none;
    outline: none;
    -webkit-box-shadow: none;
    -moz-box-shadow: none;
    box-shadow: none;

    
            background-attachment: scroll;
            background-clip: border-box;
            background-color: rgba(0, 0, 0, 0);
            background-image: none;
            background-origin: padding-box;
            background-position-x: 0%;
            background-position-y: 0%;
            background-size: auto;
            border-bottom-color: #b0b0b0;
            border-bottom-style: none;
            border-bottom-width: 0px;
            border-image-outset: 0px;
            border-image-repeat: stretch;
            border-image-slice: 100%;
            border-image-source: none;
            border-image-width: 1;
            border-left-color: #b0b0b0;
            border-left-style: none;
            border-left-width: 0px;
            border-right-color: #b0b0b0;
            border-right-style: none;
            border-right-width: 0px;
            border-top-color: #b0b0b0;
            border-top-style: none;
            border-top-width: 0px;
            box-sizing: border-box;
            cursor: auto;
            display: block;
            flex-basis: 0%;
            flex-direction: column;
            flex-grow: 1;
            flex-shrink: 1;
            margin-bottom: 0px;
            margin-left: 0px;
            margin-right: 0px;
            margin-top: 5px;
            padding-bottom: 0px;
            padding-left: 0px;
            padding-right: 0px;
            padding-top: 0px;
            text-align: start;
            text-indent: 0px;
            text-rendering: auto;
            text-shadow: none;
            text-size-adjust: 100%;
            text-transform: none;
            user-select: text;
            white-space: pre-wrap;
            word-spacing: 0px;
            writing-mode: horizontal-tb;
            -webkit-appearance: none;
            -webkit-box-flex: 1;
            -webkit-font-smoothing: antialiased;
            -webkit-border-image: none;
            -webkit-rtl-ordering: logical;
}*/


    /*.fyre-mention-button {
    display: none !important;
}

    .fyre-share-button {
    display: none !important;
}

    .goog-toolbar-separator {
    display: none !important;
    }*/

    .fyre-live-container
    {
        display: none;
    }

    .fyre-stream-stats
    {
        display: none;
    }

    .fyre-stream-header
    {
        display: none;
    }

    .fyre-auth
    {
        display: none;
    }

    .fyre-comment-actions
    {
    }

    .fyre-hovercard-body
    {
        display: none;
    }

    .fyre-hovercard-arrow
    {
        display: none;
    }

    b.commentName
    {
        display: none;
    }

    section.fyre-comment-body
    {
    }

    span.fyre-comment-like-imgs
    {
        display: none;
    }

    .fyre-comment-divider
    {
        display: none;
    }

    .fyre .fyre-comment-replies-indent
    {
        margin-left: 46px;
    }

    .fyre-editor-toolbar
    {
        display: none;
    }

    a.fyre-mention.fyre-mention-livefyre
    {
        color: #868686 !important;
        float: left !important;
        margin-top: 0px !important;
        font-size: 12px !important;
        font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif !important;
    font-weight: 300;
        font-style: normal !important;
        line-height: 18px;
        margin-left: 2px;
    }

    .fyre-editor .fyre-editor-container .fyre-editor-editable > p *
    {
        color: #868686 !important;
        float: left !important;
        margin-top: 0px !important;
        font-size: 12px !important;
        font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif !important;
    font-weight: 300;
        font-style: normal !important;
        line-height: 18px !important;
        margin-left: 2px;
    }

    .fyre-editor .fyre-editor-container .fyre-editor-editable > p
    {
        color: #2a2a2a !important;
        float: left !important;
        margin-top: 0px !important;
        font-size: 12px !important;
        font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif !important;
    font-weight: 300;
        font-style: normal !important;
        line-height: 18px !important;
        margin-left: 2px;
    }

    .fyre-comment-edit {
        display: none !important;
    }

    .fyre .fyre-comment-reply
    {
        font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
    font-weight: 200;
        font-size: 10.5px;
        line-height: 14px;
        color: #d3d3d3;
            position: inherit;
    top: 0px;
    padding: 0px;
    }

    .fyre .fyre-comment-actions a.fyre-delete-link
    {
        font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
    font-weight: 200;
        font-size: 10.5px;
        line-height: 14px;
        color: #d3d3d3;
    }

    .fyre-editor-field[placeholder]:empty:before
    {
        content: attr(placeholder);
        color: #d3d3d3;
        font-size: 11px;
    }

    .placeholderComment[placeholder]:empty:before
    {
        content: attr(placeholder);
        color: #d3d3d3;
        font-size: 11px;
    }

    .placeholderComment[placeholder]:empty:focus:before
    {
        content: "";
    }

    .fyre-editor
    {
        margin-top: 0px !important;
    }
    /*
    .fyre-editor-field {
        overflow: hidden !important;
        word-wrap: break-word !important;
        flex: 1 !important;
    }
    */
    .fyre-editor-editable
    {
        /*
        overflow: hidden !important;
        word-wrap: break-word !important;
        flex: 1 !important;
        */
        font-size: 13px !important;
        font-family: Lusitana, serif !important;
        border-radius: 5px !important;
        /* height: 50px; */
        line-height: 18px !important;
        font-style: normal;
        font-weight: normal;
        padding-right: 35px !important;
    }

    .fyre-editor-container
    {
        /* height: 50px; */
        margin-bottom: 23px;
        display:none !important;
    }

    .fyre-editor .fyre-editor-container .fyre-editor-editable
    {
        background: #fff;
        border: 1px solid #e8e8e8;
        padding: 10px 5px 10px 9px;
        /* display: flex; */
        transition: border-color 400ms ease-in-out;
        line-height: 16px;
        box-shadow: none;
        height: 50px !important;
        /* height: auto; */
    }

    .fyre-post-button-new
    {
        background: #fff !important;
        border: none !important;
        margin-top: -90px !important;
        font-size: 30px !important;
        color: rgb(112, 112, 112) !important;
    }

    .fyre-post-button-reply
    {
        background: #fff !important;
        border: none !important;
        margin-top: -40px !important;
        font-size: 20px !important;
        color: rgb(112, 112, 112) !important;
            position: absolute;
    right: 0px;
    top: 53px;
    }

    .fyre-comment-date
    {
        margin-left: 0px !important;
    }



    .fyre .fyre-comment-head, .fyre .fyre-comment-body
    {
        margin-left: 40px;
    }

    .fyre .fyre-listener-avatars img
    {
        border-radius: 50%;
    }

    .fyre .fyre-comment-user img.fyre-user-avatar
    {
        border-radius: 50%;
        height: 30px;
        width: 30px;
    }

    .fyre .fyre-avatar img
    {
        border-radius: 50%;
    }

    .heartSVG
    {
        box-sizing: border-box;
        color: #d3d3d3 !important;
        cursor: pointer;
        display: block;
        font-size: 11px !important;
        font-weight: 300 !important;
        line-height: 18px !important;
        height: 18px !important;
        width: auto !important;
    }

    .likedComment
    {
        fill: #2d2d2d;
    }

    .heartDiv
    {
        float: left;
        color: #838383;
    font-size: 16px;
    }
    .heartDiv:hover
    {
        color: #e15b6c;
    }
    .heartDiv.on
    {
        color: #e15b6c;
    }

    .fyre-editor-bottom-container
    {
        margin-right: auto;
        margin-left: auto;
        max-width: 960px;
    }

    .fyre-buttonM
    {
        margin-top: 21px !important;
        padding-top: 2px !important;
        background-color: black !important;
        border-color: white !important;
        color: white !important;
        height: 40px !important;
        line-height: 37px !important;
        border-radius: 0px;
        margin-left: 5px !important;
        margin-right: 5px !important;
        cursor: pointer !important;
        font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif !important;
    font-weight: 300;
        font-style: normal !important;
        font-size: 14px !important;
    }

    .fyre-buttonT
    {
        padding-top: 0px !important;
        color: white !important;
        border-radius: 0px;
        font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
    font-weight: 600;
        font-style: normal !important;
        font-size: 13px !important;
        line-height: 42px;
        padding-bottom: 2px !important;
        transition: background-color 150ms ease;
        background-color: #2d2d2d;
        padding-left: 24px;
        padding-right: 24px;
    }
    .fyre-buttonT:hover
    {
        background-color: black !important;
    }

    .livefyre-tablet
    {
        max-width: 960px;
        margin-right: auto;
        margin-left: auto;
        padding-left: 20px;
        padding-right: 20px;
    }

    .livefyre-tablet-close
    {
        position: absolute;
        width: 20px;
        height: 20px;
        top: 20px;
        font-size: 16px;
        right: 25px;
        color: black;
        cursor: pointer;
    }

    .fyre-comment-user
    {
        position: relative !important;
            pointer-events: none;
    }

    .fyre-comment-head
    {
        margin-top: -37px !important;
    }

    .fyre-comment-footer
    {
        margin-top: -6px !important;
        margin-bottom: 0px !important;
        padding-top: 0px !important;
        padding-bottom: 0px !important;
        text-align: left !important;
        margin-left: 41px !important;
        margin-bottom: 23px !important;
    }

    .commentName
    {
        font-size: 11px;
    }

    .fyre-comment-username
    {
        color: #868686 !important;
        float: left !important;
        margin-top: 3px !important;
        margin-right: 5px !important;
        font-size: 12px !important;
        font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif !important;
    font-weight: 300;
        font-style: normal !important;
        line-height: 18px;
    }

    .fyre .fyre-moderator, .fyre .fyre-comment-author-tag
    {
        background-color: black;
    }

    .fyra a
    {
    }

    .fyre-comment-reply
    {
    }

    .fyre-comment-action-button
    {
    }

    .fyre .fyre-comment a
    {
    }
    .fyre .fyre-comment-stream {
    padding-left: 0px;
}
    .fyre .fyre-comment-actions a.fyre-share-link {
    display: none;
}
    .fyre .fyre-comment-actions {
        opacity:1;
    }

    .fyre-comment-body .fyre-comment
    {
        margin-top: 3px !important;
    }

    .fyre .fyre-comment p
    {
        font-size: 13px !important;
        font-family: Lusitana, serif !important;
        font-style: normal;
        font-weight: normal;
        line-height: 18px;
        color: #a2a2a2;
    }

    .fyre-button-right-inner-box
    {
        color: #d3d3d3 !important;
    }

    .spaceDotSpan {
    position: inherit;
    display: inline-block;
    font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
    font-weight: 200;
    font-size: 10.5px;
    line-height: 14px;
    color: #d3d3d3;
    padding: 0px 8px 0px 8px;
}

    .goog-inline-block .fyre-button-right-outer-box
    {
        padding-right: 10px !important;
        margin-right: 5px !important;
    }

    @media only screen
    {
        fyre-comment-reply
        {
            border: 0 !important;
        }
        /*
        .fyre .fyre-comment-action-button {
            text-align: center;
            height: 17px;
            line-height: 17px;
            min-width: 16px;
            padding: 5px 0px 5px 0px;
            background-color: none;
            background-image: none !important;
            filter: none !important;
            border: none !important;
            font-size: 11px;
            font-weight: normal;
            color: #d3d3d3 !important;
        }

        .fyre .fyre-comment-action-button:hover {
            border: none !important;
            background-color: none !important;
            background-image: none !important;
            filter: none !important;
        }
           */
        .fyre .fyre-comment-like
        {
            color: #d3d3d3 !important;
            display: inline-block;
                position: inherit;
    top: 0px;
        padding: 0 0px 0 0;
        }

        .fyre .fyre-comment-date
        {
                font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
    font-weight: 200;
    font-size: 10.5px;
    line-height: 14px;
    position: inherit;
    top: 0px;
    padding: 0px;
            color: #d3d3d3 !important;
        }
        /*
        .fyre .fyre-editor-toolbar .goog-toolbar > div.fyre-button-right.fyre-post-button .fyre-button-right-inner-box {
            text-align: right !important;
        }

        .placeholderComment[placeholder]:empty:before {
            content: attr(placeholder);
            color: #d3d3d3;
            font-size: 11px;
        }

        .placeholderComment[placeholder]:empty:focus:before {
            content: "";
        }
            */

    }

    @media all and (max-width: 980px)
    {
        .GNCommFlagOverlayBody {
}
.GNComm_LegacyRO_BoxClose {
    display:block;
}
.GNComm_LegacyRO_Box {
    min-height: 40px;
    padding: 18px;
    border-radius: 0px;
    max-width: 420px;
        margin-top: 70px;
}
.GNComm_LegacyRO_BoxT1 {
    font-size: 14px;
}
.GNComm_LegacyRO_BoxT2 {
    font-size: 14px;
}

.GNComm_LegacyRO_Arrow {
        margin-top: -25px;
}
    }

    @media all and (max-width: 680px)
    {
 .GNCommFlagOverlayWhiteBox {
    margin: 18px;
}       
 .GNCommDeleteOverlayWhiteBox {
    margin: 18px;
}       
    .GNCommMessageDisplayRight {
    width: 80%;
}
        .GNCommFlagOverlay {

}
        .GNCommFlagOverlayBody {
}
        #GNCommFlagOverlayButton {
}
        #GNCommFlagOverlayButtonClose {
}
    }

    @media all and (max-width: 480px)
    {
        .GNCommFlagOverlayWhiteBox {
}
        .GNCommReplyText {
    width: 70%;
}
        .fyre .fyre-comment-footer
        {
            float: left;
            clear: both;
        }

        .fyre-comment-article
        {
            float: left;
        }
        .fyre-comment-article {
    margin-top: 19px;
}
        .fyre .fyre-comment-replies-indent .fyre-comment-article {
    margin-top: 0px;
}
    }
</style>

<script type="text/javascript">
    var GNCommOverLocked = false;
    var GNCommSetFooterState = "";
    var GNCommShowLegacyState = "";
    //   http://studio.livefyre.com/BGC3.fyre.co/homexx
    function autoGrowTextArea(textField) {
        var cHeight = textField.prop('clientHeight');
        var sHeight = textField.prop('scrollHeight');
        if (cHeight < sHeight) {
            textField.height(sHeight);
            if (textField.prop('clientHeight') < textField.prop('scrollHeight')) {
                var newHeight = textField.prop('scrollHeight') * 2 - textField.prop('clientHeight');
                textField.height(newHeight);
            }
        }
    }

    function elementSupportsAttribute(element, attribute) {
        var test = document.createElement(element);
        if (attribute in test) {
            return true;
        } else {
            return true; //false;
        }
    };


    // [name] is the name of the event "click", "mouseover", ..
    // same as you'd pass it to bind()
    // [fn] is the handler function
    $.fn.bindFirst = function (name, fn) {
        // bind as you normally would
        // don't want to miss out on any jQuery magic
        this.on(name, fn);

        // Thanks to a comment by adding support for
        // namespaced events too.
        this.each(function () {
            var handlers = $._data(this, 'events')[name.split('.')[0]];
            // take out the handler we just inserted from the end
            var handler = handlers.pop();
            // move it at the beginning
            handlers.splice(0, 0, handler);
        });
    };
    function GNComm_htmlEncode(value) {
        //create a in-memory div, set it's inner text(which jQuery automatically encodes)
        //then grab the encoded contents back out.  The div never exists on the page.
        value = value.split(";").join("&#59;");//.replace(";", "&#59;");
        value = value.split("%").join("&#37;");//.replace("%", "&#37;");
        return $('<div/>').text(value).html();
    }
    function addGNLFFooter() {
        $(".fyre-comment-body").each(function () {
            if ($(this).closest(".fyre-comment-article").is(':visible')) {
                if (!$(this).hasClass("hasGNLFFooter")) {
                    //console.log("GNComm:addGNLFFooter");
                    // test date to sort Legacy Locked from Normal comments
                    var commentStyle = "New";
                    var dateText = $(this).parent().find("time.fyre-comment-date").text();
                    //var dateText = "Apr 3, 2017";
                    var dateDate = new Date();
                    try {
                        dateDate = $.datepicker.parseDate("M dd, yy", dateText);
                        //console.log("valid date");
                    } catch (e) {
                        //console.log("invalid date");
                    }
                    var GNCtoday = new Date();
                    var CutOffDay = new Date().setDate(GNCtoday.getDate() - 60); //$.datepicker.parseDate("M dd, yy", "Sep 29, 2017");
                    if (CutOffDay < dateDate) {
                        commentStyle = "New";
                    } else {
                        commentStyle = "Legacy";
                    }
                    $(this).addClass("hasGNLFFooter");
                    if (commentStyle == "New") {
                        // New Active Comments

                        // Reply
                        $("#GNCommReplyBase").clone(false).attr("id", "GNCommReply" + $(this).closest(".fyre-comment-article").attr("data-message-id")).css("display", "none").insertAfter($(this));
                        $("#GNCommEditBoxBase").clone(false).attr("id", "GNCommEditBox" + $(this).closest(".fyre-comment-article").attr("data-message-id")).css("display", "none").insertAfter($(this));
                        $("#GNCommFooterBase").clone(false).attr("id", "GNCommFooter" + $(this).closest(".fyre-comment-article").attr("data-message-id")).css("display", "none").insertAfter($(this));
                        $("#GNCommMessageDisplayBase").clone(false).attr("id", "GNCommMessageDisplay" + $(this).closest(".fyre-comment-article").attr("data-message-id")).css("display", "none").insertAfter($(this));
                        $(document).on('click', '.GNCommReplyPost', function (event) {
                            //console.log("id: " + $(this).parent().attr("id"));
                            if (currentUserData.IsApproved != "false") {
                                $(this).closest(".fyre-comment-article").find(".GNCommWaiting").css("display", "block");
                                GNCommReplyPost($("#GNCommReply" + $(this).closest(".fyre-comment-article").attr("data-message-id")).find(".GNCommReplyTA").val(), $(this).closest(".fyre-comment-article").attr("data-message-id"));
                            }
                        });

                        $(".GNCommFooterReply").unbind().click(function (event) {
                            GNCommHideNotifications();
                            if (isGNILoggedIn()) {
                                //console.log("Reply: " + $(this).parent().attr("id"));
                                //console.log("Reply: " + $(this).parent().parent().find(".GNCommReply").attr("id"));
                                if ($(this).parent().parent().find(".GNCommReply").is(':visible')) {
                                    $(this).parent().parent().find(".GNCommReply").css("display", "none");
                                    $(this).parent().parent().find(".GNCommReplyTA").val("");
                                } else {
                                    $(this).parent().parent().find(".GNCommReply").css("display", "block");
                                }
                            } else {
                                if (currentUserActive == "true" && currentUserData.IsApproved == "false") {
                                    // user logged in to GNI but not verified
                                    var GNCommFoundItem = $(".fyre-comment-article[data-message-id='" + $(this).closest(".fyre-comment-article").attr("data-message-id") + "']");
                                    //GNCommFoundItem.find(".GNCommWaiting").first().css("color", "#890d0d");
                                    //GNCommFoundItem.find(".GNCommWaiting").first().css("display", "block");
                                    //GNCommFoundItem.find(".GNCommWaitingDots").first().css("display", "none");
                                    //GNCommFoundItem.find(".GNCommWaitingMessage").first().html("Please verify your email in order to make comments.");
                                    GNCommFoundItem.find(".GNCommReply").first().after($("#GNCommPleaseVerify"));
                                    $("#GNCommPleaseVerify").css("display", "block");
                                } else {
                                    var GNCommFoundItem = $(".fyre-comment-article[data-message-id='" + $(this).closest(".fyre-comment-article").attr("data-message-id") + "']");
                                    GNCommFoundItem.find(".GNCommReply").first().after($("#GNCommSignUpOrLogIn"));
                                    $("#GNCommSignUpOrLogIn").css("display", "block");
                                }
                            }
                        });
                        $(document).on('keyup', '.GNCommReplyText', function (event) {
                            if ($(this).is(':visible')) {
                                var key = event.which;
                                if (key == 13) {
                                    //console.log("Reply id: " + $(this).parent().attr("id"));
                                    if (currentUserData.IsApproved != "false") {
                                        $(this).closest(".fyre-comment-article").find(".GNCommWaiting").css("display", "block");
                                        GNCommReplyPost($("#GNCommReply" + $(this).closest(".fyre-comment-article").attr("data-message-id")).find(".GNCommReplyTA").val(), $(this).closest(".fyre-comment-article").attr("data-message-id"));
                                    }
                                    event.stopPropagation();
                                }
                                else {
                                    autoGrowTextArea2($(this).find(".GNCommReplyTA"));
                                    event.stopPropagation();
                                }
                            }
                        });
                        $(document).on('keyup', '.GNCommEditBoxTextArea', function (event) {
                            if ($(this).is(':visible')) {
                                //console.log("edit id: " + $(this).parent().attr("id"));
                                autoGrowTextArea2($(this).find(".GNCommEditBoxTA"));
                            }
                        });

                        // Like
                        $(".GNCommFooterLike").unbind().click(function (event) {
                            if (isGNILoggedIn()) {
                                //console.log("Like: " + $(this).parent().attr("id") + " : " + $(this).parent().parent().parent().find(".fyre-comment-like-btn:first").text());
                                if ($(this).parent().parent().parent().find(".fyre-comment-like-btn:first").text() == "Like") {
                                    // check if user is trying to like their own comment
                                    if ($(this).parent().parent().parent().attr("data-author-id") == GNCommUserId + "@gatesnotes.fyre.co") {
                                        // tell user they can't like their own thing
                                        //console.log("tell user they can't like their own thing");
                                    } else {
                                        GNCommLike($(this).parent().parent().parent().attr("data-message-id"));
                                        $(this).find(".heartNum").attr("data-manual-set", "true");
                                        $(this).find(".heartDiv").addClass("on");
                                        // adjust heart num up one
                                        if ($(this).find(".heartNum").text() == "") {
                                            $(this).find(".heartNum").html(1);
                                        } else {
                                            var GNCommHN = parseInt($(this).find(".heartNum").text(), 10);
                                            $(this).find(".heartNum").html(GNCommHN + 1);
                                        }
                                    }
                                } else {
                                    // test for prev like and Unlike if so
                                    GNCommDisLike($(this).parent().parent().parent().attr("data-message-id"));
                                    $(this).find(".heartNum").attr("data-manual-set", "true");
                                    $(this).find(".heartDiv").removeClass("on");
                                    // adjust heart num down one
                                    if ($(this).find(".heartNum").text() == "1") {
                                        $(this).find(".heartNum").html("");
                                    } else {
                                        var GNCommHN = parseInt($(this).find(".heartNum").text(), 10);
                                        $(this).find(".heartNum").html(GNCommHN - 1);
                                    }
                                }
                            }
                        });

                        // Edit Delet
                        $(".GNCommFooterEditText").unbind().click(function (event) {
                            //console.log("EditMenu: " + $(this).parent().parent().attr("id"));
                            GNCommHideNotifications();
                            if ($(this).parent().parent().find(".GNCommFooterEditMenu").is(':visible')) {
                                $(this).parent().parent().find(".GNCommFooterEditMenu").css("display", "none");
                            } else {
                                $(this).parent().parent().find(".GNCommFooterEditMenu").css("display", "block");
                            }
                        });
                        function GNCommHideEditBox(elem) {
                            elem2 = elem.closest(".fyre-comment-wrapper");
                            elem2.find(".GNCommMessageDisplayRight").css("display", "block");
                            elem2.find(".GNCommMention").css("display", "inline-block");
                            elem2.find(".fyre-comment-body").css("display", "block");
                            elem2.find(".fyre-comment-username").css("display", "block");
                            elem2.find(".GNCommFooter").css("display", "flex");
                            elem2.find(".GNCommEditBox").css("display", "none");
                            elem2.find(".GNCommFooterEditMenu").css("display", "none");

                            //elem.parent().parent().parent().parent().find(".GNCommMessageDisplayRight").css("display", "block");
                            //elem.parent().parent().parent().parent().find(".GNCommMention").css("display", "inline-block");
                            //elem.parent().parent().parent().parent().find(".fyre-comment-body").css("display", "block");
                            //elem.parent().parent().parent().parent().find(".fyre-comment-username").css("display", "block");
                            //elem.parent().parent().parent().parent().find(".GNCommFooter").css("display", "flex");
                            //elem.parent().parent().parent().parent().find(".GNCommEditBox").css("display", "none");
                            //elem.parent().parent().parent().parent().find(".GNCommFooterEditMenu").css("display", "none");
                        }
                        $(".GNCommFooterEditMenuEdit").unbind().click(function (event) {
                            //console.log("Edit: " + $(this).parent().parent().parent().attr("id"));
                            // show edit box
                            if ($(this).parent().parent().parent().parent().find(".GNCommEditBox").is(':visible')) {
                                GNCommHideEditBox($(this));
                            } else {
                                $(this).parent().parent().parent().parent().find(".GNCommMessageDisplayRight").css("display", "none");
                                $(this).parent().parent().parent().parent().find(".GNCommMention").css("display", "none");
                                $(this).parent().parent().parent().parent().find(".fyre-comment-body").css("display", "none");
                                $(this).parent().parent().parent().parent().find(".fyre-comment-username").css("display", "none");
                                $(this).parent().parent().parent().parent().find(".GNCommFooter").css("display", "none");
                                $(this).parent().parent().parent().parent().find(".GNCommEditBox").css("display", "block");
                                $(this).parent().parent().parent().parent().find(".GNCommFooterEditMenu").css("display", "none");
                            }
                        });
                        $(document).on('keyup', '.GNCommEditBoxTextArea', function (event) {
                            var key = event.which;
                            if (key == 13) {
                                if ($(this).is(':visible')) {
                                    //console.log("Save: " + $(this).parent().parent().parent().attr("id"));
                                    var GNCommEditedInP = "<p>" + $(this).parent().parent().parent().find(".GNCommEditBoxTA").val() + "</p>";
                                    GNCommEditPost($(this).parent().parent().parent().attr("data-message-id"), GNCommEditedInP);
                                    $(this).parent().parent().parent().attr("data-message-html", GNComm_htmlEncode(GNCommEditedInP));
                                    GNCommHideEditBox($(this));
                                    event.stopPropagation();
                                }
                            }
                        });
                        $(".GNCommEditBoxSave").unbind().click(function (event) {
                            //console.log("Save: " + $(this).parent().parent().parent().attr("id"));
                            var GNCommEditedInP = "<p>" + $(this).parent().parent().parent().find(".GNCommEditBoxTA").val() + "</p>";
                            GNCommEditPost($(this).parent().parent().parent().attr("data-message-id"), GNCommEditedInP);
                            $(this).parent().parent().parent().attr("data-message-html", GNComm_htmlEncode(GNCommEditedInP));
                            GNCommHideEditBox($(this));
                        });
                        $(".GNCommEditBoxCancel").unbind().click(function (event) {
                            GNCommHideEditBox($(this));
                        });
                        //GNCommEditBoxSave
                        //GNCommEditBoxCancel//hide edit
                        $(".GNCommFooterEditMenuDelete").unbind().click(function (event) {
                            //console.log("Delete: " + $(this).parent().parent().parent().attr("id"));
                            // show confirm delete box
                            $(".GNCommDeleteOverlay").css("display", "block");
                            $(".GNCommFooterEditMenu").css("display", "none");
                            $("#GNCommDeleteOverlayButton").attr("data-content-id", $(this).parent().parent().parent().parent().parent().attr("data-message-id"));
                        });
                        $("#GNCommDeleteOverlayButton").unbind().click(function (event) {
                            // delete post
                            GNCommDelete($(this).attr("data-content-id"));
                            $(".GNCommDeleteOverlay").css("display", "none");
                        });
                        $("#GNCommDeleteOverlayClose").unbind().click(function (event) {
                            $(".GNCommDeleteOverlay").css("display", "none");
                        });
                    } else {
                        // Legacy Locked Comments
                        $("#GNCommFooterBaseLocked").clone(false).attr("id", "GNCommFooter" + $(this).closest(".fyre-comment-article").attr("data-message-id")).css("display", "none").insertAfter($(this));
                        $("#GNCommMessageDisplayBase").clone(false).attr("id", "GNCommMessageDisplay" + $(this).closest(".fyre-comment-article").attr("data-message-id")).css("display", "none").insertAfter($(this));
                    }


                    // Flag for both styles
                    $(".GNCommFooterFlag").unbind().click(function (event) {
                        if (isGNILoggedIn()) {
                            // show flag box
                            $(".GNCommFlagOverlay").css("display", "block");
                            $("#GNCommFlagOverlayButton").attr("data-content-id", $(this).parent().parent().parent().attr("data-message-id"));
                        } else {
                            if (currentUserActive == "true" && currentUserData.IsApproved == "false") {
                                var GNCommFoundItem = $(".fyre-comment-article[data-message-id='" + $(this).closest(".fyre-comment-article").attr("data-message-id") + "']");
                                GNCommFoundItem.find(".fyre-comment-footer").first().before($("#GNCommPleaseVerify"));
                                $("#GNCommPleaseVerify").css("display", "block");
                            } else {
                                var GNCommFoundItem = $(".fyre-comment-article[data-message-id='" + $(this).closest(".fyre-comment-article").attr("data-message-id") + "']");
                                GNCommFoundItem.find(".fyre-comment-footer").first().before($("#GNCommSignUpOrLogIn"));
                                $("#GNCommSignUpOrLogIn").css("display", "block");
                            }
                        }
                    });
                    $("#GNCommFlagOverlayButton").unbind().click(function (event) {
                        // flag post
                        GNCommFlag($(this).attr("data-content-id"), $(this).attr("data-flag-type"));
                        //console.log("Flag: " + $(this).attr("data-content-id") + ":" + $(this).attr("data-flag-type"));
                        $(".GNCommFlagOverlayStep1").css("display", "none");
                        $(".GNCommFlagOverlayStep2").css("display", "block");
                    });
                    $("#GNCommFlagOverlayButtonClose").unbind().click(function (event) {
                        $(".GNCommFlagOverlay").css("display", "none");
                        GNCommUncheckFlags();
                        //$("#GNCommFlagOverlayButton").css("opacity", ".2");
                        //$("#GNCommFlagOverlayButton").css("pointer-events", "none");
                        $(".GNCommFlagOverlayStep1").css("display", "block");
                        $(".GNCommFlagOverlayStep2").css("display", "none");
                    });
                    $("#GNCommFlagOverlayClose").unbind().click(function (event) {
                        $(".GNCommFlagOverlay").css("display", "none");
                        GNCommUncheckFlags();
                        //$("#GNCommFlagOverlayButton").css("opacity", ".2");
                        //$("#GNCommFlagOverlayButton").css("pointer-events", "none");
                        $(".GNCommFlagOverlayStep1").css("display", "block");
                        $(".GNCommFlagOverlayStep2").css("display", "none");
                    });
                    function GNCommUncheckFlags() {
                        $("#GNCommFlag1").attr('checked', false);
                        $("#GNCommFlag2").attr('checked', false);
                        $("#GNCommFlag3").attr('checked', false);
                        $("#GNCommFlag1").prop('checked', false);
                        $("#GNCommFlag2").prop('checked', false);
                        $("#GNCommFlag3").prop('checked', false);
                    }
                    function GNCommCheckFlag(boxNum) {
                        switch (boxNum) {
                            case 1:
                                $("#GNCommFlag1").attr('checked', true);
                                $("#GNCommFlag1").prop('checked', true);
                                $("#GNCommFlagOverlayButton").attr("data-flag-type", "off-topic");
                                break;
                            case 2:
                                $("#GNCommFlag2").attr('checked', true);
                                $("#GNCommFlag2").prop('checked', true);
                                $("#GNCommFlagOverlayButton").attr("data-flag-type", "offensive");
                                break;
                            case 3:
                                $("#GNCommFlag3").attr('checked', true);
                                $("#GNCommFlag3").prop('checked', true);
                                $("#GNCommFlagOverlayButton").attr("data-flag-type", "spam");
                                break;
                        }

                        // show report button
                        //$("#GNCommFlagOverlayButton").css("opacity", "1");
                        //$("#GNCommFlagOverlayButton").css("pointer-events", "all");
                    }
                    $("#GNCommFlag1").unbind().click(function (event) {
                        GNCommUncheckFlags();
                        GNCommCheckFlag(1);
                    });
                    $("#GNCommFlag2").unbind().click(function (event) {
                        GNCommUncheckFlags();
                        GNCommCheckFlag(2);
                    });
                    $("#GNCommFlag3").unbind().click(function (event) {
                        GNCommUncheckFlags();
                        GNCommCheckFlag(3);
                    });
                    $(".GNCommFlagOverlayBodyText").unbind().click(function (event) {
                        GNCommUncheckFlags();
                        switch ($(this).parent().find("input").attr("id")) {
                            case "GNCommFlag1":
                                GNCommCheckFlag(1);
                                break;
                            case "GNCommFlag2":
                                GNCommCheckFlag(2);
                                break;
                            case "GNCommFlag3":
                                GNCommCheckFlag(3);
                                break;
                        }
                    });

                }
            }
        });
    }
    function addThirdLevelMentions() {
        $(".fyre-comment-wrapper").each(function () {
            if (!$(this).hasClass("hasMention")) {
                //console.log("GNComm:addThirdLevelMentions");
                GNCommGetItemData($(this).parent().attr("data-message-id"));
                $(this).addClass("hasMention");
            }
        });
    }
    function writeLFMessageBodyHTML(item, body) {
        $('article[data-message-id=' + item + ']').each(function () {
            var encodedBody = GNComm_htmlEncode(body);
            $(this).attr("data-message-html", encodedBody);
            var GNCommEditBody = body.replace("<p>", "").replace("</p>", "");
            $(this).find(".GNCommEditBoxTA").val(GNCommEditBody);
            //var bodyElem = $.parseHTML(body);

            //if (bodyElem.length > 0) {
            //    $(this).attr("data-message-html", GNComm_htmlEncode(bodyElem[0].innerText));
            //    $(this).find(".GNCommEditBoxTA").val(GNComm_htmlEncode(bodyElem[0].innerText));
            //} else {
            //    console.log("body: " + body);
            //}
        });
    }
    function writeThirdLevelMentions(item, parent) {
        var mentionName = "";
        // find fyre-comment-article with data-message-id = parent
        $('article[data-message-id=' + parent + ']').each(function () {
            // find fyre-comment-username
            mentionName = $(this).find(".fyre-comment-username").html();
            // strip :
            if (mentionName != undefined) {
                mentionName = mentionName.replace(":", "");
                // find fyre-comment-article with data-message-id = item
                $('article[data-message-id=' + item + ']').each(function () {
                    // add <span class="GNCommMention">e e</span> after fyre-comment-username
                    $("<span class='GNCommMention'>&nbsp;to " + mentionName + "</span>").insertAfter($(this).find(".fyre-comment-username"));
                    $(this).find(".GNCommMessageDisplayTMention").html("&nbsp;to " + mentionName);
                    $(this).find(".GNCommMessageDisplayTMention").css("display", "inline");
                    // add bodyHTML as data attr
                });
            }
        });
    }
    function moveDate() {
        $("time.fyre-comment-date").each(function () {
            if (!$(this).hasClass("dateMoved")) {
                //console.log("GNComm:moveDate");
                $(this).addClass("dateMoved");
                var tdate = $(this).text();
                tdate = tdate.replace(' ago', '');
                if (tdate.search('day') == -1) {
                    var comDate = new Date(tdate);
                    var diff = Math.abs(new Date() - comDate);
                    var daysCom = Math.floor(diff / days);
                    var monthsCom = Math.floor(diff / month);
                    if (daysCom < 30) {
                        tdate = daysCom.toString() + " days";
                    } else if (monthsCom == 1) {
                        tdate = "a month";
                    } else {
                        tday = monthsCom.toString() + " months";
                    }
                }
                $(this).text(tdate);
                //$(this).parent().nextAll("footer").children("a").append("<span class='fyre-comment-date'>" + tdate + "</span>");
                $("<span class='fyre-comment-date'>" + tdate + "</span>").insertAfter($(this).parent().parent().find('.fyre-comment-reply'));
                $(this).parent().parent().find(".GNCommDisplayTime").html(tdate);
                $(this).css("display", "none");
            }
        });

    }
    function makePost() {
        //var ta = document.getElementsByClassName("fyre-editor-field");
        //$(".fyre-editor-field").unbind("keyup", fyre.conv.Xk);
        $(".fyre-editor-field").each(function () {

            var id = $(this).attr('id');


            document.getElementById(id).addEventListener('keypress', function (event) {
                //event.stopPropagation();
                //return false;
            }, true);
            document.getElementById(id).addEventListener('keydown', function (event) {
                //event.stopPropagation();
                //return false;
            }, true);

            document.getElementById(id).addEventListener('keyup', function (event) {
                var key = event.which;
                if (key == 13) {
                    if (!isGNILoggedIn()) {
                        if (currentUserActive == "true" && currentUserData.IsApproved == "false") {
                            //console.log("logged in but not verified");
                            //$("#GNCommWaitingtop").after($("#GNCommPleaseVerify"));
                            $("#GNCommPleaseVerify").css("display", "block");
                        } else {
                            //MenuS45_OpenSignIn();
                            $("#GNCommSignUpOrLogIn").css("display", "block");
                        }
                    }
                    //$(".goog-inline-block .fyre-button-right-inner-box").click();
                    // goog-inline-block fyre-button-right fyre-post-button fyre-post-button-new
                    //$("div#:nd.goog-inline-block.fyre-button-right.fyre-post-button.fyre-post-button-new").keypress(event);
                    $("#\\:nd").keypress(event);
                    $("#\\:nd").click();
                    //$(".goog-toolbar .goog-toolbar-horizontal").mouseup();
                    return false;
                }
                //$(this).css("height", "50px");
                //event.stopPropagation();
                //autoGrowTextArea($(this));
                //return false;
            }, true);

        });
    }
    function showEditDelete() {
        //fyre-delete-link
        $(".fyre-comment-wrapper").each(function () {
            if ($(this).find(".fyre-delete-link").length > 0) {
                if ($(this).find(".GNCommFooterEdit").attr("data-fyre-username") != GNCommdisplayName) {
                    //console.log("GNComm:showEditDelete");
                    $(this).find(".GNCommFooterEdit").css("display", "inline-block");
                    $(this).find(".GNCommFooterEdit").attr("data-fyre-username", GNCommdisplayName);
                    if ($(this).find(".fyre-comment-edit-interval").length == 0) {
                        //disable edit
                        $(this).find(".GNCommFooterEditMenuEdit").css("opacity", ".2");
                        $(this).find(".GNCommFooterEditMenuEdit").css("pointer-events", "none");
                        $(this).find(".GNCommFooterEditMenuEdit").css("cursor", "default");
                        $(this).find(".GNCommFooterEditMenuEdit").css("display", "none");
                        $(this).find(".GNCommFooterEditMenu").css("height", "40px");
                        $(this).find(".GNCommFooterEditMenu").css("margin-top", "-65px");
                        $(this).find(".GNCommFooterEditMenuArrow").css("margin-top", "26px");
                        $(this).find(".GNCommFooterEditMenuWhiteBox").css("margin-top", "-4px");
                    }
                }
            } else {
                $(this).find(".GNCommFooterEdit").css("display", "none");
            }
        });
    }
    function getLikeCount() {
        $(".fyre-comment-wrapper").each(function () {
            if ($(this).find(".heartNum").html() != $(this).find(".fyre-comment-like-count").html() && $(this).find(".heartNum").attr("data-manual-set") != "true") {
                //console.log("GNComm:getLikeCount");
                $(this).find(".heartNum").html($(this).find(".fyre-comment-like-count").html());
                if ($(this).find(".fyre-comment-like-btn:first").text() == "Like") {
                    $(this).find(".heartDiv").removeClass("on");
                } else {
                    $(this).find(".heartDiv").addClass("on");
                }
            }
        });
    }
    function cleanPosts() {
        //console.log("GNComm:Post:CleanPosts:Time:" + GNCommGetTimeCheck());
        addGNLFFooter();
        moveDate();
        getLikeCount();
        showEditDelete();
        addThirdLevelMentions();
        GNCommSetFooter();
        GNCommMoveAvatar();
        GNCommMoveNames();
        GNCommMoveBody();
        GNCommShowLegacy();
        GNCommAnimateWaiting();
        GNCommCountDisplayed();
    }
    function GNCommAnimateWaiting() {
        if ($(".GNCommWaitingDots").is(':visible')) {
            //console.log("GNComm:GNCommAnimateWaiting");
            if ($(".GNCommWaitingDots").html() == ".") {
                $(".GNCommWaitingDots").html("..");
            } else if ($(".GNCommWaitingDots").html() == "..") {
                $(".GNCommWaitingDots").html("...");
            } else if ($(".GNCommWaitingDots").html() == "...") {
                $(".GNCommWaitingDots").html(".");
            }
        }
    }
    function GNCommCountDisplayed() {
        //$(".scoshare").html(addcomment(GNCommActiveCommentsNumber));
        if ($(".GNCommForm").attr("data-counted") != "done" && $(".fyre-stream-more").is(':visible')) {
            //console.log("GNCommCountDisplayed");
            $(".GNCommForm").attr("data-counted", "done");
            GNCommDisplayedCommentsNumber = 0;
            $(".fyre-comment-wrapper").each(function () {
                if ($(this).is(':visible')) {
                    //console.log("GNComm:GNCommCountDisplayed");
                    GNCommDisplayedCommentsNumber += 1;
                }
            });
            $(".fyre-stream-more .fyre-buttonT").text("Open Comments (" + (GNCommActiveCommentsNumber - GNCommDisplayedCommentsNumber) + ")");
            //console.log("GNCommCountDisplayed:" + GNCommActiveCommentsNumber + ":" + GNCommDisplayedCommentsNumber + ":" + (GNCommActiveCommentsNumber - GNCommDisplayedCommentsNumber));
            if ((GNCommActiveCommentsNumber - GNCommDisplayedCommentsNumber) < 1) {
                $(".fyre-buttonT").css("display", "none");
            } else {
                $(".fyre-buttonT").css("display", "block");
            }
        }
    }
    function GNCommShowLegacy() {
        if ($(".fyre-stream-more").is(':visible')) {
            if (GNCommShowLegacyState != "off") {
                //console.log("GNComm:GNCommShowLegacy");
                $(".commentsLocked").css("display", "none");
                GNCommShowLegacyState = "off";
            }
        } else {
            if (GNCommShowLegacyState != "on") {
                //console.log("GNComm:GNCommShowLegacy");
                $(".commentsLocked").css("display", "block");
                GNCommShowLegacyState = "on";
            }
        }
    }
    function GNCommMoveNames() {
        $(".fyre-comment-wrapper").each(function () {
            if ($(this).find(".GNCommMessageDisplayTName").length && $(this).find(".fyre-comment-username").length) {
                if ($(this).find(".GNCommMessageDisplayTName").html() != $(this).find(".fyre-comment-username").text()) {
                    //console.log("GNComm:GNCommMoveNames");
                    $(this).find(".GNCommMessageDisplayTName").html($(this).find(".fyre-comment-username").text());
                }
            }
        });
    }
    function GNCommMoveBody() {
        $(".fyre-comment-wrapper").each(function () {
            if ($(this).find(".GNCommMessageDisplayTBody").length) {
                encodedHTML = $(this).parent().attr("data-message-html");
                if ($(this).find(".GNCommMessageDisplayTBody").attr("data-message-html") != encodedHTML && $(this).is(':visible')) {

                    try {
                        //console.log("GNComm:GNCommMoveBody");
                        //console.log("MB:" + $(this).find(".GNCommMessageDisplayTBody").attr("data-message-html") + ":" + encodedHTML);
                        decodedHTML = decodeURI(encodedHTML);
                        parsedHTML = $.parseHTML(decodedHTML);
                        parsedHTML2 = $.parseHTML(parsedHTML[0].textContent);
                        $(this).find(".GNCommMessageDisplayTBody").html(parsedHTML2);
                        $(this).find(".GNCommMessageDisplayTBody").attr("data-message-html", encodedHTML);
                        if (encodedHTML == "&lt;p&gt;** Comment is Spam **&lt;/p&gt;" || encodedHTML == "&lt;p&gt;** Comment Deleted **&lt;/p&gt;") {
                            $(this).css("display", "none");
                        } else {
                            $(this).css("display", "block");
                        }
                        $(this).find(".GNCommMessageDisplay").css("display", "block");
                        $(this).find(".GNCommFooter").css("display", "flex");
                        $("#GNCommWaitingtop").css("display", "none");
                        $(".fyre-comment-article").find(".GNCommWaiting").css("display", "none");
                        //console.log("GNComm:Post:DISPLAY:Time:" + GNCommGetTimeCheck());
                    } catch (e) {
                        $(this).find(".GNCommMessageDisplayTBody").html("<p>error displaying this message text</p>");
                        $(this).find(".GNCommMessageDisplayTBody").attr("data-message-html", encodedHTML);
                        if (encodedHTML == "&lt;p&gt;** Comment is Spam **&lt;/p&gt;" || encodedHTML == "&lt;p&gt;** Comment Deleted **&lt;/p&gt;") {
                            $(this).css("display", "none");
                        } else {
                            $(this).css("display", "block");
                        }
                        $(this).find(".GNCommMessageDisplay").css("display", "block");
                        $(this).find(".GNCommFooter").css("display", "flex");
                        $("#GNCommWaitingtop").css("display", "none");
                        $(".fyre-comment-article").find(".GNCommWaiting").css("display", "none");
                        console.log("GNComm:Post:ERROR:Time:" + GNCommGetTimeCheck());
                    }
                }
            }
        });
    }
    function GNCommMoveAvatar() {
        $(".fyre-comment-wrapper").each(function () {
            //if (!$(this).hasClass("hasAvatar")) {
            //    $(this).addClass("hasAvatar");
            //}
            if ($(this).find(".GNCommMessageDisplayAvatarImg").attr("src") != $(this).find(".fyre-user-avatar").attr("src")) {
                //console.log("GNComm:GNCommMoveAvatar");
                $(this).find(".GNCommMessageDisplayAvatarImg").attr("src", $(this).find(".fyre-user-avatar").attr("src"));
                $(this).find(".GNCommMessageDisplayAvatarImg").attr("alt", $(this).find(".fyre-user-avatar").attr("alt"));
            }
        });
    }
    function alignReplies() {
        $(".fyre-comment-container").each(function () {
            if ($(this).parent().parent().parent().hasClass('fyre-stream-content')) {
                $(this).css("margin-left", "37px");
            } else {
                $(this).css("margin-left", "0px");
            }
        });
    }
    function GNCommSetFooter() {
        // check if there are any comments
        if ($(".fyre-comment-wrapper")[0]) {
            // Do something if class exists
            if (GNCommSetFooterState != "off") {
                //console.log("GNComm:GNCommSetFooter");
                $(".GNCommBeTheFirst").css("display", "none");
                //$(".commentsLocked").css("display", "block");
                GNCommSetFooterState = "off";
            }
        } else {
            // Do something if class does not exist
            if (GNCommSetFooterState != "on") {
                //console.log("GNComm:GNCommSetFooter");
                $(".GNCommBeTheFirst").css("display", "block");
                //$(".commentsLocked").css("display", "none");
                GNCommSetFooterState = "on";
            }
        }
    }
    var numcommentsLF = 42;
    var heartSVG = '<div class="heartDiv"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" height="12" width="12" viewBox="0 -28.234 600 600" role="img"><path d="M300.003,543.532L53.555,297.104c-68.681-65.205-71.726-174.126-6.69-243.066C79.262,19.696,124.929,0,172.154,0 c44.1,0,86.062,16.674,118.156,46.948c2.233,2.096,4.459,4.307,6.716,6.68l2.978,2.976l2.967-2.966 C335.35,19.543,380.847,0,427.886,0c44.097,0,86.06,16.672,118.158,46.944c69.068,65.152,72.25,174.359,7.1,243.445 c-2.191,2.316-4.426,4.555-6.681,6.701L300.003,543.532z"></path></svg></div>';
    jQuery.fn.reverse = [].reverse;
    // https://answers.livefyre.com/developers/reference/app-customizations/javascript-events/#showMore
    function lfInitialRenderComplete(data) {
        //alignReplies();
        $(".fyre-editor").first().css("display", "none");
        $(".fyre-stream-more").css("background", "transparent");
        $(".fyre-stream-more-container").addClass("fyre-buttonM");
        $(".fyre-stream-more .fyre-text").addClass("fyre-buttonT");
        $(".fyre-stream-more .fyre-text").removeClass("fyre-text");
        //$(".fyre-stream-more .fyre-buttonT").text(numcommentsLF);
        GNCommCountDisplayed();
        $(".GNCommDeleteOverlay").insertBefore(".AH_Holder");
        $(".GNCommFlagOverlay").insertBefore(".AH_Holder");
        $(".fyre-comment-stream").append($(".commentsLocked"));
        

        $(document).on('click', '.fyre-buttonT', function (event) {
            // this never gets called
            setTimeout(function () {
                cleanPosts();
            }, 300);
        });

        $(document).on('click', '.GNCommPleaseVerifyT2', function (event) {
            resendVerifyLink();
            $(".GNCommPleaseVerifyT2").css("opacity", ".2");
            $(".GNCommPleaseVerifyT2").delay(1500).animate({ 'opacity': 1 }, 1000);
        });

        $(document).on('click', '.GNCommSignUpOrLogInSU', function (event) {
            MenuS45_OpenSignUp();
            omnihelpers.signupPath("Comments");
        });
        $(document).on('click', '.GNCommSignUpOrLogInLI', function (event) {
            MenuS45_OpenSignIn();
            omnihelpers.signupPath("Comments");
        });
        

        $(document).on('click', '.fyre-stream-content', function (event) {
            if (currentUserActive == "true" && currentUserData.IsApproved == "false") {
                //console.log("logged in but not verified");
                //$("#GNCommWaitingtop").after($("#GNCommPleaseVerify"));
                $("#GNCommPleaseVerify").css("display", "block");
            } else {
                if (currentUserActive != "true") {
                    //MenuS45_OpenSignIn();
                    $("#GNCommSignUpOrLogIn").css("display", "block");
                }
            }
        });
        $(document).on('click', '.GNCommNotificationBoxClose', function (event) {
            GNCommHideNotifications();
        });
        $(document).on('click', '.GNComm_SignIn_BodyLink', function (event) {
            hideAuthHolders();
        });

        $(document).on('click', '.GNComm_LegacyRO_BoxClose', function (event) {
            $(this).parent().css("display", "none");
            GNCommOverLocked = false;
            setTimeout(function () {
                if (GNCommOverLocked != true) {
                    $(".GNComm_LegacyRO_Box").css("display", "none");
                }
            }, 500);
        });

        $(document).on('click', '.GNCommFooterLocked', function (event) {
            $(".GNComm_LegacyRO_Box").css("display", "none");
            $(this).parent().find(".GNComm_LegacyRO_Box").css("display", "block");
        });
        $(document).on('mouseenter', '.GNCommFooterLocked', function (event) {
            GNCommOverLocked = true;
            $(".GNComm_LegacyRO_Box").css("display", "none");
            $(this).parent().find(".GNComm_LegacyRO_Box").css("display", "block");
        });
        $(document).on('mouseleave', '.GNCommFooterLocked', function (event) {
            setTimeout(function () {
                if (GNCommOverLocked != true) {
                    $(".GNComm_LegacyRO_Box").css("display", "none");
                }
            }, 500);
            GNCommOverLocked = false;
        });
        $(document).on('mouseenter', '.GNComm_LegacyRO_Box', function (event) {
            GNCommOverLocked = true;
        });
        $(document).on('mouseleave', '.GNComm_LegacyRO_Box', function (event) {
            $(".GNComm_LegacyRO_Box").css("display", "none");
            GNCommOverLocked = false;
        });

        $(document).on('click', '.GNComm_LegacyRO_BoxT2', function (event) {
            window.location.href = '/Contact-Bill-Gates';
        });

        setTimeout(function () {

            $('#livefyre-tablet .fyre-stream-content').css('display', 'flex');
            $('#livefyre-tablet .fyre-stream-content').css('flex-direction', 'column-reverse');
            $('#livefyre-tablet .fyre-stream-content').parent().css('overflow-y', 'auto');

            if (false) { // !elementSupportsAttribute('div', 'placeholder')) {
                // Fallback for browsers that don't support HTML5 placeholder attribute
                $(".fyre-editor-container .fyre-editor-field")
                    .text("Add a nice comment…")
                    .data("originalText", $(".fyre-editor-container .fyre-editor-field").text())
                    .css("color", "#d3d3d3")
                    .focus(function () {
                        var $el = $(this);
                        if (this.value == $el.data("originalText")) {
                            this.value = "";
                        }
                    })
                    .blur(function () {
                        if (this.value == "") {
                            this.value = $(this).data("originalText");
                        }
                    });
            }

            cleanPosts();

        }, 100);
        setInterval(cleanPosts, 1000);
    }
</script>

                        </div>
                    </div>
                </div>
                <div class="TGN_site_Contact">
                    
                </div>
                <div class="TGN_site_Search">
                    
                </div>
                <div class="TGN_site_Newsletter">
                    
                </div>
                <div class="TGN_site_SignUpForm">
                    
                </div>
            </div>
            <div class="TGN_site_Footer">
                <div class="footerh">
                    
    <style>
.TGN_Footer_Holder {
    background: black;
    color: white;
    font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
    font-weight: 300;
    font-size: 20px;
    line-height: 27px;
    padding-top: 40px;
    padding-bottom: 32px;
    border-top: 0.5px solid rgba(255,255,255,0.5);
}
    .TGN_Footer_TopSection {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 40px;
    }

    .TGN_Footer_GridBlockLogo a {
        display: flex;
        align-items: flex-start;
    }

    .TGN_footer_Logo {
        background-image: url(/img/TGN_Logo-W-01.svg);
        background-repeat: no-repeat;
        height: 29px;
        width: 180px;
    }

    .TGN_footer_Tbobg {
        background-image: url(/img/TGN_TBOBG-W-01.svg);
        background-repeat: no-repeat;
        height: 32px;
        width: 107px;
        margin-top: 8px;
        margin-left: 0px;
    }

    .TGN_Footer_GridBlockParagraph {
        font-size: 15px;
        line-height: 26px;
        letter-spacing: .3px;
        margin-bottom: 10px;
    }

    .TGN_Footer_GridBlockSignature {
        text-align: right;
    }
.TGN_Footer_GridBlock i {
    background: white;
    color: black;
    border-radius: 3000px;
    width: 26px;
    height: 26px;
    display: block;
    font-size: 12px;
    line-height: 26px;
    text-align: center;
    margin-top: 7px;
}
    .TGN_Footer_Personal {
        padding-top: 50px;
        padding-bottom: 50px;
        width: 90%;
        max-width: 420px;
        margin-left: auto;
        margin-right: auto;
        display: none;
    }

    #TGN_Footer_PersonalImage {
        width: 178px;
        margin-top: 6px;
    }

    .TGN_Footer_BottomSection {
        margin-top: 0px;
        display: flex;
        justify-content: space-between;
    }

    .TGN_Footer_BottomSectionTopLeft {
        display: flex;
        align-items: flex-start;
        justify-content: space-between;
        width: 48%;
        padding-top: 50px;
        padding-bottom: 50px;
    }

        .TGN_Footer_BottomSectionTopLeft .TGN_Footer_GridBlock {
            width: 100%;
        }

    .TGN_Footer_BottomSectionBottomRight {
        width: 48%;
    }

    .TGN_Footer_GridBlock {
        display: inline-block;
    }

    .TGN_Footer_VerticalLineDesktop {
        display: block;
        width: 1px;
        background: #757575;
    }

    .TGN_Footer_LineMobile {
        display: none;
    }

    .TGN_Footer_LineDesktop {
        width: 100%;
        height: 1px;
        background: #757575;
        margin-top: 0px;
        margin-bottom: 0px;
    }

    #TGN_Footer_WordLinks {
        display: -ms-flexbox; /* IE 10 */
        display: -webkit-flex; /* Safari 6.1+. iOS 7.1+ */
        display: flex;
        -webkit-flex-flow: wrap column; /* Safari 6.1+ */
        flex-flow: wrap column;
        max-height: 200px;
        width: 90%;
        margin-left: auto;
        margin-right: auto;
        max-width: 480px;
    }
    
    a.TGN_FooterWordLink {
        color: white;
        font-size: 15px;
        line-height: 15px;
        margin-bottom: 38px;
        text-decoration: none;
        display: inline-block;
        margin-right: 24px;
    }
    a.TGN_FooterWordLink:hover {
        opacity:.6;
    }

    .TGN_Footer_SignupHeadline {
        margin-bottom: 26px;
        line-height: 15px;
    }

    .TGN_Footer_Signup {
        display: block;
        font-size: 15px;
        font-weight: 400;
        padding-top: 50px;
        padding-bottom: 50px;
        width: 90%;
        margin-left: auto;
        margin-right: auto;
        max-width: 400px;
    }

    #Auth_50_Form_Footer {
        display: flex;
        flex-flow: column;
        justify-content: space-between;
    }

    .footerSU {
        height: 40px;
        width: 114px;
        border: 1px solid #FFFFFF;
        border-radius: 0px;
        color: #FFFFFF;
        font-size: 15px;
        font-weight: 400;
        text-align: center;
        line-height: 38px;
        cursor: pointer;
        margin-top: 20px;
    }
    .footerSU:hover {
        opacity:.6;
    }

    .footerEntryBox {
        background: black;
        color: white;
        border: none;
        border-bottom: 1px solid #757575;
        padding: 2px;
        font-size: 15px;
        margin-bottom: 20px !important;
    }

        .footerEntryBox:focus {
            background: black !important;
        }
.TGN_Footer_GridBlock .iconBlock {
    margin-left: 12px;
}
    .TGN_Footer_LastLine {
        font-size: 12px;
        color: #cccccc;
        text-align: center;
        margin-top: 28px;
    }

    a.TGN_Footer_LastLineLink {
        color: #cccccc;
        text-decoration: none;
        display: inline-block;
        margin-left: 24px;
    }
    a.TGN_Footer_LastLineLink:hover {
        opacity:.6;
    }

    a.tgnlink {
        color: white;
        text-decoration: none;
    }

    .TGN_Footer_LastLineLinks {
        display: inline-block;
    }

    @media all and (max-width: 1280px) {
    }

    @media all and (max-width: 1020px) {
        .TGN_Footer_Personal {
            max-width: 408px;
            margin-left: 0px;
        }

        .TGN_Footer_GridBlockSignature {
            text-align: left;
        }

        .TGN_Footer_BottomSection {
            margin-top: 0px;
            display: flex;
            justify-content: center;
            flex-flow: column;
        }

        .TGN_Footer_BottomSectionTopLeft {
            width: 100%;
            margin-left: auto;
            margin-right: auto;
            padding-bottom: 20px;
        }

        .TGN_Footer_VerticalLineDesktop {
            width: 100%;
            height: 2px;
        }

        .TGN_Footer_BottomSectionBottomRight {
            width: 100%;
        }

        #TGN_Footer_WordLinks {
            max-width: 600px;
            width: 100%;
            margin-left: 0px;
            margin-right: auto;
        }

        .TGN_Footer_LastLine {
            text-align: left;
        }

        .TGN_Footer_Signup {
            margin-left: 0px;
        }

        .TGN_Footer_BottomSectionBottomRight {
            width: 100%;
            margin-left: auto;
            margin-right: auto;
        }
    }

    @media all and (max-width: 980px) {
    }

    @media all and (max-width: 680px) {
        .TGN_Footer_Holder {
            padding-top: 24px;
        }

        .TGN_Footer_TopSection {
            flex-flow: column;
            margin-bottom: 24px;
        }

        .TGN_Footer_LineMobile {
            display: block;
            width: 100%;
            height: 1px;
            background: #757575;
            margin-top: 24px;
            margin-bottom: 24px;
        }

        .TGN_Footer_LineDesktop {
            margin-top: 16px;
            margin-bottom: 16px;
        }

        .TGN_Footer_VerticalLineDesktop {
            margin-top: 24px;
            margin-bottom: 24px;
        }

        .TGN_Footer_BottomSectionTopLeft {
            padding-top: 20px;
            padding-bottom: 0px;
        }

        a.TGN_FooterWordLink {
            margin-bottom: 24px;
        }

        .TGN_Footer_Signup {
            padding-top: 20px;
            padding-bottom: 16px;
        }

        .TGN_Footer_Personal {
            padding-top: 10px;
            padding-bottom: 16px;
            width: 100%;
        }

        .TGN_Footer_LastLine {
        }

        .TGN_Footer_GridBlock .iconBlock {
        }

        #TGN_Footer_WordLinks {
            max-height: 180px;
        }

        .TGN_Footer_TopSection {
            align-items: flex-start;
        }

        #TGN_Footer_GridBlock_Social {
            margin-left: -12px;
        }

        .TGN_Footer_SignupHeadline {

        }

        .TGN_Footer_LastLineLinks {
            display: block;
        }

        a.TGN_Footer_LastLineLink {
            margin-left: 0px;
            margin-right: 24px;
        }
    }

    @media all and (max-width: 480px) {

    }
</style>
<div class="TGN_Footer_Holder">
    <div class="TGN_site_ContentArea">
        <div class="TGN_Footer_TopSection">
            <div class="TGN_Footer_GridBlockLogo">
                <a href="/">
                    <div class="TGN_footer_Tbobg"></div>
                </a>
            </div>
            <div class="TGN_Footer_LineMobile">

            </div>
            <div class="TGN_Footer_GridBlock" id="TGN_Footer_GridBlock_Social">
                <div class="iconBlock">
                    <i class="icon-facebook"></i>
                </div>
                <div class="iconBlock">
                    <i class="icon-twitter"></i>
                </div>
                <div class="iconBlock">
                    <i class="icon-linkedin"></i>
                </div>
                <div class="iconBlock">
                    <i class="icon-instagram"></i>
                </div>
                <div class="iconBlock">
                    <i class="icon-youtube"></i>
                </div>
            </div>
        </div>
        <div class="TGN_Footer_LineDesktop">

        </div>
        <div class="TGN_Footer_BottomSection">
            <div class="TGN_Footer_BottomSectionTopLeft">

                <div class="TGN_Footer_GridBlock">
                    <div id="TGN_Footer_WordLinks" class="iconBlockGroup" data-wordlinks="About0Bill=%2FBio&amp;Search=%2FSearch&amp;All0posts=%2FAll&amp;Books=%2FBooks&amp;Education=%2FEducation&amp;Saving0lives=%2FSaving-lives&amp;Climate0and0energy=%2FClimate-and-energy&amp;Personal=%2FPersonal&amp;Videos=%2FVideos">
                        <div id="TGN_Footer_WordLinksTemplate" class="iconBlock">
                            <a href="/climate-and-energy" class="TGN_FooterWordLink">
                                <div class="TGN_FooterWord">Energy</div>
                            </a>
                        </div>
                    </div>
                </div>

            </div>

            <div class="TGN_Footer_VerticalLineDesktop">

            </div>
            <div class="TGN_Footer_BottomSectionBottomRight">
                <div class="TGN_Footer_Signup">
                    <div class="TGN_Footer_SignupHeadline">
                        Subscribe to emails from Bill
                    </div>
                    <form id="Auth_50_Form_Footer" autocomplete="off">
                        <input name="footerFirstName" type="text" maxlength="256" id="footerFirstName" class="footerEntryBox" placeholder="First name" autocomplete="given-name">
                        <input name="footerLastName" type="text" maxlength="256" id="footerLastName" class="footerEntryBox" placeholder="Last name" autocomplete="family-name">
                        <input name="footerEmail" type="email" maxlength="256" id="footerEmail" class="footerEntryBox" placeholder="Email" autocomplete="email">
                        <div id="footerSU" class="footerSU">
                            Sign up
                        </div>
                    </form>
                </div>
                <div class="TGN_Footer_Personal">
                    <div class="TGN_Footer_GridBlockParagraph">
                        This is my personal blog, where I share about the people I meet, the books I'm reading, and what I'm learning. I hope that you'll join the conversation.
                    </div>
                    <div class="TGN_Footer_GridBlockSignature">
                        <img id="TGN_Footer_PersonalImage" src="https://media.gatesnotes.com/-/media/Images/Body-Parts/bill-g_sig_white.ashx" />
                    </div>
                </div>
            </div>

        </div>


        <div class="TGN_Footer_LineDesktop">

        </div>

        <div class="TGN_Footer_LastLine" data-lastlinelinks="Privacy0policy=%2FPrivacy-policy&amp;Terms0of0use=%2FTerms-of-use&amp;Contact=%2FContact-Bill-Gates">
            &#169; 2020 The Gates Notes LLC
        </div>



    </div>
</div>
<script type="text/javascript">
    var Footer_UserItemsUpdated = false;
    var TGNPageID = "";
    if (document.querySelector("meta[name='pageID']") != null) {
        TGNPageID = document.querySelector("meta[name='pageID']").getAttribute("content");
    }
    var TGNPageURL = "";
    if (document.querySelector("meta[property='og:url']") != null) {
        TGNPageURL = document.querySelector("meta[property='og:url']").getAttribute("content");;
    }
    var TGNUserID = localStorage.getItem('currentUserUserName');
    var TGNUserEMAIL = localStorage.getItem('currentUserEmail');
    function TGN_AddPageToViewed() {
        // Handle Page View Local Storage
        var storedNames = JSON.parse(localStorage.getItem("TGNViewedPageIDs"));
        if (localStorage.getItem("TGNViewedPageIDs") === null) {
            var storedNames = {};
            var viewedItems = [];
            storedNames.viewedItems = viewedItems;
            var viewedItem = {
                "viewedItem": TGNPageID
            }
            storedNames.viewedItems.push(viewedItem);
            localStorage.setItem("TGNViewedPageIDs", JSON.stringify(storedNames));
        } else {
            var itemalreadyviewed = TGN_CheckJSONForMatch(storedNames, TGNPageID);
            if (!itemalreadyviewed) {
                var viewedItem = {
                    "viewedItem": TGNPageID
                }
                storedNames.viewedItems.push(viewedItem);
                localStorage.setItem("TGNViewedPageIDs", JSON.stringify(storedNames));
            }
        }
        //console.log("Viewed Pages: " + JSON.stringify(storedNames));

        // Track Page View and Event in AppInsights
        if (TGNUserID != null && TGNUserID != "") {
            appInsights.trackEvent
                ("Page Viewed",
                    // String properties:
                    { ID: TGNPageID, URL: TGNPageURL, USERID: TGNUserID, EMAIL: TGNUserEMAIL },
                    // Numeric metrics:
                    { UNIT: 1 }
                );

            appInsights.trackPageView
                ("page name", TGNPageURL,
                    // String properties:
                    { ID: TGNPageID, URL: TGNPageURL, USERID: TGNUserID, EMAIL: TGNUserEMAIL },
                    // Numeric metrics:
                    { UNIT: 1 }
                );
        }
    }
    function TGN_CheckJSONForMatch(JSON, lookfor) {
        //console.log(JSON + JSON.viewedItems.length + lookfor);
        for (var index = 0; index < JSON.viewedItems.length; ++index) {
            var item = JSON.viewedItems[index];
            //console.log(item.viewedItem + lookfor);
            if (item.viewedItem == lookfor) {
                return true;
            }
        }
        return false;
    }
    function UpdateFooterUserInfo() {
        if (!Footer_UserItemsUpdated && currentUserStatusChecked != "false") {
            if (currentUserStatusChecked == "true:user") {
                $(".TGN_Footer_Signup").css("display", "none");
                $(".TGN_Footer_Personal").css("display", "block");
                Footer_UserItemsUpdated = true;
                clearInterval(UpdateFooterUserInfoInt);
            } else {
                $(".TGN_Footer_Signup").css("display", "block");
                $(".TGN_Footer_Personal").css("display", "none");
            }
        }
        //if (!Footer_UserItemsUpdated && currentUserStatusChecked != "false") {
        //    if (currentUserStatusChecked == "true:user") {
        //        $(".TGN_Footer_Signup").css("pointer-events", "none");
        //        $(".TGN_Footer_Signup").css("opacity", ".6");
        //        Footer_UserItemsUpdated = true;
        //        clearInterval(UpdateFooterUserInfoInt);
        //    } else {
        //        $(".TGN_Footer_Signup").css("pointer-events", "block");
        //        $(".TGN_Footer_Signup").css("opacity", "1");
        //    }
        //}
    }
    var UpdateFooterUserInfoInt = null;

    $(document).ready(function () {
        $(".TGN_Footer_LastLine").html($(".TGN_Footer_LastLine").html() + "<div class='TGN_Footer_LastLineLinks'>" + TGN_Footer_SplitValuePairLastLineLinks($(".TGN_Footer_LastLine").attr("data-lastlinelinks")) + "</div>");
        $("#TGN_Footer_WordLinks").html(TGN_Footer_SplitValuePairWordLinks($("#TGN_Footer_WordLinks").attr("data-wordlinks")));
        UpdateFooterUserInfoInt = setInterval(function () {
            UpdateFooterUserInfo();
        }, 1000);
        $(".footerh").css("opacity", 1);


        $(".TGN_Footer_Holder").find(".icon-facebook").click(function () {
            TGN_Follow_FB();
        });
        $(".TGN_Footer_Holder").find(".icon-twitter").click(function () {
            TGN_Follow_TW();
        });
        $(".TGN_Footer_Holder").find(".icon-linkedin").click(function () {
            TGN_Follow_LI();
        });
        $(".TGN_Footer_Holder").find(".icon-instagram").click(function () {
            TGN_Follow_IG();
        });
        $(".TGN_Footer_Holder").find(".icon-youtube").click(function () {
            TGN_Follow_YT();
        });
        $(".footerSU").click(function () {
            TGN_Follow_FooterSignup();
        });
        function TGN_Follow_FooterSignup() {
            var TGN_Footer_First = $("#footerFirstName").val();
            var TGN_Footer_Last = $("#footerLastName").val();
            var TGN_Footer_Email = $("#footerEmail").val();
            //window.open(href = '/Sign-Up?first=' + TGN_Footer_First + '&last=' + TGN_Footer_Last + '&email=' + TGN_Footer_Email, 'signup-follow');
            //doOmnitureFollowEvent("signupfromfooter");
            $("#txtFirstName").val('' + TGN_Footer_First);
            $("#txtLastName").val('' + TGN_Footer_Last);
            $("#txtEmail").val('' + TGN_Footer_Email);
            showAuthRegister();
            omnihelpers.signupPath("Footer");
        }
        TGN_AddPageToViewed();
    });
    function TGN_Footer_SplitValuePairLastLineLinks(data) {
        var returnHTML = "";
        var dataPairs = data.split("&");
        var i;
        for (i = 0; i < dataPairs.length; ++i) {
            var dataInfo = dataPairs[i].split("=");
            var dataName = dataInfo[0];
            dataName = dataName.replace("0", "&nbsp;");
            dataName = dataName.replace("0", "&nbsp;");
            dataName = dataName.replace("0", "&nbsp;");
            var dataValue = dataInfo[1];
            returnHTML += "<a class='TGN_Footer_LastLineLink' href='" + decodeURIComponent(dataValue) + "'>" + dataName + "</a> ";
        }
        return returnHTML;
    }
    function TGN_Footer_SplitValuePairWordLinks(data) {
        var returnHTML = "";
        var dataPairs = data.split("&");
        var i;
        for (i = 0; i < dataPairs.length; ++i) {
            var dataInfo = dataPairs[i].split("=");
            var dataName = dataInfo[0];
            dataName = dataName.replace("0", "&nbsp;");
            dataName = dataName.replace("0", "&nbsp;");
            dataName = dataName.replace("0", "&nbsp;");
            var dataValue = dataInfo[1];
            var $newWL = $("#TGN_Footer_WordLinksTemplate").clone().prop('id', 'TGN_Footer_WordLinks' + i);
            $newWL.find("a").attr("href", decodeURIComponent(dataValue));
            $newWL.find(".TGN_FooterWord").html(dataName);
            returnHTML += $newWL.html();
        }
        return returnHTML;
    }
    $(".TGN_site").scroll(function () {

    });
</script>


                </div>
            </div>
        </div>
    </div>

    <div class="TGN_site_FullOverlay">
        <div id="TGN_SiteWide_CTAs" class="TGN_SiteWide_CTAs">
            <div class="TGN_site_Lightbox">
                <div class="TGN_site_Lightbox_Top">
                    <div class="TGN_site_Lightbox_Close"><i class="icon-close-x"></i></div>
                </div>
                <div class="TGN_site_Lightbox_Middle">
                    <div class="TGN_site_Lightbox_Video gnYoutubeHolder videoEmbed">

                    </div>
                </div>
                <div class="TGN_site_Lightbox_Bottom">
                    <div class="TGN_site_Lightbox_Title tgn_NowPlaying_Module_title">

                    </div>
                    <div class="TGN_site_Lightbox_Description tgn_NowPlaying_Module_description">

                    </div>
                    <div class="TGN_site_Lightbox_VR_Addon">
                    </div>
                </div>
            </div>
            
            
    <style>

.SiteWide_CTAs_Survey_HTML {
    background-color: white;
}
    .SiteWide_CTAs_Survey_HTML_outer {
        width: 100%;
        height: 100%;
        background: rgba(255,255,255,.9);
        position: fixed;
        bottom: 0px;
        z-index: 300;
        display: none;
        align-items: center;
        align-content: center;
        justify-content: center;
    }

    .SiteWide_CTAs_Survey_HTML_inner {
        height: 393px;
        width: 594px;
        background-color: #3D65B6;
        margin-left: auto;
        margin-right: auto;
        margin-top: 0px;
        padding: 10px;
        display: flex;
        align-items: flex-start;
        flex-direction: column;
    }
    .SiteWide_CTAs_Survey_HTML_collumn1 {
        width: 18px;
        height: 18px;
        display: contents;
        position: relative;
        right: 0px;
    }
    .SiteWide_CTAs_Survey_HTML_close {
        font-size: 18px;
        margin-left: auto;
        cursor: pointer;
        color: white;
        display: flex;
        justify-content: flex-end;
        align-items: flex-start;
    }
    .SiteWide_CTAs_Survey_HTML_collumn2 {
        width: 380px;
        display: flex;
        flex-flow: column;
        align-items: flex-start;
        margin-left: auto;
        margin-right: auto;
    }
    .SiteWide_CTAs_Survey_HTML_content {
        color: white;
        font-size: 43px;
        line-height: 39px;
        font-family: source-serif-pro, 'Source Serif Pro', 'LyonDisplay-Medium', serif;
        font-weight: 900;
        margin-top: 52px;
    }
    .SiteWide_CTAs_Survey_HTML_collumn3 {
        display: flex;
        flex-flow: row;
        width: 380px;
        margin-left: auto;
        margin-right: auto;
        margin-top: 50px;
    }

    .SiteWide_CTAs_Survey_HTML_contentGNI {
        display: block;
    }
    #SiteWide_CTAs_Survey_HTML_surveyLink {
        display: block;
        padding: 8px 20px;
        background: #fff;
        color: #3D65B6;
        text-decoration: none;
        border-radius: 0px;
        font-family: 'Roboto Condensed', 'Asap Condensed', 'neue-haas-unica', sans-serif;
        font-size: 14px;
        font-weight: 600;
        text-transform: uppercase;
        margin-right: 20px;
        border: 1px solid white;
    }

        #SiteWide_CTAs_Survey_HTML_surveyLink:hover {
            opacity: .9;
        }

    #SiteWide_CTAs_Survey_HTML_closeBox {
        display: block;
        padding: 8px 20px;
        background: #3D65B6;
        color: white;
        text-decoration: none;
        border-radius: 0px;
        font-family: 'Roboto Condensed', 'Asap Condensed', 'neue-haas-unica', sans-serif;
        font-size: 14px;
        font-weight: 600;
        text-transform: uppercase;
        border: 1px solid white;
    }
        #SiteWide_CTAs_Survey_HTML_closeBox:hover {
            opacity: .9;
        }

    #closeBox:hover {
        color: #999;
        text-decoration: underline;
    }

@media all and (max-width: 680px) {

.SiteWide_CTAs_Survey_HTML_outer {
}
    .SiteWide_CTAs_Survey_HTML_inner {
        height: 224px;
        width: 277px;
    }
    .SiteWide_CTAs_Survey_HTML_close {
        font-size: 21px;
    }
    .SiteWide_CTAs_Survey_HTML_collumn2 {
        width: 227px;
    }
    .SiteWide_CTAs_Survey_HTML_content {
        font-size: 25px;
        line-height: 24px;
        margin-top: 12px;
    }
    .SiteWide_CTAs_Survey_HTML_collumn3 {
        width: 227px;
        margin-top: 20px;
    }
    #SiteWide_CTAs_Survey_HTML_surveyLink {
        padding: 6px 18px;
        font-size: 8px;
        margin-right: 10px;
    }
    #SiteWide_CTAs_Survey_HTML_closeBox {
        padding: 6px 18px;
        font-size: 8px;
    }

    .SiteWide_CTAs_Survey_HTML_contentGNI {
        display: inline-block;
    }
}
</style>

<div class="SiteWide_CTAs_Survey_HTML_outer surveyContainer">
    <div class="SiteWide_CTAs_Survey_HTML_inner">
        <div class="SiteWide_CTAs_Survey_HTML_collumn1">
            <div class="SiteWide_CTAs_Survey_HTML_close"> <i class="icon-close-x"></i> </div>
        </div>
        <div class="SiteWide_CTAs_Survey_HTML_collumn2">
            <div class="SiteWide_CTAs_Survey_HTML_content">
                Thanks for visiting the Gates Notes. We'd like your feedback.
            </div>
        </div>
        <div class="SiteWide_CTAs_Survey_HTML_collumn3">
            <a id="SiteWide_CTAs_Survey_HTML_surveyLink" href="" target="_blank">Yes, I'll take the survey</a>
            <a id="SiteWide_CTAs_Survey_HTML_closeBox" href="javascript:void(0);">No thanks</a>
        </div>
    </div>
</div>

<script type="text/javascript">
    var ALSurveySectionComplete = false;
    var ALSurveyLetterStart = false;
    var ALTookSurvey = false;
    var ALTookSurvey2 = false;
    var SurveyLink = "";
    var SurveyHTMLB = 'http://web.gatesnotes.com/cn/aaaxh/sitesurvey';
    var SurveyHTMLA = 'http://opco.me/A19918B';
    var SurveyAPercentage = 0;
    var SurveyBPercentage = 100;
    var InitialPoolPercentage = 0;
    var SurveySpecialURLs = '{"URLS":{"ITEMS":[';
    var SurveySpecialURL = false;
    var SurveyALURL = false;
    var SurveyEnabled = true;
    // make JSON from special URLs
    $(function () {
        var lastChar = SurveySpecialURLs.substr(SurveySpecialURLs.length - 1);
        if (lastChar == ",") {
            // remove last comma
            SurveySpecialURLs = SurveySpecialURLs.slice(0, -1)
        }
        SurveySpecialURLs += ']}}';
    });
    $(document).ready(function () {
        // convert JSON to obj
        var Surveyobj = jQuery.parseJSON( SurveySpecialURLs );
        for (i = 0; i < Surveyobj.URLS.ITEMS.length; ++i) {
            // test to see if our page matches any of the special case URLs setup in sitecore
            if (Surveyobj.URLS.ITEMS[i].URL == window.location.pathname) {
                SurveySpecialURL = true;
                SurveyHTMLA = Surveyobj.URLS.ITEMS[i].A;
                SurveyHTMLB = Surveyobj.URLS.ITEMS[i].B;
                SurveyAPercentage = Surveyobj.URLS.ITEMS[i].APercentage;
                SurveyBPercentage = Surveyobj.URLS.ITEMS[i].BPercentage;
                InitialPoolPercentage = Surveyobj.URLS.ITEMS[i].InitialPoolPercentage;
                // special AL code
                if (Surveyobj.URLS.ITEMS[i].URL.toLowerCase().indexOf("annual-letter") >= 0) {
                    SurveyALURL = true;
                }
            }
        }
        SurveyAPercentage = parseInt(SurveyAPercentage);
        SurveyBPercentage = parseInt(SurveyBPercentage);
        InitialPoolPercentage = parseInt(InitialPoolPercentage);
        //console.log("SurveyAPercentage+SurveyBPercentage:"+(SurveyAPercentage+SurveyBPercentage));
        if ((SurveyAPercentage+SurveyBPercentage) == 0) {
            SurveyEnabled = false;
            console.log("Survey:disabled");
        }

        if (document.domain === 'www.gatesnotes.com') {
            // disabled so we can test on all domains
        }
        if (SurveyALURL) {
            // AL page
            if (!docCookies.hasItem('surveyedAL')) {
                if (filterUser()) {
                    if (SurveyEnabled) {
                        delayPopup();
                    }
                }
            } else {
                // renew cookie for frequent visitors
                setCookie("renew");
            }
        } else if (SurveySpecialURL) {
            // Special page
            if (!docCookies.hasItem('surveyedSP')) {
                if (filterUser()) {
                    if (SurveyEnabled) {
                        delayPopup();
                    }
                }
            } else {
                // renew cookie for frequent visitors
                setCookie("renew");
            }
        } else {
            // normal page
            // if user has taken any survey recently don't show them another, reset cookie
            if (!docCookies.hasItem('surveyed')) {
                if (filterUser()) {
                    if (SurveyEnabled) {
                        delayPopup();
                    }
                } else {
                    // keep user in pool
                }
            } else {
                // renew cookie for frequent visitors
                setCookie("renew");
            }
        }



        //manually trigger survey via Query String
        var surveyParam = getParameterByName('survey');
        if (surveyParam != "" && surveyParam != null) {
            if (surveyParam == "on") {
                showPopup();
            }
        }
        
        SurveyCTA_RenderedHeight = $(".surveyContainer").height();
    });
    
    $('#tgnbody').scroll(function () {
        //TGN_Hide_SurveyCTA();
    });
    $(window).resize(function () {
        //TGN_Hide_SurveyCTA();
    });
    var SurveyCTA_RenderedHeight = 0;
    function TGN_Show_SurveyCTA() {
        $(".TGN_site").css("overflow-y","hidden");
        $(".surveyContainer").css("display", "flex");
        SurveyCTA_RenderedHeight = SurveyCTA_RenderedHeight+210;
        //$(".surveyContainer").css("bottom", "-" + SurveyCTA_RenderedHeight + "px");
        //$(".surveyContainer").delay(2000).animate({ 'bottom': 0+'px' }, 500);
        TGN_Add_CTA_ToLocalStorage("TGNViewed_CTA_IDs", ".surveyContainer");
    }
    $('.SiteWide_CTAs_Survey_HTML_close').click(function(){
        TGN_Hide_SurveyCTA();
    });
    $('#SiteWide_CTAs_Survey_HTML_closeBox').click(function(){
        TGN_Hide_SurveyCTA();
    });
    $('#SiteWide_CTAs_Survey_HTML_surveyLink').click(function(){
        TGN_Hide_SurveyCTA();
    });
    function TGN_Hide_SurveyCTA() {
        $(".TGN_site").css("overflow-y","unset");
        $(".surveyContainer").css("display", "none");
    }
    function setCookie(reason) {
        console.log("Survey:"+reason);
        if (SurveyALURL) {
            console.log("surveyedAL");
            docCookies.setItem('surveyedAL', new Date().getTime(), 31536e3, '/', document.domain);
            docCookies.setItem('surveyed', new Date().getTime(), 31536e3, '/', document.domain);
        } else if (SurveySpecialURL) {
            console.log("surveyedSP");
            docCookies.setItem('surveyedSP', new Date().getTime(), 31536e3, '/', document.domain);
            docCookies.setItem('surveyed', new Date().getTime(), 31536e3, '/', document.domain);
        } else {
            console.log("surveyed");
            docCookies.setItem('surveyed', new Date().getTime(), 31536e3, '/', document.domain);
        }
    }

    function monitorComplete() {
        if (ALTookSurvey && ALSurveySectionComplete && !ALTookSurvey2) {
            ALTookSurvey2 = true;
            showPopup();
        }
    }

    function showPopup() {
        if (filterSurvey(SurveyAPercentage)) {
            // survey A
            SurveyLink = SurveyHTMLA;
        } else {
            // survey B
            SurveyLink = SurveyHTMLB;
        }
        $("#SiteWide_CTAs_Survey_HTML_surveyLink").attr("href", SurveyLink);
        surveyOn = true;
        //$.colorbox({
        //    'href': '/TGN/surveyCD.html',
        //    'opacity': 0.6,
        //    'transition': 'none',
        //    'closeButton': false
        //});
        setCookie("new");
        TGN_Show_SurveyCTA();
    }
    function filterSurvey(P) {
        return Math.random() <= parseInt(P)/100;
    }
    function filterUser() {
        return Math.random() <= parseInt(InitialPoolPercentage)/100;
    }

    function getTime() {
        var valueStart, valueEnd, cookieStart = document.cookie.indexOf('surveyed');

        if (cookieStart == -1) {
            return '';
        } else {
            valueStart = document.cookie.indexOf('=', cookieStart) + 1;
            valueEnd = document.cookie.indexOf(';', cookieStart);

            if (valueEnd == -1) {
                valueEnd = document.cookie.length;
            }

            return document.cookie.substring(valueStart, valueEnd);
        }
    }

    function delayPopup(startTime) {
        Auth50_selectedForSurvey = true;
        var howLongToWait, now = new Date().getTime();

        startTime = parseInt(startTime);

        //if (startTime == NaN) {
        //    howLongToWait = 60000;
        //} else {
        //    howLongToWait = 60000 - (now - startTime);
        //}
        howLongToWait = 2000;

        setTimeout(showPopup, howLongToWait);
    }

    /*\
    |*|
    |*|  :: cookies.js ::
    |*|
    |*|  A complete cookies reader/writer framework with full unicode support.
    |*|
    |*|  https://developer.mozilla.org/en-US/docs/DOM/document.cookie
    |*|
    |*|  This framework is released under the GNU Public License, version 3 or later.
    |*|  http://www.gnu.org/licenses/gpl-3.0-standalone.html
    |*|
    |*|  Syntaxes:
    |*|
    |*|  * docCookies.setItem(name, value[, end[, path[, domain[, secure]]]])
    |*|  * docCookies.getItem(name)
    |*|  * docCookies.removeItem(name[, path])
    |*|  * docCookies.hasItem(name)
    |*|  * docCookies.keys()
    |*|
    \*/

    var docCookies = {
        getItem: function (sKey) {
            return unescape(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*" + escape(sKey).replace(/[\-\.\+\*]/g, "\\$&") + "\\s*\\=\\s*([^;]*).*$)|^.*$"), "$1")) || null;
        },
        setItem: function (sKey, sValue, vEnd, sPath, sDomain, bSecure) {
            if (!sKey || /^(?:expires|max\-age|path|domain|secure)$/i.test(sKey)) { return false; }
            var sExpires = "";
            if (vEnd) {
                switch (vEnd.constructor) {
                    case Number:
                        sExpires = vEnd === Infinity ? "; expires=Fri, 31 Dec 9999 23:59:59 GMT" : "; max-age=" + vEnd;
                        break;
                    case String:
                        sExpires = "; expires=" + vEnd;
                        break;
                    case Date:
                        sExpires = "; expires=" + vEnd.toGMTString();
                        break;
                }
            }
            document.cookie = escape(sKey) + "=" + escape(sValue) + sExpires + (sDomain ? "; domain=" + sDomain : "") + (sPath ? "; path=" + sPath : "") + (bSecure ? "; secure" : "");
            return true;
        },
        removeItem: function (sKey, sPath) {
            if (!sKey || !this.hasItem(sKey)) { return false; }
            document.cookie = escape(sKey) + "=; expires=Thu, 01 Jan 1970 00:00:00 GMT" + (sPath ? "; path=" + sPath : "");
            return true;
        },
        hasItem: function (sKey) {
            return (new RegExp("(?:^|;\\s*)" + escape(sKey).replace(/[\-\.\+\*]/g, "\\$&") + "\\s*\\=")).test(document.cookie);
        },
        keys: function () { /* optional method: you can safely remove it! */
            var aKeys = document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g, "").split(/\s*(?:\=[^;]*)?;\s*/);
            for (var nIdx = 0; nIdx < aKeys.length; nIdx++) { aKeys[nIdx] = unescape(aKeys[nIdx]); }
            return aKeys;
        }
    };
</script>

            
            
    

            
            
    <style>
    .SiteWide_CTAs_Roadblock_HTML {
        position: fixed;
        top: 0px;
        left: 0px;
        z-index: 300;
        background-color: rgba(0,0,0,.4);
        width: 100%;
        height: 100%;
        text-align: center;
        display: none;
    }
    @media all and (max-width: 980px)
    {

    }
    @media all and (max-width: 680px)
    {

    }
    @media all and (max-width: 480px)
    {

    }
</style>
<div id="SiteWide_CTAs_Roadblock_HTML" class="SiteWide_CTAs_Roadblock_HTML">
    <!--loaded inline HTML block from sitecore-->
<style>
.SiteWide_CTAs_Roadblock_HTML_inner {
    width: 524px;
    height: 393px;
    background-color: #5684f3;
    margin-left: auto;
    margin-right: auto;
    margin-top: 180px;
    background-image: url(/-/media/Images/Body-Parts/CTAs/homepage-roadblock_roadblock_desktop_524x393_v2);
    background-size: cover;
    background-position: 50% 100%;
}
.SiteWide_CTAs_Roadblock_HTML_close {
    font-size: 25px !important;
    margin-left: auto;
    margin-right: 1px;
    width: 53px;
    height: 49px;
    cursor: pointer;
    color: white;
    display: flex;
    align-items: flex-end;
    opacity: 0;
    margin-bottom: -15px;
}
.SiteWide_CTAs_Roadblock_HTML_content {
    margin-left: 25px;
    margin-right: 25px;
    margin-top: 0px;
}
.SiteWide_CTAs_Roadblock_Title1 {
    font-family: source-serif-pro, 'Source Serif Pro', 'Lyon Display Web','LyonDisplay-Medium', serif;
    font-weight: 900;
    font-size: 48px;
    letter-spacing: 1.2px;
    color: white;
    line-height: 46px;
    text-align: left;
    max-width: 450px;
}
.SiteWide_CTAs_Roadblock_Title2 {
    font-family: source-serif-pro, 'Source Serif Pro', 'Lyon Display Web','LyonDisplay-Medium', serif;
    font-weight: 900;
    font-size: 40px;
    letter-spacing: -1px;
    color: white;
    line-height: 35px;
    text-align: left;
    max-width: 220px;
}
.SiteWide_CTAs_Roadblock_HTML_Copy {
    border: none;
    width: 270px;
    padding: 0px;
    font-family: 'HelveticaNeueW01-55Roma','Helvetica LT Std Light','Helvetica Neue LT Std',Helvetica;
    font-size: 16px;
    line-height: 20px;
    text-align: left;
    margin-top: 12px;
    color: white;
    letter-spacing: .1px;
}
.SiteWide_CTAs_Roadblock_LowerBlock {
    margin-top: 27px;
}
.SiteWide_CTAs_Roadblock_ExtraSpace {
    display: block;
    width: 100%;
    height: 16px;
}
.SiteWide_CTAs_Roadblock_HTML_SU {
    font-family: 'Roboto Condensed', 'Asap Condensed', 'neue-haas-unica', sans-serif;
    font-size: 13px;
    font-weight: 600;
    letter-spacing: .8px;
    margin: 0px;
    width: 148px;
    height: 26px;
    padding: 0px;
    cursor: pointer;
    color: #5684f3;
    line-height: 26px;
    margin-top: 10px;
    border: 1px solid white;
    background-color: white;
}
.SiteWide_CTAs_Roadblock_HTML_LI {
    cursor: pointer;
    letter-spacing: .1px;
    display: inline-block;
    color: white;
    float: left;
    font-family: 'HelveticaNeueW01-55Roma','Helvetica LT Std Light','Helvetica Neue LT Std',Helvetica;
    font-size: 14px;
    line-height: 18px;
    text-align: left;
    margin-top: 10px;
    margin-left: 5px;
    text-decoration: underline;
}
.SiteWide_CTAs_Roadblock_HTML_Copy2 {
    display: inline-block;
    color: white;
    float: left;
    font-family: 'HelveticaNeueW01-55Roma','Helvetica LT Std Light','Helvetica Neue LT Std',Helvetica;
    font-size: 14px;
    line-height: 18px;
    text-align: left;
    margin-top: 10px;
}
	.SiteWide_CTAs_Roadblock_HTML {
    background-color: rgba(0,0,0,.75);
}
	
@media all and (max-width: 1200px) {
}

@media all and (max-width: 980px) {
.SiteWide_CTAs_Roadblock_HTML_inner {
    width: 371px;
    height: 286px;
    margin-top: 120px;
    background-image: url(/-/media/Images/Body-Parts/CTAs/homepage-roadblock_roadblock_tablet_371x286_v2);
}
.SiteWide_CTAs_Roadblock_HTML_content {
    width: 371px;
    height: 286px;
    margin-left: 15px;
    margin-right: 15px;
    margin-top: 0px;
}
.SiteWide_CTAs_Roadblock_Title1 {
    font-size: 33px;
    max-width: 300px;
    line-height: 34px;
}
.SiteWide_CTAs_Roadblock_LowerBlock {
    margin-top: 20px;
}
.SiteWide_CTAs_Roadblock_Title2 {
    font-size: 31px;
}
.SiteWide_CTAs_Roadblock_HTML_Copy {
    width: 214px;
    font-size: 14px;
    line-height: 15px;
}
.SiteWide_CTAs_Roadblock_HTML_SU {
    font-size: 12px;
    width: 115px;
}
.SiteWide_CTAs_Roadblock_HTML_LI {
    font-size: 14px;
    line-height: 15px;
}
.SiteWide_CTAs_Roadblock_HTML_Copy2 {
    font-size: 14px;
    line-height: 15px;
}
.SiteWide_CTAs_Roadblock_HTML_close {
    width: 33px;
    height: 31px;
    margin-bottom: -5px;
}
}

@media all and (max-width: 680px) {
.SiteWide_CTAs_Roadblock_HTML_inner {
    width: 277px;
    height: 224px;
    margin-top: 90px;
    background-image: url(/-/media/Images/Body-Parts/CTAs/homepage-roadblock_roadblock_mobile_277x224_v2);
}
.SiteWide_CTAs_Roadblock_HTML_content {
    width: 277px;
    height: 224px;
    margin-top: -15px;
}
.SiteWide_CTAs_Roadblock_Title1 {
    font-size: 25px;
    letter-spacing: -.4px;
    line-height: 25px;
    max-width: 220px;
}
.SiteWide_CTAs_Roadblock_Title2 {
    font-size: 23px;
    letter-spacing: -.4px;
    line-height: 23px;
}
.SiteWide_CTAs_Roadblock_HTML_Copy {
    width: 154px;
    font-size: 10px;
    line-height: 12px;
    margin-top: 8px;
}
.SiteWide_CTAs_Roadblock_LowerBlock {
    margin-top: 13px;
}
.SiteWide_CTAs_Roadblock_HTML_SU {
    font-size: 10px;
    width: 96px;
    height: 20px;
    line-height: 20px;
}
.SiteWide_CTAs_Roadblock_HTML_LI {
    font-size: 11px;
    line-height: 13px;
}
.SiteWide_CTAs_Roadblock_HTML_Copy2 {
    font-size: 11px;
    line-height: 13px;
}
.SiteWide_CTAs_Roadblock_HTML_close {
    width: 33px;
    height: 29px;
    margin-bottom: 0px;
}
}

@media all and (max-width: 480px) {
}
</style>


<div class="SiteWide_CTAs_Roadblock_HTML_inner">
<div class="SiteWide_CTAs_Roadblock_HTML_close">
<i class="icon-close-x"></i>
</div>
<div class="SiteWide_CTAs_Roadblock_HTML_content">
	<div class="SiteWide_CTAs_Roadblock_Title1">Become a Gates Notes Insider</div>
	<div class="SiteWide_CTAs_Roadblock_Title2"></div>
	<div class="SiteWide_CTAs_Roadblock_HTML_Copy">
		Join the Gates Notes community to access exclusive content, comment on stories, participate in giveaways, and more.
	</div>
	<div class="SiteWide_CTAs_Roadblock_LowerBlock">
      <div class="SiteWide_CTAs_Roadblock_HTML_SU">SIGN UP</div>
      <div class="SiteWide_CTAs_Roadblock_HTML_Copy2">
          Already joined?
      </div>
      <div class="SiteWide_CTAs_Roadblock_HTML_LI">Log in</div>
	</div>
</div>
</div>


<script type="text/javascript">
	
    $(window).resize(function () {
    });
    $(document).ready(function () {
        var ww = $(window).width();
        var wh = $(window).height();
    });
        $(".SiteWide_CTAs_Roadblock_HTML_close").click(function (e) {
            TGN_Hide_RoadblockCTA();
        });
        $(".SiteWide_CTAs_Roadblock_HTML_SU").click(function (e) {
            MenuS45_OpenSignUp();
            omnihelpers.signupPath("Roadblock");
            TGN_Hide_RoadblockCTA();
        });
        $(".SiteWide_CTAs_Roadblock_HTML_LI").click(function (e) {
            MenuS45_OpenSignIn();
            TGN_Hide_RoadblockCTA();
        });
</script>
<!--END OF loaded inline HTML block from sitecore-->
</div>
<script type="text/javascript">
    //var cardNumOn = 0;
    $(document).ready(function () {
        //console.log("AL2018_JS");
        //$(".AL2018_LightboxClose ").click(function (e) {
        //    toggleALLightBox("off", $(this).parent().attr("id"));
        //});
    });
    $(".TGN_site").scroll(function () {
        //updateAL2018("scroll");
    });
    $(window).resize(function () {
        //updateAL2018("resize");
    });
</script><script type="text/javascript">
    var SlideUpCTAenabled = false;
    var InlineCTAenabled = false;
    var RoadblockCTAenabled = true;

    var SlideUpCTAID = '{6B4C0234-6A2D-49D7-9681-D753F63D3276}';
    var InlineCTAID = '{EC8430CB-2DBD-4A60-8337-EC02EAD21F86}';
    var RoadblockCTAID = '{C5CCD48F-C3B9-405E-B70A-807C1B4F26A9}';

    var AllGNIusers = false;
    var Allunregisteredandlegacyusers = true;
    var AllregisteredGNIusers = false;
    var AllRegisteredGNI2users = false;
    var VerifiedGNI2users = false;
    var UnverifiedemailGNI2users = false;
    var NewsletteroptoutGNI2users = false;
    var OnscreennotificationoptoutGNI2users = false;
    var AllRegisteredGNI3users = false;
    var VerifiedGNI3users = false;
    var UnverifiedemailGNI3users = false;
    var UnverifiedaddressGNI3users = false;
    var NewsletteroptoutGNI3users = false;
    var OnscreennotificationoptoutGNI3users = false;

    $(document).ready(function () {
        //console.log("SiteWide_CTAs_JS:");
        //$(".AL2018_LightboxClose ").click(function (e) {
        //    toggleALLightBox("off", $(this).parent().attr("id"));
        //});
    });

    Auth50_GNI_UserStatus.registerListener(function(val) {
        //console.log("The value of SWCTA Auth50_GNI_UserStatus.a changed to: " + val);
        if (val == "true:user:getUserInfo") {
            setTimeout(function () { TGN_SiteWide_CTA_DisplayLogic() }, 1000);
        }
        if (val == "true:nouser") {
            setTimeout(function () { TGN_SiteWide_CTA_DisplayLogic() }, 4000);
        }
    });
    function CTATestUserStatus() {
        if (AllGNIusers) {
            // show to any user
            return true;
        } else {
            // show only to specific user types
            if (CTATestUserStatusLegacy()) {
                if (Allunregisteredandlegacyusers) {
                    // show to Allunregisteredandlegacyusers
                    return true;
                }
            }
            if (CTATestUserStatusRegistered()) {
                if (AllregisteredGNIusers) {
                    // show to AllregisteredGNIusers
                    return true;
                } else {
                    if (CTATestUserStatusGNI3()) {
                        // users with address and title 3.0
                        if (AllRegisteredGNI3users) {
                            // show to AllRegisteredGNI3users
                            return true;
                        } else {
                            if (VerifiedGNI3users) {
                                // show to VerifiedGNI3users
                                if (currentUserData.IsApproved == "true") {
                                    return true;
                                }
                            }
                            if (UnverifiedemailGNI3users) {
                                // show to UnverifiedemailGNI3users
                                if (currentUserData.IsApproved != "true") {
                                    return true;
                                }
                            }
                            if (UnverifiedaddressGNI3users) {
                                // show to UnverifiedaddressGNI3users
                                if (localStorage.getItem('currentUserAddressSrc') == 'manual_entry' || localStorage.getItem('currentUserAddressSrc') == 'settings_edit') {
                                    return true;
                                }
                                // Need to set local storage item for addressType == "address_source"
                            }
                            if (NewsletteroptoutGNI3users) {
                                // show to NewsletteroptoutGNI3users
                                if (getNewsletterOption("newsletter") != "true") {
                                    return true;
                                }
                            }
                            if (OnscreennotificationoptoutGNI3users) {
                                // show to OnscreennotificationoptoutGNI3users
                                if (getNewsletterOption("newsletter") != "true") {
                                    return true;
                                }
                            }
                        }
                    } else {
                        // users without address and title 2.0
                        if (AllRegisteredGNI2users) {
                            // show to AllRegisteredGNI2users
                            return true;
                        } else {
                            if (VerifiedGNI2users) {
                                // show to VerifiedGNI2users
                                if (currentUserData.IsApproved == "true") {
                                    return true;
                                }
                            }
                            if (UnverifiedemailGNI2users) {
                                // show to UnverifiedemailGNI2users
                                if (currentUserData.IsApproved != "true") {
                                    return true;
                                }
                            }
                            if (NewsletteroptoutGNI2users) {
                                // show to NewsletteroptoutGNI2users
                                if (currentUserData.NewsletterOption != "true") {
                                    return true;
                                }
                            }
                            if (OnscreennotificationoptoutGNI2users) {
                                // show to OnscreennotificationoptoutGNI2users
                                if (currentUserData.CommOnscreenOption != "true") {
                                    return true;
                                }
                            }
                        }
                    }
                }
            }
        }
        return false;
    }
    function CTAexcludedpages() {
        var a = location.pathname.split("/");
        a[a.length - 1] = a[a.length - 1].toLowerCase();
        // disable main CTA for special pages
        if (a[a.length - 1] == "contact-bill-gates" || a[a.length - 1] == "privacy-policy" || a[a.length - 1] == "terms-of-use" || a[a.length - 1] == "top-stories" || a[a.length - 1] == "books" || a[a.length - 1] == "bio" || a[a.length - 1] == "profilesettings" || a[a.length - 1] == "profile-settings" || a[a.length - 1] == "contactbillgates" || a[a.length - 1] == "survey" || a[a.length - 1] == "2015-annual-letter-sign-up") {
            return false;
        }
        return true;
    }
    var TGN_Prime_Roadblock = false;
    function TGN_SiteWide_CTA_DisplayLogic() {
        //console.log("TGN_SiteWide_CTA_DisplayLogic: "+Auth50_selectedForSurvey);
        var CTAitemviewedRB = TGN_CheckJSONForCTAIDMatch("TGNViewed_CTA_IDs", ".SiteWide_CTAs_Roadblock_HTML"+RoadblockCTAID);
        var CTAusergroupenabled = CTATestUserStatus();
        var CTApageNOTexcluded = CTAexcludedpages();
        if (CTAusergroupenabled && CTApageNOTexcluded && !Auth50_selectedForSurvey) {
            // user's group is selected in sitecore
            if (RoadblockCTAenabled && !CTAitemviewedRB) {
                // do something if not viewed yet
                TGN_Prime_Roadblock = true;
                //TGN_Show_RoadblockCTA();
            } else {
                // no roadblock
                if (SlideUpCTAenabled) {
                    var CTAitemviewedSU = TGN_CheckJSONForCTAIDMatch("TGNViewed_CTA_IDs", ".SiteWide_CTAs_SlideUp_HTML"+SlideUpCTAID);
                    if (!CTAitemviewedSU) {
                        // do something if not viewed yet
                    }
                    var CTAitemclosedSU = TGN_CheckJSONForCTAIDMatch("TGNClosed_CTA_IDs", ".SiteWide_CTAs_SlideUp_HTML"+SlideUpCTAID);
                    if (!CTAitemclosedSU) {
                        // do something if not closed yet
                        TGN_Show_SlideUpCTA();
                    }
                }
            }
            if (document.querySelector("meta[name='contentType']").getAttribute("content").toLowerCase() == "article" || document.querySelector("meta[name='contentType']").getAttribute("content").toLowerCase() == "book" || document.querySelector("meta[name='contentType']").getAttribute("content").toLowerCase() == "video") {
                // article page
                TGN_Show_InlineCTA();
            } else {
                // all other pages
                $(".CTA_Article_Inline_Holder").css("display", "none");
                TGN_Hide_InlineCTA();
            }
        } else {
            TGN_Hide_InlineCTA();
            TGN_Hide_SlideUpCTA();
            TGN_Hide_RoadblockCTA();
        }
    }
    $(".TGN_site").scroll(function () {
        //TGN_Hide_SlideUpCTA();
        //TGN_Hide_RoadblockCTA();
        if (TGN_Prime_Roadblock && currentUserStatusChecked != "true:user") {
            TGN_Show_RoadblockCTA();
        }
    });
    $(window).resize(function () {
        //TGN_Hide_SlideUpCTA();
        //TGN_Hide_RoadblockCTA();
    });
    function TGN_Show_SlideUpCTA() {
        $(".SiteWide_CTAs_SlideUp_HTML").css("display", "block");
        $(".SiteWide_CTAs_SlideUp_HTML").css("bottom", "-" + SlideUpCTA_RenderedHeight + "px");
        $(".SiteWide_CTAs_SlideUp_HTML").delay(200).animate({ 'bottom': 0+'px' }, 500);
        TGN_Add_CTA_ToLocalStorage("TGNViewed_CTA_IDs", ".SiteWide_CTAs_SlideUp_HTML"+SlideUpCTAID);
    }
    function TGN_Show_InlineCTA() {
        $(".SiteWide_CTAs_Inline_HTML").css("display", "block");
        TGN_Add_CTA_ToLocalStorage("TGNViewed_CTA_IDs", ".SiteWide_CTAs_Inline_HTML"+InlineCTAID);
    }
    function TGN_Show_RoadblockCTA() {
        console.log("TGN_Show_RoadblockCTA");
        TGN_Prime_Roadblock = false;
        $(".TGN_site").css("overflow-y","hidden");
        $(".SiteWide_CTAs_Roadblock_HTML").css("display", "block");
        TGN_Add_CTA_ToLocalStorage("TGNViewed_CTA_IDs", ".SiteWide_CTAs_Roadblock_HTML"+RoadblockCTAID);
    }
    function TGN_Hide_SlideUpCTA() {
        $(".SiteWide_CTAs_SlideUp_HTML").css("display", "none");
    }
    function TGN_Hide_InlineCTA() {
        $(".SiteWide_CTAs_Inline_HTML").css("display", "none");
    }
    function TGN_Hide_RoadblockCTA() {
        $(".TGN_site").css("overflow-y","unset");
        $(".SiteWide_CTAs_Roadblock_HTML").css("display", "none");
    }
    $(".SiteWide_CTAs_SlideUp_HTML_close").click(function (e) {
        TGN_Add_CTA_ToLocalStorage("TGNClosed_CTA_IDs", ".SiteWide_CTAs_SlideUp_HTML"+SlideUpCTAID);
        TGN_Hide_SlideUpCTA();
    });
</script>

        </div>
        <div class="AH_Holder" id="AH_Holder">
            <div class="AH_Inner_Holder">
                <div class="AH_Close" id="AH_Close"><i class="icon-close-x"></i></div>
                <div class="Login_Holder" id="Login_Holder" onkeypress="handleLoginKeyPress(event);">
                    <div class="Auth_50_CTA_Left_Top">
                        
                        
    <!--loaded inline HTML block from sitecore-->
<style>
.Auth_50_CTA_Left_Top {
    background-color: #4D7FF5;
}
.Auth_50_LICTA_Left_inner {
    background-image: url(/-/media/Images/Body-Parts/CTAs/Auth_CTA_Back_D_04252019);
    background-position: 100% 100%;
    background-size: auto;
    background-repeat: no-repeat;
    background-color: #4D7FF5;
    width: 100%;
    height: 671px;
    position: relative;
}
.Auth_50_LICTA_HeadlineM {
    display: none;
}
.Auth_50_LICTA_Spacer {
    height: 24px;
    display: table-cell;
}
.Auth_50_LICTA_HeadlineDT {
    margin-left: 24px;
    margin-right: 24px;
    color: #FFFFFF;
    font-family: source-serif-pro, "Lyon Display";
    font-size: 52px;
    font-weight: bold;
    line-height: 55px;
}
.Auth_50_LICTA_Para {
    color: white;
    font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
    font-weight: 200;
    margin-left: 24px;
    margin-right: 54px;
    margin-top: 14px;
font-size: 16px;
    line-height: 21px;
}
.Auth_50_LICTA_CTA {
color: white;
    font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
    font-weight: 200;
    margin-left: 24px;
    margin-right: 24px;
    margin-top: 34px;
font-size: 16px;
    line-height: 21px;
}
.Auth_50_LICTA_Button {
    display: block;
    margin-top: 10px;
    font-family: 'Roboto Condensed', 'Asap Condensed', 'neue-haas-unica', sans-serif;
    font-size: 14px;
    font-weight: 100;
    text-transform: uppercase;
    cursor: pointer;
    height: 25px;
    width: 67px;
    border: 1px solid white;
    border-radius: 0px;
    text-align: center;
    line-height: 26px;
    color: white !important;
    padding-left: 10px;
    padding-right: 10px;
}
	

@media all and (max-width: 980px)
{
.Auth_50_LICTA_Spacer {
}
.Auth_50_LICTA_TopLeft {
    display: inline-block;
    width: 75%;
}
.Auth_50_LICTA_Left_inner {
    background-image: url(/-/media/Images/Body-Parts/CTAs/Auth_CTA_Back_T_04252019);
    background-color: #4D7FF5;
    max-width: 635px;
    margin-left: 0px;
    margin-right: auto;
    height: unset;
    position: relative;
}
.Auth_50_LICTA_CTA {
    margin-bottom: 20px;
}
.Auth_50_LICTA_HeadlineDT {
    font-size: 32px;
    line-height: 34px;
}
.Auth_50_LICTA_Para {
    margin-top: 8px;
    font-size: 15px;
    line-height: 18px;
}
.Auth_50_LICTA_CTA {
    margin-top: 16px;
    font-size: 15px;
    line-height: 18px;
}
}
	
@media all and (max-width: 680px)
{
.Auth_50_LICTA_Left_inner {
    background-image: url(/-/media/Images/Body-Parts/CTAs/Auth_CTA_Back_M_04252019);
    background-color: #4D7FF5;
    max-width: 320px;
    margin-left: 0px;
    margin-right: auto;
    width: 100%;
    height: unset;
    position: relative;
}
.Auth_50_LICTA_HeadlineM {
}
.Auth_50_LICTA_HeadlineDT {
    font-size: 26px;
    line-height: 26px;
}
.Auth_50_LICTA_Para {
    font-size: 12px;
    line-height: 14px;
    max-width: 170px;
}
.Auth_50_LICTA_CTA {
    font-size: 12px;
    line-height: 14px;
    max-width: 150px;
}
.Auth_50_LICTA_TopLeft {
    display: inline-block;
    width: 100%;
}
}

</style>


<div class="Auth_50_LICTA_Left_inner">
	<div class="Auth_50_LICTA_Spacer"></div>
	<div class="Auth_50_LICTA_HeadlineM">Welcome back, Insider!</div>
	<div class="Auth_50_LICTA_TopLeft">
		<div class="Auth_50_LICTA_HeadlineDT">Welcome back, Insider!</div>
		<div class="Auth_50_LICTA_Para">Thank you for being a Gates Notes Insider. I feel lucky that I get to connect with so many people like you. <br>– Bill Gates</div>
		<div class="Auth_50_LICTA_CTA">
			<span class="Auth_50_LICTA_Q">Not a Gates Notes Insider yet? </span>
			<span id="Auth_50_LICTA_Left_linkLI" class="Auth_50_LICTA_Button">Sign up</span>
		</div>
	</div>
</div>

<script type="text/javascript">
	
    $(window).resize(function () {
    });
    $(document).ready(function () {
        var ww = $(window).width();
        var wh = $(window).height();
        $("#Auth_50_LICTA_Left_linkLI").click(function () {
                hideAuthHolders();
            $(".AH_Holder").css("display", "block");
            $(".Register_Holder").css("display", "flex");
            $(".SIpop").css("display", "none");
            $("#txtFirstName").val('');
            $("#txtLastName").val('');
            $("#txtEmail").val('');
            $("#txtPassword").val('');
            $("#txtPasswordConfirm").val('');
            $("#nameValidationBoxT").css("display", "none");
            $("#nameValidationBoxB").css("display", "none");
            $("#emailValidationBoxT").css("display", "none");
            $("#emailValidationBoxB").css("display", "none");
            $("#pass1ValidationBoxT").css("display", "none");
            $("#pass1ValidationBoxB").css("display", "none");
            $("#pass2ValidationBoxT").css("display", "none");
            $("#pass2ValidationBoxB").css("display", "none");
            $("#SU_Mob_All_Error").css("display", "none");
        });
    });
</script>
<!--END OF loaded inline HTML block from sitecore-->	


                    </div>
                    
                    
    <div class="Auth_50_CTA_MiddleSpacer"></div>
<div class="Auth_50_Content_Right_Bottom">
    <div class="Auth_50_Content_Right_BottomInner">
        <div class="Auth_50_LogInSignUpToggle">
            <div class="Auth_50_LISU_ToggleButton_Left_On" id="Auth_50_LISU_ToggleButton_Left_On"><span class="noselect">LOG IN</span></div><div class="Auth_50_LISU_ToggleButton_Right_Off" id="Auth_50_LISU_ToggleButton_Right_Off"><span class="noselect">SIGN UP</span></div>
        </div>
        <div class="Auth_50_LogInSignUpForm">
            <form id="Auth_50_Form_LogIn" autocomplete="off">
                <div class="Auth_50_LogInSignUpFormSpacer">

                </div>
                

                <input tabindex="20" name="txtEmail" type="email" maxlength="256" id="LItxtEmail" class="txtEntryBox" placeholder="Email address" autocomplete="email">

                

                <div class="LoginPasswordGroup">
                    <input tabindex="21" name="txtPassword" type="password" maxlength="256" id="LItxtPassword" class="txtEntryBox" placeholder="Password" autocomplete="current-password">
                    <div class="ForgotPW" id="ForgotPW">
                        Forgot?
                    </div>
                    <span class="AuthErrorTxt" id="LI_Mob_All_Error">
                        Error
                    </span>
                </div>

                <div tabindex="22" class="RegButton" id="LoginButton">
                    Log in
                </div>

                <span class="Auth_50_Label02">Or log in with your social account:</span>

                <div class="SignInUpSocial">
                    <div class="SignInUpTW" id="SignInTW">
                        <div class="TwitterInUpRedirect_Holder" id="TwitterLoginRedirect_Holder">
                            <span class="noselect"><i class="icon-twitter"></i></span>
                        </div>
                    </div>
                    <div class="SignInUpFB" id="SignInFB">
                        <div class="FacebookInUpRedirect_Holder" id="FacebookLoginRedirect_Holder">
                            <span class="noselect"><i class="icon-facebook"></i></span>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>

                </div>
                <div class="Logout_Holder" id="Logout_Holder">
                    
                    
    Logout:<br />
<asp:Button runat="server" Text="Sign Out" ID="LogoutButton" UseSubmitBehavior="false" /><br /><br />

                </div>
                <div class="Register_Holder" id="Register_Holder" onkeypress="handleRegisterKeyPress(event);">
                    <div class="Auth_50_CTA_Left_Top">
                        
                        
    <!--loaded inline HTML block from sitecore-->
<style>
.Auth_50_CTA_Left_Top {
    background-color: #4D7FF5;
}
.Auth_50_SUCTA_Left_inner {
    background-image: url(/-/media/Images/Body-Parts/CTAs/Auth_CTA_Back_D_04252019);
    background-position: 100% 100%;
    background-size: auto;
    background-repeat: no-repeat;
    background-color: #4D7FF5;
    width: 100%;
    height: 671px;
    position: relative;
}
.Auth_50_SUCTA_HeadlineM {
    display: none;
}
.Auth_50_SUCTA_Spacer {
    height: 24px;
    display: table-cell;
}
.Auth_50_SUCTA_HeadlineDT {
    margin-left: 24px;
    margin-right: 24px;
    color: #FFFFFF;
    font-family: source-serif-pro, "Lyon Display";
    font-size: 52px;
    font-weight: bold;
    line-height: 55px;
}
.Auth_50_SUCTA_Para {
    color: white;
    font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
    font-weight: 200;
    margin-left: 24px;
    margin-right: 54px;
    margin-top: 14px;
font-size: 16px;
    line-height: 21px;
}
.Auth_50_SUCTA_CTA {
    color: white;
    font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
    font-weight: 200;
    margin-left: 24px;
    margin-right: 24px;
    margin-top: 34px;
font-size: 16px;
    line-height: 21px;
}
.Auth_50_SUCTA_Button {
    display: block;
    margin-top: 10px;
    font-family: 'Roboto Condensed', 'Asap Condensed', 'neue-haas-unica', sans-serif;
    font-size: 14px;
    font-weight: 100;
    text-transform: uppercase;
    cursor: pointer;
    height: 25px;
    width: 57px;
    border: 1px solid white;
    border-radius: 0px;
    text-align: center;
    line-height: 26px;
    color: white !important;
    padding-left: 10px;
    padding-right: 10px;
}
	

@media all and (max-width: 980px)
{
.Auth_50_SUCTA_Spacer {
}
.Auth_50_SUCTA_TopLeft {
    display: inline-block;
    width: 75%;
}
.Auth_50_SUCTA_Left_inner {
    background-image: url(/-/media/Images/Body-Parts/CTAs/Auth_CTA_Back_T_04252019);
    background-color: #4D7FF5;
    max-width: 635px;
    margin-left: 0px;
    margin-right: auto;
    height: unset;
    position: relative;
}
.Auth_50_SUCTA_CTA {
    margin-bottom: 20px;
}
.Auth_50_SUCTA_HeadlineDT {
    font-size: 32px;
    line-height: 34px;
}
.Auth_50_SUCTA_Para {
    margin-top: 8px;
    font-size: 15px;
    line-height: 18px;
}
.Auth_50_SUCTA_CTA {
    margin-top: 16px;
    font-size: 15px;
    line-height: 18px;
}
}
	
@media all and (max-width: 680px)
{
.Auth_50_SUCTA_Left_inner {
    background-image: url(/-/media/Images/Body-Parts/CTAs/Auth_CTA_Back_M_04252019);
    background-color: #4D7FF5;
    max-width: 320px;
    margin-left: 0px;
    margin-right: auto;
    width: 100%;
    height: unset;
    position: relative;
}
.Auth_50_SUCTA_HeadlineM {
}
.Auth_50_SUCTA_HeadlineDT {
    font-size: 26px;
    line-height: 26px;
}
.Auth_50_SUCTA_Para {
    font-size: 14px;
    line-height: 14px;
    max-width: 200px;
}
.Auth_50_SUCTA_CTA {
    font-size: 14px;
    line-height: 14px;
    max-width: 150px;
}
.Auth_50_SUCTA_TopLeft {
    display: inline-block;
    width: 100%;
}
}

</style>


<div class="Auth_50_SUCTA_Left_inner">
	<div class="Auth_50_SUCTA_Spacer"></div>
	<div class="Auth_50_SUCTA_HeadlineM">Become a Gates Notes Insider</div>
	<div class="Auth_50_SUCTA_TopLeft">
		<div class="Auth_50_SUCTA_HeadlineDT">Become a Gates Notes Insider</div>
		<div class="Auth_50_SUCTA_Para">Join the Gates Notes community to get regular updates from Bill on key topics like global health and climate change, to access exclusive content, comment on stories, participate in giveaways, and more.</div>
		<div class="Auth_50_SUCTA_CTA">
			<span class="Auth_50_SUCTA_Q">Already joined? </span>
			<span id="Auth_50_SUCTA_Left_linkLI" class="Auth_50_SUCTA_Button">Log in</span>
		</div>
	</div>
</div>

<div class="EnergyToggle_SU_ExtraFields">
	<div class="Auth_Subs_Holder">
                    <div class="Auth_Subs_Text">
                        <span class="AuthcheckboxTxt">Please send me updates from <a href="https://www.b-t.energy/" class="EnergyToggle_SU_Info" target="_blank">Breakthrough Energy</a> on efforts to combat climate change.</span>
                    </div>
                    <div class="Auth_Subs_OnOff">
                        <div class="Auth_Subs_On">On</div>
                        <div class="Auth_Subs_Off">Off</div>
                    </div>
                    <div class="Auth_checkbox">
                        <input type="checkbox" id="EnergyToggle" name="EnergyToggle" class="EnergyToggle" checked>
                    </div>
                </div>
</div>

<script type="text/javascript">
    var ET_InitialToggleSent = "false";
    var ET_UserStatus = "out";
	var currentUserStatusCheckedLocal = "false";
	var BEcampaignParam = "";
	
    $(window).resize(function () {
    });
    $(document).ready(function () {
        var ww = $(window).width();
        var wh = $(window).height();
		Check_ET_UserStatusInt = setInterval(function () {
            Check_ET_UserStatus();
        }, 200);
		$(".Auth_50_Welcome_ExtraFields").append($(".EnergyToggle_SU_ExtraFields"));
		$(".EnergyToggle_SU_ExtraFields").css("display","block");
$(".Auth_50_Welcome_Interests").css("display","none");
		$("#Auth_50_SUCTA_Left_linkLI").click(function () {
                hideAuthHolders();
            $(".AH_Holder").css("display", "block");
            $(".Login_Holder").css("display", "flex");
            $(".SIpop").css("display", "none");
            $("#LItxtEmail").val('');
            $("#LItxtPassword").val('');
            $("#LI_Mob_All_Error").css("display", "none");
        });
		$(".EnergyToggle_SU_ExtraFields .Auth_Subs_On").click(function () {
			$("#EnergyToggle").prop('checked', true);
			setCRMfieldBET();
        });
		$(".EnergyToggle_SU_ExtraFields .Auth_Subs_Off").click(function () {
			$("#EnergyToggle").prop('checked', false);
			setCRMfieldBET();
        });
		function setCRMfieldBET() {
			if (ET_UserStatus == "in") {
                BEcampaignParam = getParameterByName('WT.mc_id');
                if ($("#EnergyToggle").is(':checked')) {
                    if (BEcampaignParam != null && BEcampaignParam != "") {
                       setCRMField("gn_optin_btenergy", BEcampaignParam, "string");
                    } else {
                      BEcampaignParam = localStorage.getItem('currentUserCampaignQS');
                        if (BEcampaignParam != null && BEcampaignParam != "") {
                          setCRMField("gn_optin_btenergy", BEcampaignParam, "string");
                        } else {
                          setCRMField("gn_optin_btenergy", "optin", "string");
                        }
                    }
                } else {
                    setCRMField("gn_optin_btenergy", "optout", "string");
                }
			}
		}
    function Check_ET_UserStatus() {
		if (currentUserStatusCheckedLocal != currentUserStatusChecked) {
			// status has changed
			console.log(currentUserStatusCheckedLocal +":"+ currentUserStatusChecked);
			currentUserStatusCheckedLocal = currentUserStatusChecked;
			if (currentUserStatusChecked == "true:user"){
				console.log("user logged in");
				ET_UserStatus = "in";
			} else {
				console.log("user logged out");
				//Update_NF_LoggedOut();
				ET_UserStatus = "out";
			}
		}
		if ($(".Welcome_Holder").is(':visible') && ET_InitialToggleSent == "false" && ET_UserStatus == "in") {
			//welcome screen shown and not sent yet
			ET_InitialToggleSent = "true";
		    setCRMfieldBET();
		}
    }
    });
</script>
<!--END OF loaded inline HTML block from sitecore-->	


                    </div>
                    
                    
    <div class="Auth_50_CTA_MiddleSpacer"></div>
<div class="Auth_50_Content_Right_Bottom">
    <div class="Auth_50_Content_Right_BottomInner">
        <div class="Auth_50_LogInSignUpToggle">
            <div class="Auth_50_LISU_ToggleButton_Left_Off" id="Auth_50_LISU_ToggleButton_Left_Off"><span class="noselect">LOG IN</span></div><div class="Auth_50_LISU_ToggleButton_Right_On" id="Auth_50_LISU_ToggleButton_Right_On"><span class="noselect">SIGN UP</span></div>
        </div>
        <div class="Auth_50_LogInSignUpForm">
            <form id="Auth_50_Form_SignUp" autocomplete="off">

                <!-- fake fields are a workaround for chrome autofill getting the wrong fields -->
                <input autocomplete="false" style="display:none" type="text" name="fakeusernameremembered" />
                <input autocomplete="false" style="display:none" type="email" name="fakeemailremembered" />
                <input autocomplete="false" style="display:none" type="text" autocomplete="full-address" name="fakeaddressremembered" />
                <input autocomplete="false" style="display:none" type="password" name="fakepasswordremembered" />
                <input autocomplete="false" name="hidden" type="text" style="display:none;">

                <div class="Auth_50_Register_Social">
                    <span class="Auth_50_Label02">Use your social account:</span>

                    <div class="SignInUpSocial">
                        <div class="SignInUpTW" id="SignUpTW">
                            <div class="TwitterInUpRedirect_Holder" id="TwitterSignupRedirect_Holder">
                                <span class="noselect"><i class="icon-twitter"></i></span>
                            </div>
                        </div>
                        <div class="SignInUpFB" id="SignUpFB">
                            <div class="FacebookInUpRedirect_Holder" id="FacebookSignupRedirect_Holder">
                                <span class="noselect"><i class="icon-facebook"></i></span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="Auth_50_Register_Email">
                    <span class="Auth_50_Label02">Or sign up with email:</span>
                </div>

                <div class="Auth_50_FullnameBlock">
                    <input name="name" type="text" maxlength="40" ID="txtFullName" class="txtEntryBox" placeholder="Full name" autocomplete="name">

                    <div class="Auth_50_InputBlock01">
                        
                        <select id="txtUserTitle" name="honorific-prefix" autocomplete="honorific-prefix" class="txtEntryBox">
                            <option disabled selected value="blank" style="display:none;">Title</option>
                            <option value="Mr">Mr</option>
                            <option value="Mrs">Mrs</option>
                            <option value="Ms">Ms</option>
                            <option value="Miss">Miss</option>
                            <option value="Mx">Mx</option>
                            <option value="Dr">Dr</option>
                        </select>
                        <div id="R_TGN_site_TitleDrop" class="TGN_site_TitleDrop">
                            <span class="TGN_site_TitleDropDefaultCopy">Title</span>
                            <span class="TGN_site_TitleDropSelectedCopy"></span>
                            <div class="TGN_site_TitleDropMenu" data-itemnum="0">
                                <div class="TGN_site_TitleDropMenuItem" data-itemnum="0">Mr</div>
                                <div class="TGN_site_TitleDropMenuItem" data-itemnum="1">Mrs</div>
                                <div class="TGN_site_TitleDropMenuItem" data-itemnum="2">Ms</div>
                                <div class="TGN_site_TitleDropMenuItem" data-itemnum="3">Miss</div>
                                <div class="TGN_site_TitleDropMenuItem" data-itemnum="4">Mx</div>
                                <div class="TGN_site_TitleDropMenuItem" data-itemnum="5">Dr</div>
                            </div>
                        </div>
                    </div>
                    <div class="Auth_50_FirstLastnameBlock">
                        <div id="Auth_50_FirstnameBlock" class="Auth_50_InputBlock01">
                            
                            <input tabindex="30" name="given-name" type="text" maxlength="20" ID="txtFirstName" class="txtEntryBox" placeholder="First name" autocomplete="given-name">
                        </div>

                        <div id="Auth_50_LastnameBlock" class="Auth_50_InputBlock01">
                            
                            <input tabindex="31" name="family-name" type="text" maxlength="30" ID="txtLastName" class="txtEntryBox" placeholder="Last name" autocomplete="family-name">
                        </div>
                    </div>
                </div>

                <div id="nameValidationBoxB" class="validationBoxB">
                    <span class="validNoTxt"> </span>
                </div>


                <div class="Auth_50_InputBlock02">
                    
                    <input tabindex="32" name="email" type="email" maxlength="50" ID="txtEmail" class="txtEntryBox" placeholder="Email address" autocomplete="email">
                </div>

                <div id="emailValidationBoxB" class="validationBoxB">
                    <span class="validNoTxt"> </span>
                    <span class="validNoDuplicateTxt">This email is already registered. Enter a new email, <span id='AuthExtraTRYSIlink' class='Auth_Paragraph_link'>try signing in</span> or <span id='AuthExtraRetPasslink' class='Auth_Paragraph_link'>retrieve your password</span></span>
                </div>

                <div class="Auth_50_InputBlock02">
                    
                    <input tabindex="33" name="new-password" type="password" maxlength="20" ID="txtPassword" class="txtEntryBox" placeholder="Password">
                </div>
                <div id="pass1ValidationBoxB" class="validationBoxB">
                    <span class="validNoTxt"> </span>
                </div>


                <div class="Auth_50_GAPI_AddressArea">
                    <div class="Auth_50_InputBlock02">
                        
                        <div class="Auth_50_GAPI_QuestionMarkRO_Box">
                            <div class="Auth_50_GAPI_QuestionMarkRO_Arrow"></div>
                            <div class="Auth_50_GAPI_QuestionMarkRO_BoxClose"><i class="icon-close-x"></i></div>
                            <span class="Auth_50_GAPI_QuestionMarkRO_BoxT2">Why are we collecting this information? </span>
                            <span class="Auth_50_GAPI_QuestionMarkRO_BoxT1">Gates Notes may send a welcome note or other exclusive Insider mail from time to time. Additionally, some campaigns and content may only be available to users in certain areas. Gates Notes will never share and distribute your information with external parties.</span>
                        </div>
                        <input tabindex="33" name="full-address" type="text" maxlength="200" ID="txtAddress" class="txtEntryBox" placeholder="Start typing your street address" autocomplete="full-address">
                        <input tabindex="33" name="appartment-number" type="text" maxlength="10" ID="txtAddressAN" class="txtEntryBox AN" placeholder="Apt #" autocomplete="appartment-number">
                    </div>
                    <div id="addressValidationBoxB" class="validationBoxB">
                        <span class="validNoTxt"> </span>
                    </div>

                </div>

                <div class="Auth_50_ManualAddressArea">
                    <div class="Auth_50_InputBlock02">
                        
                        <span class="Auth_50_GAPI_AddressAreaExtra">Bill may send you a welcome note or other exclusive Insider mail from time to time. We will never share your information.</span>
                        <input tabindex="33" name="address-line1" type="text" maxlength="30" ID="txtAddressL1" class="txtEntryBox" placeholder="Address line one" autocomplete="address-line1">
                    </div>
                    <div id="addressM1ValidationBoxB" class="validationBoxB">
                        <span class="validNoTxt"> </span>
                    </div>
                    <div class="Auth_50_InputBlock02">
                        
                        <input tabindex="33" name="address-line2" type="text" maxlength="120" ID="txtAddressL2" class="txtEntryBox" placeholder="Address line two" autocomplete="address-line2">
                    </div>
                    <div id="addressM2ValidationBoxB" class="validationBoxB">
                        <span class="validNoTxt"> </span>
                    </div>
                    <div class="Auth_50_InputBlock02">
                        
                        <input tabindex="33" name="address-level2" type="text" maxlength="120" ID="txtCity" class="txtEntryBox" placeholder="City" autocomplete="address-level2">
                    </div>
                    <div id="addressM_City_ValidationBoxB" class="validationBoxB">
                        <span class="validNoTxt"> </span>
                    </div>
                    <div class="Auth_50_InputBlock02">
                        
                        <input tabindex="33" name="address-level1" type="text" maxlength="120" ID="txtState" class="txtEntryBox" placeholder="State" autocomplete="address-level1">
                    </div>
                    <div id="addressM_State_ValidationBoxB" class="validationBoxB">
                        <span class="validNoTxt"> </span>
                    </div>
                    <div class="Auth_50_InputBlock02">
                        
                        <input tabindex="33" name="postal-code" type="text" maxlength="30" ID="txtPostalCode" class="txtEntryBox" placeholder="Zip or postal code" autocomplete="postal-code">
                    </div>
                    <div id="addressM_Zip_ValidationBoxB" class="validationBoxB">
                        <span class="validNoTxt"> </span>
                    </div>
                    <div class="Auth_50_InputBlock02">
                        
                        <input tabindex="33" name="country-name" type="text" maxlength="120" ID="txtCountry" class="txtEntryBox" placeholder="Country" autocomplete="country">
                    </div>
                    <div id="addressM_Country_ValidationBoxB" class="validationBoxB">
                        <span class="validNoTxt"> </span>
                    </div>
                </div>

                <div class="Auth_50_Register_ExtraFields">
                    
                </div>

                <div class="Auth_50_Hidden">
                    <input tabindex="34" name="txtPasswordConfirm" type="password" maxlength="20" ID="txtPasswordConfirm" class="txtEntryBox" placeholder="Retype password">
                    <div id="pass2ValidationBoxB" class="validationBoxB">
                        <span class="validNoTxt"> </span>
                    </div>
                </div>

                <span class="AuthSUErrorTxt" id="SU_Mob_All_Error">    </span>



                <div tabindex="36" class="RegButton RegButtonDisabled" id="RegButton">
                    Sign up
                </div>




                <span class="Auth_Paragraph_Small">We will never share or spam your email address. For more information see our <span id="AuthExtraFAQlink" class="Auth_Paragraph_link">Sign Up FAQ.</span> By clicking "Sign Up" you agree to the Gates Notes <span id="AuthExtraTERMSlink" class="Auth_Paragraph_link">Terms of Use</span> / <span id="AuthExtraPRIVACYlink" class="Auth_Paragraph_link">Privacy Policy</span>.</span>


                <table id="Auth_50_address">
                    <tr>
                        <td class="Auth_50_label">Street address</td>
                        <td class="Auth_50_slimField"><input class="Auth_50_field" id="street_number" disabled="disabled" autocomplete="address-line1"></td>
                        <td class="Auth_50_wideField" colspan="2"><input class="Auth_50_field" id="route" disabled="disabled" autocomplete="address-line2"></td>
                    </tr>
                    <tr>
                        <td class="Auth_50_label">City</td>
                        <td class="Auth_50_wideField" colspan="3"><input class="Auth_50_field" id="locality" disabled="disabled" autocomplete="address-level2"></td>
                    </tr>
                    <tr>
                        <td class="Auth_50_label">postal_town</td>
                        <td class="Auth_50_wideField" colspan="3"><input class="Auth_50_field" id="postal_town" disabled="disabled" autocomplete="address-level2"></td>
                    </tr>
                    <tr>
                        <td class="Auth_50_label">State</td>
                        <td class="Auth_50_slimField"><input class="Auth_50_field" disabled="disabled" autocomplete="address-level1"></td>
                        <td class="Auth_50_label">Zip code</td>
                        <td class="Auth_50_wideField"><input class="Auth_50_field" id="postal_code" disabled="disabled" autocomplete="postal-code"></td>
                    </tr>
                    <tr>
                        <td class="Auth_50_label">administrative_area_level_2</td>
                        <td class="Auth_50_wideField" colspan="3"><input class="Auth_50_field" id="administrative_area_level_2" disabled="disabled" autocomplete="postal-code"></td>
                    </tr>
                    <tr>
                        <td class="Auth_50_label">Country</td>
                        <td class="Auth_50_wideField" colspan="3"><input class="Auth_50_field" id="country" disabled="disabled" autocomplete="country"></td>
                    </tr>
                    <tr>
                        <td id="Auth_50_DataPrint" class="wideField" colspan="4">Data</td>
                    </tr>
                </table>
            </form>
</div>
    </div>
</div>

                </div>
                <div class="FAQ_Holder" id="FAQ_Holder">
                    
                    
    <span class="liSignUpT1">Gates Notes Insider Sign Up FAQ</span>
<div class="FAQ_Questions">
    <div id="AuthenticationHolder_FAQ_FAQcontent">
<h1>Q. How do I create a Gates Notes account?</h1>
<h2>A. There are three ways you can create a Gates Notes account:</h2>

<ul><li><b>Sign up with Facebook.</b> We’ll never post to your Facebook account without your permission.</li>

<li><b>Sign up with Twitter.</b> We’ll never post to your Twitter account without your permission.</li>

<li><b>Sign up with your email.</b> Enter your email address during sign up. We’ll email you a link for verification.</li></ul>

<h1>Q. Will you ever post to my Facebook or Twitter accounts without my permission?</h1>
<h2>A. No, never.</h2>

<h1>Q. How do I sign up to receive email communications from my Gates Notes account?</h1>
<h2>A. In Account Settings, click the toggle switch next to “Send me updates from Bill Gates.”</h2>

<h1>Q. How will you use the Interests I select in Account Settings?</h1>
<h2>A. We will use them to choose the Suggested Reads that appear on your profile page.</h2></div>

</div>

                </div>
                <div class="ForgotPassword_Holder" id="ForgotPassword_Holder" onkeypress="handleForgotPasswordKeyPress(event);">
                    
                    
    <div class="Auth_50_LogInSignUpForm">
    <div class="Auth_TopSpacer"></div>
    <div class="Auth_4_0_ForgotPasswordBack"><i class="icon-left-arrow-01"></i> BACK</div>
    <div class="Auth_Bold_02">Forgot your password?</div>
    <div id="Auth_4_0_ForgotPasswordSubtext" class="Auth_Paragraph">Enter the email you used to sign up and a reset password link will be sent to you.</div>

    <div class="Auth_FieldHolder">
        
        <input name="txtEmail" type="email" maxlength="256" id="FPtxtEmail" class="txtEntryBox" placeholder="Email address" autocomplete="email">
        <div id="FPemailValidationBoxB" class="validationBoxB">
            <span class="validNoTxt"> </span>
            <span class="validNoDuplicateTxt">This email is already registered. Enter a new email, <span id='AuthExtraTRYSIlink' class='Auth_Paragraph_link'>try signing in</span> or <span id='AuthExtraRetPasslink' class='Auth_Paragraph_link'>retrieve your password</span></span>
        </div>
    </div>

    <span class="AuthErrorTxt" id="FP_Mob_Password_Error"></span>
    <div class="RegButton RegButtonDisabled" id="ResetPasswordButton">Reset Password</div>
    <span id="AuthForgotPWtxt" class="Auth_Paragraph" style="display:none;">You should recieve an email shortly with instructions on how to reset your password.</span>
</div>

                </div>
                <div class="ResetPassword_Holder" id="ResetPassword_Holder" onkeypress="handleResetPasswordKeyPress(event);">
                    
                    
    <form id="Auth_50_Form_ResetPassword" autocomplete="off">
    <div class="Auth_Bold_02">Reset your password.</div>
    <input name="txtPassword" type="password" maxlength="256" ID="RPtxtPassword" class="txtEntryBox" placeholder="Enter new password" autocomplete="new-password">
    <div id="RPpass1ValidationBoxB" class="validationBoxB">
        <span class="validNoTxt"> </span>
    </div>
    <input name="txtPasswordConfirm" type="password" maxlength="256" ID="RPtxtPasswordConfirm" class="txtEntryBox" placeholder="Retype password" autocomplete="new-password">
    <div id="RPpass2ValidationBoxB" class="validationBoxB">
        <span class="validNoTxt">
            <span class="AuthErrorTxt" id="RP_Mob_Password_Error"></span>
        </span>
    </div>
    <div class="RegButton" id="SetNewPasswordButton">Set New Password</div>
    <span class="Auth_Paragraph" id="RPAuth_Paragraph">Your password has been reset. Please continue to the log in page.</span>
    <div class="RegButton" id="SetNewPasswordOKButton">Log in</div>
</form>

                </div>
                <div class="SocialGetEmails_Holder" id="SocialGetEmails_Holder">
                    
                    
    <div class="Auth_Bold_02">Get emails from Bill Gates</div>

<div class="Auth_SGE_checkboxes">
    <div class="Authcheckbox" id="AuthcheckboxSE">
        <div class="Auth_Subs_Holder">
            <div class="Auth_Subs_Text">
                <span class="AuthcheckboxTxt">Send me updates from Bill Gates</span>
                <div class="AuthEmailSubText" id="AuthEmailSubText_SE">You must provide an email</div>
            </div>
            <div class="Auth_Subs_OnOff">
                <div class="Auth_Subs_On">On</div>
                <div class="Auth_Subs_Off">Off</div>
            </div>
            <div class="Auth_checkbox">
                <input type="checkbox" id="AuthcheckboxSEcb" />
            </div>
        </div>
    </div>
    <div class="Authcheckbox" id="AuthcheckboxSE2">
        <div class="Auth_Subs_Holder">
            <div class="Auth_Subs_Text">
                <span class="AuthcheckboxTxt">Email me comment notifications</span>
            </div>
            <div class="Auth_Subs_OnOff">
                <div class="Auth_Subs_On">On</div>
                <div class="Auth_Subs_Off">Off</div>
            </div>
            <div class="Auth_checkbox">
                <input type="checkbox" id="AuthcheckboxSE2cb" />
            </div>
        </div>
    </div>
    <div class="Authcheckbox" id="AuthcheckboxSE3">
        <div class="Auth_Subs_Holder">
            <div class="Auth_Subs_Text">
                <span class="AuthcheckboxTxt">On-screen comment notifications</span>
            </div>
            <div class="Auth_Subs_OnOff">
                <div class="Auth_Subs_On">On</div>
                <div class="Auth_Subs_Off">Off</div>
            </div>
            <div class="Auth_checkbox">
                <input type="checkbox" id="AuthcheckboxSE3cb" />
            </div>
        </div>
    </div>
</div>

<div class="SE_Email_Holder">
    <input name="txtEmail" type="email" maxlength="256" id="OptionalSocialEmail" class="txtEntryBox" placeholder="Email address" autocomplete="email">
    <div id="SEemailValidationBoxB" class="validationBoxB">
        <span class="validNoTxt"> </span>
        <span class="validNoDuplicateTxt">This email is already registered</span>
    </div>
</div>

<div class="RegButton" id="ContinueButton">
    Finish
</div>

<span class="Auth_Paragraph">We will never share or spam your email address. For more information see our <span id="AuthExtraFAQlink" class="Auth_Paragraph_link">Sign up FAQ.</span></span>
<span class="Auth_Paragraph">By clicking "Continue" you agree to the Gates Notes <span id="AuthExtraTERMSlink" class="Auth_Paragraph_link">Terms of Use</span> / <span id="AuthExtraPRIVACYlink" class="Auth_Paragraph_link">Privacy Policy</span>.</span>

                </div>
                <div class="Welcome_Holder" id="Welcome_Holder">
                    <div class="Auth_50_CTA_Left_Top">
                        
                        
    <!--loaded inline HTML block from sitecore-->
<style>
.Auth_50_CTA_Left_Top {
    background-color: #4D7FF5;
}
.Auth_50_WECTA_Left_inner {
    background-image: url(/-/media/Images/Body-Parts/CTAs/Auth_CTA_Back_D_04252019);
    background-position: 100% 100%;
    background-size: auto;
    background-repeat: no-repeat;
    background-color: #4D7FF5;
    width: 100%;
    height: 671px;
    position: relative;
}
.Auth_50_WECTA_HeadlineM {
    display: none;
}
.Auth_50_WECTA_Spacer {
    height: 24px;
    display: table-cell;
}
.Auth_50_WECTA_HeadlineDT {
    margin-left: 24px;
    margin-right: 24px;
    color: #FFFFFF;
    font-family: source-serif-pro, "Lyon Display";
    font-size: 52px;
    font-weight: bold;
    line-height: 55px;
}
.Auth_50_WECTA_Para {
    color: white;
    font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
    font-weight: 200;
    margin-left: 24px;
    margin-right: 54px;
    margin-top: 14px;
font-size: 16px;
    line-height: 21px;
}
.Auth_50_WECTA_CTA {
    color: white;
    font-family: 'HelveticaNeueW01-45Ligh','neue-haas-unica', sans-serif;
    font-weight: 200;
    margin-left: 24px;
    margin-right: 24px;
    margin-top: 34px;
font-size: 16px;
    line-height: 21px;
}
.Auth_50_WECTA_Button {
    display: block;
    margin-top: 10px;
    font-family: 'Roboto Condensed', 'Asap Condensed', 'neue-haas-unica', sans-serif;
    font-size: 14px;
    font-weight: 100;
    text-transform: uppercase;
    cursor: pointer;
    height: 25px;
    width: 187px;
    border: 1px solid white;
    border-radius: 0px;
    text-align: center;
    line-height: 26px;
    color: white !important;
    padding-left: 10px;
    padding-right: 10px;
}
	

@media all and (max-width: 980px)
{
.Auth_50_WECTA_Spacer {
}
.Auth_50_WECTA_TopLeft {
    display: inline-block;
    width: 75%;
}
.Auth_50_WECTA_Left_inner {
    background-image: url(/-/media/Images/Body-Parts/CTAs/Auth_CTA_Back_T_04252019);
    background-color: #4D7FF5;
    max-width: 635px;
    margin-left: 0px;
    margin-right: auto;
    height: unset;
    position: relative;
}
.Auth_50_WECTA_CTA {
    margin-bottom: 20px;
}
.Auth_50_WECTA_HeadlineDT {
    font-size: 32px;
    line-height: 34px;
}
.Auth_50_WECTA_Para {
    margin-top: 8px;
    font-size: 15px;
    line-height: 18px;
}
.Auth_50_WECTA_CTA {
    margin-top: 16px;
    font-size: 15px;
    line-height: 18px;
}
}
	
@media all and (max-width: 680px)
{
.Auth_50_WECTA_Left_inner {
    background-image: url(/-/media/Images/Body-Parts/CTAs/Auth_CTA_Back_M_04252019);
    background-color: #4D7FF5;
    max-width: 320px;
    margin-left: 0px;
    margin-right: auto;
    width: 100%;
    height: unset;
    position: relative;
}
.Auth_50_WECTA_HeadlineM {
}
.Auth_50_WECTA_HeadlineDT {
    font-size: 26px;
    line-height: 26px;
}
.Auth_50_WECTA_Para {
    font-size: 12px;
    line-height: 14px;
    max-width: 170px;
}
.Auth_50_WECTA_CTA {
    font-size: 12px;
    line-height: 14px;
    max-width: 150px;
}
.Auth_50_WECTA_TopLeft {
    display: inline-block;
    width: 100%;
}
.Auth_50_WECTA_Button {
    display: block;
    margin-top: 10px;
    font-family: 'Roboto Condensed', 'Asap Condensed', 'neue-haas-unica', sans-serif;
    font-size: 11px;
    font-weight: 100;
    text-transform: uppercase;
    cursor: pointer;
    height: 23px;
    width: 137px;
    border: 1px solid white;
    border-radius: 0px;
    text-align: center;
    line-height: 24px;
    color: white !important;
    padding-left: 5px;
    padding-right: 5px;
}
}

</style>



<div class="Auth_50_WECTA_Left_inner">
	<div class="Auth_50_WECTA_Spacer"></div>
	<div class="Auth_50_WECTA_HeadlineM">You're in!</div>
	<div class="Auth_50_WECTA_TopLeft">
		<div class="Auth_50_WECTA_HeadlineDT">You're in!</div>
		<div class="Auth_50_WECTA_Para">Please check your email and click the link provided to verify your account.</div>
		<div class="Auth_50_WECTA_CTA">
			<span class="Auth_50_WECTA_Q">Didn't get an email from us? </span>
			<span id="Auth_50_WECTA_Left_linkLI" class="Auth_50_WECTA_Button">Resend verification email</span>
		</div>
	</div>
</div>

<script type="text/javascript">
	
    $(window).resize(function () {
    });
    $(document).ready(function () {
        var ww = $(window).width();
        var wh = $(window).height();
		$("#Auth_50_WECTA_Left_linkLI").click(function () {
                hideAuthHolders();
resendVerifyLink();
        });
    });
</script>
<!--END OF loaded inline HTML block from sitecore-->	


                    </div>
                    
                    
    
<div class="Auth_50_CTA_MiddleSpacer"></div>
<div class="Auth_50_Content_Right_Bottom">
    <div class="Auth_50_Content_Right_BottomInner">
        <div class="Auth_50_LogInSignUpForm">
            <div class="Auth_50_Welcome_ImageUpload">
                <div class="Auth_50_WelcomeTitle">Upload a profile picture</div>
                <div class="TGN_SmallPassiveButton" id="Auth_WelcomeProfileImage_Edit">Choose image to upload</div>
                <input id="UploadProfileImageFile" type="file" name="UploadProfileImageFile" onchange="ProfilefileSelect()" style="display:none;">

                <div class="Auth_ProfileImage" id="Auth_ProfileImage">
                </div>


                <div id="WEAuth_ProfileImage_Progress" class="Auth_ProfileImage_Progress">
                    <div class="Auth_Profile_ProgressPreview">Uploading...</div>
                </div>
                <div class="Auth_IUP_Error">
                    <div class="Auth_IUP_Error_Close"><i class="icon-close-x"></i></div>
                    <div class="Auth_IUP_Error_Header">Uh Oh!</div>
                    <div class="Auth_IUP_Error_body">The image you are trying to upload is either too big or is an unacceptable format. Please upload a .jpg or .png image that is under 25MB.</div>
                    <div class="RegButton" id="WEUploadErrorOkButton">
                        Ok
                    </div>
                </div>
            </div>




            <div class="Auth_50_Hidden">

                <div class="Auth_Title_Block">
                    
                    <select id="WE_txtUserTitle" name="honorific-prefix" autocomplete="honorific-prefix">
                        <option selected value="blank" style="display: none;">Title</option>
                        <option value="Mr">Mr</option>
                        <option value="Mrs">Mrs</option>
                        <option value="Ms">Ms</option>
                        <option value="Miss">Miss</option>
                        <option value="Mx">Mx</option>
                        <option value="Dr">Dr</option>
                    </select>
                    <div id="WE_TGN_site_TitleDrop" class="TGN_site_TitleDrop">
                        <span class="TGN_site_TitleDropDefaultCopy">Title</span>
                        <span class="TGN_site_TitleDropSelectedCopy"></span>
                        <div class="TGN_site_TitleDropMenu" data-itemnum="0">
                            <div class="TGN_site_TitleDropMenuItem" data-itemnum="0">Mr</div>
                            <div class="TGN_site_TitleDropMenuItem" data-itemnum="1">Mrs</div>
                            <div class="TGN_site_TitleDropMenuItem" data-itemnum="2">Ms</div>
                            <div class="TGN_site_TitleDropMenuItem" data-itemnum="3">Miss</div>
                            <div class="TGN_site_TitleDropMenuItem" data-itemnum="4">Mx</div>
                            <div class="TGN_site_TitleDropMenuItem" data-itemnum="5">Dr</div>
                        </div>
                    </div>
                </div>
                <div class="Auth_FieldHolder">
                    <div class="Auth_FirstName_Block">
                        
                        <input name="txtFullName" type="text" maxlength="256" id="WEtxtFullName" class="txtEntryBox" placeholder="Full name" disabled autocomplete="name">
                        <input name="txtFirstName" type="text" maxlength="20" id="WEtxtFirstName" class="txtEntryBox" placeholder="First name" disabled autocomplete="given-name">
                    </div>
                    <div class="Auth_LastName_Block">
                        
                        <input name="txtLastName" type="text" maxlength="30" id="WEtxtLastName" class="txtEntryBox" placeholder="Fast name" disabled autocomplete="family-name">
                    </div>
                    <div id="WEnameValidationBoxB" class="validationBoxB">
                        <span class="validNoTxt"></span>
                    </div>
                    <div class="Auth_FieldEditControls">
                        <div class="AuthCancelButtonS" id="WEAuthCancelName">
                            Cancel
                        </div>
                        <div class="AuthSaveButtonS" id="WEAuthSaveName">
                            Save
                        </div>
                    </div>
                </div>
                <span class="AuthErrorTxt" id="WE_Mob_Name_Error"></span>
                <div class="Auth_FieldHolder">
                    
                    <input name="txtEmail" type="email" maxlength="256" id="WEtxtEmail" class="txtEntryBox" placeholder="Email address" disabled autocomplete="email">
                    <div id="WEemailValidationBoxB" class="validationBoxB">
                        <span class="validNoTxt"> </span>
                        <span class="validNoDuplicateTxt">This email is already registered</span>
                    </div>
                    <div class="Auth_FieldEditControls">
                        <div class="AuthCancelButtonS" id="WEAuthCancelEmail">
                            Cancel
                        </div>
                        <div class="AuthSaveButtonS" id="WEAuthSaveEmail">
                            Save
                        </div>
                    </div>
                    <div class="validNoVerify" id="validNoVerifyWE">Please verify email address. Click verification link sent to this email address or <span class="resendVerify">resend verification email</span>.</div>
                </div>
                <span class="AuthErrorTxt" id="WE_Mob_Email_Error"></span>

            </div>


            <div class="Auth_50_Welcome_Toggles">
                <div class="Auth_50_WelcomeTitle">Email and notification settings</div>

                <div class="Authcheckbox" id="AuthcheckboxWE">
                    <div class="Auth_Subs_Holder">
                        <div class="Auth_Subs_Text">
                            <span class="AuthcheckboxTxt">Send me updates from Bill Gates</span>
                            <div class="AuthEmailSubText" id="AuthEmailSubText_WE">You must provide an email</div>
                        </div>
                        <div class="Auth_Subs_OnOff">
                            <div class="Auth_Subs_On">On</div>
                            <div class="Auth_Subs_Off">Off</div>
                        </div>
                        <div class="Auth_checkbox">
                            <input type="checkbox" id="AuthcheckboxWEcb" />
                        </div>
                    </div>
                </div>
                <div class="Authcheckbox" id="AuthcheckboxWE2">
                    <div class="Auth_Subs_Holder">
                        <div class="Auth_Subs_Text">
                            <span class="AuthcheckboxTxt">Email me comment notifications</span>
                        </div>
                        <div class="Auth_Subs_OnOff">
                            <div class="Auth_Subs_On">On</div>
                            <div class="Auth_Subs_Off">Off</div>
                        </div>
                        <div class="Auth_checkbox">
                            <input type="checkbox" id="AuthcheckboxWE2cb" />
                        </div>
                    </div>
                </div>
                <div class="Authcheckbox" id="AuthcheckboxWE3">
                    <div class="Auth_Subs_Holder">
                        <div class="Auth_Subs_Text">
                            <span class="AuthcheckboxTxt">On-screen comment notifications</span>
                        </div>
                        <div class="Auth_Subs_OnOff">
                            <div class="Auth_Subs_On">On</div>
                            <div class="Auth_Subs_Off">Off</div>
                        </div>
                        <div class="Auth_checkbox">
                            <input type="checkbox" id="AuthcheckboxWE3cb" />
                        </div>
                    </div>
                </div>
            </div>

            <div class="Auth_50_Welcome_ExtraFields">

            </div>

            <div class="Auth_50_Welcome_Interests">
                <div class="Auth_50_WelcomeTitle">Select your interests</div>

                <div class="Auth_Int_Holder">
                    <div class="Auth_Int_Left">
                        <div class="ul">
                            <div class="li" onclick="updateInterests(this);">
                                <div class="Auth_checkbox">
                                    <input type="checkbox" id="Welcome_AI_SavingLives" name="Welcome_AI_SavingLives" class="AI_SavingLives" value="1" />
                                </div>
                                <span class="ProSetOn"><i class="icon-check-mark"></i></span>
                                <span class="ProSetOff"><i class="icon-plus"></i></span>
                                <span class="ProSetTopics">Saving Lives</span>
                            </div>
                            <div class="li" onclick="updateInterests(this);">
                                <div class="Auth_checkbox">
                                    <input type="checkbox" id="Welcome_AI_EnergyInnovation" name="Welcome_AI_EnergyInnovation" class="AI_EnergyInnovation" value="1" />
                                </div>
                                <span class="ProSetOn"><i class="icon-check-mark"></i></span>
                                <span class="ProSetOff"><i class="icon-plus"></i></span>
                                <span class="ProSetTopics">Energy Innovation</span>
                            </div>
                            <div class="li" onclick="updateInterests(this);">
                                <div class="Auth_checkbox">
                                    <input type="checkbox" id="Welcome_AI_ImprovingEducation" name="Welcome_AI_ImprovingEducation" class="AI_ImprovingEducation" value="1" />
                                </div>
                                <span class="ProSetOn"><i class="icon-check-mark"></i></span>
                                <span class="ProSetOff"><i class="icon-plus"></i></span>
                                <span class="ProSetTopics">Improving Education</span>
                            </div>
                            <div class="li" onclick="updateInterests(this);">
                                <div class="Auth_checkbox">
                                    <input type="checkbox" id="Welcome_AI_Alzheimers" name="Welcome_AI_Alzheimers" class="AI_Alzheimers" value="1" />
                                </div>
                                <span class="ProSetOn"><i class="icon-check-mark"></i></span>
                                <span class="ProSetOff"><i class="icon-plus"></i></span>
                                <span class="ProSetTopics">Alzheimer's</span>
                            </div>
                        </div>
                    </div>
                    <div class="Auth_Int_Right">
                        <div class="ul">
                            <div class="li" onclick="updateInterests(this);">
                                <div class="Auth_checkbox">
                                    <input type="checkbox" id="Welcome_AI_Philanthropy" name="Welcome_AI_Philanthropy" class="AI_Philanthropy" value="1" />
                                </div>
                                <span class="ProSetOn"><i class="icon-check-mark"></i></span>
                                <span class="ProSetOff"><i class="icon-plus"></i></span>
                                <span class="ProSetTopics">Philanthropy</span>
                            </div>
                            <div class="li" onclick="updateInterests(this);">
                                <div class="Auth_checkbox">
                                    <input type="checkbox" id="Welcome_AI_BookReviews" name="Welcome_AI_BookReviews" class="AI_BookReviews" value="1" />
                                </div>
                                <span class="ProSetOn"><i class="icon-check-mark"></i></span>
                                <span class="ProSetOff"><i class="icon-plus"></i></span>
                                <span class="ProSetTopics">Book Reviews</span>
                            </div>
                            <div class="li" onclick="updateInterests(this);">
                                <div class="Auth_checkbox">
                                    <input type="checkbox" id="Welcome_AI_AboutBill" name="Welcome_AI_AboutBill" class="AI_AboutBill" value="1" />
                                </div>
                                <span class="ProSetOn"><i class="icon-check-mark"></i></span>
                                <span class="ProSetOff"><i class="icon-plus"></i></span>
                                <span class="ProSetTopics">About Bill Gates</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="RegButton" id="WelcomeContinueButton">
                Finish
            </div>
        </div>
        </div>
</div>

                </div>
                <div class="Deregister_Holder" id="Deregister_Holder">
                    
                    
    <div class="DeRegStep1">
    <div class="Auth_Bold_01">Confirm Account Deactivation</div>
    <div class="Auth_Bold_02">Are you sure you want to deactivate your account?</div>
    <span id="Auth_Deactivate_DynamicCopy" class="Auth_Paragraph">Deactivating your account will unsubscribe you from Gates Notes emails, and will remove your profile and account information from public view on the Gates Notes. Please allow for 24 hours for the deactivation to fully process. You can sign back in at any time to reactivate your account and restore its content.</span>
    <div class="Auth_DeactivateControls">
        <div class="TGN_PassiveButton" id="DeactivateButton">
            Deactivate My Acccount
        </div>
        <div class="TGN_PassiveButton" id="DeactivateCancelButton">
            Go Back
        </div>
    </div>
</div>
<div class="DeRegStep2">
    <div class="Auth_Bold_01">Your Gates Notes account has been deactivated.</div>
    <span class="Auth_Bold_02">Come back anytime.</span>
</div>


                </div>
                <div class="UnsubscribeSignIn_Holder" id="UnsubscribeSignIn_Holder">
                    
                    
        <div class="UnsubscribeSignIn_center">
        <div class="Auth_Header">Welcome back</div>
        <div class="Auth_Deactivate_Subhead">In order to unsubscribe you will need to sign-in to your Gates Notes Insider account</div>
        <span class="AuthExtraTXT_Profile">Once signed in just go to your Account Settings page and set your subscription options as desired.</span>
        <div class="Auth_DeactivateControls">
            <div class="AuthDeactivateButtonM" id="UnsubscribeSignInButton">
                Sign In
            </div>
        </div>
    </div>

                </div>
                <div class="RequestDelete_Holder" id="RequestDelete_Holder">
                    
                    
    <div class="Auth_Bold_02">Request account deletion</div>
<div class="RequestDeletePartA">
    <div class="Auth_Paragraph">We’re sorry to see you go. Your request may take a few days to process; we want to double check things before hitting the big red button. Requesting an account deletion will permanently remove all of your profile content. If you’ve changed your mind about deleting your account, you can always hit cancel and deactivate instead.</div>

    <div class="Auth_FieldHolder" id="Auth_FieldHolderRD">
        <input type="text" maxlength="250" class="RequestDeleteTA" id="RequestDeleteTA" placeholder="Tell us why you want to delete your account (optional)">
    </div>

    <div class="Auth_DeactivateControls">
        <div class="TGN_PassiveButton" id="AuthDeleteButton">
            Submit
        </div>
        <div class="TGN_PassiveButton" id="DeleteCancelButton">
            Cancel
        </div>
    </div>
</div>
<div class="RequestDeletePartB">
    <div class="Auth_Paragraph">Thank You! Your request has been sent</div>
</div>


                </div>
            </div>
        </div>
    </div>
    <div class="PrevNextHolder" style="display:none;">
        
    <a href='/Development/Peking-University-Speech' class='articlePrev'></a><a href='/Development/Hidden-in-Plain-Sight' class='articleNext'></a>

    </div>
</body>

    


<!-- Google Maps API Embed Via Sitecore Config -->

<style>
.SiteWide_CTAs_Survey_HTML_outer {
    border-top: 1px solid #ddd;
}
</style>

<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD27CtS7l4P9YKEjA_VTPDQ7nsIGnxPgHk&libraries=places&callback=initAutocomplete" async defer></script>

<script>
var Auth50_JSONAddressStore = {};
var address_components = [];
//address_components.push({});
Auth50_JSONAddressStore['address_components'] = address_components;
</script>

<!-- END Google Maps API Embed Via Sitecore Config -->

</html>
