# scrapy.service

[Unit] 
Description=Scrapy for ascan

[Service] 
Type=simple 
ExecStart=scrapy crawl general -L INFO --logfile /var/log/scrapy.log
WorkingDirectory=/root/ascan_scrapy/current/python_modules/ascan_scrapy/
Environment="DJANGO_SECRET_KEY={{ ascan_django_secret_key }}"
Environment="POSTGRES_DB={{ ascan_postgres_db }}"
Environment="POSTGRES_USER={{ ascan_postgres_user }}"
Environment="POSTGRES_PASSWORD={{ ascan_postgres_password }}"
Environment="REDIS_PASS={{ ascan_redis_password }}"
Environment="SOLR_HOST=solr"
Environment="SOLR_CORE=ascan"
Environment="SOLR_PORT={{ ascan_solr_port }}"
Environment="SPEECHTRACTOR_HOST=speechtractor"
Environment="SPEECHTRACTOR_PORT=3757"
Environment="ASCAN_HOST_NAMES={{ ascan_host_names }}"
Environment="DEBUG=0"
Environment="PYTHONPATH=/root/ascan_scrapy/current/python_modules/ascan/:$PYTHONPATH"
